var PDFJS,UDOC={};function FromPS(){}function FromPDF(){}function FromWMF(){}function FromEMF(){}function ToPDF(){this._res={"/Font":{},"/XObject":{},"/ExtGState":{},"/Pattern":{}},this._xr=[null,{"/Type":"/Catalog","/Pages":{typ:"ref",ind:2}},{"/Type":"/Pages","/Kids":[],"/Count":0},this._res],this._bnds=[],this._cont="",this._gst=ToPDF.defState()}function ToEMF(){this._file={file:new ToEMF.MFile,off:0},this._lstw=0,this._curx=0,this._curh=0,this._recs=0,this._lenp=0,this._objs={},this._tabl=1,this._stkf=0,this._tclr=0,this._curt={p:-1,b:-1,t:-1},this._inited=!1}UDOC.G={concat:function(t,e){for(var r=0;r<e.cmds.length;r++)t.cmds.push(e.cmds[r]);for(r=0;r<e.crds.length;r++)t.crds.push(e.crds[r])},getBB:function(t){for(var e=1e99,r=1e99,n=-e,i=-r,a=0;a<t.length;a+=2){var s=t[a],o=t[a+1];s<e&&(e=s),s>n&&(n=s),o<r&&(r=o),o>i&&(i=o)}return[e,r,n,i]},rectToPath:function(t){return{cmds:["M","L","L","L","Z"],crds:[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]]}},insideBox:function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&t[2]<=e[2]&&t[3]<=e[3]},isBox:function(t,e){var r=function(t,e){for(var r=0;r<8;r+=2){for(var n=!0,i=0;i<8;i++)if(Math.abs(e[i]-t[i+r&7])>=2){n=!1;break}if(n)return!0}return!1};if(t.cmds.length>10)return!1;var n=t.cmds.join(""),i=t.crds,a=!1;if("MLLLZ"==n&&8==i.length||"MLLLLZ"==n&&10==i.length){10==i.length&&(i=i.slice(0,8));var s=e[0],o=e[1],u=e[2],h=e[3];a||(a=r(i,[s,o,u,o,u,h,s,h])),a||(a=r(i,[s,h,u,h,u,o,s,o]))}return a},boxArea:function(t){return(t[2]-t[0])*(t[3]-t[1])},newPath:function(t){t.pth={cmds:[],crds:[]}},moveTo:function(t,e,r){var n=UDOC.M.multPoint(t.ctm,[e,r]),i=t.pth,a=i.cmds.length;0!=a&&"M"==i.cmds[a-1]&&(i.cmds.pop(),i.crds.pop(),i.crds.pop()),t.pth.cmds.push("M"),t.pth.crds.push(n[0],n[1]),t.cpos=n},lineTo:function(t,e,r){var n=UDOC.M.multPoint(t.ctm,[e,r]);t.cpos[0]==n[0]&&t.cpos[1]==n[1]||(t.pth.cmds.push("L"),t.pth.crds.push(n[0],n[1]),t.cpos=n)},curveTo:function(t,e,r,n,i,a,s){var o;e=(o=UDOC.M.multPoint(t.ctm,[e,r]))[0],r=o[1],n=(o=UDOC.M.multPoint(t.ctm,[n,i]))[0],i=o[1],a=(o=UDOC.M.multPoint(t.ctm,[a,s]))[0],s=o[1],t.cpos=o,t.pth.cmds.push("C"),t.pth.crds.push(e,r,n,i,a,s)},closePath:function(t){t.pth.cmds.push("Z")},arc:function(t,e,r,n,i,a,s){if(s)for(;a>i;)a-=2*Math.PI;else for(;a<i;)a+=2*Math.PI;for(var o=(a-i)/4,u=Math.cos(o/2),h=-Math.sin(o/2),l=(4-u)/3,f=0==h?h:(1-u)*(3-u)/(3*h),c=[l,f],d=[l,-f],p=[u,-h],v={cmds:[0==t.pth.cmds.length?"M":"L"],crds:[u,h]},_=[1,0,0,1,0,0],g=0;g<4;g++)c=UDOC.M.multPoint(_,c),d=UDOC.M.multPoint(_,d),p=UDOC.M.multPoint(_,p),v.crds.push(c[0],c[1],d[0],d[1],p[0],p[1]),v.cmds.push("C"),0==g&&UDOC.M.rotate(_,-o);var m=[n,0,0,n,e,r];UDOC.M.rotate(_,o/2-i),UDOC.M.concat(_,m),UDOC.M.multArray(_,v.crds),UDOC.M.multArray(t.ctm,v.crds),UDOC.G.concat(t.pth,v);r=v.crds.pop();e=v.crds.pop(),t.cpos=[e,r]},drawRect:function(t,e,r,n,i){UDOC.G.moveTo(t,e,r),UDOC.G.lineTo(t,e+n,r),UDOC.G.lineTo(t,e+n,r+i),UDOC.G.lineTo(t,e,r+i),UDOC.G.closePath(t)},toPoly:function(t){if("M"!=t.cmds[0]||"Z"!=t.cmds[t.cmds.length-1])return null;for(var e=1;e<t.cmds.length-1;e++)if("L"!=t.cmds[e])return null;var r=[],n=t.crds.length;t.crds[0]==t.crds[n-2]&&t.crds[1]==t.crds[n-1]&&(n-=2);for(e=0;e<n;e+=2)r.push([t.crds[e],t.crds[e+1]]);return UDOC.G.polyArea(t.crds)<0&&r.reverse(),r},fromPoly:function(t){for(var e={cmds:[],crds:[]},r=0;r<t.length;r++)e.crds.push(t[r][0],t[r][1]),e.cmds.push(0==r?"M":"L");return e.cmds.push("Z"),e},polyArea:function(t){if(t.length<6)return 0;for(var e=t.length-2,r=(t[0]-t[e])*(t[e+1]+t[1]),n=0;n<e;n+=2)r+=(t[n+2]-t[n])*(t[n+1]+t[n+3]);return.5*-r},polyClip:function(t,e){var r,n,a=function(t){return(u[0]-r[0])*(t[1]-r[1])>(u[1]-r[1])*(t[0]-r[0])},s=function(){var t=[r[0]-u[0],r[1]-u[1]],e=[n[0]-l[0],n[1]-l[1]],i=r[0]*u[1]-r[1]*u[0],a=n[0]*l[1]-n[1]*l[0],s=1/(t[0]*e[1]-t[1]*e[0]);return[(i*e[0]-a*t[0])*s,(i*e[1]-a*t[1])*s]},o=t;for(j in r=e[e.length-1],e){var u=e[j],h=o;for(i in o=[],n=h[h.length-1],h){var l;a(l=h[i])?(a(n)||o.push(s()),o.push(l)):a(n)&&o.push(s()),n=l}r=u}return o}},UDOC.M={getScale:function(t){return Math.sqrt(Math.abs(t[0]*t[3]-t[1]*t[2]))},translate:function(t,e,r){UDOC.M.concat(t,[1,0,0,1,e,r])},rotate:function(t,e){UDOC.M.concat(t,[Math.cos(e),-Math.sin(e),Math.sin(e),Math.cos(e),0,0])},scale:function(t,e,r){UDOC.M.concat(t,[e,0,0,r,0,0])},concat:function(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],s=t[4],o=t[5];t[0]=r*e[0]+n*e[2],t[1]=r*e[1]+n*e[3],t[2]=i*e[0]+a*e[2],t[3]=i*e[1]+a*e[3],t[4]=s*e[0]+o*e[2]+e[4],t[5]=s*e[1]+o*e[3]+e[5]},invert:function(t){var e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],s=t[5],o=e*i-r*n;t[0]=i/o,t[1]=-r/o,t[2]=-n/o,t[3]=e/o,t[4]=(n*s-i*a)/o,t[5]=(r*a-e*s)/o},multPoint:function(t,e){var r=e[0],n=e[1];return[r*t[0]+n*t[2]+t[4],r*t[1]+n*t[3]+t[5]]},multArray:function(t,e){for(var r=0;r<e.length;r+=2){var n=e[r],i=e[r+1];e[r]=n*t[0]+i*t[2]+t[4],e[r+1]=n*t[1]+i*t[3]+t[5]}}},UDOC.C={srgbGamma:function(t){return t<.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055},cmykToRgb:function(t){var e=t[0],r=t[1],n=t[2],i=t[3],a=255+e*(-4.387332384609988*e+54.48615194189176*r+18.82290502165302*n+212.25662451639585*i-285.2331026137004)+r*(1.7149763477362134*r-5.6096736904047315*n+-17.873870861415444*i-5.497006427196366)+n*(-2.5217340131683033*n-21.248923337353073*i+17.5119270841813)+i*(-21.86122147463605*i-189.48180835922747),s=255+e*(8.841041422036149*e+60.118027045597366*r+6.871425592049007*n+31.159100130055922*i-79.2970844816548)+r*(-15.310361306967817*r+17.575251261109482*n+131.35250912493976*i-190.9453302588951)+n*(4.444339102852739*n+9.8632861493405*i-24.86741582555878)+i*(-20.737325471181034*i-187.80453709719578),o=255+e*(.8842522430003296*e+8.078677503112928*r+30.89978309703729*n-.23883238689178934*i-14.183576799673286)+r*(10.49593273432072*r+63.02378494754052*n+50.606957656360734*i-112.23884253719248)+n*(.03296041114873217*n+115.60384449646641*i-193.58209356861505)+i*(-22.33816807309886*i-180.12613974708367);return[Math.max(0,Math.min(1,a/255)),Math.max(0,Math.min(1,s/255)),Math.max(0,Math.min(1,o/255))]},labToRgb:function(t){for(var e=903.3,r=.008856,n=t[0],i=t[1],a=(n+16)/116,s=a*a*a,o=a-t[2]/200,u=o*o*o,h=i/500+a,l=h*h*h,f=[96.72*(l>r?l:(116*h-16)/e)/100,100*(s>r?s:(116*a-16)/e)/100,81.427*(u>r?u:(116*o-16)/e)/100],c=[3.1338561,-1.6168667,-.4906146,-.9787684,1.9161415,.033454,.0719453,-.2289914,1.4052427],d=[c[0]*f[0]+c[1]*f[1]+c[2]*f[2],c[3]*f[0]+c[4]*f[1]+c[5]*f[2],c[6]*f[0]+c[7]*f[1]+c[8]*f[2]],p=0;p<3;p++)d[p]=Math.max(0,Math.min(1,UDOC.C.srgbGamma(d[p])));return d}},UDOC.getState=function(t){return{font:UDOC.getFont(),dd:{flat:1},ca:1,colr:[0,0,0],space:"/DeviceGray",CA:1,COLR:[0,0,0],sspace:"/DeviceGray",bmode:"/Normal",SA:!1,OPM:0,AIS:!1,OP:!1,op:!1,SMask:"/None",lwidth:1,lcap:0,ljoin:0,mlimit:10,SM:.1,doff:0,dash:[],ctm:[1,0,0,1,0,0],cpos:[0,0],pth:{cmds:[],crds:[]},cpth:t?UDOC.G.rectToPath(t):null,cpstack:[]}},UDOC.getFont=function(){return{Tc:0,Tw:0,Th:100,Tl:0,Tf:"Helvetica-Bold",Tfs:1,Tmode:0,Trise:0,Tk:0,Tal:0,Tun:0,Tm:[1,0,0,1,0,0],Tlm:[1,0,0,1,0,0],Trm:[1,0,0,1,0,0]}},FromPS.Parse=function(t,e){t=new Uint8Array(t);for(var r=0;37!=t[r]||33!=t[r+1];)r++;for(var n=FromPS.B.readASCII(t,r,t.length-r).split(/[\n\r]+/),i=null,a=null,s=0;s<n.length;s++){var o=n[s].trim();if("%"==o.charAt(0)){for(;"%"==o.charAt(0);)o=o.slice(1);var u=o.split(":");"BoundingBox"==u[0]&&(i=u[1].trim().split(/[ ]+/).map(parseFloat)),-1!=o.indexOf("!PS-Adobe-3.0 EPSF-3.0")&&(a=o),-1!=o.indexOf("!PS-Adobe-2.0 EPSF-1.2")&&(a=o)}}null!=a&&null!=i||(i=[0,0,595,842]);for(var h=[],l=FromPS._getDictStack([],{}),f=[{typ:"file",val:{buff:t,off:r}}],c=[],d=FromPS._getEnv(i),p=Date.now(),v=!0;v;)v=FromPS.step(h,l,f,c,d,e);d.pgOpen&&e.ShowPage(),e.Done(),console.log(Date.now()-p)},FromPS._getDictStack=function(t,e){for(var r=["def","undef","known","begin","end","currentfile","currentdict","currentpacking","setpacking","currentoverprint","setoverprint","currentglobal","setglobal","currentsystemparams","setsystemparams","currentuserparams","setuserparams","currentpagedevice","setpagedevice","currentflat","currentlinewidth","currentdash","currentpoint","currentscreen","setscreen","currenthalftone","currentblackgeneration","currentundercolorremoval","currentcolortransfer","internaldict","dict","string","readstring","readhexstring","readline","getinterval","putinterval","token","array","aload","astore","length","maxlength","matrix","count","mark","counttomark","cleartomark","dictstack","countdictstack","makepattern","makefont","scalefont","stringwidth","setfont","currentcolorspace","setcolorspace","setcolor","_setHSB_","currentgray","currentrgbcolor","setlinewidth","setstrokeadjust","setflat","setlinecap","setlinejoin","setmiterlimit","setdash","clip","eoclip","clippath","pathbbox","newpath","stroke","fill","eofill","shfill","closepath","flattenpath","showpage","print","_drawRect_","moveto","lineto","curveto","arc","arcn","show","ashow","xshow","yshow","xyshow","widthshow","awidthshow","charpath","cshow","rmoveto","rlineto","rcurveto","translate","rotate","scale","concat","concatmatrix","invertmatrix","currentmatrix","defaultmatrix","setmatrix","limitcheck","save","restore","clipsave","cliprestore","gsave","grestore","grestoreall","usertime","readtime","flush","flushfile","readonly","executeonly","findresource","resourcestatus","defineresource","undefineresource","resourceforall","image","imagemask","colorimage","xcheck","status","cachestatus","setcachelimit","type","if","ifelse","exec","stopped","stop","dup","exch","copy","roll","index","anchorsearch","pop","put","get","load","where","store","repeat","for","forall","pathforall","loop","exit","bind","cvi","cvr","cvs","cvx","cvn","cvlit","add","sub","mul","div","idiv","bitshift","mod","exp","atan","neg","abs","floor","ceiling","round","truncate","sqrt","ln","sin","cos","srand","rand","==","transform","itransform","dtransform","idtransform","eq","ge","gt","le","lt","ne","and","or","not","filter","begincmap","endcmap","begincodespacerange","endcodespacerange","beginbfrange","endbfrange","beginbfchar","endbfchar"].concat(t),n=["image","colorimage","repeat","for","forall","loop"],i=0;i<n.length;i++)r.push(n[i]+"---");for(var a in FromPS._myOps=FromPS.makeProcs({findfont:"/Font findresource",definefont:"/Font defineresource",undefinefont:"/Font undefineresource",selectfont:"exch findfont exch scalefont setfont",rectfill:"gsave newpath _drawRect_  fill   grestore",rectstroke:"gsave newpath _drawRect_  stroke grestore",rectclip:"newpath _drawRect_  clip newpath",setgray:"/DeviceGray setcolorspace setcolor",setrgbcolor:"/DeviceRGB  setcolorspace setcolor",sethsbcolor:"/DeviceRGB  setcolorspace _setHSB_",setcmykcolor:"/DeviceCMYK setcolorspace setcolor",setpattern:"/Pattern    setcolorspace setcolor"}),FromPS._myOps)r.push(a);prcs=e;var s={},o={},u={};s.systemdict={typ:"dict",val:s},s.globaldict={typ:"dict",val:o},s.userdict={typ:"dict",val:u},s.statusdict={typ:"dict",val:{}},s.GlobalFontDirectory=s.SharedFontDirectory={typ:"dict",val:{}},s.FontDirectory={typ:"dict",val:{}},s.$error={typ:"dict",val:{}},s.errordict={typ:"dict",val:FromPS.makeProcs({handleerror:""})},s.null={typ:"null",val:null},s.true={typ:"boolean",val:!0},s.false={typ:"boolean",val:!1},s.product={typ:"string",val:FromPS.makeStr("Photopea")},s.version={typ:"string",val:[51]},s.languagelevel={typ:"integer",val:3};for(i=0;i<r.length;i++)s[r[i]]={typ:"operator",val:r[i]};for(var h in prcs)s[h]=prcs[h];return[s,o,u]},FromPS._getEnv=function(t){var e,r={bb:t,gst:UDOC.getState(t),packing:!1,overprint:!1,global:!1,systemparams:{MaxPatternCache:{type:"integer",val:5e3}},userparams:{},pagedevice:{PageSize:{typ:"array",val:[{typ:"real",val:t[2]},{typ:"real",val:t[3]}]}},cmnum:0,fnt:null,res:{},pgOpen:!1,funs:FromPS.makeProcs({blackgeneration:"",undercolorremoval:"pop 0"})};e=["Font","CIDFont","CMap","FontSet","Form","Pattern","ProcSet","Halftone","ColorRendering","IdiomSet","InkParams","TrapParams","OutputDevice","ControlLanguage","Localization","PDL","HWOptions"];for(var n=0;n<e.length;n++)r.res[e[n]]={typ:"dict",val:{},maxl:1e3};e=["Encoding","ColorSpace"];for(n=0;n<e.length;n++)r.res[e[n]]={typ:"array",val:[]};r.res.Category={typ:"dict",val:r.res},r.res.ColorSpace.val=[{typ:"array",val:[{typ:"name",val:"/DeviceRGB"}]},{typ:"array",val:[{typ:"name",val:"/DeviceCMYK"}]},{typ:"array",val:[{typ:"name",val:"/DeviceGray"}]}];for(n=0;n<e.length;n++)r.res[e[n]]={typ:"dict",val:{},maxl:1e3};return r},FromPS.makeProcs=function(t){var e={};for(var r in t){var n=t[r].replace(/  +/g," ").split(" ");e[r]={typ:"procedure",val:[]};for(var i=0;i<n.length;i++)e[r].val.push({typ:"name",val:n[i]})}return e},FromPS.addProc=function(t,e){if(0!=t.val.length){if("procedure"!=t.typ)throw console.log(t),t.typ;e.push({typ:"procedure",val:t.val,off:0})}},FromPS.stepC=0,FromPS._f32=new Float32Array(1),FromPS.step=function(t,e,r,n,i,a,s,o){var u=Date.now(),h=FromPS._f32,l=FromPS.getToken,f=i.gst;if(null==(N=l(r,e)))return!1;var c=N.typ,d=N.val;if(isNaN(f.cpos[0]))throw"e";if(-1!=["integer","real","dict","boolean","string","array","procedure","null","file"].indexOf(c))return t.push(N),!0;if("name"!=c&&"operator"!=c)throw"e";if("/"==d.charAt(0)){if("/"==d.charAt(1))throw"e";t.push(N)}else{if(d.startsWith("II*"))return!1;if("{"==d){for(var p=[],v={typ:"procedure",val:[]},_=l(r,e);;){if("{"==_.val){var g={typ:"procedure",val:[]};v.val.push(g),p.push(v),v=g}else if("}"==_.val){if(0==p.length)break;v=p.pop()}else v.val.push(_);_=l(r,e)}t.push(v)}else if("["==d||"<<"==d)t.push({typ:"mark"});else if("]"==d||">>"==d){for(var m=[];0!=t.length;){if("mark"==(Oe=t.pop()).typ)break;m.push(Oe)}if(m.reverse(),"]"==d)t.push({typ:"array",val:m});else{for(var y={},b=0;b<m.length;b+=2)y[m[b].val.slice(1)]=m[b+1];t.push({typ:"dict",val:y,maxl:1e3})}}else{if(null==(Te=FromPS.getFromStacks(d,e))){if(o)return!1;throw console.log("unknown operator",d,t,e),"e"}if("procedure"==Te.typ)FromPS.addProc(Te,r);else if(-1!=["array","string","dict","null","integer","real","boolean","state","name","file"].indexOf(Te.typ))t.push(Te);else{if("operator"!=Te.typ)throw Te.typ;var w=Te.val;if(FromPS._myOps[w])FromPS.addProc(FromPS._myOps[w],r);else if("flattenpath"==w||"limitcheck"==w);else if("def"==w){var E=t.pop(),C=t.pop();C=FromPS.getDKey(C),e[e.length-1][C]=E}else if("undef"==w||"known"==w){var D=FromPS.getDKey(t.pop()),S=t.pop(),T=S.val;"undef"==w?delete T[D]:t.push({typ:"boolean",val:"null"!=S.typ&&null!=T[D]})}else if("internaldict"==w){var x=t.pop().val;t.push({typ:"dict",val:{},maxl:1e3})}else if("dict"==w){x=t.pop().val;t.push({typ:"dict",val:{},maxl:x})}else if("string"==w){x=t.pop().val;t.push({typ:"string",val:new Array(x)})}else if("readstring"==w||"readhexstring"==w){x=(P=t.pop()).val.length;var F=t.pop(),A=FromPS.GetFile(F).val;if("readstring"==w){for(b=0;b<x;b++)P.val[b]=A.buff[A.off+b];A.off+=x}else FromPS.readHex(A,x,P.val);t.push(P,{typ:"boolean",val:!0})}else if("readline"==w){var P=t.pop();A=FromPS.GetFile(t.pop()).val,b=0;for(FromPS.isEOL(A.buff[A.off])&&A.off++;b<P.val.length;){var M=A.buff[A.off];if(A.off++,null==M)throw"e";if(FromPS.isEOL(M)){10==A.buff[A.off]&&A.off++;break}P.val[b]=M,b++}t.push({typ:"string",val:P.val.slice(0,b)}),t.push({typ:"boolean",val:!0})}else if("getinterval"==w){var I=t.pop().val,k=t.pop().val,U=[];if("string"!=(O=t.pop()).typ&&"array"!=O.typ)throw"e";for(b=0;b<I;b++)U.push(O.val[k+b]);t.push({typ:O.typ,val:U})}else if("putinterval"==w){var O=t.pop(),B=(k=t.pop().val,t.pop());if(k+O.val.length>=B.val.length);else{if("string"!=O.typ)throw"e";for(b=0;b<O.val.length;b++)B.val[k+b]=O.val[b]}}else if("token"==w){if("string"!=(O=t.pop()).typ)throw"e";for(m=[],b=0;b<O.val.length;b++){var R=O.val[b];if(null==R)break;m.push(R)}var L={buff:new Uint8Array(m),off:0},N=l([{typ:"file",val:L}],e),z=[];for(b=L.off;b<m.length;b++)z.push(m[b]);t.push({typ:"string",val:z},N,{typ:"boolean",val:!0})}else if("array"==w){x=t.pop().val;t.push({typ:"array",val:new Array(x)})}else if("aload"==w){for(m=(Oe=t.pop()).val,b=0;b<m.length;b++)t.push(m[b]);t.push(Oe)}else if("astore"==w){for(m=(Oe=t.pop()).val,b=0;b<m.length;b++)m[m.length-1-b]=t.pop();t.push(Oe)}else if("length"==w){x=0;if("array"==(c=(Oe=t.pop()).typ))x=Oe.val.length;else if("procedure"==c)x=Oe.val.length;else if("dict"==c)x=Object.keys(Oe.val).length;else{if("string"!=c)throw console.log(Oe),"e";x=Oe.val.length}t.push({typ:"integer",val:x})}else if("maxlength"==w){var G=t.pop();t.push({typ:"integer",val:G.maxl})}else if("matrix"==w)t.push({typ:"array",val:FromPS.makeArr([1,0,0,1,0,0],"real")});else if("count"==w)t.push({typ:"integer",val:t.length});else if("mark"==w)t.push({typ:"mark"});else if("counttomark"==w||"cleartomark"==w){for(var j=0;j<t.length&&"mark"!=t[t.length-1-j].typ;)j++;if("cleartomark"==w)for(b=0;b<j+1;b++)t.pop();else t.push({typ:"integer",val:j})}else if("dictstack"==w){for(m=t.pop(),b=0;b<e.length;b++)m.val[b]={typ:"dict",val:e[b],maxl:1e3};t.push(m)}else if("countdictstack"==w){var q=0;for(b=0;b<t.length;b++)"dict"==t[b].typ&&q++;t.push({typ:"integer",val:q})}else if("begin"==w){if(null==(T=(Oe=t.pop()).val)||"dict"!=Oe.typ)throw console.log(Oe,e),"e";e.push(T)}else if("end"==w)e.pop();else if("currentfile"==w){var H;for(b=r.length-1;b>=0;b--)if("file"==r[b].typ){H=r[b];break}t.push({typ:"file",val:H.val})}else if("currentdict"==w){T=e[e.length-1];t.push({typ:"dict",val:T,maxl:1e3})}else if(-1!=["currentpacking","currentoverprint","currentglobal","currentsystemparams","currentuserparams","currentpagedevice"].indexOf(w)){E=i[w.slice(7)];t.push({typ:"boolean"==typeof E?"boolean":"dict",val:E})}else if(-1!=["setpacking","setoverprint","setglobal","setsystemparams","setuserparams","setpagedevice"].indexOf(w))i[w.slice(3)]=t.pop().val;else if("currentflat"==w)t.push({typ:"real",val:1});else if("currentlinewidth"==w)t.push({typ:"real",val:f.lwidth});else if("currentdash"==w)t.push({typ:"array",val:FromPS.makeArr(f.dash,"integer")},{typ:"real",val:f.doff});else if("currentpoint"==w){var X=f.ctm.slice(0);UDOC.M.invert(X);var W=UDOC.M.multPoint(X,f.cpos);t.push({typ:"real",val:W[0]},{typ:"real",val:W[1]})}else if("currentscreen"==w)t.push({typ:"int",val:60},{typ:"real",val:0},{typ:"real",val:0});else if("setscreen"==w)t.pop(),t.pop(),t.pop();else if("currenthalftone"==w)t.push({typ:"dict",val:{},maxl:1e3});else if("currentblackgeneration"==w||"currentundercolorremoval"==w)t.push(i.funs[w.slice(7)]);else if("currentcolortransfer"==w)for(b=0;b<4;b++)t.push(i.funs.blackgeneration);else if("findresource"==w){var V=t.pop().val.slice(1),Z=t.pop();D=Z.val.slice(1);if("Font"==V&&(i.res[V].val[D]={typ:"dict",val:{FontType:{typ:"integer",val:1},FontMatrix:{typ:"array",val:FromPS.makeArr([1,0,0,1,0,0],"real")},FontName:Z,FID:{typ:"fontID",val:Math.floor(16777215*Math.random())},Encoding:{typ:"array",val:[]},FontBBox:{typ:"array",val:FromPS.makeArr([0,0,1,1],"real")},PaintType:{typ:"integer",val:0}}}),null==(Y="Category"==V&&"Generic"==D||"ProcSet"==V&&"CIDInit"==D?{typ:"dict",val:{},maxl:1e3}:i.res[V].val[D]))throw"e";t.push(Y)}else if("resourcestatus"==w){var Y;V=t.pop().val.slice(1),D=t.pop().val.slice(1);(Y=i.res[V].val[D])&&(t.push({typ:"integer",val:1}),t.push({typ:"integer",val:Object.keys(Y.val).length})),t.push({typ:"boolean",val:null!=Y})}else if("defineresource"==w){V=t.pop().val.slice(1);var J=t.pop();D=t.pop().val.slice(1);i.res[V].val[D]=J,t.push(J)}else if("undefineresource"==w){V=t.pop().val.slice(1),D=t.pop().val.slice(1);delete i.res[V].val[D]}else if("resourceforall"==w){V=t.pop().val.slice(1);var K=t.pop().val,Q=t.pop(),$=t.pop().val;if(1!=$.length||42!=$[0])throw"e";var tt=i.res[V].val;for(var D in tt){for(P=K.slice(0),b=0;b<D.length;b++)P[b]=D[b];FromPS.addProc(Q,r),FromPS.addProc({typ:"procedure",val:[{typ:"string",val:P}]},r)}}else if("image"==w||"colorimage"==w){var et=1,rt=!1,nt=[],it=t.pop();if(t.push(it),"image"==w&&"dict"==it.typ){var at=t.pop().val;ht=at.Width.val,ut=at.Height.val,ot=at.BitsPerComponent.val,st=FromPS.readArr(at.ImageMatrix.val),et=at.NComponents.val,rt=at.MultipleDataSources.val,nt=at.DataSource.val}else{"colorimage"==w&&(et=t.pop().val,rt=t.pop().val),rt?(nt[2]=t.pop(),nt[1]=t.pop(),nt[0]=t.pop()):nt=[t.pop()];var st=FromPS.readArr(t.pop().val),ot=t.pop().val,ut=t.pop().val,ht=t.pop().val}if(3!=et&&4!=et)throw"unsupported number of channels "+et;if(8!=ot)throw"unsupported bits per channel: "+ot;var lt=new Uint8Array(ht*ut*4);for(b=0;b<lt.length;b++)lt[b]=255;if(r.push({typ:"name",val:w+"---",ctx:[ht,ut,ot,st,et,rt,lt,0,nt]}),"procedure"==nt[0].typ)for(b=0;b<nt.length;b++)FromPS.addProc(nt[b],r)}else if("image---"==w||"colorimage---"==w){ht=(Et=N.ctx)[0],ut=Et[1],ot=Et[2],st=Et[3],et=Et[4],rt=Et[5],lt=Et[6];var ft=Et[7],ct=(nt=Et[8],0);if(rt)for(b=0;b<et;b++){if(ct=(pt="procedure"==(pt=nt[b]).typ?t.pop().val:pt.val).length,4==et)for(var dt=0;dt<ct;dt++)lt[4*(ft+dt)+3-b]=pt[dt];if(3==et)for(dt=0;dt<ct;dt++)lt[4*(ft+dt)+2-b]=pt[dt]}else{var pt=t.pop().val;ct=Math.floor(pt.length/3);for(dt=0;dt<ct;dt++){var vt=3*dt,_t=4*(ft+dt);lt[_t+0]=pt[vt+0],lt[_t+1]=pt[vt+1],lt[_t+2]=pt[vt+2]}}if(ft+=ct,FromPS.checkPageStarted(i,a),ft==ht*ut){var gt=1/255;if("/DeviceCMYK"==f.space)for(b=0;b<lt.length;b+=4){var mt=[lt[b]*gt,lt[b+1]*gt,lt[b+2]*gt,lt[b+3]*gt],yt=UDOC.C.cmykToRgb(mt);lt[b]=255*yt[0],lt[b+1]=255*yt[1],lt[b+2]=255*yt[2],lt[b+3]=255}a.PutImage(f,lt,ht,ut)}else if(Et[7]=ft,r.push(N),"procedure"==nt[0].typ)for(b=0;b<nt.length;b++)FromPS.addProc(nt[b],r)}else if("makepattern"==w){var bt=t.pop().val;G=t.pop().val;t.push({typ:"array",val:[G,JSON.parse(JSON.stringify(bt))]})}else if("makefont"==w||"scalefont"==w){var wt="makefont"==w,Et=t.pop().val;wt&&(Et=FromPS.readArr(Et));var Ct=JSON.parse(JSON.stringify(t.pop())),Dt=FromPS.readArr(Ct.val.FontMatrix.val);wt?UDOC.M.concat(Dt,Et):UDOC.M.scale(Dt,Et,Et),Ct.val.FontMatrix.val=FromPS.makeArr(Dt),t.push(Ct)}else if("stringwidth"==w||"charpath"==w){"charpath"==w&&t.pop();var St=t.pop().val,Tt=(P=FromPS.readStr(St),UDOC.M.getScale(f.font.Tm)/UDOC.M.getScale(f.ctm)),xt=.55*Tt*P.length;"stringwidth"==w?t.push({typ:"real",val:xt},{typ:"real",val:0}):UDOC.G.drawRect(f,0,0,xt,Tt)}else if("setfont"==w){Ct=t.pop().val;f.font.Tf=Ct.FontName.val.slice(1),f.font.Tm=FromPS.readArr(Ct.FontMatrix.val)}else if("setlinewidth"==w)f.lwidth=t.pop().val;else if("setstrokeadjust"==w)f.SA=t.pop().val;else if("setlinecap"==w)f.lcap=t.pop().val;else if("setlinejoin"==w)f.ljoin=t.pop().val;else if("setmiterlimit"==w)f.mlimit=t.pop().val;else if("setflat"==w)f.dd.flat=t.pop();else if("setdash"==w)f.doff=t.pop().val,f.dash=FromPS.readArr(t.pop().val);else if("show"==w||"ashow"==w||"xshow"==w||"yshow"==w||"xyshow"==w||"widthshow"==w||"awidthshow"==w){"xshow"!=w&&"xyshow"!=w&&"yshow"!=w||t.pop();St=t.pop().val,P=FromPS.readStr(St);"awidthshow"==w&&(t.pop(),t.pop(),t.pop(),t.pop()),"widthshow"==w&&(t.pop(),t.pop(),t.pop()),"ashow"==w&&(t.pop(),t.pop());var Ft=f.ctm;f.ctm=Ft.slice(0),f.ctm[4]=f.cpos[0],f.ctm[5]=f.cpos[1],FromPS.checkPageStarted(i,a),a.PutText(f,P,.55*P.length),f.cpos[0]+=P.length*UDOC.M.getScale(Ft)*UDOC.M.getScale(f.font.Tm)*.55,f.ctm=Ft}else if("cshow"==w)t.pop(),t.pop();else if("currentcolorspace"==w)t.push({typ:"array",val:[{typ:"name",val:f.space}]});else if("setcolorspace"==w){var At=t.pop();if(f.space=At.val,"array"==At.typ)f.space=At.val[0].val;else{if("name"!=At.typ)throw console.log(At),"e";f.space=At.val}}else if("setcolor"==w||"_setHSB_"==w){var Pt;if("/Pattern"==f.space){if("array"!=(mt=t.pop()).typ)throw"e";W=mt.val,bt=FromPS.readArr(W[1]);UDOC.M.concat(bt,f.ctm),Pt=FromPS.getPSShadingFill(W[0].Shading,bt)}else if("/DeviceGray"==f.space){Pt=[Rt=FromPS.nrm(t.pop().val),Rt,Rt]}else if("_setHSB_"==w){var Mt,It,kt,Ut=t.pop().val,Ot=t.pop().val;switch(W=Ut*(1-Ot),It=Ut*(1-(Mt=6*(ut=t.pop().val)-(b=Math.floor(6*ut)))*Ot),kt=Ut*(1-(1-Mt)*Ot),b%6){case 0:Lt=Ut,Rt=kt,Bt=W;break;case 1:Lt=It,Rt=Ut,Bt=W;break;case 2:Lt=W,Rt=Ut,Bt=kt;break;case 3:Lt=W,Rt=It,Bt=Ut;break;case 4:Lt=kt,Rt=W,Bt=Ut;break;case 5:Lt=Ut,Rt=W,Bt=It}Pt=[FromPS.nrm(Lt),FromPS.nrm(Rt),FromPS.nrm(Bt)]}else if("/DeviceRGB"==f.space){var Bt=t.pop().val,Rt=t.pop().val,Lt=t.pop().val;Pt=[FromPS.nrm(Lt),FromPS.nrm(Rt),FromPS.nrm(Bt)]}else{if("/DeviceCMYK"!=f.space)throw f.space;var Nt=t.pop().val,zt=t.pop().val,Gt=(bt=t.pop().val,t.pop().val);Pt=UDOC.C.cmykToRgb([Gt,bt,zt,Nt])}Pt&&(f.colr=f.COLR=Pt)}else if("currentrgbcolor"==w)for(b=0;b<3;b++)t.push({typ:"real",val:f.colr[b]});else if("currentgray"==w)t.push({typ:"real",val:(f.colr[0]+f.colr[1]+f.colr[2])/3});else if("clip"==w||"eoclip"==w){var jt=UDOC.G.getBB(f.pth.crds),qt=UDOC.G.getBB(f.cpth.crds);if(UDOC.G.isBox(f.pth,jt)&&UDOC.G.insideBox(qt,jt));else if(UDOC.G.isBox(f.cpth,qt)&&UDOC.G.insideBox(jt,qt))f.cpth=JSON.parse(JSON.stringify(f.pth));else{var Ht=UDOC.G.toPoly(f.pth),Xt=UDOC.G.toPoly(f.cpth);if(Ht&&Xt)0!=(W=UDOC.G.polyClip(Ht,Xt)).length?f.cpth=UDOC.G.fromPoly(W):console.log("strange intersection of polygons");else f.cpth=JSON.parse(JSON.stringify(f.pth))}}else if("clippath"==w)f.pth=JSON.parse(JSON.stringify(f.cpth));else if("pathbbox"==w){var Wt=f.pth.crds,Vt=UDOC.G.getBB(Wt);Wt=[Vt[0],Vt[1],Vt[2],Vt[1],Vt[0],Vt[3],Vt[2],Vt[3]];X=f.ctm.slice(0);UDOC.M.invert(X),UDOC.M.multArray(X,Wt),Vt=UDOC.G.getBB(Wt),h[0]=Vt[0],Vt[0]=h[0],h[0]=Vt[1],Vt[1]=h[0],h[0]=Vt[2],Vt[2]=h[0],h[0]=Vt[3],Vt[3]=h[0],Vt=FromPS.makeArr(Vt,"real"),t.push(Vt[0],Vt[1],Vt[2],Vt[3])}else if("newpath"==w)UDOC.G.newPath(f);else if("stroke"==w)FromPS.checkPageStarted(i,a),a.Stroke(f),UDOC.G.newPath(f);else if("shfill"==w){var Zt=f.colr,Yt=f.pth;W=t.pop().val,bt=f.ctm.slice(0);f.colr=FromPS.getPSShadingFill({typ:"dict",val:W,maxl:1e3},bt),FromPS.checkPageStarted(i,a),f.pth=f.cpth,f.cpth=UDOC.G.rectToPath(i.bb),a.Fill(f),f.colr=Zt,f.pth=Yt}else if("fill"==w||"eofill"==w)FromPS.checkPageStarted(i,a),a.Fill(f,"eofill"==w),UDOC.G.newPath(f);else if("showpage"==w){FromPS.checkPageStarted(i,a),a.ShowPage();var Jt=f.font;(f=i.gst=UDOC.getState(i.bb)).font=Jt,i.pgOpen=!1}else if("print"==w){St=t.pop().val,P=FromPS.readStr(St);a.Print(P)}else if("_drawRect_"==w){if("real"!=(ut=t.pop()).typ&&"integer"!=ut.typ)throw"e";ut=ut.val;ht=t.pop().val,zt=t.pop().val;var Kt=t.pop().val;UDOC.G.drawRect(f,Kt,zt,ht,ut)}else if("closepath"==w)UDOC.G.closePath(f);else if("moveto"==w||"lineto"==w){zt=t.pop().val,Kt=t.pop().val;"moveto"==w?UDOC.G.moveTo(f,Kt,zt):UDOC.G.lineTo(f,Kt,zt)}else if("rmoveto"==w||"rlineto"==w){zt=t.pop().val,Kt=t.pop().val,X=f.ctm.slice(0);UDOC.M.invert(X),zt+=(W=UDOC.M.multPoint(X,f.cpos))[1],Kt+=W[0],"rmoveto"==w?UDOC.G.moveTo(f,Kt,zt):UDOC.G.lineTo(f,Kt,zt)}else if("curveto"==w){var Qt=t.pop().val,$t=t.pop().val,te=t.pop().val,ee=t.pop().val,re=t.pop().val,ne=t.pop().val;UDOC.G.curveTo(f,ne,re,ee,te,$t,Qt)}else if("arc"==w||"arcn"==w){var ie=t.pop().val,ae=t.pop().val;Lt=t.pop().val,zt=t.pop().val,Kt=t.pop().val;UDOC.G.arc(f,Kt,zt,Lt,ae*Math.PI/180,ie*Math.PI/180,"arcn"==w)}else if("concat"==w){bt=FromPS.readArr(t.pop().val);UDOC.M.concat(bt,f.ctm),f.ctm=bt}else if(-1!=["translate","scale","rotate"].indexOf(w)){"array"==(Ut=t.pop()).typ?(bt=FromPS.readArr(Ut.val),zt=t.pop().val):(bt=[1,0,0,1,0,0],zt=Ut.val),"rotate"!=w&&(Kt=t.pop().val),"translate"==w&&UDOC.M.translate(bt,Kt,zt),"scale"==w&&UDOC.M.scale(bt,Kt,zt),"rotate"==w&&UDOC.M.rotate(bt,-zt*Math.PI/180),"array"==Ut.typ?t.push({typ:"array",val:FromPS.makeArr(bt,"real")}):(UDOC.M.concat(bt,f.ctm),f.ctm=bt)}else if("concatmatrix"==w){(oe=FromPS.readArr)(t.pop().val);var se=oe(t.pop().val);bt=oe(t.pop().val).slice(0);UDOC.M.concat(bt,se),bt=FromPS.makeArr(bt,"real"),t.push({typ:"array",val:bt})}else if("invertmatrix"==w){var oe;se=(oe=FromPS.readArr)(t.pop().val),bt=oe(t.pop().val).slice(0);UDOC.M.invert(bt),bt=FromPS.makeArr(bt,"real"),t.push({typ:"array",val:bt})}else if("currentmatrix"==w||"defaultmatrix"==w){bt=t.pop();var ue=FromPS.makeArr("currentmatrix"==w?f.ctm:[1,0,0,1,0,0],"real");for(b=0;b<6;b++)bt.val[b]=ue[b];t.push(bt)}else if("setmatrix"==w)f.ctm=FromPS.readArr(t.pop().val);else if("cvi"==w){Ut=(Oe=t.pop()).val,U=0;if("real"==Oe.typ)U=Math.round(Ut);else{if("integer"!=Oe.typ)throw"unknown type "+Oe.typ;U=Ut}t.push({typ:"integer",val:U})}else if("cvr"==w){Ut=(Oe=t.pop()).val,U=0;if("real"==Oe.typ)U=Ut;else if("integer"==Oe.typ)U=Ut;else{if("string"!=Oe.typ)throw"unknown type "+Oe.typ;U=parseFloat(FromPS.readStr(Ut))}t.push({typ:"real",val:U})}else if("cvs"==w){P=t.pop();var he=t.pop();E="";if(P.val=[],t.push(P),"real"==he.typ||"integer"==he.typ)E=Math.abs(Math.round(he.val)-he.val)<1e-6?Math.round(he.val)+".0":(Math.round(1e6*he.val)/1e6).toString();else{if("name"!=he.typ)throw"unknown var type: "+he.typ;E=he.val}for(b=0;b<E.length;b++)P.val[b]=E.charCodeAt(b)}else if("cvx"==w){var le;if("array"==(Oe=t.pop()).typ)le={typ:"procedure",val:Oe.val};else if("name"==Oe.typ)le={typ:"name",val:Oe.val.slice(1)};else{if("string"!=Oe.typ)throw console.log(Oe),Oe.typ;le={typ:"file",val:{off:0,buff:new Uint8Array(Oe.val)}}}t.push(le)}else if("cvlit"==w){"procedure"==(Te=t.pop()).typ?t.push({typ:"array",val:Te.val}):t.push(Te)}else if("cvn"==w)t.push({typ:"name",val:FromPS.readStr(t.pop().val)});else if(-1!=["add","sub","mul","div","idiv","bitshift","mod","exp","atan"].indexOf(w)){var fe=t.pop(),ce=(ve=t.pop()).val,de=fe.val,pe=(U=0,"");"add"==w||"sub"==w||"mul"==w?pe="real"==ve.typ||"real"==fe.typ?"real":"integer":"div"==w||"atan"==w||"exp"==w?pe="real":"mod"!=w&&"idiv"!=w&&"bitshift"!=w||(pe="integer"),"real"==ve.typ&&(h[0]=ce,ce=h[0]),"real"==fe.typ&&(h[0]=de,de=h[0]),"add"==w&&(U=ce+de),"sub"==w&&(U=ce-de),"mul"==w&&(U=ce*de),"div"==w&&(U=ce/de),"idiv"==w&&(U=~~(ce/de)),"bitshift"==w&&(U=de>0?ce<<de:ce>>>-de),"mod"==w&&(U=ce%de),"exp"==w&&(U=Math.pow(ce,de)),"atan"==w&&(U=180*Math.atan2(ce,de)/Math.PI),"real"==pe&&(h[0]=U,U=h[0]),t.push({typ:pe,val:U})}else if(-1!=["neg","abs","floor","ceiling","round","truncate","sqrt","ln","sin","cos"].indexOf(w)){ce=(ve=t.pop()).val,U=0,pe="";if("neg"==w||"abs"==w||"truncate"==w||"floor"==w||"ceiling"==w||"round"==w?pe=ve.typ:"sqrt"!=w&&"sin"!=w&&"cos"!=w&&"ln"!=w||(pe="real"),"real"==ve.typ&&(h[0]=ce,ce=h[0]),"neg"==w&&(U=-ce),"abs"==w&&(U=Math.abs(ce)),"floor"==w&&(U=Math.floor(ce)),"ceiling"==w&&(U=Math.ceil(ce)),"round"==w&&(U=Math.round(ce)),"truncate"==w&&(U=Math.trunc(ce)),"sqrt"==w&&(U=Math.sqrt(ce)),"ln"==w&&(U=Math.log(ce)),"sin"==w&&(U=Math.sin(ce*Math.PI/180)),"cos"==w&&(U=Math.cos(ce*Math.PI/180)),"ln"==w&&ce<=0)throw"e";"real"==pe&&(h[0]=U,U=h[0]),t.push({typ:pe,val:U})}else if(-1!=["eq","ge","gt","le","lt","ne"].indexOf(w)){fe=t.pop();var ve,_e=(ve=t.pop()).typ,ge=fe.typ;ce=ve.val,de=fe.val,U=!1;if("eq"==w||"ne"==w){var me=ve.typ==fe.typ;if(me&&-1!=["integer","real","name","null","dict"].indexOf(_e))U=ce==de;else if("real"==_e&&"integer"==ge||"real"==ge&&"integer"==_e)U=ce==de;else if(me||"null"!=ve.typ&&"null"!=fe.typ){if(!me||"string"!=ve.typ)throw console.log(w,ve,fe,ve.val==fe.val),"e";if(ce.length!=de.length)U=!1;else{U=!0;for(b=0;b<ce.length;b++)ce[b]!=de[b]&&(U=!1)}}else U=!1;"ne"==w&&(U=!U)}else"ge"==w?U=ce>=de:"gt"==w?U=ce>de:"le"==w?U=ce<=de:"lt"==w&&(U=ce<de);t.push({typ:"boolean",val:U})}else if(-1!=["and","or"].indexOf(w)){var ye=t.pop(),be=t.pop(),we=(de=be.val,ye.val),Ee="integer"==be.typ;"and"==w&&(U=Ee?de&we:de&&we),"or"==w&&(U=Ee?de|we:de||we),t.push({typ:Ee?"integer":"boolean",val:U})}else if("not"==w){Ut=(Bt=t.pop()).val,U=(Ee="integer"==Bt.typ)?~Ut:!Ut;t.push({typ:Ee?"integer":"boolean",val:U})}else if("if"==w){Q=t.pop();(Se=t.pop().val)&&FromPS.addProc(Q,r)}else if("ifelse"==w){var Ce=t.pop(),De=t.pop(),Se=t.pop().val;FromPS.addProc(Se?De:Ce,r)}else if("exec"==w||"stopped"==w){var Te=t.pop();if("stopped"==w&&FromPS.addProc({typ:"procedure",val:[{typ:"boolean",val:!1}]},r),"procedure"==Te.typ)FromPS.addProc(Te,r);else{if("name"!=Te.typ&&"operator"!=Te.typ&&"integer"!=Te.typ&&"real"!=Te.typ&&"array"!=Te.typ)throw console.log(Te),"unknown executable type: "+Te.typ;FromPS.addProc({typ:"procedure",val:[Te]},r)}}else if("stop"==w){var xe=r[r.length-1];"procedure"==xe.typ&&0!=xe.off&&r.pop()}else if("dup"==w){Ut=t.pop();t.push(Ut,Ut)}else if("exch"==w)t.push(t.pop(),t.pop());else if("copy"==w){if("integer"==(q=t.pop()).typ){var Fe=[];for(b=0;b<q.val;b++)Fe[q.val-1-b]=t.pop();for(b=0;b<q.val;b++)t.push(Fe[b]);for(b=0;b<q.val;b++)t.push(Fe[b])}else if("array"==q.typ){for(bt=t.pop().val,b=0;b<bt.length;b++)if(q.val[b]=bt[b],null==bt[b].val)throw console.log(e),"e";t.push(q)}else{if("dict"!=q.typ)throw"e";bt=t.pop().val;for(var Ae in bt)q.val[Ae]=bt[Ae];t.push(q)}}else if("roll"==w){for(dt=t.pop().val,q=t.pop().val,Fe=[],b=0;b<q;b++)Fe.push(t.pop());Fe.reverse(),dt=(q+dt)%q;for(b=0;b<dt;b++)Fe.unshift(Fe.pop());for(b=0;b<q;b++)t.push(Fe[b])}else if("index"==w){q=t.pop().val;t.push(t[t.length-1-q])}else if("anchorsearch"==w){var Pe=t.pop(),Me=t.pop(),Ie=Pe.val,ke=(P=Me.val,!0);if(Ie.length<=P.length)for(b=0;b<Ie.length;b++)Ie[b]!=P[b]&&(ke=!1);else ke=!1;ke?t.push({typ:"string",val:P.slice(Ie.length)},Pe):t.push(Me),t.push({typ:"boolean",val:ke})}else if("transform"==w||"itransform"==w||"dtransform"==w||"idtransform"==w){zt=0,Kt=0;"array"==(bt=t.pop()).typ?(bt=FromPS.readArr(bt.val),zt=t.pop().val):(zt=bt.val,bt=f.ctm.slice(0)),"itransform"!=w&&"idtransform"!=w||UDOC.M.invert(bt),Kt=t.pop().val,w.endsWith("dtransform")&&(bt[4]=0,bt[5]=0);var Ue=UDOC.M.multPoint(bt,[Kt,zt]);t.push({typ:"real",val:Ue[0]},{typ:"real",val:Ue[1]})}else if("pop"==w||"srand"==w||"=="==w)t.pop();else if("rand"==w)t.push({typ:"integer",val:Math.floor(2147483647*Math.random())});else if("put"==w){d=t.pop();var Oe=t.pop();if("array"==(pe=(Te=t.pop()).typ)){if("integer"!=Oe.typ)throw"e";Te.val[Oe.val]=d}else if("dict"==pe){C=FromPS.getDKey(Oe);Te.val[C]=d}else{if("string"!=pe)throw pe+" e";Te.val[Oe.val]=d.val}}else if("get"==w){Oe=t.pop();if("string"==(pe=(Te=t.pop()).typ))t.push({typ:"integer",val:Te.val[Oe.val]});else if("array"==pe){if(null==(E=Te.val[Oe.val]))throw"e";t.push(E)}else{if("dict"!=pe)throw"getting from unknown type "+Te.typ;Nt=FromPS.getDKey(Oe);if(null==(Ut=Te.val[Nt]))throw"e";t.push(Ut)}}else if("load"==w){D=t.pop().val.slice(1);if(null==(d=FromPS.getFromStacks(D,e)))throw console.log(D,e),"e";t.push(d)}else if("where"==w){D=t.pop().val.slice(1);null!=(T=FromPS.where(D,e))&&t.push({typ:"dict",val:T,maxl:1e3}),t.push({typ:"boolean",val:null!=T})}else if("store"==w){d=t.pop(),D=t.pop().val.slice(1);null==(T=FromPS.where(D,e))&&(T=e[e.length-1]),T[D]=d}else if("repeat"==w){Q=t.pop();var Be=t.pop().val;r.push({typ:"name",val:w+"---",ctx:{proc:Q,cur:0,cnt:Be}})}else if("repeat---"==w){(Ge=N.ctx).cur<Ge.cnt&&(r.push(N),FromPS.addProc(Ge.proc,r),Ge.cur++)}else if("for"==w){Q=t.pop();var Re=t.pop(),Le=t.pop(),Ne=t.pop();r.push({typ:"name",val:w+"---",ctx:{proc:Q,isInt:"integer"==Ne.typ&&"integer"==Le.typ,init:Ne.val,inc:Le.val,limit:Re.val}})}else if("for---"==w){if((Ge=N.ctx).isInt)(Ge.inc>0&&Ge.init<=Ge.limit||Ge.inc<0&&Ge.init>=Ge.limit)&&(r.push(N),FromPS.addProc(Ge.proc,r),t.push({typ:"integer",val:Ge.init}),Ge.init+=Ge.inc);else{var ze=new Float32Array(1);ze[0]=Ge.limit,Ge.limit=ze[0],ze[0]=Ge.inc,Ge.inc=ze[0],ze[0]=Ge.init,(Ge.inc>0&&ze[0]<=Ge.limit||Ge.inc<0&&ze[0]>=Ge.limit)&&(r.push(N),FromPS.addProc(Ge.proc,r),t.push({typ:"real",val:ze[0]}),ze[0]+=Ge.inc,Ge.init=ze[0])}}else if("loop"==w){Q=t.pop();r.push({typ:"name",val:w+"---",ctx:{proc:Q}})}else if("loop---"==w){var Ge=N.ctx;r.push(N),FromPS.addProc(Ge.proc,r)}else if("pathforall"==w){var je=t.pop();t.pop(),t.pop(),t.pop()}else if("forall"==w){Ge=[Q=t.pop(),Te=t.pop(),0];r.push({typ:"name",val:w+"---",ctx:Ge})}else if("forall---"==w){Q=(Ge=N.ctx)[0],Te=Ge[1],b=Ge[2];if("dict"==Te.typ){var qe=Object.keys(Te.val);if(b<qe.length){if(r.push(N),FromPS.addProc(Q,r),t.push({typ:"name",val:"/"+qe[b]}),null==(E=Te.val[qe[b]]))throw"e";t.push(null==E?{typ:"null",val:null}:E),Ge[2]++}}else{if("procedure"!=Te.typ&&"array"!=Te.typ)throw console.log(Q,Te),"forall: unknown type: "+Te.typ;if(b<Te.val.length){r.push(N),FromPS.addProc(Q,r);var He=Te.val[b];t.push(null==He?{typ:"null",val:null}:He),Ge[2]++}}}else if("exit"==w){for(b=r.length-1;0!=b&&("name"!=r[b].typ||!r[b].val.endsWith("---"));)b--;if(0!=b)for(;r.length>b;)r.pop()}else if("bind"==w);else if("xcheck"==w){c=(Te=t.pop()).typ;t.push({typ:"boolean",val:"procedure"==c})}else if("status"==w){P=t.pop();t.push({typ:"boolean",val:!1})}else if("cachestatus"==w)for(b=0;b<7;b++)t.push({typ:"integer",val:5e3});else if("setcachelimit"==w)t.pop();else if("type"==w){var Xe={name:"nametype",dict:"dicttype",boolean:"booleantype",procedure:"operatortype",string:"stringtype",null:"nulltype",integer:"integertype",array:"arraytype",operator:"operatortype",real:"realtype"};if(null==Xe[(Oe=t.pop()).typ])throw console.log(Oe),Oe.typ;t.push({typ:"name",val:"/"+Xe[Oe.typ]})}else if("save"==w)t.push({typ:"state",val:JSON.parse(JSON.stringify(f))});else if("restore"==w)f=i.gst=t.pop().val;else if("clipsave"==w)f.cpstack.push(JSON.parse(JSON.stringify(f.cpth)));else if("cliprestore"==w)f.cpath=f.cpstack.pop();else if("gsave"==w)n.push(JSON.parse(JSON.stringify(f)));else if("grestore"==w)f=i.gst=n.pop();else if("grestoreall"==w)for(;0!=n.length;)f=i.gst=n.pop();else if("usertime"==w||"realtime"==w)t.push({typ:"integer",val:"usertime"==w?Date.now()-u:Date.now()});else if("flush"==w||"readonly"==w||"executeonly"==w);else if("flushfile"==w)FromPS.GetFile(t.pop());else if("filter"==w){var We,Ve=t.pop().val;if("/SubFileDecode"==Ve){if("string"!=(P=t.pop()).typ)throw"e";I=t.pop().val;We=[Ve,P=P.val,I]}else We=[Ve];var Ze=t.pop();t.push({typ:"file",val:{buff:new Uint8Array,off:0},_flt:We,_src:Ze})}else if("begincmap"==w||"endcmap"==w);else if("begincodespacerange"==w||"beginbfrange"==w||"beginbfchar"==w)i.cmnum=t.pop().val;else if("endcodespacerange"==w||"endbfrange"==w||"endbfchar"==w){je="endbfrange"==w?3:2;var Ye=w.slice(3);ot=0;null==(T=e[e.length-1])[Ye]&&(T[Ye]=[]);for(b=0;b<i.cmnum;b++){var Je=[];for(dt=je-1;dt>=0;dt--){var Ke=t.pop(),Qe=Ke.val;if("string"==Ke.typ)E=FromPS.strToInt(Qe),0==dt&&(ot=Qe.length);else{E=[];for(Nt=0;Nt<Qe.length;Nt++)E.push(FromPS.strToInt(Qe[Nt].val))}Je[dt]=E}T[Ye]=T[Ye].concat(Je)}"endcodespacerange"!=w&&(T.bpc=ot)}else{if(!s)throw console.log(d,w),console.log(e,t),"e";s(w,t,e,r,n,i,a)}}}}return!0},FromPS.strToInt=function(t){for(var e=0,r=0;r<t.length;r++)e=e<<8|t[r];return e},FromPS.getDKey=function(t){return"name"==t.typ?t.val.slice(1):"string"==t.typ?FromPS.readStr(t.val):t.val},FromPS.GetFile=function(t){if(null==t._flt||t.val.off<t.val.buff.length)return t;FromPS.GetFile(t._src);var e,r=t._src.val,n=t._flt,i=n[0];if("/ASCII85Decode"==i)e=FromPS.F.ASCII85Decode(r);else if("/RunLengthDecode"==i)e=FromPS.F.RunLengthDecode(r);else{if("/SubFileDecode"!=i)throw i;for(var a=n[1],s=n[2],o=r.off,u=0;o<r.buff.length;){for(var h=0;h<a.length&&r.buff[o+h]==a[h];)h++;if(h==a.length){if(u==s)break;u++}o++}e=r.buff.slice(r.off,o),r.off=o}return t.val={buff:e,off:0},t},FromPS.checkPageStarted=function(t,e){t.pgOpen||(e.StartPage(t.bb[0],t.bb[1],t.bb[2],t.bb[3]),t.pgOpen=!0)},FromPS.getPSShadingFill=function(t,e){var r=function t(e){var r,n=e.typ,i=e.val;if("dict"==n)for(var a in r={},i)r["/"+a]=t(i[a]);else if("array"==n){r=[];for(var s=0;s<i.length;s++)r.push(t(i[s]))}else if("string"==n){r="";for(s=0;s<i.length;s++)r+=String.fromCharCode(i[s])}else if(-1!=["boolean","integer","real","name"].indexOf(n))r=i;else{if("procedure"!=n)throw console.log(e),"e";var o="";for(s=0;s<i.length;s++)o+=i[s].val+" ";o="{ "+o+"}";var u=new Uint8Array(o.length);for(s=0;s<o.length;s++)u[s]=o.charCodeAt(s);r={"/FunctionType":4,"/Domain":[0,1],"/Range":[0,1,0,1,0,1,0,1],"/Length":o.length,stream:u}}return r}(t);return FromPS.getShadingFill(r,e)},FromPS.F={HexDecode:function(t){var e=[];return FromPS.readHex(t,1e9,e),new Uint8Array(e)},ASCII85Decode:function(t){for(var e=[52200625,614125,7225,85,1],r=[],n=0,i=0,a=t.off;;){if(a>=t.buff.length)throw"e";var s=t.buff[a];if(a++,!FromPS.isWhite(s)){if(126==s){if(0!=n){3==n&&r.push(i>>>24&255),4==n&&r.push(i>>>24&255,i>>>16&255);var o=5-n<<3,u=i>>>o&255;0!=(i&=(1<<o)-1)&&u++,r.push(u)}return t.off=a+1,new Uint8Array(r)}if(122!=s){if(s<33||s-33>84)throw console.log(s,String.fromCharCode(s),a-t.off),"e";i+=(s-33)*e[n],5==++n&&(r.push(i>>>24&255),r.push(i>>>16&255),r.push(i>>>8&255),r.push(i>>>0&255),n=0,i=0)}else r.push(0,0,0,0)}}},RunLengthDecode:function(t){for(var e=[],r=t.off;;){if(r>=t.buff.length)throw console.log(e),"e";var n=t.buff[r];if(r++,128==n)return t.off=r,new Uint8Array(e);if(n<128){for(var i=0;i<n+1;i++)e.push(t.buff[r+i]);r+=n+1}else{for(i=0;i<257-n;i++)e.push(t.buff[r]);r++}}},FlateDecode:function(t){var e=t.buff,r=new Uint8Array(e.buffer,t.off,e.length);return pako.inflate(r)}},FromPS.B={readUshort:function(t,e){return t[e]<<8|t[e+1]},readUint:function(t,e){return 16777216*t[e]+(t[e+1]<<16|t[e+2]<<8|t[e+3])},readASCII:function(t,e,r){for(var n="",i=0;i<r;i++)n+=String.fromCharCode(t[e+i]);return n}},FromPS.nrm=function(t){return Math.max(0,Math.min(1,t))},FromPS.makeArr=function(t,e){for(var r=[],n=0;n<t.length;n++)r.push({typ:e,val:t[n]});return r},FromPS.readArr=function(t){for(var e=[],r=0;r<t.length;r++)e.push(t[r].val);return e},FromPS.makeStr=function(t){for(var e=[],r=0;r<t.length;r++)e.push(t.charCodeAt(r));return e},FromPS.readStr=function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},FromPS.getFromStacks=function(t,e){for(var r=e.length-1;r>=0;){if(null!=e[r][t])return e[r][t];r--}return null},FromPS.where=function(t,e){for(var r=e.length-1;r>=0;){if(null!=e[r][t])return e[r];r--}return null},FromPS.skipWhite=function(t){for(var e=t.off,r=t.buff,n=FromPS.isWhite;n(r[e])||37==r[e];){for(;n(r[e]);)e++;if(37==r[e]){for(;e<r.length&&!FromPS.isEOL(r[e]);)e++;e++}}t.off=e},FromPS.getToken=function(t,e){if(0==t.length)return null;var r=t[t.length-1];if("procedure"==r.typ){var n=r.val[r.off];return r.off++,r.off==r.val.length&&t.pop(),n}if("name"==r.typ)return t.pop(),r;var i=FromPS.getFToken(r.val,e);return null==i&&(t.pop(),0!=t.length&&(i=FromPS.getFToken(t[t.length-1].val,e))),i},FromPS.getFToken=function(t,e){FromPS.skipWhite(t);var r=FromPS.isWhite,n=FromPS.isSpecl,i=t.off,a=t.buff,s=null;if(i>=a.length)return null;var o=a[i],u=String.fromCharCode(o);if(i++,"("==u){for(var h=0,l=i;41!=a[l]||0!=h;)40==a[l]&&h++,41==a[l]&&h--,92==a[l]&&l++,l++;for(var f=[],c=0;c<l-i;c++)f.push(a[i+c]);i=l+1,s={typ:"string",val:f=FromPS.getString(f)}}else if("{"==u||"}"==u||"["==u||"]"==u)s={typ:"name",val:u};else if("<"==u&&60==a[i]||">"==u&&62==a[i])s={typ:"name",val:"<"==u?"<<":">>"},i++;else if("<"==u){if(a[i]=="~".charCodeAt(0)){t.off=i+1;var d=FromPS.F.ASCII85Decode(t);f=[];for(c=0;c<d.length;c++)f.push(d[c]);i=t.off}else{for(l=i;62!=a[l];)l++;f=[];FromPS.readHex({buff:a,off:i},1e9,f),i=l+1}s={typ:"string",val:f}}else{for(l=i;l<a.length&&!r(a[l])&&(!n(a[l])||47==a[l]&&47==a[l-1]&&l==i);)l++;var p=FromPS.B.readASCII(a,i-1,l-i+1);i=l;var v=parseFloat(p);if("true"==p||"false"==p)s={typ:"boolean",val:"true"==p};else if(isNaN(v))if("//"==p.slice(0,2)){var _=p.slice(2),g=FromPS.getFromStacks(_,e);if(null==g)throw"e";s=g}else s={typ:"name",val:p};else{var m=new Float32Array(1);m[0]=v,v=m[0],s={typ:-1==p.indexOf(".")?"integer":"real",val:v}}}return t.off=i,s},FromPS.isSpecl=function(t){return-1!=[40,41,60,62,91,93,123,125,37,47].indexOf(t)},FromPS.isWhite=function(t){return 9==t||10==t||12==t||13==t||32==t},FromPS.isEOL=function(t){return 10==t||13==t},FromPS.getString=function(t){for(var e=[],r=["n","r","t","b","f","\\","(",")"," ","/"],n=["\n","\r","\t","\b","\f","\\","(",")"," ","/"],i=0;i<t.length;i++){var a=t[i];if("\\"==String.fromCharCode(a)){var s=String.fromCharCode(t[i+1]);if(i++,"\r"==s||"\n"==s)continue;var o=r.indexOf(s);if(-1!=o)e.push(n[o].charCodeAt(0));else{var u=s+String.fromCharCode(t[i+1])+String.fromCharCode(t[i+2]);i+=2,e.push(parseInt(u,8))}}else e.push(a)}return e},FromPS.makeString=function(t){for(var e=["n","r","t","b","f","\\","(",")"],r=["\n","\r","\t","\b","\f","\\","(",")"],n=[],i=0;i<t.length;i++){var a=t[i],s=r.indexOf(String.fromCharCode(a));-1==s?n.push(a):n.push(92,e[s].charCodeAt(0))}return n},FromPS.readHex=function(t,e,r){for(var n=0,i=-1,a=t.off;n!=e;){var s=t.buff[a];a++;var o=0;if(47<s&&s<58)o=s-48;else if(96<s&&s<103)o=10+s-97;else{if(!(64<s&&s<71)){if(62==s)break;continue}o=10+s-65}-1==i?i=o:(r[n]=i<<4|o,i=-1,n++)}t.off=a},FromPS.getShadingFill=function(t,e){var r=t["/ShadingType"],n=t["/ColorSpace"],i=t["/Extend"],a=t["/Coords"].slice(0);null==i&&(i=[!1,!1]);var s="";if(2==r)s="lin";else{if(3!=r)return void console.log("Unknown shading type",r);s="rad"}var o,u,h=t["/Function"];if(h instanceof Array){for(var l,f=h.length,c=0;c<f;c++){var d=FromPS.getGrad(h[c],"/DeviceGray");if(0==c)l=d;else for(var p=l.length,v=0;v<p;v++)l[v][1][c]=d[v][1][0]}if("/DeviceCMYK"==n)for(c=0;c<l.length;c++)l[c][1]=UDOC.C.cmykToRgb(l[c][1]);o=l}else o=FromPS.getGrad(h,n);if("rad"==s&&a[2]>a[5]){a=a.slice(3).concat(a.slice(0,3)),i.reverse(),o.reverse();for(c=0;c<o.length;c++)o[c][0]=1-o[c][0]}i[0]||"rad"==s||((u=o[0])[0]+=.002,o.unshift([.001,u[1].slice(),0]));i[1]||((u=o[o.length-1])[0]-=.002,o.push([0,999,u[1].slice(),0]));return{typ:s,mat:e,grad:o,crds:a}},FromPS.getGrad=function(t,e){var r,i=FromPS._normColor,a=t["/Functions"],s=t["/FunctionType"],o=t["/Bounds"],u=t["/Encode"];if(0==s){r=[],n=Math.min(4,t["/Size"][0]);for(var h=0;h<=n;h++)r.push([h/n,i(t,[h/n],e)])}else if(2==s)r=[[0,i(t,[0],e)],[1,i(t,[1],e)]];else{var l=u[0];r=[],(0==o.length||o[0]>0)&&r.push([0,i(a[0],[l],e)]);for(h=0;h<o.length;h++)r.push([o[h],i(a[h],[1-l],e)]);(0==o.length||o[o.length-1]<1)&&r.push([1,i(a[a.length-1],[1-l],e)])}return r},FromPS._normColor=function(t,e,r){var n,i="/DeviceCMYK",a=FromPS.Func(t,e);if(r[3]&&r[3]["/Length"]){if(a=FromPS.Func(r[3],a),r[2]!=i&&4!=a.length)throw console.log(a,r),"unknown color profile";n=i}else if("/ICCBased"==r[0]&&r[1]){var s=r[1]["/N"];if(4==s)n=i;else{if(3!=s)throw s;n="/DeviceRGB"}}else n=1==r.length?r[0]:r[2]==i?i:r;if("/DeviceRGB"==n)a=a;else if(n==i)a=UDOC.C.cmykToRgb(a);else{if("/DeviceGray"!=n)throw"Unknown color space "+n;a=[a[0],a[0],a[0]]}return a},FromPS.Func=function(t,e){for(var r=FromPS.intp,n=t["/Domain"],i=t["/Range"],a=t["/FunctionType"],s=[],o=0;o<e.length;o++)e[o]=Math.max(n[2*o],Math.min(n[2*o+1],e[o]));if(0==a){var u=t["/Encode"],h=t["/Size"],l=t["/Decode"],f=i.length/2;null==u&&(u=[0,h[0]-1]),null==l&&(l=i);for(o=0;o<e.length;o++){var c=r(e[o],n[2*o],n[2*o+1],u[2*o],u[2*o+1]);e[o]=Math.max(0,Math.min(h[o]-1,c))}for(var d=t["/DataSource"],p=0;p<f;p++){var v,_=Math.round(e[0]);v=r(v=d?d.charCodeAt(f*_+p):FromPS.GS(t)[f*_+p],0,255,l[2*p],l[2*p+1]),s.push(v)}}else if(2==a){var g=t["/C0"],m=t["/C1"],y=t["/N"];for(_=e[0],o=0;o<g.length;o++)s[o]=g[o]+Math.pow(_,y)*(m[o]-g[o])}else if(4==a){var b=FromPS._getEnv([0,0,0,0]);b.pgOpen=!0;var w=[],E=[],C=(d=FromPS._getDictStack([],{}),[]);C.push({typ:"file",val:{buff:FromPS.GS(t),off:0}});for(var D=!0;D;)D=FromPS.step(E,d,C,w,b,{},FromPS.operator);var S=E.pop();S.off=0,C.push(S);for(o=0;o<e.length;o++)E.push({typ:"real",val:e[o]});for(D=!0;D;)D=FromPS.step(E,d,C,w,b,{},FromPS.operator);for(o=0;o<E.length;o++)s.push(E[o].val)}if(i)for(o=0;o<s.length;o++)s[o]=Math.max(i[2*o],Math.min(i[2*o+1],s[o]));return s},FromPS.intp=function(t,e,r,n,i){return n+(t-e)*(i-n)/(r-e)},FromPS.GS=function(t){if(null==t.stream){var e=t.buff;delete t.buff;var r=t["/Filter"],n=t["/DecodeParms"];if(null!=r){for(var i="string"==typeof r?[r]:r,a=!1,s=0;s<i.length;s++){var o=i[s],u={buff:e,off:0};if("/FlateDecode"==o)e=FromPS.F.FlateDecode(u);else if("/ASCIIHexDecode"==o)e=FromPS.F.HexDecode(u);else if("/ASCII85Decode"==o)e=FromPS.F.ASCII85Decode(u);else{if("/DCTDecode"!=o&&"/CCITTFaxDecode"!=o&&"/JPXDecode"!=o&&"/JBIG2Decode"!=o)throw console.log(o,e),"e";a=!0}}a||delete t["/Filter"]}if(null!=n&&(n instanceof Array&&(n=n[0]),null!=n["/Predictor"]&&1!=n["/Predictor"])){var h=n["/Columns"],l=n["/Colors"]?n["/Colors"]:1,f=l*h,c=e.length/(f+1);FromPS._filterZero(e,0,h,c,l),e=e.slice(0,c*f)}t.stream=e}return t.stream},FromPS._filterZero=function(t,e,r,n,i){for(var a=i*r,s=FromPS._paeth,o=0;o<n;o++){var u=e+o*a,h=u+o+1,l=t[h-1];if(0==l)for(var f=0;f<a;f++)t[u+f]=t[h+f];else if(1==l){for(f=0;f<i;f++)t[u+f]=t[h+f];for(f=i;f<a;f++)t[u+f]=t[h+f]+t[u+f-i]&255}else if(0==o){for(f=0;f<i;f++)t[u+f]=t[h+f];if(2==l)for(f=i;f<a;f++)t[u+f]=255&t[h+f];if(3==l)for(f=i;f<a;f++)t[u+f]=t[h+f]+(t[u+f-i]>>1)&255;if(4==l)for(f=i;f<a;f++)t[u+f]=t[h+f]+s(t[u+f-i],0,0)&255}else{if(2==l)for(f=0;f<a;f++)t[u+f]=t[h+f]+t[u+f-a]&255;if(3==l){for(f=0;f<i;f++)t[u+f]=t[h+f]+(t[u+f-a]>>1)&255;for(f=i;f<a;f++)t[u+f]=t[h+f]+(t[u+f-a]+t[u+f-i]>>1)&255}if(4==l){for(f=0;f<i;f++)t[u+f]=t[h+f]+s(0,t[u+f-a],0)&255;for(f=i;f<a;f++)t[u+f]=t[h+f]+s(t[u+f-i],t[u+f-a],t[u+f-i-a])&255}}}return t},FromPS._paeth=function(t,e,r){var n=t+e-r,i=Math.abs(n-t),a=Math.abs(n-e),s=Math.abs(n-r);return i<=a&&i<=s?t:a<=s?e:r},FromPDF.Parse=function(t,e){t=new Uint8Array(t);for(var r=0;32==t[r];)r++;0!=r&&(t=new Uint8Array(t.buffer,r,t.length-r));for(var n=t.length-3;"%%E"!=FromPS.B.readASCII(t,n,3);)n--;var i=n;for(n--;FromPS.isEOL(t[n]);)n--;for(;!FromPS.isEOL(t[n]);)n--;var a=parseInt(FromPS.B.readASCII(t,n+1,i-n-1));if(isNaN(a))throw"no xref";var s=[],o=FromPDF.readXrefTrail(t,a,s),u={buff:t,off:0},h=o["/Root"];"ref"==h.typ&&(o["/Root"]=FromPDF.getIndirect(h.ind,h.gen,u,s));var l=o["/Root"]["/Pages"];"ref"==l.typ&&(o["/Root"]["/Pages"]=FromPDF.getIndirect(l.ind,l.gen,u,s));for(var f=[o["/Root"]["/Pages"]];0!=f.length;){var c=f.pop();if("/Pages"==c["/Type"])for(var d=c["/Kids"],p=0;p<d.length;p++)"ref"==d[p].typ&&(d[p]=FromPDF.getIndirect(d[p].ind,d[p].gen,u,s)),f.push(d[p])}Date.now();FromPDF.render(o["/Root"],e,o),e.Done()},FromPDF.render=function(t,e,r){var n=["CS","cs","SCN","scn","SC","sc","sh","Do","gs","ID","EI","cm","y","v","B","B*","BT","ET","Tj","TJ","Tf","Tm","Td","T*","Tc","Tw","Tz","TL","Tr","Ts","MP","DP","BMC","BDC","EMC","BX","EX","ri"],i={J:"setlinecap",j:"setlinejoin",w:"setlinewidth",d:"setdash",M:"setmiterlimit",i:"setflat",q:"gsave",Q:"grestore",m:"moveto",l:"lineto",c:"curveto",h:"closepath",re:"_drawRect_",W:"clip","W*":"eoclip",f:"fill",F:"fill","f*":"eofill",S:"stroke",b:"h B","b*":"h B*",n:"newpath",RG:"/DeviceRGB  CS SCN",rg:"/DeviceRGB  cs scn",G:"/DeviceGray CS SCN",g:"/DeviceGray cs scn",K:"/DeviceCMYK CS SCN",k:"/DeviceCMYK cs scn",TD:"dup neg TL Td",'"':"exch Tc exch Tw '","'":"T* Tj",s:"h S",BI:"/BI"};i=FromPS.makeProcs(i);for(var a=[t["/Pages"]];0!=a.length;){var s=a.pop();if("/Pages"!=s["/Type"]){0;var o=s["/Contents"];null==o.length&&(o=[o]);var u=s["/MediaBox"];null==u&&(u=t["/Pages"]["/MediaBox"]);var h=FromPS._getEnv(u);h.pgOpen=!0;var l=[],f=[],c=FromPS._getDictStack(n,i),d=[];if(e.StartPage(u[0],u[1],u[2],u[3]),r["/Encrypt"])0==a.length&&alert("Encrypted PDF is not supported yet.");else for(var p=0;p<o.length;p++){for(var v=FromPS.GS(o[p]),_=v.length-1;0==v[_];)_--;v=new Uint8Array(v.buffer,0,_+1),d.push({typ:"file",val:{buff:v,off:0,extra:s,clgrp:!1}});for(var g=!0;g;)g=FromPS.step(f,c,d,l,h,e,FromPDF.operator)}e.ShowPage()}else for(var m=s["/Kids"],y=m.length-1;y>=0;y--)a.push(m[y])}},FromPDF.addCmd=function(t,e,r){for(var n=t.length,i=new Uint8Array(n),a=0;a<n;a++)i[a]=t.charCodeAt(a);e.push({typ:"file",val:{buff:i,off:0,extra:r}})},FromPDF.operator=function(t,e,r,n,i,a,s){for(var o=a.gst,u=n.length-1;"file"!=n[u].typ;)u--;var h=n[u].val,l=h.extra["/Resources"];if("Do"==t){var f=e.pop().val,c=l["/XObject"][f],d=c["/Subtype"],p=FromPS.GS(c),v=c["/Matrix"];if("/Form"==d){var _=!1;if(null!=c["/Group"]&&(_=!0),v){var g=v.slice(0);UDOC.M.invert(g),FromPDF.addCmd(g.join(" ")+" cm",n,c)}n.push({typ:"file",val:{buff:p,off:0,extra:c,clgrp:_}}),v&&FromPDF.addCmd(v.join(" ")+" cm",n,c)}else if("/Image"==d){var m,y;c["/SMask"]&&(m=FromPDF.getImage(c["/SMask"]),y=FromPDF.getJBIG2Glob(c["/SMask"]));var b=c["/Width"],w=c["/Height"],E=c["/ColorSpace"],C=FromPDF.getImage(c),D=FromPDF.getJBIG2Glob(c);if(1==c["/ImageMask"]){m=C,y=D,C=new Uint8Array(b*w*4),D=null;for(var S=255*o.colr[0],T=255*o.colr[1],x=255*o.colr[2],F=0;F<b*w*4;F+=4)C[F]=S,C[F+1]=T,C[F+2]=x,C[F+3]=255}s.PutImage(o,C,b,w,m,D,y)}else console.log("Unknown XObject",d)}else if("gs"==t){var A=e.pop().val,P=l["/ExtGState"][A];for(var M in P){var I=P[M];"/Type"!=M&&("/CA"==M?o.CA=h.clgrp?o.CA*I:I:"/ca"==M?o.ca=h.clgrp?o.ca*I:I:"/BM"==M?h.clgrp&&"/Normal"!=o.bmode||(o.bmode=I):"/LC"==M?o.lcap=I:"/LJ"==M?o.ljoin=I:"/LW"==M?o.lwidth=I:"/ML"==M?o.mlimit=I:"/SA"==M?o.SA=I:"/OPM"==M?o.OPM=I:"/AIS"==M?o.AIS=I:"/OP"==M?o.OP=I:"/op"==M?o.op=I:"/SMask"==M?o.SMask="":"/SM"==M?o.SM=I:"/HT"==M||"/TR"==M||console.log("Unknown gstate property: ",M,I))}}else if("ID"==t){for(var k={};;){if("/BI"==(I=e.pop().val))break;k[e.pop().val]=I}h.off++;b=k["/W"],w=k["/H"],C=new Uint8Array(4*(b*w)),E=k["/CS"];for(var U=k["/BPC"],O=h.off;!FromPS.isWhite(h.buff[O])||69!=h.buff[O+1]||73!=h.buff[O+2];)O++;p=h.buff.slice(h.off,O);h.off+=p.length,"/Fl"==k["/F"]&&(p=FromPS.F.FlateDecode({buff:p,off:0}),delete k["/F"]),"/G"==E&&null==k["/F"]?FromPDF.plteImage(p,0,C,null,b,w,U):null!=E[0].typ?FromPDF.plteImage(p,0,C,E[3].val,b,w,U):C=p,s.PutImage(o,C,b,w)}else if("n"==t||"BT"==t||"EI"==t);else if("ET"==t)o.font.Tm=[1,0,0,1,0,0],o.font.Tlm=o.font.Tm.slice(0);else if("y"==t||"v"==t){g=o.ctm.slice(0);UDOC.M.invert(g);M=UDOC.M.multPoint(g,o.cpos);var B=e.pop().val,R=e.pop().val,L=e.pop().val,N=e.pop().val;"y"==t?UDOC.G.curveTo(o,N,L,R,B,R,B):UDOC.G.curveTo(o,M[0],M[1],N,L,R,B)}else if("B"==t||"B*"==t)s.Fill(o,"B*"==t),s.Stroke(o),UDOC.G.newPath(o);else if("cm"==t||"Tm"==t){var z=[];for(F=0;F<6;F++)z.push(e.pop().val);z.reverse(),"cm"==t?(UDOC.M.concat(z,o.ctm),o.ctm=z):(o.font.Tm=z,o.font.Tlm=z.slice(0))}else if("Td"==t||"T*"==t){var G=0,j=0;"T*"==t?(G=0,j=-o.font.Tl):(j=e.pop().val,G=e.pop().val);var q=[1,0,0,1,G,j];UDOC.M.concat(q,o.font.Tlm),o.font.Tm=q,o.font.Tlm=q.slice(0)}else if("Tf"==t){var H=e.pop().val,X=e.pop().val;o.font.Tf=X,o.font.Tfs=H}else if("Tj"==t||"TJ"==t){var W=e.pop();W="string"==W.typ?[W]:W.val;l["/Font"][X];var V=o.font.Tf,Z=(X=l["/Font"][V],UDOC.M.getScale(o.font.Tm)*o.font.Tfs/1e3);for(F=0;F<W.length;F++)if("string"==W[F].typ){var Y=FromPDF.getString(W[F].val,X);if(W[F+1]&&"string"!=W[F+1].typ){var J=W[F+1].val;Y[1]+=-J,-900<J&&J<-100&&(Y[0]+=" ")}o.font.Tf=Y[2],s.PutText(o,Y[0],Y[1]/1e3),o.font.Tf=V,o.font.Tm[4]+=Z*Y[1]}else 0==F&&(o.font.Tm[4]+=-Z*W[F].val)}else if("Tc"==t)o.font.Tc=e.pop().val;else if("Tw"==t)o.font.Tw=e.pop().val;else if("Tz"==t)o.font.Th=e.pop().val;else if("TL"==t)o.font.Tl=e.pop().val;else if("Tr"==t)o.font.Tmode=e.pop().val;else if("Ts"==t)o.font.Trise=e.pop().val;else if("CS"==t||"cs"==t){E=e.pop().val;"CS"==t?o.sspace=E:o.space=E}else if("SCN"==t||"scn"==t||"SC"==t||"sc"==t){var K="SCN"==t||"SC"==t,Q=K?o.sspace:o.space,$=null,tt=l?l["/ColorSpace"]:null;if("/Lab"==(E=null!=tt&&null!=tt[Q]?tt[Q][1]&&tt[Q][1]["/Alternate"]?tt[Q][1]["/Alternate"]:"string"==typeof tt[Q]?tt[Q]:tt[Q][0]:Q)||"/DeviceRGB"==E||"/DeviceN"==E||"/ICCBased"==E&&3==tt[Q][1]["/N"])($=[e.pop().val,e.pop().val,e.pop().val]).reverse();else if("/DeviceCMYK"==E||"/ICCBased"==E&&4==tt[Q][1]["/N"]){var et=[e.pop().val,e.pop().val,e.pop().val,e.pop().val];et.reverse(),$=UDOC.C.cmykToRgb(et)}else if("/DeviceGray"==E||"/CalGray"==E){var rt=FromPS.nrm(e.pop().val);$=[rt,rt,rt]}else if("/Separation"==E){var nt=FromPS.Func(tt[Q][3],[e.pop().val]);$=tt&&tt[Q]&&"/DeviceCMYK"==tt[Q][2]?UDOC.C.cmykToRgb(nt):UDOC.C.labToRgb(nt)}else{if("/Pattern"!=E)throw console.log(Q,E,e,tt,l),"e";var it=l["/Pattern"][e.pop().val];if(1==it["/PatternType"])return void console.log("tile pattern");$=FromPS.getShadingFill(it["/Shading"],it["/Matrix"])}K?o.COLR=$:o.colr=$}else if("sh"==t){var at=l["/Shading"][e.pop().val],st=o.colr,ot=o.pth;o.pth=o.cpth,o.cpth=UDOC.G.rectToPath(a.bb),o.colr=FromPS.getShadingFill(at,o.ctm.slice(0)),s.Fill(o),o.colr=st,o.pth=ot}else if("MP"==t||"BMC"==t||"ri"==t)e.pop();else if("DP"==t||"BDC"==t)e.pop(),e.pop();else if("EMC"!=t&&"BX"!=t&&"EX"!=t)throw t},FromPDF.getJBIG2Glob=function(t){var e=t;return null==(e=e["/DecodeParms"])||null==(e=e["/JBIG2Globals"])?null:e.buff},FromPDF.getImage=function(t){var e=t["/Width"],r=t["/Height"],n=e*r,i=FromPS.GS(t),a=t["/Filter"],s=t["/ColorSpace"],o=t["/BitsPerComponent"],u=t["/Matte"],h=t.image;if(null==h){var l=t["/Mask"];if(s&&"/Indexed"==s[0]){if(null!=s[3].length){var f=s[3];p=new Uint8Array(768);for(var c=0;c<f.length;c++)p[c]=f.charCodeAt(c)}else p=FromPS.GS(s[3]);if("/DeviceCMYK"==s[1]||s[1]&&s[1][1]&&4==s[1][1]["/N"]){var d=p,p=new Uint8Array(768);for(c=0;c<256;c++){var v=(y=c<<2)-c,_=UDOC.C.cmykToRgb([d[y]/255,d[y+1]/255,d[y+2]/255,d[y+3]/255]);p[v]=255*_[0],p[v+1]=255*_[1],p[v+2]=255*_[2]}}var g=new Uint8Array(4*n);FromPDF.plteImage(i,0,g,p,e,r,o,l),h=g}else if(null==a&&s&&"/DeviceGray"==s){p=[0,0,0,255,255,255],g=new Uint8Array(4*n);t["/Decode"]&&1==t["/Decode"][0]&&p.reverse(),1==t["/ImageMask"]&&p.reverse(),FromPDF.plteImage(i,0,g,1==o?p:null,e,r,o,l),h=g}else if(null==a&&s&&("/DeviceCMYK"==s||"/ICCBased"==s[0]&&s[1]&&4==s[1]["/N"])){g=new Uint8Array(4*n);var m=[0,0,0,0];for(c=0;c<n;c++){var y=4*c;m[0]=i[y]*(1/255),m[1]=i[y+1]*(1/255),m[2]=i[y+2]*(1/255),m[3]=i[y+3]*(1/255);_=UDOC.C.cmykToRgb(m);g[y]=~~(255*_[0]+.5),g[y+1]=~~(255*_[1]+.5),g[y+2]=~~(255*_[2]+.5),g[y+3]=255}h=g}else if(e*r*3<=i.length){Math.round(255/((1<<o)-1));for(var b=Math.ceil(3*e*o/8),w=(g=new Uint8Array(4*n),0);w<r;w++)for(var E=b*w,C=0;C<e;C++){var D=3*C;g[y=4*(w*e+C)]=FromPDF.getBitNum(i,E,D,o),g[y+1]=FromPDF.getBitNum(i,E,D+1,o),g[y+2]=FromPDF.getBitNum(i,E,D+2,o),g[y+3]=255}h=g}else h=i;if(u&&"000"!=u.join("")){var S=Math.round(255*u[0]),T=Math.round(255*u[1]),x=Math.round(255*u[2]);for(c=0;c<h.length;c+=4)h[c]=Math.max(h[c],S),h[c+1]=Math.max(h[c+1],T),h[c+2]=Math.max(h[c+2],x)}t.image=h}return h},FromPDF.plteImage=function(t,e,r,n,i,a,s,o){for(var u=Math.round(255/((1<<s)-1)),h=Math.ceil(i*s/8),l=0;l<a;l++)for(var f=e+h*l,c=0;c<i;c++){var d=FromPDF.getBitNum(t,f,c,s),p=l*i+c<<2;if(n){var v=3*d;r[p]=n[v],r[p+1]=n[v+1],r[p+2]=n[v+2]}else{var _=d*u;r[p]=_,r[p+1]=_,r[p+2]=_}r[p+3]=255,o&&o[0]<=d&&d<=o[1]&&(r[p+3]=0)}},FromPDF.getBitNum=function(t,e,r,n){var i=0;return 8==n?i=t[e+r]:4==n?i=t[e+(r>>1)]>>(1-(1&r)<<2)&15:2==n?i=t[e+(r>>2)]>>(3-(3&r)<<1)&3:1==n&&(i=t[e+(r>>3)]>>(7-(7&r)<<0)&1),i},FromPDF.getString=function(t,e){var r=e["/Subtype"],n="",i=0,a=null,s=e["/ToUnicode"],o=e["/Encoding"],u=e;if("/Type0"==r&&(u=e["/DescendantFonts"][0]),null!=s)n=FromPDF.toUnicode(t,s);else if("/WinAnsiEncoding"==o)n=FromPDF.encFromMap(t,FromPDF._win1252);else if("/MacRomanEncoding"==o)n=FromPDF.encFromMap(t,FromPDF._macRoman);else if("/Type0"==r){var h=0;"/Identity-H"==o&&(h=31);for(var l=0;l<t.length;l+=2){var f=t[l]<<8|t[l+1];n+=String.fromCharCode(f+h)}}else if(null!=o&&"/Encoding"==o["/Type"]){var c=o["/Differences"],d=o["/BaseEncoding"],p=null;if("/WinAnsiEncoding"==d&&(p=FromPDF._win1252),"/MacRomanEncoding"==d&&(p=FromPDF._macRoman),c){n="";for(var v=0;v<t.length;v++){var _=t[v],g=-5,m=!1;for(l=0;l<c.length;l++)if("string"==typeof c[l]){if(_==g){n+=FromPDF.fromCName(c[l].slice(1)),m=!0;break}g++}else g=c[l];if(!m&&null!=p){var y=p.indexOf(_);-1!=y&&(_=String.fromCharCode(p[y+1])),n+=String.fromCharCode(_)}}}}else n=FromPS.readStr(t);if("/Type0"==r){if(null==(D=u["/W"]))i=1e3*n.length*.4;else for(v=0;v<t.length;v+=2){var b=t[v]<<8|t[v+1],w=!1;for(l=0;l<D.length;l+=2){var E=D[l],C=D[l+1];C.length?0<=b-E&&b-E<C.length&&(i+=C[b-E],w=!0):(E<=b&&b<=C&&(i+=D[l+2],w=!0),l++)}w||(i+=D[1][0])}}else{if("/Type1"!=r&&"/Type3"!=r&&"/TrueType"!=r)throw"unknown font type";var D,S=e["/FirstChar"];if(D=e["/Widths"])for(v=0;v<t.length;v++)i+=D[t[v]-S];else i=1e3*n.length*.4,console.log("approximating word width")}var T=u["/FontDescriptor"];if(T)if(T.psName)a=T.psName;else{var x,F=["","2","3"];for(v=0;v<3;v++)T["/FontFile"+F[v]]&&(x="/FontFile"+F[v]);if(x){var A=FromPS.GS(T[x]);null!=x&&A&&65536==FromPS.B.readUint(A,0)&&(a=T.psName=FromPDF._psName(A))}}return null==a&&e["/BaseFont"]&&(a=e["/BaseFont"].slice(1)),null==a&&(a="SourceHanSansSC-Regular"),[n,i,a.split("+").pop()]},FromPDF._psName=function(t){for(var e=FromPS.B.readUshort,r=e(t,4),n=0,i=0;i<r;i++){var a=FromPS.B.readASCII(t,12+16*i,4),s=FromPS.B.readUint(t,12+16*i+8);if("name"==a){n=s;break}}if(0==n)return null;var o=e(t,n+2),u=n+6,h=n+6;for(i=0;i<o;i++){e(t,h);var l,f=e(t,h+2),c=(e(t,h+4),e(t,h+6)),d=e(t,h+8),p=e(t,h+10);h+=12;var v=u+12*o+p;if(1==f||10==f||3==f){l="";for(var _=1;_<d;_+=2)l+=String.fromCharCode(t[v+_])}if(0!=f&&2!=f||(l=FromPS.B.readASCII(t,v,d)),6==c&&null!=l&&"OTS"!=l.slice(0,3))return l.replace(/\s/g,"")}return null},FromPDF.encFromMap=function(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n],a=e.indexOf(i);-1!=a&&(i=e[a+1]),r+=String.fromCharCode(i)}return r},FromPDF._win1252=[128,8364,130,8218,131,402,132,8222,133,8230,134,8224,135,8225,136,710,137,8240,138,352,139,8249,140,338,142,381,145,8216,146,8217,147,8220,148,8221,149,8226,150,8211,151,8212,152,732,153,8482,154,353,155,8250,156,339,158,382,159,376],FromPDF._macRoman=[128,196,129,197,130,199,131,201,132,209,133,214,134,220,135,225,136,224,137,226,138,228,139,227,140,229,141,231,142,233,143,232,144,234,145,235,146,237,147,236,148,238,149,239,150,241,151,243,152,242,153,244,154,246,155,245,156,250,157,249,158,251,159,252,160,8224,161,176,162,162,163,163,164,167,165,8226,166,182,167,223,168,174,169,169,170,8482,171,180,172,168,173,9824,174,198,175,216,176,8734,177,177,178,8804,179,8805,180,165,181,181,182,8706,183,8721,184,8719,185,960,186,8747,187,170,188,186,189,937,190,230,191,248,192,191,193,161,194,172,195,8730,196,402,197,8776,198,8710,199,171,200,187,201,8230,202,160,203,192,204,195,205,213,206,338,207,339,208,8211,209,8212,210,8220,211,8221,212,8216,213,8217,214,247,215,9674,216,255,217,376,218,8260,219,8364,220,8249,221,8250,222,64257,223,64258,224,8225,225,183,226,8218,227,8222,228,8240,229,194,230,202,231,193,232,203,233,200,234,205,235,206,236,207,237,204,238,211,239,212,240,63743,241,210,242,218,243,219,244,217,245,305,246,710,247,732,248,175,249,728,250,729,251,730,252,184,253,733,254,731,255,711],FromPDF.fromCName=function(t){if(1==t.length)return t;if("uni"==t.slice(0,3))return String.fromCharCode(parseInt(t.slice(3),16));var e={space:32,exclam:33,quotedbl:34,numbersign:35,dollar:36,percent:37,parenleft:40,parenright:41,asterisk:42,plus:43,comma:44,hyphen:45,period:46,slash:47,zero:48,one:49,two:50,three:51,four:52,five:53,six:54,seven:55,eight:56,nine:57,colon:58,semicolon:59,less:60,equal:61,at:64,bracketleft:91,bracketright:93,underscore:95,braceleft:123,braceright:125,dieresis:168,circlecopyrt:169,Eacute:201,Ccaron:268,ccaron:269,dotlessi:305,tcaron:357,Zcaron:381,zcaron:382,alpha:945,phi:966,endash:8211,emdash:8212,asteriskmath:8727,quoteright:8217,quotedblleft:8220,quotedblright:8221,bullet:8226,minus:8706,fi:64257,fl:64258}[t];return null==e?("g"!=t.charAt(0)&&console.log("unknown character "+t),t):String.fromCharCode(e)},FromPDF.toUnicode=function(t,e){var r=e.cmap,n="";if(null==r){var i={buff:FromPS.GS(e),off:0},a=[],s=FromPS._getDictStack({}),o=[{typ:"file",val:i}],u=[],h=FromPS._getEnv([0,0,1,1]);h.pgOpen=!0;for(var l=!0;l;)l=FromPS.step(a,s,o,u,h,null,FromPS.operator,!0);r=h.res.CMap.val,e.cmap=r}for(var f in r){r=r[f].val;break}for(var c=r.bfrange,d=r.bfchar,p=r.bpc,v=0;v<t.length;v+=p){var _=t[v];2==p&&(_=_<<8|t[v+1]);var g=!1;if(!g&&c)for(var m=0;m<c.length;m+=3){var y=c[m],b=c[m+1],w=c[m+2];if(y<=_&&_<=b){null==w.length?_+=w-y:_=w[_-y],g=!0;break}}if(!g&&d)for(m=0;m<d.length;m+=2)if(d[m]==_){_=d[m+1],g=!0;break}n+=String.fromCharCode(_)}return n},FromPDF.readXrefTrail=function(t,e,r){if("xref"==FromPS.B.readASCII(t,e,4)){for(13==t[l=e+4]&&l++,10==t[l]&&l++;;){if("trailer"==FromPS.B.readASCII(t,l,7)){l+=8;break}for(var n=l;!FromPS.isEOL(t[l]);)l++;var i=FromPS.B.readASCII(t,n,l-n);i=i.split(" ");var a=parseInt(i[1]);13==t[l]&&l++,10==t[l]&&l++;for(var s=0;s<a;s++){var o=parseInt(i[0])+s;null==r[o]&&(r[o]={off:parseInt(FromPS.B.readASCII(t,l,10)),gen:parseInt(FromPS.B.readASCII(t,l+11,5)),chr:FromPS.B.readASCII(t,l+17,1),val:null,opn:!1}),l+=20}}var u={buff:t,off:l},h=FromPDF.readObject(u,u,r);return h["/Prev"]&&FromPDF.readXrefTrail(t,h["/Prev"],r),h}for(var l=e;!FromPS.isEOL(t[l]);)l++;l++;for(var f=FromPDF.readObject({buff:t,off:l},u,null),c=0,d=FromPS.GS(f),p=f["/W"],v=f["/Index"]?f["/Index"][0]:0;c<d.length;){var _=FromPDF.getInt(d,c,p[0]);c+=p[0];var g=FromPDF.getInt(d,c,p[1]);c+=p[1];var m=FromPDF.getInt(d,c,p[2]);c+=p[2];l=0;var y=0,b="n";0==_&&(l=g,y=m,b="f"),1==_&&(l=g,y=m,b="n"),2==_&&(l=g,y=m,b="s"),r[v]={off:l,gen:y,chr:b,val:null,opn:!1},v++}f["/Prev"]&&FromPDF.readXrefTrail(t,f["/Prev"],r);var w={buff:t,off:0},E=["/Root","/Info"];for(s=0;s<E.length;s++){var C=E[s],D=f[C];D&&"ref"==D.typ&&(f[C]=FromPDF.getIndirect(D.ind,D.gen,w,r))}return f},FromPDF.getInt=function(t,e,r){if(0==r)return 0;if(1==r)return t[e];if(2==r)return t[e]<<8|t[e+1];if(3==r)return t[e]<<16|t[e+1]<<8|t[e+2];throw"e"},FromPDF.getIndirect=function(t,e,r,n){var i=n[t];if("f"==i.chr)return null;if(null!=i.val)return i.val;if(i.opn)return{typ:"ref",ind:t,gen:e};i.opn=!0;var a,s=r.off;if("s"==i.chr){for(var o=FromPDF.getIndirect(i.off,i.gen,r,n),u={buff:FromPS.GS(o),off:0},h=0,l=0;h!=t;)h=FromPS.getFToken(u).val,l=FromPS.getFToken(u).val;u.off=l+o["/First"],a=FromPDF.readObject(u,r,n)}else{r.off=i.off;FromPS.getFToken(r),FromPS.getFToken(r),FromPS.getFToken(r);a=FromPDF.readObject(r,r,n)}return i.val=a,r.off=s,i.opn=!1,a},FromPDF.readObject=function(t,e,r){var n=FromPS.getFToken(t);if("integer"==n.typ){var i=t.off,a=FromPS.getFToken(t);if("integer"==a.typ&&(FromPS.skipWhite(t),82==t.buff[t.off]))return t.off++,r&&r[n.val]?FromPDF.getIndirect(n.val,a.val,e,r):{typ:"ref",ind:n.val,gen:a.val};t.off=i}if("<<"==n.val)return FromPDF.readDict(t,e,r);if("["==n.val)return FromPDF.readArra(t,e,r);if("string"==n.typ){for(var s="",o=0;o<n.val.length;o++)s+=String.fromCharCode(n.val[o]);return s}return n.val},FromPDF.readDict=function(t,e,r){for(var n={};;){var i=t.off,a=FromPS.getFToken(t);if("name"==a.typ&&">>"==a.val)break;t.off=i;var s=FromPDF.readObject(t,e,r),o=FromPDF.readObject(t,e,r);n[s]=o}if(null!=n["/Length"]){var u=n["/Length"];FromPS.getFToken(t);13==t.buff[t.off]&&t.off++,10==t.buff[t.off]&&t.off++,n.buff=t.buff.slice(t.off,t.off+u),t.off+=u,FromPS.getFToken(t)}return n},FromPDF.readArra=function(t,e,r){for(var n=[];;){var i=t.off,a=FromPS.getFToken(t);if("name"==a.typ&&"]"==a.val)return n;t.off=i;var s=FromPDF.readObject(t,e,r);n.push(s)}},FromWMF.Parse=function(t,e){t=new Uint8Array(t);var r=0,n={fill:!1,strk:!1,bb:[0,0,1,1],lbb:[0,0,1,1],scl:1,fnt:{nam:"Arial",hgh:25,und:!1,orn:0,chrst:0},tclr:[0,0,0],talg:0},i=FromWMF.B.readShort,a=FromWMF.B.readUshort,s=FromWMF.B.readUint;if(2596720087==s(t,0)){var o=i(t,(r=6)+8);n.scl=120/o;for(var u=0;u<4;u++)n.bb[u]=Math.round(i(t,r)*n.scl),r+=2;r+=2,r+=6}e.StartPage(n.bb[0],n.bb[1],n.bb[2],n.bb[3]);var h=UDOC.getState(n.bb);a(t,r),a(t,r+=2),a(t,r+=2),s(t,r+=2),a(t,r+=4),s(t,r+=2),a(t,r+=4);r+=2;for(var l=[];;){var f=s(t,r)<<1,c=a(t,r+=4);r+=2;var d=FromWMF.K[c],p=r,v=null;if("EOF"==d)break;if("ESCAPE"==d){var _=a(t,r);p+=2;var g=FromWMF.K2[_];console.log(d,g)}else if("SETMAPMODE"==d||"SETPOLYFILLMODE"==d||"SETBKMODE"==d);else if("SELECTOBJECT"==d){var m=a(t,p);p+=2;var y=l[m];if("br"==y.t){if(n.fill=1!=y.stl,0==y.stl);else if(1!=y.stl)throw y.stl+" e";h.colr=y.clr}else if("pn"==y.t){var b=7&y.stl;if(n.strk=5!=b,0==b||6==b)h.lwidth=y.px;else if(5!=b)throw b+" e";0!=(4096&y.stl)?h.ljoin=2:0!=(8192&y.stl)?h.ljoin=0:h.ljoin=1,h.COLR=y.clr}else{if("fn"!=y.t)throw"e";n.fnt=y,h.font.Tf=y.nam,h.font.Tfs=Math.abs(y.hgh),h.font.Tun=y.und}}else if("DELETEOBJECT"==d){m=a(t,p);p+=2,l[m]=null}else if("SETWINDOWORG"==d||"SETWINDOWEXT"==d){var w="SETWINDOWORG"==d?0:2;n.lbb[w+1]=i(t,p),p+=2,n.lbb[w]=i(t,p),p+=2,FromWMF._updateCtm(n,h)}else if("CREATEBRUSHINDIRECT"==d)(v={t:"br"}).stl=a(t,p),p+=2,v.clr=[t[p]/255,t[p+1]/255,t[p+2]/255],p+=4,v.htc=a(t,p),p+=2;else if("CREATEPENINDIRECT"==d)(v={t:"pn"}).stl=a(t,p),p+=2,v.px=i(t,p),p+=2,v.py=i(t,p),p+=2,v.clr=[t[p]/255,t[p+1]/255,t[p+2]/255],p+=4;else if("CREATEFONTINDIRECT"==d){(v={t:"fn",nam:""}).hgh=i(t,p),p+=2,p+=4,v.orn=i(t,p)/10;var E=i(t,p+=2);for(p+=2,v.und=t[p+1],p+=2,v.stk=t[p],v.chrst=t[r+1],p+=2,p+=4;0!=t[p];)v.nam+=String.fromCharCode(t[p]),p++;E>500&&(v.nam+="-Bold")}else if("CREATEPALETTE"==d)v={t:"pl"};else if("SETTEXTCOLOR"==d)n.tclr=[t[p]/255,t[p+1]/255,t[p+2]/255];else if("SETTEXTALIGN"==d)n.talg=a(t,p);else if("MOVETO"==d)UDOC.G.moveTo(h,i(t,p+2),i(t,p));else if("LINETO"==d){if(0==h.pth.cmds.length){var C=h.ctm.slice(0);UDOC.M.invert(C);var D=UDOC.M.multPoint(C,h.cpos);UDOC.G.moveTo(h,D[0],D[1])}UDOC.G.lineTo(h,i(t,p+2),i(t,p));var S=n.fill;n.fill=!1,FromWMF._draw(e,h,n),n.fill=S}else if("POLYPOLYGON"==d){var T=a(t,p),x=p+=2;p+=2*T;for(u=0;u<T;u++){var F=a(t,x+2*u);p=FromWMF._drawPoly(t,p,F,h,!0)}FromWMF._draw(e,h,n)}else if("POLYGON"==d||"POLYLINE"==d){F=a(t,p);p+=2,p=FromWMF._drawPoly(t,p,F,h,"POLYGON"==d);S=n.fill;n.fill=S&&"POLYGON"==d,FromWMF._draw(e,h,n),n.fill=S}else if("RECTANGLE"==d||"ELLIPSE"==d){var A=i(t,p),P=i(t,p+=2),M=i(t,p+=2),I=i(t,p+=2);if(p+=2,"RECTANGLE"==d)UDOC.G.moveTo(h,I,M),UDOC.G.lineTo(h,P,M),UDOC.G.lineTo(h,P,A),UDOC.G.lineTo(h,I,A);else{var k=(I+P)/2,U=(M+A)/2;UDOC.G.arc(h,k,U,(A-M)/2,0,2*Math.PI,!1)}UDOC.G.closePath(h);S=n.fill;n.fill=!0,FromWMF._draw(e,h,n),n.fill=S}else if("STRETCHDIB"==d){s(t,p),a(t,p+=4);var O=i(t,p+=2),B=i(t,p+=2),R=(i(t,p+=2),i(t,p+=2),i(t,p+=2)),L=i(t,p+=2),N=i(t,p+=2),z=i(t,p+=2);p+=2;var G=FromWMF._loadDIB(t,p),j=h.ctm.slice(0);h.ctm=[1,0,0,1,0,0],UDOC.M.scale(h.ctm,L,-R),UDOC.M.translate(h.ctm,z,N+R),UDOC.M.concat(h.ctm,j),e.PutImage(h,G,B,O),h.ctm=j}else if("EXTTEXTOUT"==d){var q=i(t,p),H=i(t,p+=2);p+=2,h.font.Tm=[1,0,0,-1,0,0],UDOC.M.rotate(h.font.Tm,n.fnt.orn*Math.PI/180),UDOC.M.translate(h.font.Tm,H,q);var X=n.talg;if(6==(6&X))h.font.Tal=2;else{if(0!=(7&X))throw X+" e";h.font.Tal=0}if(24==(24&X));else{if(0!=(24&X))throw"e";UDOC.M.translate(h.font.Tm,0,h.font.Tfs)}var W=a(t,p),V=a(t,p+=2);p+=2,4&V&&(p+=8);var Z="";for(u=0;u<W;u++){var Y=t[p+u];Y>127&&(Y=Y<<8|t[p+ ++u]),Z+=String.fromCharCode(Y)}var J=h.colr;h.colr=n.tclr,e.PutText(h,Z,Z.length*h.font.Tfs*.5),h.colr=J}else console.log(d,f);if(null!=v){for(var K=0;null!=l[K];)K++;l[K]=v}r+=f-6}e.ShowPage(),e.Done()},FromWMF._loadDIB=function(t,e){FromWMF.B.readShort;var r,n,i,a=FromWMF.B.readUshort,s=FromWMF.B.readUint;if(12==s(t,e))throw"e";r=s(t,e+=4),n=s(t,e+=4);var o=a(t,e+=4);if(1!=o)throw"e";var u=a(t,e+=2);if(1!=u&&24!=u&&32!=u)throw u+" e";if(0!=s(t,e+=2))throw"e";s(t,e+=4),s(t,e+=4),s(t,e+=4);i=s(t,e+=4);s(t,e+=4);e+=4;var h=new Uint8Array(4*(r*n)),l=Math.floor((r*o*u+31&-32)/8);if(1==u)for(var f=0;f<n;f++)for(var c=e+4*i+(n-1-f)*l,d=0;d<r;d++){var p=f*r+d<<2,v=t[c+(d>>>3)]>>>7-(7&d)&1;h[p]=t[e+4*v+2],h[p+1]=t[e+4*v+1],h[p+2]=t[e+4*v+0],h[p+3]=255}if(24==u)for(f=0;f<n;f++)for(d=0;d<r;d++){var _=e+(n-1-f)*l+3*d;h[p=f*r+d<<2]=t[_+2],h[p+1]=t[_+1],h[p+2]=t[_+0],h[p+3]=255}if(32==u)for(f=0;f<n;f++)for(d=0;d<r;d++){_=e+(n-1-f)*l+4*d;h[p=f*r+d<<2]=t[_+2],h[p+1]=t[_+1],h[p+2]=t[_+0],h[p+3]=t[_+3]}return h},FromWMF._updateCtm=function(t,e){var r=[1,0,0,1,0,0],n=t.lbb,i=t.bb;UDOC.M.translate(r,-n[0],-n[1]),UDOC.M.scale(r,1/n[2],1/n[3]),UDOC.M.scale(r,i[2]-i[0],i[3]-i[1]),UDOC.M.translate(r,i[0],i[1]),e.ctm=r},FromWMF._draw=function(t,e,r){r.fill&&t.Fill(e,!1),r.strk&&0!=e.lwidth&&t.Stroke(e,!1),UDOC.G.newPath(e)},FromWMF._drawPoly=function(t,e,r,n,i){for(var a=FromWMF.B.readShort,s=0;s<r;s++){var o=a(t,e),u=a(t,e+=2);e+=2,0==s?UDOC.G.moveTo(n,o,u):UDOC.G.lineTo(n,o,u)}return i&&UDOC.G.closePath(n),e},FromWMF.B={uint8:new Uint8Array(4),readShort:function(t,e){var r=FromWMF.B.uint8;return r[0]=t[e],r[1]=t[e+1],FromWMF.B.int16[0]},readUshort:function(t,e){var r=FromWMF.B.uint8;return r[0]=t[e],r[1]=t[e+1],FromWMF.B.uint16[0]},readUint:function(t,e){var r=FromWMF.B.uint8;return r[0]=t[e],r[1]=t[e+1],r[2]=t[e+2],r[3]=t[e+3],FromWMF.B.uint32[0]},readASCII:function(t,e,r){for(var n="",i=0;i<r;i++)n+=String.fromCharCode(t[e+i]);return n}},FromWMF.B.int16=new Int16Array(FromWMF.B.uint8.buffer),FromWMF.B.uint16=new Uint16Array(FromWMF.B.uint8.buffer),FromWMF.B.uint32=new Uint32Array(FromWMF.B.uint8.buffer),FromWMF.C={META_EOF:0,META_REALIZEPALETTE:53,META_SETPALENTRIES:55,META_SETBKMODE:258,META_SETMAPMODE:259,META_SETROP2:260,META_SETRELABS:261,META_SETPOLYFILLMODE:262,META_SETSTRETCHBLTMODE:263,META_SETTEXTCHAREXTRA:264,META_RESTOREDC:295,META_RESIZEPALETTE:313,META_DIBCREATEPATTERNBRUSH:322,META_SETLAYOUT:329,META_SETBKCOLOR:513,META_SETTEXTCOLOR:521,META_OFFSETVIEWPORTORG:529,META_LINETO:531,META_MOVETO:532,META_OFFSETCLIPRGN:544,META_FILLREGION:552,META_SETMAPPERFLAGS:561,META_SELECTPALETTE:564,META_POLYGON:804,META_POLYLINE:805,META_SETTEXTJUSTIFICATION:522,META_SETWINDOWORG:523,META_SETWINDOWEXT:524,META_SETVIEWPORTORG:525,META_SETVIEWPORTEXT:526,META_OFFSETWINDOWORG:527,META_SCALEWINDOWEXT:1040,META_SCALEVIEWPORTEXT:1042,META_EXCLUDECLIPRECT:1045,META_INTERSECTCLIPRECT:1046,META_ELLIPSE:1048,META_FLOODFILL:1049,META_FRAMEREGION:1065,META_ANIMATEPALETTE:1078,META_TEXTOUT:1313,META_POLYPOLYGON:1336,META_EXTFLOODFILL:1352,META_RECTANGLE:1051,META_SETPIXEL:1055,META_ROUNDRECT:1564,META_PATBLT:1565,META_SAVEDC:30,META_PIE:2074,META_STRETCHBLT:2851,META_ESCAPE:1574,META_INVERTREGION:298,META_PAINTREGION:299,META_SELECTCLIPREGION:300,META_SELECTOBJECT:301,META_SETTEXTALIGN:302,META_ARC:2071,META_CHORD:2096,META_BITBLT:2338,META_EXTTEXTOUT:2610,META_SETDIBTODEV:3379,META_DIBBITBLT:2368,META_DIBSTRETCHBLT:2881,META_STRETCHDIB:3907,META_DELETEOBJECT:496,META_CREATEPALETTE:247,META_CREATEPATTERNBRUSH:505,META_CREATEPENINDIRECT:762,META_CREATEFONTINDIRECT:763,META_CREATEBRUSHINDIRECT:764,META_CREATEREGION:1791},FromWMF.C2={NEWFRAME:1,ABORTDOC:2,NEXTBAND:3,SETCOLORTABLE:4,GETCOLORTABLE:5,FLUSHOUT:6,DRAFTMODE:7,QUERYESCSUPPORT:8,SETABORTPROC:9,STARTDOC:10,ENDDOC:11,GETPHYSPAGESIZE:12,GETPRINTINGOFFSET:13,GETSCALINGFACTOR:14,META_ESCAPE_ENHANCED_METAFILE:15,SETPENWIDTH:16,SETCOPYCOUNT:17,SETPAPERSOURCE:18,PASSTHROUGH:19,GETTECHNOLOGY:20,SETLINECAP:21,SETLINEJOIN:22,SETMITERLIMIT:23,BANDINFO:24,DRAWPATTERNRECT:25,GETVECTORPENSIZE:26,GETVECTORBRUSHSIZE:27,ENABLEDUPLEX:28,GETSETPAPERBINS:29,GETSETPRINTORIENT:30,ENUMPAPERBINS:31,SETDIBSCALING:32,EPSPRINTING:33,ENUMPAPERMETRICS:34,GETSETPAPERMETRICS:35,POSTSCRIPT_DATA:37,POSTSCRIPT_IGNORE:38,GETDEVICEUNITS:42,GETEXTENDEDTEXTMETRICS:256,GETPAIRKERNTABLE:258,EXTTEXTOUT:512,GETFACENAME:513,DOWNLOADFACE:514,METAFILE_DRIVER:2049,QUERYDIBSUPPORT:3073,BEGIN_PATH:4096,CLIP_TO_PATH:4097,END_PATH:4098,OPEN_CHANNEL:4110,DOWNLOADHEADER:4111,CLOSE_CHANNEL:4112,POSTSCRIPT_PASSTHROUGH:4115,ENCAPSULATED_POSTSCRIPT:4116,POSTSCRIPT_IDENTIFY:4117,POSTSCRIPT_INJECTION:4118,CHECKJPEGFORMAT:4119,CHECKPNGFORMAT:4120,GET_PS_FEATURESETTING:4121,MXDC_ESCAPE:4122,SPCLPASSTHROUGH2:4568},FromWMF.K=[],FromWMF.K2=[],function(){var t,e,r;for(var n in t=FromWMF.C,e=FromWMF.K,r=5,t)e[t[n]]=n.slice(r);for(var n in t=FromWMF.C2,e=FromWMF.K2,r=0,t)e[t[n]]=n.slice(r)}(),FromEMF.Parse=function(t,e){t=new Uint8Array(t);for(var r,n=0,i={fill:!1,strk:!1,bb:[0,0,1,1],wbb:[0,0,1,1],fnt:{nam:"Arial",hgh:25,und:!1,orn:0},tclr:[0,0,0],talg:0},a=[],s=[],o=FromEMF.B.readShort,u=FromEMF.B.readUshort,h=FromEMF.B.readInt,l=FromEMF.B.readUint,f=FromEMF.B.readFloat;;){var c=l(t,n);n+=4;var d=FromEMF.K[c],p=l(t,n),v=n+=4,_=null,g=0;if("EOF"==d)break;if("HEADER"==d)i.bb=FromEMF._readBox(t,v),v+=16,e.StartPage(i.bb[0],i.bb[1],i.bb[2],i.bb[3]),r=UDOC.getState(i.bb);else if("SAVEDC"==d)s.push(JSON.stringify(r),JSON.stringify(i));else if("RESTOREDC"==d){var m=h(t,v);for(v+=4;m<-1;)s.pop(),s.pop();i=JSON.parse(s.pop()),r=JSON.parse(s.pop())}else if("SELECTCLIPPATH"==d)r.cpth=JSON.parse(JSON.stringify(r.pth));else if(-1!=["SETMAPMODE","SETPOLYFILLMODE","SETBKMODE","SETICMMODE","SETROP2","EXTSELECTCLIPRGN"].indexOf(d));else if("SETMITERLIMIT"==d)r.mlimit=l(t,v);else if("SETTEXTCOLOR"==d)i.tclr=[t[v]/255,t[v+1]/255,t[v+2]/255];else if("SETTEXTALIGN"==d)i.talg=l(t,v);else if("SETVIEWPORTEXTEX"==d||"SETVIEWPORTORGEX"==d){null==i.vbb&&(i.vbb=[]);var y="SETVIEWPORTORGEX"==d?0:2;i.vbb[y]=h(t,v),v+=4,i.vbb[y+1]=h(t,v),v+=4,"SETVIEWPORTEXTEX"==d&&FromEMF._updateCtm(i,r)}else if("SETWINDOWEXTEX"==d||"SETWINDOWORGEX"==d){y="SETWINDOWORGEX"==d?0:2;i.wbb[y]=h(t,v),v+=4,i.wbb[y+1]=h(t,v),v+=4,"SETWINDOWEXTEX"==d&&FromEMF._updateCtm(i,r)}else if("COMMENT"==d){l(t,v);v+=4}else if("SELECTOBJECT"==d){var b=l(t,v);if(v+=4,2147483648==b)i.fill=!0,r.colr=[1,1,1];else if(2147483653==b)i.fill=!1;else if(2147483655==b)i.strk=!0,i.lwidth=1,r.COLR=[0,0,0];else if(2147483656==b)i.strk=!1;else if(2147483661==b);else if(2147483662==b);else{var w=a[b];if("b"==w.t){if(i.fill=1!=w.stl,0==w.stl);else if(1!=w.stl)throw w.stl+" e";r.colr=w.clr}else if("p"==w.t)i.strk=5!=w.stl,r.lwidth=w.wid,r.COLR=w.clr;else{if("f"!=w.t)throw"e";i.fnt=w,r.font.Tf=w.nam,r.font.Tfs=Math.abs(w.hgh),r.font.Tun=w.und}}}else if("DELETEOBJECT"==d){b=l(t,v);if(v+=4,null==a[b])throw"e";a[b]=null}else if("CREATEBRUSHINDIRECT"==d)g=l(t,v),(_={t:"b"}).stl=l(t,v+=4),v+=4,_.clr=[t[v]/255,t[v+1]/255,t[v+2]/255],v+=4,_.htc=l(t,v),v+=4;else if("CREATEPEN"==d||"EXTCREATEPEN"==d)g=l(t,v),v+=4,_={t:"p"},"EXTCREATEPEN"==d?(v+=16,_.stl=l(t,v),v+=4,_.wid=l(t,v),v+=4,v+=4):(_.stl=l(t,v),v+=4,_.wid=l(t,v),v+=4,v+=4),_.clr=[t[v]/255,t[v+1]/255,t[v+2]/255],v+=4;else if("EXTCREATEFONTINDIRECTW"==d){g=l(t,v),(_={t:"f",nam:""}).hgh=h(t,v+=4),v+=4,v+=8,_.orn=h(t,v)/10;var E=l(t,v+=4);for(v+=4,_.und=t[v+1],_.stk=t[v+2],v+=8;0!=u(t,v);)_.nam+=String.fromCharCode(u(t,v)),v+=2;E>500&&(_.nam+="-Bold")}else if("EXTTEXTOUTW"==d){var C=l(t,v+=16),D=(f(t,v+=4),f(t,v+=4),h(t,v+=4)),S=h(t,v+=4);v+=4,r.font.Tm=[1,0,0,-1,0,0],UDOC.M.rotate(r.font.Tm,i.fnt.orn*Math.PI/180),UDOC.M.translate(r.font.Tm,D,S);var T=i.talg;if(6==(6&T))r.font.Tal=2;else{if(0!=(7&T))throw T+" e";r.font.Tal=0}if(24==(24&T));else{if(0!=(24&T))throw"e";UDOC.M.translate(r.font.Tm,0,r.font.Tfs)}var x=l(t,v),F=l(t,v+=4);l(t,v+=4);v+=4;l(t,v+=16);v+=4,F+=n-8;for(var A="",P=0;P<x;P++){var M=u(t,F+2*P);A+=String.fromCharCode(M)}var I=r.colr;r.colr=i.tclr,e.PutText(r,A,A.length*r.font.Tfs*.5),r.colr=I}else if("BEGINPATH"==d)UDOC.G.newPath(r);else if("ENDPATH"==d);else if("CLOSEFIGURE"==d)UDOC.G.closePath(r);else if("MOVETOEX"==d)UDOC.G.moveTo(r,h(t,v),h(t,v+4));else if("LINETO"==d){if(0==r.pth.cmds.length){var k=r.ctm.slice(0);UDOC.M.invert(k);var U=UDOC.M.multPoint(k,r.cpos);UDOC.G.moveTo(r,U[0],U[1])}UDOC.G.lineTo(r,h(t,v),h(t,v+4))}else if("POLYGON"==d||"POLYGON16"==d||"POLYLINE"==d||"POLYLINE16"==d||"POLYLINETO"==d||"POLYLINETO16"==d){v+=16;var O=d.startsWith("POLYGON"),B=-1!=d.indexOf("TO"),R=l(t,v);v+=4,B||UDOC.G.newPath(r),v=FromEMF._drawPoly(t,v,R,r,d.endsWith("16")?2:4,O,B),B||FromEMF._draw(e,r,i,O)}else if("POLYPOLYGON16"==d){v+=16;O=d.startsWith("POLYPOLYGON"),B=-1!=d.indexOf("TO");var L=l(t,v);v+=4;var N=v+=4;v+=4*L,B||UDOC.G.newPath(r);for(P=0;P<L;P++){var z=u(t,N+4*P);v=FromEMF._drawPoly(t,v,z,r,d.endsWith("16")?2:4,O,B)}B||FromEMF._draw(e,r,i,O)}else if("POLYBEZIER"==d||"POLYBEZIER16"==d||"POLYBEZIERTO"==d||"POLYBEZIERTO16"==d){v+=16;var G=d.endsWith("16"),j=G?o:h,q=G?2:4;R=l(t,v);for(v+=4,-1==d.indexOf("TO")&&(UDOC.G.moveTo(r,j(t,v),j(t,v+q)),v+=2*q,R--);R>0;)UDOC.G.curveTo(r,j(t,v),j(t,v+q),j(t,v+2*q),j(t,v+3*q),j(t,v+4*q),j(t,v+5*q)),v+=6*q,R-=3}else if("RECTANGLE"==d||"ELLIPSE"==d){UDOC.G.newPath(r);var H=FromEMF._readBox(t,v);if("RECTANGLE"==d)UDOC.G.moveTo(r,H[0],H[1]),UDOC.G.lineTo(r,H[2],H[1]),UDOC.G.lineTo(r,H[2],H[3]),UDOC.G.lineTo(r,H[0],H[3]);else{var X=(H[0]+H[2])/2,W=(H[1]+H[3])/2;UDOC.G.arc(r,X,W,(H[2]-H[0])/2,0,2*Math.PI,!1)}UDOC.G.closePath(r),FromEMF._draw(e,r,i,!0)}else if("FILLPATH"==d)e.Fill(r,!1);else if("STROKEPATH"==d)e.Stroke(r);else if("STROKEANDFILLPATH"==d)e.Fill(r,!1),e.Stroke(r);else if("SETWORLDTRANSFORM"==d||"MODIFYWORLDTRANSFORM"==d){var V=[];for(P=0;P<6;P++)V.push(f(t,v+4*P));if(v+=24,"SETWORLDTRANSFORM"==d)r.ctm=V;else{C=l(t,v);if(v+=4,2!=C)throw"e";var Z=r.ctm;r.ctm=V,UDOC.M.concat(r.ctm,Z)}}else if("SETSTRETCHBLTMODE"==d){l(t,v);v+=4}else if("STRETCHDIBITS"==d){H=FromEMF._readBox(t,v);var Y=h(t,v+=16),J=h(t,v+=4),K=(h(t,v+=4),h(t,v+=4),h(t,v+=4)),Q=h(t,v+=4),$=l(t,v+=4)+n-8,tt=(l(t,v+=4),l(t,v+=4)+n-8);l(t,v+=4);if(0!=l(t,v+=4))throw"e";l(t,v+=4);var et=h(t,v+=4),rt=h(t,v+=4);v+=4;l(t,$);var nt=l(t,$+=4),it=l(t,$+=4);if(nt!=K||it!=Q)throw"e";var at=u(t,$+=4),st=u(t,$+=2);if(8!=st&&24!=st&&32!=st)throw st+" e";var ot=l(t,$+=2);if(0!=ot)throw ot+" e";l(t,$+=4),l(t,$+=4),l(t,$+=4),l(t,$+=4),l(t,$+=4);$+=4;var ut=Math.floor((nt*at*st+31&-32)/8),ht=new Uint8Array(nt*it*4);if(8==st)for(W=0;W<it;W++)for(X=0;X<nt;X++){var lt=W*nt+X<<2;b=t[tt+(it-1-W)*ut+X]<<2;ht[lt]=t[$+b+2],ht[lt+1]=t[$+b+1],ht[lt+2]=t[$+b+0],ht[lt+3]=255}if(24==st)for(W=0;W<it;W++)for(X=0;X<nt;X++){var ft=tt+(it-1-W)*ut+3*X;ht[lt=W*nt+X<<2]=t[ft+2],ht[lt+1]=t[ft+1],ht[lt+2]=t[ft+0],ht[lt+3]=255}if(32==st)for(W=0;W<it;W++)for(X=0;X<nt;X++){ft=tt+(it-1-W)*ut+4*X;ht[lt=W*nt+X<<2]=t[ft+2],ht[lt+1]=t[ft+1],ht[lt+2]=t[ft+0],ht[lt+3]=t[ft+3]}var ct=r.ctm.slice(0);r.ctm=[1,0,0,1,0,0],UDOC.M.scale(r.ctm,et,-rt),UDOC.M.translate(r.ctm,Y,J+rt),UDOC.M.concat(r.ctm,ct),e.PutImage(r,ht,nt,it),r.ctm=ct}else console.log(d,p);null!=_&&(a[g]=_),n+=p-8}e.ShowPage(),e.Done()},FromEMF._readBox=function(t,e){for(var r=[],n=0;n<4;n++)r[n]=FromEMF.B.readInt(t,e+4*n);return r},FromEMF._updateCtm=function(t,e){var r=[1,0,0,1,0,0],n=t.wbb,i=(t.bb,t.vbb&&4==t.vbb.length?t.vbb:t.bb);UDOC.M.translate(r,-n[0],-n[1]),UDOC.M.scale(r,1/n[2],1/n[3]),UDOC.M.scale(r,i[2],i[3]),e.ctm=r},FromEMF._draw=function(t,e,r,n){r.fill&&n&&t.Fill(e,!1),r.strk&&0!=e.lwidth&&t.Stroke(e)},FromEMF._drawPoly=function(t,e,r,n,i,a,s){for(var o=2==i?FromEMF.B.readShort:FromEMF.B.readInt,u=0;u<r;u++){var h=o(t,e),l=o(t,e+=i);e+=i,0!=u||s?UDOC.G.lineTo(n,h,l):UDOC.G.moveTo(n,h,l)}return a&&UDOC.G.closePath(n),e},FromEMF.B={uint8:new Uint8Array(4),readShort:function(t,e){var r=FromEMF.B.uint8;return r[0]=t[e],r[1]=t[e+1],FromEMF.B.int16[0]},readUshort:function(t,e){var r=FromEMF.B.uint8;return r[0]=t[e],r[1]=t[e+1],FromEMF.B.uint16[0]},readInt:function(t,e){var r=FromEMF.B.uint8;return r[0]=t[e],r[1]=t[e+1],r[2]=t[e+2],r[3]=t[e+3],FromEMF.B.int32[0]},readUint:function(t,e){var r=FromEMF.B.uint8;return r[0]=t[e],r[1]=t[e+1],r[2]=t[e+2],r[3]=t[e+3],FromEMF.B.uint32[0]},readFloat:function(t,e){var r=FromEMF.B.uint8;return r[0]=t[e],r[1]=t[e+1],r[2]=t[e+2],r[3]=t[e+3],FromEMF.B.flot32[0]},readASCII:function(t,e,r){for(var n="",i=0;i<r;i++)n+=String.fromCharCode(t[e+i]);return n}},FromEMF.B.int16=new Int16Array(FromEMF.B.uint8.buffer),FromEMF.B.uint16=new Uint16Array(FromEMF.B.uint8.buffer),FromEMF.B.int32=new Int32Array(FromEMF.B.uint8.buffer),FromEMF.B.uint32=new Uint32Array(FromEMF.B.uint8.buffer),FromEMF.B.flot32=new Float32Array(FromEMF.B.uint8.buffer),FromEMF.C={EMR_HEADER:1,EMR_POLYBEZIER:2,EMR_POLYGON:3,EMR_POLYLINE:4,EMR_POLYBEZIERTO:5,EMR_POLYLINETO:6,EMR_POLYPOLYLINE:7,EMR_POLYPOLYGON:8,EMR_SETWINDOWEXTEX:9,EMR_SETWINDOWORGEX:10,EMR_SETVIEWPORTEXTEX:11,EMR_SETVIEWPORTORGEX:12,EMR_SETBRUSHORGEX:13,EMR_EOF:14,EMR_SETPIXELV:15,EMR_SETMAPPERFLAGS:16,EMR_SETMAPMODE:17,EMR_SETBKMODE:18,EMR_SETPOLYFILLMODE:19,EMR_SETROP2:20,EMR_SETSTRETCHBLTMODE:21,EMR_SETTEXTALIGN:22,EMR_SETCOLORADJUSTMENT:23,EMR_SETTEXTCOLOR:24,EMR_SETBKCOLOR:25,EMR_OFFSETCLIPRGN:26,EMR_MOVETOEX:27,EMR_SETMETARGN:28,EMR_EXCLUDECLIPRECT:29,EMR_INTERSECTCLIPRECT:30,EMR_SCALEVIEWPORTEXTEX:31,EMR_SCALEWINDOWEXTEX:32,EMR_SAVEDC:33,EMR_RESTOREDC:34,EMR_SETWORLDTRANSFORM:35,EMR_MODIFYWORLDTRANSFORM:36,EMR_SELECTOBJECT:37,EMR_CREATEPEN:38,EMR_CREATEBRUSHINDIRECT:39,EMR_DELETEOBJECT:40,EMR_ANGLEARC:41,EMR_ELLIPSE:42,EMR_RECTANGLE:43,EMR_ROUNDRECT:44,EMR_ARC:45,EMR_CHORD:46,EMR_PIE:47,EMR_SELECTPALETTE:48,EMR_CREATEPALETTE:49,EMR_SETPALETTEENTRIES:50,EMR_RESIZEPALETTE:51,EMR_REALIZEPALETTE:52,EMR_EXTFLOODFILL:53,EMR_LINETO:54,EMR_ARCTO:55,EMR_POLYDRAW:56,EMR_SETARCDIRECTION:57,EMR_SETMITERLIMIT:58,EMR_BEGINPATH:59,EMR_ENDPATH:60,EMR_CLOSEFIGURE:61,EMR_FILLPATH:62,EMR_STROKEANDFILLPATH:63,EMR_STROKEPATH:64,EMR_FLATTENPATH:65,EMR_WIDENPATH:66,EMR_SELECTCLIPPATH:67,EMR_ABORTPATH:68,EMR_COMMENT:70,EMR_FILLRGN:71,EMR_FRAMERGN:72,EMR_INVERTRGN:73,EMR_PAINTRGN:74,EMR_EXTSELECTCLIPRGN:75,EMR_BITBLT:76,EMR_STRETCHBLT:77,EMR_MASKBLT:78,EMR_PLGBLT:79,EMR_SETDIBITSTODEVICE:80,EMR_STRETCHDIBITS:81,EMR_EXTCREATEFONTINDIRECTW:82,EMR_EXTTEXTOUTA:83,EMR_EXTTEXTOUTW:84,EMR_POLYBEZIER16:85,EMR_POLYGON16:86,EMR_POLYLINE16:87,EMR_POLYBEZIERTO16:88,EMR_POLYLINETO16:89,EMR_POLYPOLYLINE16:90,EMR_POLYPOLYGON16:91,EMR_POLYDRAW16:92,EMR_CREATEMONOBRUSH:93,EMR_CREATEDIBPATTERNBRUSHPT:94,EMR_EXTCREATEPEN:95,EMR_POLYTEXTOUTA:96,EMR_POLYTEXTOUTW:97,EMR_SETICMMODE:98,EMR_CREATECOLORSPACE:99,EMR_SETCOLORSPACE:100,EMR_DELETECOLORSPACE:101,EMR_GLSRECORD:102,EMR_GLSBOUNDEDRECORD:103,EMR_PIXELFORMAT:104,EMR_DRAWESCAPE:105,EMR_EXTESCAPE:106,EMR_SMALLTEXTOUT:108,EMR_FORCEUFIMAPPING:109,EMR_NAMEDESCAPE:110,EMR_COLORCORRECTPALETTE:111,EMR_SETICMPROFILEA:112,EMR_SETICMPROFILEW:113,EMR_ALPHABLEND:114,EMR_SETLAYOUT:115,EMR_TRANSPARENTBLT:116,EMR_GRADIENTFILL:118,EMR_SETLINKEDUFIS:119,EMR_SETTEXTJUSTIFICATION:120,EMR_COLORMATCHTOTARGETW:121,EMR_CREATECOLORSPACEW:122},FromEMF.K=[],function(){var t,e;for(var r in t=FromEMF.C,e=FromEMF.K,4,t)e[t[r]]=r.slice(4)}(),ToPDF.defState=function(){return{colr:"[0,0,0]",COLR:"[0,0,0]",lcap:"0",ljoin:"0",lwidth:"1",mlimit:"10",dash:"[]",doff:"0",bmode:"/Normal",CA:"1",ca:"1"}},ToPDF.prototype.StartPage=function(t,e,r,n){this._bnds=[t,e,r,n]},ToPDF.prototype.Stroke=function(t){0!=t.CA&&(this.setGState(t,!0),this._cont+=" S\n")},ToPDF.prototype.Fill=function(t,e){0!=t.ca&&(this.setGState(t,!0),this._cont+=" f\n")},ToPDF._flt=function(t){return""+parseFloat(t.toFixed(2))},ToPDF._scale=function(t){return Math.sqrt(Math.abs(t[0]*t[3]-t[1]*t[2]))},ToPDF._mat=function(t){var e=t.map(ToPDF._flt).join(" ");return"1 0 0 1 0 0"==e?"":e+" cm "},ToPDF._eq=function(t,e){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!=e[r])return!1;return!0},ToPDF._format=function(t){for(var e=[[255,216,255],[0,0,0,12,106,80,32,32],[0,0,0,0,48,0,1,0]],r=["/DCTDecode","/JPXDecode","/JBIG2Decode"],n=0;n<e.length;n++){for(var i=e[n],a=!0,s=0;s<i.length;s++)a=a&&t[s]==i[s];if(a)return r[n]}},ToPDF.prototype.setGState=function(t,e){var r=this._gst,n={};for(var i in t)n[i]="string"==typeof t[i]?t[i]:JSON.stringify(t[i]);for(var a=ToPDF._scale(t.ctm),s=t.dash.slice(0),o=0;o<s.length;o++)s[o]=ToPDF._flt(s[o]*a);var u=this._cont;if(r.lcap!=n.lcap&&(u+=t.lcap+" J "),r.ljoin!=n.ljoin&&(u+=t.ljoin+" j "),r.lwidth!=n.lwidth&&(u+=ToPDF._flt(t.lwidth*a)+" w "),r.mlimit!=n.mlimit&&(u+=ToPDF._flt(t.mlimit)+" M "),r.dash==n.dash&&r.doff==n.doff||(u+="["+s.join(" ")+"] "+t.doff+" d "),r.COLR!=n.COLR&&(u+=t.COLR.map(ToPDF._flt).join(" ")+" RG "),r.colr!=n.colr)if(null!=t.colr.length)u+=t.colr.map(ToPDF._flt).join(" ")+" rg \n";else{var h=this._res["/Pattern"],l=t.colr,f="/P"+(ToPDF.maxI(h)+1),c={"/ShadingType":"lin"==l.typ?2:3,"/ColorSpace":"/DeviceRGB","/Extend":[!0,!0],"/Function":ToPDF._makeGrad(l.grad),"/Coords":l.crds};h[f]={"/Type":"/Pattern","/PatternType":2,"/Matrix":l.mat,"/Shading":c},u+="/Pattern cs "+f+" scn "}var d,p=this._res["/ExtGState"];r.bmode!=n.bmode&&(null==p[d=n.bmode]&&(p[d]={"/Type":"/ExtGState","/BM":t.bmode}),u+=d+" gs ");r.CA!=n.CA&&(null==p[d="/Alpha"+Math.round(255*n.CA)]&&(p[d]={"/Type":"/ExtGState","/CA":t.CA}),u+=d+" gs ");r.ca!=n.ca&&(null==p[d="/alpha"+Math.round(255*n.ca)]&&(p[d]={"/Type":"/ExtGState","/ca":t.ca}),u+=d+" gs ");e&&(u+=ToPDF.drawPath(t.pth)),this._cont=u,this._gst=n},ToPDF.drawPath=function(t){for(var e=0,r="",n=ToPDF._flt,i=0;i<t.cmds.length;i++){var a=t.cmds[i];if("M"==a){for(var s=0;s<2;s++)r+=n(t.crds[e++])+" ";r+="m "}else if("L"==a){for(s=0;s<2;s++)r+=n(t.crds[e++])+" ";r+="l "}else if("C"==a){for(s=0;s<6;s++)r+=n(t.crds[e++])+" ";r+="c "}else{if("Z"!=a)throw a;r+="h "}}return r},ToPDF._makeGrad=function(t){var e=[],r=[],n=ToPDF._stopFun;if(2==t.length)return n(t[0][1],t[1][1]);r.push(n(t[0][1],t[1][1]));for(var i=1;i<t.length-1;i++)e.push(t[i][0]),r.push(n(t[i][1],t[i+1][1]));return{"/FunctionType":3,"/Encode":[0,1,0,1],"/Domain":[0,1],"/Bounds":e,"/Functions":r}},ToPDF._stopFun=function(t,e){return{"/FunctionType":2,"/C0":t,"/C1":e,"/Domain":[0,1],"/N":1}},ToPDF.prototype.PutText=function(t,e,r){this.setGState(t,!1);var n=this.addFont(t.font.Tf);this._cont+="q ",this._cont+=ToPDF._mat(t.ctm),this._cont+=ToPDF._mat(t.font.Tm),this._cont+="BT  "+n+" "+ToPDF._flt(t.font.Tfs)+" Tf  0 0 Td  (";for(var i=[128,8364,130,8218,131,402,132,8222,133,8230,134,8224,135,8225,136,710,137,8240,138,352,139,8249,140,338,142,381,145,8216,146,8217,147,8220,148,8221,149,8226,150,8211,151,8212,152,732,153,8482,154,353,155,8250,156,339,158,382,159,376],a=[],s=0;s<e.length;s++){var o=e.charCodeAt(s);if(o>255){var u=i.indexOf(o);a.push(-1==u?32:i[u-1])}else a.push(o)}a=FromPS.makeString(a);for(s=0;s<a.length;s++)this._cont+=String.fromCharCode(a[s]);this._cont+=") Tj  ET ",this._cont+=" Q\n"},ToPDF.prototype.PutImage=function(t,e,r,n,i){if(e.length==r*n*4&&null==i){for(var a=r*n,s=new Uint8Array(a),o=255,u=0;u<a;u++)s[u]=e[3+(u<<2)],o&=e[3+(u<<2)];255!=o&&(i=s)}var h=this.addImage(e,r,n,i);this.setGState(t,!1),this._cont+="q "+ToPDF._mat(t.ctm),this._cont+=h+" Do  Q\n"},ToPDF.prototype.ShowPage=function(){ToPDF.addPage(this._xr,this._cont,this._bnds),this._cont="",this._gst=ToPDF.defState()},ToPDF.prototype.Print=function(t){},ToPDF.prototype.Done=function(){var t=this._res;for(var e in t)0==Object.keys(t[e])&&delete t[e];this.buffer=ToPDF.xrToPDF(this._xr)},ToPDF.prototype.addImage=function(t,e,r,n){var i;if(n){var a=n;if(n.length==e*r*4){a=new Uint8Array(e*r);for(var s=0;s<a.length;s++)a[s]=n[1+(s<<2)]}i=this.addImage(a,e,r,null)}var o=ToPDF._format(t),u=t;if(t.length==e*r*4){u=new Uint8Array(e*r*3);for(s=0;s<t.length;s+=4){var h=3*(s>>2);u[h]=t[s+0],u[h+1]=t[s+1],u[h+2]=t[s+2]}}var l=this._res["/XObject"];for(var f in l)if(ToPDF._eq(this._xr[l[f].ind].stream,u))return f;l[f="/I"+(ToPDF.maxI(l)+1)]={typ:"ref",ind:this._xr.length};var c={"/Type":"/XObject","/Subtype":"/Image","/BitsPerComponent":8,"/ColorSpace":t.length==e*r||"/DCTDecode"==o&&ToPDF.jpgProp(t)&&1==ToPDF.jpgProp(t).comps?"/DeviceGray":"/DeviceRGB","/Height":r,"/Width":e,stream:u};return null!=o&&(c["/Filter"]=ToPDF._format(t)),n&&(c["/SMask"]={typ:"ref",ind:this._xr.length-1},delete l[i]),this._xr.push(c),f},ToPDF.jpgProp=function(t){for(var e=0;e<t.length;){for(;255==t[e];)e++;var r=t[e];if(e++,216!=r){if(217==r)break;if(!(208<=r&&r<=215)&&1!=r){var n=(t[e]<<8|t[e+1])-2;if(e+=2,192==r)return{bpp:t[e],w:t[e+1]<<8|t[e+2],h:t[e+3]<<8|t[e+4],comps:t[e+5]};e+=n}}}},ToPDF.readUshort=function(t,e){return t[e]<<8|t[e+1]},ToPDF.maxI=function(t){var e;for(var r in t)e=r;return null==e?0:parseInt(e.slice(2))},ToPDF.prototype.addFont=function(t){var e=this._res["/Font"];for(var r in e)if(e[r]["/BaseFont"].slice(1)==t)return r;return e[r="/F"+(ToPDF.maxI(e)+1)]={"/Type":"/Font","/Subtype":"/Type1","/BaseFont":"/"+t,"/Encoding":"/WinAnsiEncoding"},r},ToPDF.addPage=function(t,e,r){var n=t.length;t[2]["/Kids"].push({typ:"ref",ind:n}),t[2]["/Count"]++,t.push({"/Type":"/Page","/Parent":{typ:"ref",ind:2},"/Resources":{typ:"ref",ind:3},"/MediaBox":r,"/Contents":{typ:"ref",ind:n+1}}),t.push({stream:e})},ToPDF.xrToPDF=function(t){var e={file:new ToPDF.MFile,off:0},r=ToPDF.write,n=[];r(e,"%PDF-1.1\n");for(var i=1;i<t.length;i++)n.push(e.off),r(e,i+" 0 obj\n"),ToPDF.writeDict(e,t[i],0),r(e,"\nendobj\n");var a=e.off;r(e,"xref\n"),r(e,"0 "+t.length+"\n"),r(e,"0000000000 65535 f \n");for(i=0;i<n.length;i++){for(var s=n[i]+"";s.length<10;)s="0"+s;r(e,s+" 00000 n \n")}return r(e,"trailer\n"),ToPDF.writeDict(e,{"/Root":{typ:"ref",ind:1},"/Size":t.length},0),r(e,"\nstartxref\n"+a+"\n%%EOF\n"),e.file.data.buffer.slice(0,e.off)},ToPDF.write=function(t,e){t.file.req(t.off,e.length);for(var r=0;r<e.length;r++)t.file.data[t.off+r]=e.charCodeAt(r);t.off+=e.length},ToPDF._tab="    ",ToPDF.spc=function(t){for(var e="",r=0;r<t;r++)e+=ToPDF._tab;return e},ToPDF.writeValue=function(t,e,r){var n=ToPDF.write;if("string"==typeof e)n(t,e);else if("number"==typeof e)n(t,""+e);else if("boolean"==typeof e)n(t,""+e);else if(null!=e.typ)n(t,e.ind+" 0 R");else if(e instanceof Array)ToPDF.writeArray(t,e,r+1);else{if(!(e instanceof Object))throw console.log(e),"e";ToPDF.writeDict(t,e,r+1)}},ToPDF.writeDict=function(t,e,r){var n=ToPDF.write,i=ToPDF.spc,a=e.stream;if(a){if("string"==typeof a){for(var s=new Uint8Array(a.length),o=0;o<a.length;o++)s[o]=a.charCodeAt(o);a=s}null==e["/Filter"]&&(e["/Filter"]="/FlateDecode",a=pako.deflate(a))}for(var u in n(t,"<<\n"),e)"/"==u.charAt(0)&&(n(t,i(r+1)+u+" "),ToPDF.writeValue(t,e[u],r),n(t,"\n"));if(a&&n(t,i(r+1)+"/Length "+a.length+"\n"),n(t,i(r)+">>"),a){n(t,i(r)+"\nstream\n"),t.file.req(t.off,a.length);for(o=0;o<a.length;o++)t.file.data[t.off+o]=a[o];t.off+=a.length,n(t,i(r)+"\nendstream")}},ToPDF.writeArray=function(t,e,r){var n=ToPDF.write;n(t,"[ ");for(var i=0;i<e.length;i++)ToPDF.writeValue(t,e[i],r+1),i!=e.length-1&&n(t," ");n(t," ]")},ToPDF.MFile=function(){this.size=16,this.data=new Uint8Array(16)},ToPDF.MFile.prototype.req=function(t,e){if(!(t+e<=this.size)){for(var r=this.size;t+e>this.size;)this.size*=2;for(var n=new Uint8Array(this.size),i=0;i<r;i++)n[i]=this.data[i];this.data=n}},ToEMF.prototype.StartPage=function(t,e,r,n){this._check();var i=this._file,a=ToEMF.B.writeUint,s=ToEMF.B.writeInt;this._curh=Math.max(this._curh,10*n),this._inited?(this._curx+=this._lstw,ToEMF._writeHeadBox(i,[0,0,this._curx+r,Math.round(this._curh/10)])):(this._inited=!0,this._addRec("HEADER",88),ToEMF._writeHeadBox(i,[t,e,r,n]),i.off+=32,ToEMF.B.writeASCII(i.file,i.off," EMF"),i.off+=4,a(i.file,i.off,65536),i.off+=4,this._lenp=i.off,i.off+=12,i.off+=12,s(i.file,i.off,1440),i.off+=4,s(i.file,i.off,900),i.off+=4,s(i.file,i.off,508),i.off+=4,s(i.file,i.off,318),i.off+=4,this._trsf([.1,0,0,.1,0,0]),this._addRec("SETBKMODE",12),a(i.file,i.off,1),i.off+=4,this._addRec("SETTEXTALIGN",12),a(i.file,i.off,24),i.off+=4),this._lstw=r},ToEMF.prototype.Stroke=function(t){this._draw(t,1)},ToEMF.prototype.Fill=function(t,e){this._draw(t,2)},ToEMF.prototype.PutImage=function(t,e,r,n,i){var a=e.length;0!=(3&a)&&(a+=4-(3&a));var s=[1,0,0,-1,0,1];UDOC.M.concat(s,t.ctm),UDOC.M.scale(s,10,10),UDOC.M.scale(s,1,-1),UDOC.M.translate(s,this._curx,this._curh),this._trsf(s);var o=this._file,u=ToEMF.B.writeUint,h=ToEMF.B.writeInt,l=ToEMF.B.writeUshort;if(this._addRec("STRETCHDIBITS",120+a),o.off+=16,h(o.file,o.off,Math.round(0)),o.off+=4,h(o.file,o.off,Math.round(0)),o.off+=4,o.off+=8,h(o.file,o.off,r),o.off+=4,h(o.file,o.off,n),o.off+=4,u(o.file,o.off,80),o.off+=4,u(o.file,o.off,40),o.off+=4,u(o.file,o.off,120),o.off+=4,u(o.file,o.off,e.length),o.off+=4,o.off+=4,u(o.file,o.off,13369376),o.off+=4,h(o.file,o.off,Math.round(1)),o.off+=4,h(o.file,o.off,Math.round(1)),o.off+=4,h(o.file,o.off,40),o.off+=4,h(o.file,o.off,r),o.off+=4,h(o.file,o.off,n),o.off+=4,l(o.file,o.off,1),o.off+=2,l(o.file,o.off,32),o.off+=2,h(o.file,o.off,0),o.off+=4,h(o.file,o.off,e.length),o.off+=4,h(o.file,o.off,3800),o.off+=4,h(o.file,o.off,3800),o.off+=4,o.off+=8,o.file.req(o.off,e.length),e.length==r*n*4)for(var f=0;f<n;f++)for(var c=0;c<r;c++){var d=f*r+c<<2,p=o.off+((n-1-f)*r+c<<2);o.file.data[p]=e[d+2],o.file.data[p+1]=e[d+1],o.file.data[p+2]=e[d],o.file.data[p+3]=e[d+3]}else for(var v=0;v<e.length;v++)o.file.data[o.off+v]=e[v];o.off+=a,UDOC.M.invert(s),this._trsf(s)},ToEMF.prototype.PutText=function(t,e,r){var n=e.length;1==(1&n)&&n++,this._check();var i=this._file,a=ToEMF.B.writeUint,s=ToEMF.B.writeInt,o=ToEMF.B.writeUshort,u=ToEMF.B.writeFloat,h=ToEMF._color(t.colr);h!=this._tclr&&(this._addRec("SETTEXTCOLOR",12),a(i.file,i.off,h),i.off+=4,this._tclr=h),this._setTool("f",[t.font.Tf,Math.round(10*t.font.Tfs)]);var l,f=10*(t.ctm[4]+this._curx),c=this._curh-10*t.ctm[5],d=Math.abs(t.ctm[1])>.05;d&&((l=t.ctm.slice(0))[1]*=-1,l[2]*=-1,l[4]=f,l[5]=c,f=c=0,this._trsf(l));this._addRec("EXTTEXTOUTW",76+2*n),i.off+=16,a(i.file,i.off,2),i.off+=4,u(i.file,i.off,31.25),i.off+=4,u(i.file,i.off,31.25),i.off+=4,s(i.file,i.off,Math.round(f)),i.off+=4,s(i.file,i.off,Math.round(c)),i.off+=4,a(i.file,i.off,e.length),i.off+=4,a(i.file,i.off,76),i.off+=4,a(i.file,i.off,0),i.off+=4,i.off+=16,a(i.file,i.off,0),i.off+=4;for(var p=0;p<e.length;p++)o(i.file,i.off+2*p,e.charCodeAt(p));i.off+=2*n,d&&(UDOC.M.invert(l),this._trsf(l))},ToEMF.prototype.ShowPage=function(){this._check()},ToEMF.prototype.Done=function(){this._check();var t=this._file,e=ToEMF.B.writeUint;this._addRec("EOF",20),e(t.file,t.off,0),t.off+=4,e(t.file,t.off,16),t.off+=4,e(t.file,t.off,20),t.off+=4,e(t.file,this._lenp,t.off),e(t.file,this._lenp+4,this._recs),e(t.file,this._lenp+8,this._tabl),this.buffer=t.file.data.buffer.slice(0,t.off)},ToEMF.prototype._check=function(){var t=this._file,e=this._stkf;0!=e&&(1==e&&this._addRec("STROKEPATH",24),2==e&&this._addRec("FILLPATH",24),3==e&&this._addRec("STROKEANDFILLPATH",24),t.off+=16,this._stkf=0)},ToEMF.prototype._addRec=function(t,e){var r=this._file,n=ToEMF.B.writeUint;this._recs++,n(r.file,r.off,ToEMF.C["EMR_"+t]),r.off+=4,n(r.file,r.off,e),r.off+=4},ToEMF.prototype._trsf=function(t){var e=this._file,r=ToEMF.B.writeInt;this._addRec("MODIFYWORLDTRANSFORM",36);for(var n=0;n<t.length;n++)ToEMF.B.writeFloat(e.file,e.off,t[n]),e.off+=4;r(e.file,e.off,2),e.off+=4},ToEMF._writeHeadBox=function(t,e){var r=t.off;t.off=8,ToEMF._writeBox(t,e);var n=1/72*25.4*100;ToEMF._writeBox(t,[0,0,Math.round((e[2]-e[0])*n),Math.round((e[3]-e[1])*n)]),t.off=r},ToEMF._writeBox=function(t,e){for(var r=0;r<4;r++)ToEMF.B.writeInt(t.file,t.off,e[r]),t.off+=4},ToEMF.prototype._draw=function(t,e){var r=this._file,n=ToEMF.B.writeUint,i=ToEMF.B.writeInt,a=t.pth,s=JSON.stringify(a);if(this._cpth!=s&&this._check(),1==e?this._setTool("p",[t.COLR,t.lwidth,t.ljoin]):this._setTool("b",[t.colr]),this._cpth==s)this._stkf+=e;else{var o={M:["MOVETOEX",1],L:["LINETO",1],C:["POLYBEZIERTO",3],Z:["CLOSEFIGURE",0]},u=0,h=a.cmds.length;this._addRec("BEGINPATH",8);for(var l=0;l<h;l++){var f=a.cmds[l],c=o[f];if(null==c)throw f+" e";for(var d=2*c[1],p=c[0],v=8+4*d,_=1;l+_<h&&a.cmds[l+_]==f;)_++;var g="C"==f||"L"==f&&_>1;g&&("L"==f&&(p="POLYLINETO"),v=28+4*(d*=_)),this._addRec(p,v),g&&(r.off+=16,n(r.file,r.off,_*c[1]),r.off+=4,l+=_-1);for(var m=0;m<d;m+=2)i(r.file,r.off,Math.round(10*(a.crds[u]+this._curx))),r.off+=4,u++,i(r.file,r.off,Math.round(this._curh-10*a.crds[u])),r.off+=4,u++}this._addRec("ENDPATH",8),this._cpth=s,this._stkf=e}},ToEMF.prototype._setTool=function(t,e){var r=this._file,n=ToEMF.B.writeUint,i=ToEMF.B.writeInt,a=t+JSON.stringify(e),s=this._objs[a];if(null==s){if(s=this._objs[a]=this._tabl,this._tabl++,"b"==t&&this._addRec("CREATEBRUSHINDIRECT",24),"p"==t&&this._addRec("CREATEPEN",28),"f"==t&&this._addRec("EXTCREATEFONTINDIRECTW",104),n(r.file,r.off,s),r.off+=4,"b"==t||"p"==t){if("p"==t){n(r.file,r.off,0),r.off+=4;var o=Math.round(10*e[1]);n(r.file,r.off,o),r.off+=4,n(r.file,r.off,o),r.off+=4}else n(r.file,r.off,0),r.off+=4;n(r.file,r.off,ToEMF._color(e[0])),r.off+=4,"b"==t&&(n(r.file,r.off,0),r.off+=4)}if("f"==t){var u=e[0],h=-1!=u.toLowerCase().indexOf("bold");u.endsWith("-Bold")&&(u=u.slice(0,u.length-5)),i(r.file,r.off,-e[1]),r.off+=4,r.off+=12,n(r.file,r.off,h?700:400),r.off+=4,n(r.file,r.off,0),r.off+=4,n(r.file,r.off,262151),r.off+=4;for(var l=0;l<u.length;l++)ToEMF.B.writeUshort(r.file,r.off+2*l,u.charCodeAt(l));r.off+=64}}this._curt[t]!=s&&(this._addRec("SELECTOBJECT",12),n(r.file,r.off,s),r.off+=4,this._curt[t]=s)},ToEMF._color=function(t){var e=Math.round(255*t[0]),r=Math.round(255*t[1]);return Math.round(255*t[2])<<16|r<<8|e<<0},ToEMF.B={uint8:new Uint8Array(4),writeShort:function(t,e,r){ToEMF.B.int16[0]=r,t.req(e,2);var n=ToEMF.B.uint8,i=t.data;i[e]=n[0],i[e+1]=n[1]},writeUshort:function(t,e,r){ToEMF.B.uint16[0]=r,t.req(e,2);var n=ToEMF.B.uint8,i=t.data;i[e]=n[0],i[e+1]=n[1]},writeInt:function(t,e,r){ToEMF.B.int32[0]=r,t.req(e,4);var n=ToEMF.B.uint8,i=t.data;i[e]=n[0],i[e+1]=n[1],i[e+2]=n[2],i[e+3]=n[3]},writeUint:function(t,e,r){ToEMF.B.uint32[0]=r,t.req(e,4);var n=ToEMF.B.uint8,i=t.data;i[e]=n[0],i[e+1]=n[1],i[e+2]=n[2],i[e+3]=n[3]},writeFloat:function(t,e,r){ToEMF.B.flot32[0]=r,t.req(e,4);var n=ToEMF.B.uint8,i=t.data;i[e]=n[0],i[e+1]=n[1],i[e+2]=n[2],i[e+3]=n[3]},writeASCII:function(t,e,r){t.req(e,r.length);for(var n=0;n<r.length;n++)t.data[e+n]=r.charCodeAt(n)}},ToEMF.B.int16=new Int16Array(ToEMF.B.uint8.buffer),ToEMF.B.uint16=new Uint16Array(ToEMF.B.uint8.buffer),ToEMF.B.int32=new Int32Array(ToEMF.B.uint8.buffer),ToEMF.B.uint32=new Uint32Array(ToEMF.B.uint8.buffer),ToEMF.B.flot32=new Float32Array(ToEMF.B.uint8.buffer),ToEMF.MFile=function(){this.size=16,this.data=new Uint8Array(16)},ToEMF.MFile.prototype.req=function(t,e){if(!(t+e<=this.size)){for(var r=this.size;t+e>this.size;)this.size*=2;for(var n=new Uint8Array(this.size),i=0;i<r;i++)n[i]=this.data[i];this.data=n}},ToEMF.C={EMR_HEADER:1,EMR_POLYBEZIER:2,EMR_POLYGON:3,EMR_POLYLINE:4,EMR_POLYBEZIERTO:5,EMR_POLYLINETO:6,EMR_POLYPOLYLINE:7,EMR_POLYPOLYGON:8,EMR_SETWINDOWEXTEX:9,EMR_SETWINDOWORGEX:10,EMR_SETVIEWPORTEXTEX:11,EMR_SETVIEWPORTORGEX:12,EMR_SETBRUSHORGEX:13,EMR_EOF:14,EMR_SETPIXELV:15,EMR_SETMAPPERFLAGS:16,EMR_SETMAPMODE:17,EMR_SETBKMODE:18,EMR_SETPOLYFILLMODE:19,EMR_SETROP2:20,EMR_SETSTRETCHBLTMODE:21,EMR_SETTEXTALIGN:22,EMR_SETCOLORADJUSTMENT:23,EMR_SETTEXTCOLOR:24,EMR_SETBKCOLOR:25,EMR_OFFSETCLIPRGN:26,EMR_MOVETOEX:27,EMR_SETMETARGN:28,EMR_EXCLUDECLIPRECT:29,EMR_INTERSECTCLIPRECT:30,EMR_SCALEVIEWPORTEXTEX:31,EMR_SCALEWINDOWEXTEX:32,EMR_SAVEDC:33,EMR_RESTOREDC:34,EMR_SETWORLDTRANSFORM:35,EMR_MODIFYWORLDTRANSFORM:36,EMR_SELECTOBJECT:37,EMR_CREATEPEN:38,EMR_CREATEBRUSHINDIRECT:39,EMR_DELETEOBJECT:40,EMR_ANGLEARC:41,EMR_ELLIPSE:42,EMR_RECTANGLE:43,EMR_ROUNDRECT:44,EMR_ARC:45,EMR_CHORD:46,EMR_PIE:47,EMR_SELECTPALETTE:48,EMR_CREATEPALETTE:49,EMR_SETPALETTEENTRIES:50,EMR_RESIZEPALETTE:51,EMR_REALIZEPALETTE:52,EMR_EXTFLOODFILL:53,EMR_LINETO:54,EMR_ARCTO:55,EMR_POLYDRAW:56,EMR_SETARCDIRECTION:57,EMR_SETMITERLIMIT:58,EMR_BEGINPATH:59,EMR_ENDPATH:60,EMR_CLOSEFIGURE:61,EMR_FILLPATH:62,EMR_STROKEANDFILLPATH:63,EMR_STROKEPATH:64,EMR_FLATTENPATH:65,EMR_WIDENPATH:66,EMR_SELECTCLIPPATH:67,EMR_ABORTPATH:68,EMR_COMMENT:70,EMR_FILLRGN:71,EMR_FRAMERGN:72,EMR_INVERTRGN:73,EMR_PAINTRGN:74,EMR_EXTSELECTCLIPRGN:75,EMR_BITBLT:76,EMR_STRETCHBLT:77,EMR_MASKBLT:78,EMR_PLGBLT:79,EMR_SETDIBITSTODEVICE:80,EMR_STRETCHDIBITS:81,EMR_EXTCREATEFONTINDIRECTW:82,EMR_EXTTEXTOUTA:83,EMR_EXTTEXTOUTW:84,EMR_POLYBEZIER16:85,EMR_POLYGON16:86,EMR_POLYLINE16:87,EMR_POLYBEZIERTO16:88,EMR_POLYLINETO16:89,EMR_POLYPOLYLINE16:90,EMR_POLYPOLYGON16:91,EMR_POLYDRAW16:92,EMR_CREATEMONOBRUSH:93,EMR_CREATEDIBPATTERNBRUSHPT:94,EMR_EXTCREATEPEN:95,EMR_POLYTEXTOUTA:96,EMR_POLYTEXTOUTW:97,EMR_SETICMMODE:98,EMR_CREATECOLORSPACE:99,EMR_SETCOLORSPACE:100,EMR_DELETECOLORSPACE:101,EMR_GLSRECORD:102,EMR_GLSBOUNDEDRECORD:103,EMR_PIXELFORMAT:104,EMR_DRAWESCAPE:105,EMR_EXTESCAPE:106,EMR_SMALLTEXTOUT:108,EMR_FORCEUFIMAPPING:109,EMR_NAMEDESCAPE:110,EMR_COLORCORRECTPALETTE:111,EMR_SETICMPROFILEA:112,EMR_SETICMPROFILEW:113,EMR_ALPHABLEND:114,EMR_SETLAYOUT:115,EMR_TRANSPARENTBLT:116,EMR_GRADIENTFILL:118,EMR_SETLINKEDUFIS:119,EMR_SETTEXTJUSTIFICATION:120,EMR_COLORMATCHTOTARGETW:121,EMR_CREATECOLORSPACEW:122},ToEMF.K=[],function(){var t,e;for(var r in t=ToEMF.C,e=ToEMF.K,4,t)e[t[r]]=r.slice(4)}(),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pako=t()}}((function(){return function t(e,r,n){function i(s,o){if(!r[s]){if(!e[s]){var u="function"==typeof require&&require;if(!o&&u)return u(s,!0);if(a)return a(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var l=r[s]={exports:{}};e[s][0].call(l.exports,(function(t){var r=e[s][1][t];return i(r||t)}),l,l.exports,t,e,r,n)}return r[s].exports}for(var a="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){"use strict";function n(t){if(!(this instanceof n))return new n(t);this.options=s.assign({level:c,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var r=a.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==f)throw new Error(u[r]);if(e.header&&a.deflateSetHeader(this.strm,e.header),e.dictionary){var i;if(i="string"==typeof e.dictionary?o.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(r=a.deflateSetDictionary(this.strm,i))!==f)throw new Error(u[r]);this._dict_set=!0}}function i(t,e){var r=new n(e);if(r.push(t,!0),r.err)throw r.msg||u[r.err];return r.result}var a=t("./zlib/deflate"),s=t("./utils/common"),o=t("./utils/strings"),u=t("./zlib/messages"),h=t("./zlib/zstream"),l=Object.prototype.toString,f=0,c=-1,d=0,p=8;n.prototype.push=function(t,e){var r,n,i=this.strm,u=this.options.chunkSize;if(this.ended)return!1;n=e===~~e?e:!0===e?4:0,"string"==typeof t?i.input=o.string2buf(t):"[object ArrayBuffer]"===l.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new s.Buf8(u),i.next_out=0,i.avail_out=u),1!==(r=a.deflate(i,n))&&r!==f)return this.onEnd(r),this.ended=!0,!1;0!==i.avail_out&&(0!==i.avail_in||4!==n&&2!==n)||("string"===this.options.to?this.onData(o.buf2binstring(s.shrinkBuf(i.output,i.next_out))):this.onData(s.shrinkBuf(i.output,i.next_out)))}while((i.avail_in>0||0===i.avail_out)&&1!==r);return 4===n?(r=a.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===f):2!==n||(this.onEnd(f),i.avail_out=0,!0)},n.prototype.onData=function(t){this.chunks.push(t)},n.prototype.onEnd=function(t){t===f&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Deflate=n,r.deflate=i,r.deflateRaw=function(t,e){return(e=e||{}).raw=!0,i(t,e)},r.gzip=function(t,e){return(e=e||{}).gzip=!0,i(t,e)}},{"./utils/common":3,"./utils/strings":4,"./zlib/deflate":8,"./zlib/messages":13,"./zlib/zstream":15}],2:[function(t,e,r){"use strict";function n(t){if(!(this instanceof n))return new n(t);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var r=a.inflateInit2(this.strm,e.windowBits);if(r!==u.Z_OK)throw new Error(h[r]);this.header=new f,a.inflateGetHeader(this.strm,this.header)}function i(t,e){var r=new n(e);if(r.push(t,!0),r.err)throw r.msg||h[r.err];return r.result}var a=t("./zlib/inflate"),s=t("./utils/common"),o=t("./utils/strings"),u=t("./zlib/constants"),h=t("./zlib/messages"),l=t("./zlib/zstream"),f=t("./zlib/gzheader"),c=Object.prototype.toString;n.prototype.push=function(t,e){var r,n,i,h,l,f,d=this.strm,p=this.options.chunkSize,v=this.options.dictionary,_=!1;if(this.ended)return!1;n=e===~~e?e:!0===e?u.Z_FINISH:u.Z_NO_FLUSH,"string"==typeof t?d.input=o.binstring2buf(t):"[object ArrayBuffer]"===c.call(t)?d.input=new Uint8Array(t):d.input=t,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new s.Buf8(p),d.next_out=0,d.avail_out=p),(r=a.inflate(d,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&v&&(f="string"==typeof v?o.string2buf(v):"[object ArrayBuffer]"===c.call(v)?new Uint8Array(v):v,r=a.inflateSetDictionary(this.strm,f)),r===u.Z_BUF_ERROR&&!0===_&&(r=u.Z_OK,_=!1),r!==u.Z_STREAM_END&&r!==u.Z_OK)return this.onEnd(r),this.ended=!0,!1;d.next_out&&(0!==d.avail_out&&r!==u.Z_STREAM_END&&(0!==d.avail_in||n!==u.Z_FINISH&&n!==u.Z_SYNC_FLUSH)||("string"===this.options.to?(i=o.utf8border(d.output,d.next_out),h=d.next_out-i,l=o.buf2string(d.output,i),d.next_out=h,d.avail_out=p-h,h&&s.arraySet(d.output,d.output,i,h,0),this.onData(l)):this.onData(s.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(_=!0)}while((d.avail_in>0||0===d.avail_out)&&r!==u.Z_STREAM_END);return r===u.Z_STREAM_END&&(n=u.Z_FINISH),n===u.Z_FINISH?(r=a.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===u.Z_OK):n!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),d.avail_out=0,!0)},n.prototype.onData=function(t){this.chunks.push(t)},n.prototype.onEnd=function(t){t===u.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Inflate=n,r.inflate=i,r.inflateRaw=function(t,e){return(e=e||{}).raw=!0,i(t,e)},r.ungzip=i},{"./utils/common":3,"./utils/strings":4,"./zlib/constants":6,"./zlib/gzheader":9,"./zlib/inflate":11,"./zlib/messages":13,"./zlib/zstream":15}],3:[function(t,e,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])}}return t},r.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray)t.set(e.subarray(r,r+n),i);else for(var a=0;a<n;a++)t[i+a]=e[r+a]},flattenChunks:function(t){var e,r,n,i,a,s;for(n=0,e=0,r=t.length;e<r;e++)n+=t[e].length;for(s=new Uint8Array(n),i=0,e=0,r=t.length;e<r;e++)a=t[e],s.set(a,i),i+=a.length;return s}},a={arraySet:function(t,e,r,n,i){for(var a=0;a<n;a++)t[i+a]=e[r+a]},flattenChunks:function(t){return[].concat.apply([],t)}};r.setTyped=function(t){t?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,a))},r.setTyped(n)},{}],4:[function(t,e,r){"use strict";function n(t,e){if(e<65537&&(t.subarray&&s||!t.subarray&&a))return String.fromCharCode.apply(null,i.shrinkBuf(t,e));for(var r="",n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r}var i=t("./common"),a=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(t){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){s=!1}for(var o=new i.Buf8(256),u=0;u<256;u++)o[u]=u>=252?6:u>=248?5:u>=240?4:u>=224?3:u>=192?2:1;o[254]=o[254]=1,r.string2buf=function(t){var e,r,n,a,s,o=t.length,u=0;for(a=0;a<o;a++)55296==(64512&(r=t.charCodeAt(a)))&&a+1<o&&(56320==(64512&(n=t.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++)),u+=r<128?1:r<2048?2:r<65536?3:4;for(e=new i.Buf8(u),s=0,a=0;s<u;a++)55296==(64512&(r=t.charCodeAt(a)))&&a+1<o&&(56320==(64512&(n=t.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++)),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|63&r):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|63&r):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|63&r);return e},r.buf2binstring=function(t){return n(t,t.length)},r.binstring2buf=function(t){for(var e=new i.Buf8(t.length),r=0,n=e.length;r<n;r++)e[r]=t.charCodeAt(r);return e},r.buf2string=function(t,e){var r,i,a,s,u=e||t.length,h=new Array(2*u);for(i=0,r=0;r<u;)if((a=t[r++])<128)h[i++]=a;else if((s=o[a])>4)h[i++]=65533,r+=s-1;else{for(a&=2===s?31:3===s?15:7;s>1&&r<u;)a=a<<6|63&t[r++],s--;s>1?h[i++]=65533:a<65536?h[i++]=a:(a-=65536,h[i++]=55296|a>>10&1023,h[i++]=56320|1023&a)}return n(h,i)},r.utf8border=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;r>=0&&128==(192&t[r]);)r--;return r<0||0===r?e:r+o[t[r]]>e?r:e}},{"./common":3}],5:[function(t,e,r){"use strict";e.exports=function(t,e,r,n){for(var i=65535&t|0,a=t>>>16&65535|0,s=0;0!==r;){r-=s=r>2e3?2e3:r;do{a=a+(i=i+e[n++]|0)|0}while(--s);i%=65521,a%=65521}return i|a<<16|0}},{}],6:[function(t,e,r){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],7:[function(t,e,r){"use strict";var n=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();e.exports=function(t,e,r,i){var a=n,s=i+r;t^=-1;for(var o=i;o<s;o++)t=t>>>8^a[255&(t^e[o])];return-1^t}},{}],8:[function(t,e,r){"use strict";function n(t,e){return t.msg=x[e],e}function i(t){return(t<<1)-(t>4?9:0)}function a(t){for(var e=t.length;--e>=0;)t[e]=0}function s(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(C.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function o(t,e){D._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,s(t.strm)}function u(t,e){t.pending_buf[t.pending++]=e}function h(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function l(t,e,r,n){var i=t.avail_in;return i>n&&(i=n),0===i?0:(t.avail_in-=i,C.arraySet(e,t.input,t.next_in,i,r),1===t.state.wrap?t.adler=S(t.adler,e,i,r):2===t.state.wrap&&(t.adler=T(t.adler,e,i,r)),t.next_in+=i,t.total_in+=i,i)}function f(t,e){var r,n,i=t.max_chain_length,a=t.strstart,s=t.prev_length,o=t.nice_match,u=t.strstart>t.w_size-rt?t.strstart-(t.w_size-rt):0,h=t.window,l=t.w_mask,f=t.prev,c=t.strstart+et,d=h[a+s-1],p=h[a+s];t.prev_length>=t.good_match&&(i>>=2),o>t.lookahead&&(o=t.lookahead);do{if(h[(r=e)+s]===p&&h[r+s-1]===d&&h[r]===h[a]&&h[++r]===h[a+1]){a+=2,r++;do{}while(h[++a]===h[++r]&&h[++a]===h[++r]&&h[++a]===h[++r]&&h[++a]===h[++r]&&h[++a]===h[++r]&&h[++a]===h[++r]&&h[++a]===h[++r]&&h[++a]===h[++r]&&a<c);if(n=et-(c-a),a=c-et,n>s){if(t.match_start=e,s=n,n>=o)break;d=h[a+s-1],p=h[a+s]}}}while((e=f[e&l])>u&&0!=--i);return s<=t.lookahead?s:t.lookahead}function c(t){var e,r,n,i,a,s=t.w_size;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=s+(s-rt)){C.arraySet(t.window,t.window,s,s,0),t.match_start-=s,t.strstart-=s,t.block_start-=s,e=r=t.hash_size;do{n=t.head[--e],t.head[e]=n>=s?n-s:0}while(--r);e=r=s;do{n=t.prev[--e],t.prev[e]=n>=s?n-s:0}while(--r);i+=s}if(0===t.strm.avail_in)break;if(r=l(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=r,t.lookahead+t.insert>=tt)for(a=t.strstart-t.insert,t.ins_h=t.window[a],t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+tt-1])&t.hash_mask,t.prev[a&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=a,a++,t.insert--,!(t.lookahead+t.insert<tt)););}while(t.lookahead<rt&&0!==t.strm.avail_in)}function d(t,e){for(var r,n;;){if(t.lookahead<rt){if(c(t),t.lookahead<rt&&e===F)return ft;if(0===t.lookahead)break}if(r=0,t.lookahead>=tt&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+tt-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-rt&&(t.match_length=f(t,r)),t.match_length>=tt)if(n=D._tr_tally(t,t.strstart-t.match_start,t.match_length-tt),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=tt){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+tt-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=D._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(o(t,!1),0===t.strm.avail_out))return ft}return t.insert=t.strstart<tt-1?t.strstart:tt-1,e===M?(o(t,!0),0===t.strm.avail_out?dt:pt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?ft:ct}function p(t,e){for(var r,n,i;;){if(t.lookahead<rt){if(c(t),t.lookahead<rt&&e===F)return ft;if(0===t.lookahead)break}if(r=0,t.lookahead>=tt&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+tt-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=tt-1,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-rt&&(t.match_length=f(t,r),t.match_length<=5&&(t.strategy===N||t.match_length===tt&&t.strstart-t.match_start>4096)&&(t.match_length=tt-1)),t.prev_length>=tt&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-tt,n=D._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-tt),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+tt-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=tt-1,t.strstart++,n&&(o(t,!1),0===t.strm.avail_out))return ft}else if(t.match_available){if((n=D._tr_tally(t,0,t.window[t.strstart-1]))&&o(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return ft}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=D._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<tt-1?t.strstart:tt-1,e===M?(o(t,!0),0===t.strm.avail_out?dt:pt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?ft:ct}function v(t,e){for(var r,n,i,a,s=t.window;;){if(t.lookahead<=et){if(c(t),t.lookahead<=et&&e===F)return ft;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=tt&&t.strstart>0&&((n=s[i=t.strstart-1])===s[++i]&&n===s[++i]&&n===s[++i])){a=t.strstart+et;do{}while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<a);t.match_length=et-(a-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=tt?(r=D._tr_tally(t,1,t.match_length-tt),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=D._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(o(t,!1),0===t.strm.avail_out))return ft}return t.insert=0,e===M?(o(t,!0),0===t.strm.avail_out?dt:pt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?ft:ct}function _(t,e){for(var r;;){if(0===t.lookahead&&(c(t),0===t.lookahead)){if(e===F)return ft;break}if(t.match_length=0,r=D._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(o(t,!1),0===t.strm.avail_out))return ft}return t.insert=0,e===M?(o(t,!0),0===t.strm.avail_out?dt:pt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?ft:ct}function g(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}function m(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=X,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new C.Buf16(2*Q),this.dyn_dtree=new C.Buf16(2*(2*J+1)),this.bl_tree=new C.Buf16(2*(2*K+1)),a(this.dyn_ltree),a(this.dyn_dtree),a(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new C.Buf16($+1),this.heap=new C.Buf16(2*Y+1),a(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new C.Buf16(2*Y+1),a(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function y(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=H,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?it:ht,t.adler=2===e.wrap?0:1,e.last_flush=F,D._tr_init(e),k):n(t,O)}function b(t){var e=y(t);return e===k&&function(t){t.window_size=2*t.w_size,a(t.head),t.max_lazy_match=E[t.level].max_lazy,t.good_match=E[t.level].good_length,t.nice_match=E[t.level].nice_length,t.max_chain_length=E[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=tt-1,t.match_available=0,t.ins_h=0}(t.state),e}function w(t,e,r,i,a,s){if(!t)return O;var o=1;if(e===L&&(e=6),i<0?(o=0,i=-i):i>15&&(o=2,i-=16),a<1||a>W||r!==X||i<8||i>15||e<0||e>9||s<0||s>j)return n(t,O);8===i&&(i=9);var u=new m;return t.state=u,u.strm=t,u.wrap=o,u.gzhead=null,u.w_bits=i,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=a+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+tt-1)/tt),u.window=new C.Buf8(2*u.w_size),u.head=new C.Buf16(u.hash_size),u.prev=new C.Buf16(u.w_size),u.lit_bufsize=1<<a+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new C.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=e,u.strategy=s,u.method=r,b(t)}var E,C=t("../utils/common"),D=t("./trees"),S=t("./adler32"),T=t("./crc32"),x=t("./messages"),F=0,A=1,P=3,M=4,I=5,k=0,U=1,O=-2,B=-3,R=-5,L=-1,N=1,z=2,G=3,j=4,q=0,H=2,X=8,W=9,V=15,Z=8,Y=286,J=30,K=19,Q=2*Y+1,$=15,tt=3,et=258,rt=et+tt+1,nt=32,it=42,at=69,st=73,ot=91,ut=103,ht=113,lt=666,ft=1,ct=2,dt=3,pt=4,vt=3;E=[new g(0,0,0,0,(function(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(c(t),0===t.lookahead&&e===F)return ft;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,o(t,!1),0===t.strm.avail_out))return ft;if(t.strstart-t.block_start>=t.w_size-rt&&(o(t,!1),0===t.strm.avail_out))return ft}return t.insert=0,e===M?(o(t,!0),0===t.strm.avail_out?dt:pt):(t.strstart>t.block_start&&(o(t,!1),t.strm.avail_out),ft)})),new g(4,4,8,4,d),new g(4,5,16,8,d),new g(4,6,32,32,d),new g(4,4,16,16,p),new g(8,16,32,32,p),new g(8,16,128,128,p),new g(8,32,128,256,p),new g(32,128,258,1024,p),new g(32,258,258,4096,p)],r.deflateInit=function(t,e){return w(t,e,X,V,Z,q)},r.deflateInit2=w,r.deflateReset=b,r.deflateResetKeep=y,r.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?O:(t.state.gzhead=e,k):O},r.deflate=function(t,e){var r,o,l,f;if(!t||!t.state||e>I||e<0)return t?n(t,O):O;if(o=t.state,!t.output||!t.input&&0!==t.avail_in||o.status===lt&&e!==M)return n(t,0===t.avail_out?R:O);if(o.strm=t,r=o.last_flush,o.last_flush=e,o.status===it)if(2===o.wrap)t.adler=0,u(o,31),u(o,139),u(o,8),o.gzhead?(u(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),u(o,255&o.gzhead.time),u(o,o.gzhead.time>>8&255),u(o,o.gzhead.time>>16&255),u(o,o.gzhead.time>>24&255),u(o,9===o.level?2:o.strategy>=z||o.level<2?4:0),u(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(u(o,255&o.gzhead.extra.length),u(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(t.adler=T(t.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=at):(u(o,0),u(o,0),u(o,0),u(o,0),u(o,0),u(o,9===o.level?2:o.strategy>=z||o.level<2?4:0),u(o,vt),o.status=ht);else{var c=X+(o.w_bits-8<<4)<<8;c|=(o.strategy>=z||o.level<2?0:o.level<6?1:6===o.level?2:3)<<6,0!==o.strstart&&(c|=nt),c+=31-c%31,o.status=ht,h(o,c),0!==o.strstart&&(h(o,t.adler>>>16),h(o,65535&t.adler)),t.adler=1}if(o.status===at)if(o.gzhead.extra){for(l=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>l&&(t.adler=T(t.adler,o.pending_buf,o.pending-l,l)),s(t),l=o.pending,o.pending!==o.pending_buf_size));)u(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>l&&(t.adler=T(t.adler,o.pending_buf,o.pending-l,l)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=st)}else o.status=st;if(o.status===st)if(o.gzhead.name){l=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>l&&(t.adler=T(t.adler,o.pending_buf,o.pending-l,l)),s(t),l=o.pending,o.pending===o.pending_buf_size)){f=1;break}f=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,u(o,f)}while(0!==f);o.gzhead.hcrc&&o.pending>l&&(t.adler=T(t.adler,o.pending_buf,o.pending-l,l)),0===f&&(o.gzindex=0,o.status=ot)}else o.status=ot;if(o.status===ot)if(o.gzhead.comment){l=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>l&&(t.adler=T(t.adler,o.pending_buf,o.pending-l,l)),s(t),l=o.pending,o.pending===o.pending_buf_size)){f=1;break}f=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,u(o,f)}while(0!==f);o.gzhead.hcrc&&o.pending>l&&(t.adler=T(t.adler,o.pending_buf,o.pending-l,l)),0===f&&(o.status=ut)}else o.status=ut;if(o.status===ut&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&s(t),o.pending+2<=o.pending_buf_size&&(u(o,255&t.adler),u(o,t.adler>>8&255),t.adler=0,o.status=ht)):o.status=ht),0!==o.pending){if(s(t),0===t.avail_out)return o.last_flush=-1,k}else if(0===t.avail_in&&i(e)<=i(r)&&e!==M)return n(t,R);if(o.status===lt&&0!==t.avail_in)return n(t,R);if(0!==t.avail_in||0!==o.lookahead||e!==F&&o.status!==lt){var d=o.strategy===z?_(o,e):o.strategy===G?v(o,e):E[o.level].func(o,e);if(d!==dt&&d!==pt||(o.status=lt),d===ft||d===dt)return 0===t.avail_out&&(o.last_flush=-1),k;if(d===ct&&(e===A?D._tr_align(o):e!==I&&(D._tr_stored_block(o,0,0,!1),e===P&&(a(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),s(t),0===t.avail_out))return o.last_flush=-1,k}return e!==M?k:o.wrap<=0?U:(2===o.wrap?(u(o,255&t.adler),u(o,t.adler>>8&255),u(o,t.adler>>16&255),u(o,t.adler>>24&255),u(o,255&t.total_in),u(o,t.total_in>>8&255),u(o,t.total_in>>16&255),u(o,t.total_in>>24&255)):(h(o,t.adler>>>16),h(o,65535&t.adler)),s(t),o.wrap>0&&(o.wrap=-o.wrap),0!==o.pending?k:U)},r.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==it&&e!==at&&e!==st&&e!==ot&&e!==ut&&e!==ht&&e!==lt?n(t,O):(t.state=null,e===ht?n(t,B):k):O},r.deflateSetDictionary=function(t,e){var r,n,i,s,o,u,h,l,f=e.length;if(!t||!t.state)return O;if(2===(s=(r=t.state).wrap)||1===s&&r.status!==it||r.lookahead)return O;for(1===s&&(t.adler=S(t.adler,e,f,0)),r.wrap=0,f>=r.w_size&&(0===s&&(a(r.head),r.strstart=0,r.block_start=0,r.insert=0),l=new C.Buf8(r.w_size),C.arraySet(l,e,f-r.w_size,r.w_size,0),e=l,f=r.w_size),o=t.avail_in,u=t.next_in,h=t.input,t.avail_in=f,t.next_in=0,t.input=e,c(r);r.lookahead>=tt;){n=r.strstart,i=r.lookahead-(tt-1);do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+tt-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++}while(--i);r.strstart=n,r.lookahead=tt-1,c(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=tt-1,r.match_available=0,t.next_in=u,t.input=h,t.avail_in=o,r.wrap=s,k},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./messages":13,"./trees":14}],9:[function(t,e,r){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],10:[function(t,e,r){"use strict";e.exports=function(t,e){var r,n,i,a,s,o,u,h,l,f,c,d,p,v,_,g,m,y,b,w,E,C,D,S,T;r=t.state,n=t.next_in,S=t.input,i=n+(t.avail_in-5),a=t.next_out,T=t.output,s=a-(e-t.avail_out),o=a+(t.avail_out-257),u=r.dmax,h=r.wsize,l=r.whave,f=r.wnext,c=r.window,d=r.hold,p=r.bits,v=r.lencode,_=r.distcode,g=(1<<r.lenbits)-1,m=(1<<r.distbits)-1;t:do{p<15&&(d+=S[n++]<<p,p+=8,d+=S[n++]<<p,p+=8),y=v[d&g];e:for(;;){if(d>>>=b=y>>>24,p-=b,0===(b=y>>>16&255))T[a++]=65535&y;else{if(!(16&b)){if(0==(64&b)){y=v[(65535&y)+(d&(1<<b)-1)];continue e}if(32&b){r.mode=12;break t}t.msg="invalid literal/length code",r.mode=30;break t}w=65535&y,(b&=15)&&(p<b&&(d+=S[n++]<<p,p+=8),w+=d&(1<<b)-1,d>>>=b,p-=b),p<15&&(d+=S[n++]<<p,p+=8,d+=S[n++]<<p,p+=8),y=_[d&m];r:for(;;){if(d>>>=b=y>>>24,p-=b,!(16&(b=y>>>16&255))){if(0==(64&b)){y=_[(65535&y)+(d&(1<<b)-1)];continue r}t.msg="invalid distance code",r.mode=30;break t}if(E=65535&y,p<(b&=15)&&(d+=S[n++]<<p,(p+=8)<b&&(d+=S[n++]<<p,p+=8)),(E+=d&(1<<b)-1)>u){t.msg="invalid distance too far back",r.mode=30;break t}if(d>>>=b,p-=b,E>(b=a-s)){if((b=E-b)>l&&r.sane){t.msg="invalid distance too far back",r.mode=30;break t}if(C=0,D=c,0===f){if(C+=h-b,b<w){w-=b;do{T[a++]=c[C++]}while(--b);C=a-E,D=T}}else if(f<b){if(C+=h+f-b,(b-=f)<w){w-=b;do{T[a++]=c[C++]}while(--b);if(C=0,f<w){w-=b=f;do{T[a++]=c[C++]}while(--b);C=a-E,D=T}}}else if(C+=f-b,b<w){w-=b;do{T[a++]=c[C++]}while(--b);C=a-E,D=T}for(;w>2;)T[a++]=D[C++],T[a++]=D[C++],T[a++]=D[C++],w-=3;w&&(T[a++]=D[C++],w>1&&(T[a++]=D[C++]))}else{C=a-E;do{T[a++]=T[C++],T[a++]=T[C++],T[a++]=T[C++],w-=3}while(w>2);w&&(T[a++]=T[C++],w>1&&(T[a++]=T[C++]))}break}}break}}while(n<i&&a<o);n-=w=p>>3,d&=(1<<(p-=w<<3))-1,t.next_in=n,t.next_out=a,t.avail_in=n<i?i-n+5:5-(n-i),t.avail_out=a<o?o-a+257:257-(a-o),r.hold=d,r.bits=p}},{}],11:[function(t,e,r){"use strict";function n(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function i(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new d.Buf16(320),this.work=new d.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function a(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=I,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new d.Buf32(lt),e.distcode=e.distdyn=new d.Buf32(ft),e.sane=1,e.back=-1,D):x}function s(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,a(t)):x}function o(t,e){var r,n;return t&&t.state?(n=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?x:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,s(t))):x}function u(t,e){var r,n;return t?(n=new i,t.state=n,n.window=null,(r=o(t,e))!==D&&(t.state=null),r):x}function h(t){if(dt){var e;for(f=new d.Buf32(512),c=new d.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(g(y,t.lens,0,288,f,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;g(b,t.lens,0,32,c,0,t.work,{bits:5}),dt=!1}t.lencode=f,t.lenbits=9,t.distcode=c,t.distbits=5}function l(t,e,r,n){var i,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new d.Buf8(a.wsize)),n>=a.wsize?(d.arraySet(a.window,e,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((i=a.wsize-a.wnext)>n&&(i=n),d.arraySet(a.window,e,r-n,i,a.wnext),(n-=i)?(d.arraySet(a.window,e,r-n,n,0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0}var f,c,d=t("../utils/common"),p=t("./adler32"),v=t("./crc32"),_=t("./inffast"),g=t("./inftrees"),m=0,y=1,b=2,w=4,E=5,C=6,D=0,S=1,T=2,x=-2,F=-3,A=-4,P=-5,M=8,I=1,k=2,U=3,O=4,B=5,R=6,L=7,N=8,z=9,G=10,j=11,q=12,H=13,X=14,W=15,V=16,Z=17,Y=18,J=19,K=20,Q=21,$=22,tt=23,et=24,rt=25,nt=26,it=27,at=28,st=29,ot=30,ut=31,ht=32,lt=852,ft=592,ct=15,dt=!0;r.inflateReset=s,r.inflateReset2=o,r.inflateResetKeep=a,r.inflateInit=function(t){return u(t,ct)},r.inflateInit2=u,r.inflate=function(t,e){var r,i,a,s,o,u,f,c,lt,ft,ct,dt,pt,vt,_t,gt,mt,yt,bt,wt,Et,Ct,Dt,St,Tt=0,xt=new d.Buf8(4),Ft=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return x;(r=t.state).mode===q&&(r.mode=H),o=t.next_out,a=t.output,f=t.avail_out,s=t.next_in,i=t.input,u=t.avail_in,c=r.hold,lt=r.bits,ft=u,ct=f,Ct=D;t:for(;;)switch(r.mode){case I:if(0===r.wrap){r.mode=H;break}for(;lt<16;){if(0===u)break t;u--,c+=i[s++]<<lt,lt+=8}if(2&r.wrap&&35615===c){r.check=0,xt[0]=255&c,xt[1]=c>>>8&255,r.check=v(r.check,xt,2,0),c=0,lt=0,r.mode=k;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&c)<<8)+(c>>8))%31){t.msg="incorrect header check",r.mode=ot;break}if((15&c)!==M){t.msg="unknown compression method",r.mode=ot;break}if(lt-=4,Et=8+(15&(c>>>=4)),0===r.wbits)r.wbits=Et;else if(Et>r.wbits){t.msg="invalid window size",r.mode=ot;break}r.dmax=1<<Et,t.adler=r.check=1,r.mode=512&c?G:q,c=0,lt=0;break;case k:for(;lt<16;){if(0===u)break t;u--,c+=i[s++]<<lt,lt+=8}if(r.flags=c,(255&r.flags)!==M){t.msg="unknown compression method",r.mode=ot;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=ot;break}r.head&&(r.head.text=c>>8&1),512&r.flags&&(xt[0]=255&c,xt[1]=c>>>8&255,r.check=v(r.check,xt,2,0)),c=0,lt=0,r.mode=U;case U:for(;lt<32;){if(0===u)break t;u--,c+=i[s++]<<lt,lt+=8}r.head&&(r.head.time=c),512&r.flags&&(xt[0]=255&c,xt[1]=c>>>8&255,xt[2]=c>>>16&255,xt[3]=c>>>24&255,r.check=v(r.check,xt,4,0)),c=0,lt=0,r.mode=O;case O:for(;lt<16;){if(0===u)break t;u--,c+=i[s++]<<lt,lt+=8}r.head&&(r.head.xflags=255&c,r.head.os=c>>8),512&r.flags&&(xt[0]=255&c,xt[1]=c>>>8&255,r.check=v(r.check,xt,2,0)),c=0,lt=0,r.mode=B;case B:if(1024&r.flags){for(;lt<16;){if(0===u)break t;u--,c+=i[s++]<<lt,lt+=8}r.length=c,r.head&&(r.head.extra_len=c),512&r.flags&&(xt[0]=255&c,xt[1]=c>>>8&255,r.check=v(r.check,xt,2,0)),c=0,lt=0}else r.head&&(r.head.extra=null);r.mode=R;case R:if(1024&r.flags&&((dt=r.length)>u&&(dt=u),dt&&(r.head&&(Et=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),d.arraySet(r.head.extra,i,s,dt,Et)),512&r.flags&&(r.check=v(r.check,i,dt,s)),u-=dt,s+=dt,r.length-=dt),r.length))break t;r.length=0,r.mode=L;case L:if(2048&r.flags){if(0===u)break t;dt=0;do{Et=i[s+dt++],r.head&&Et&&r.length<65536&&(r.head.name+=String.fromCharCode(Et))}while(Et&&dt<u);if(512&r.flags&&(r.check=v(r.check,i,dt,s)),u-=dt,s+=dt,Et)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=N;case N:if(4096&r.flags){if(0===u)break t;dt=0;do{Et=i[s+dt++],r.head&&Et&&r.length<65536&&(r.head.comment+=String.fromCharCode(Et))}while(Et&&dt<u);if(512&r.flags&&(r.check=v(r.check,i,dt,s)),u-=dt,s+=dt,Et)break t}else r.head&&(r.head.comment=null);r.mode=z;case z:if(512&r.flags){for(;lt<16;){if(0===u)break t;u--,c+=i[s++]<<lt,lt+=8}if(c!==(65535&r.check)){t.msg="header crc mismatch",r.mode=ot;break}c=0,lt=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=q;break;case G:for(;lt<32;){if(0===u)break t;u--,c+=i[s++]<<lt,lt+=8}t.adler=r.check=n(c),c=0,lt=0,r.mode=j;case j:if(0===r.havedict)return t.next_out=o,t.avail_out=f,t.next_in=s,t.avail_in=u,r.hold=c,r.bits=lt,T;t.adler=r.check=1,r.mode=q;case q:if(e===E||e===C)break t;case H:if(r.last){c>>>=7&lt,lt-=7&lt,r.mode=it;break}for(;lt<3;){if(0===u)break t;u--,c+=i[s++]<<lt,lt+=8}switch(r.last=1&c,lt-=1,3&(c>>>=1)){case 0:r.mode=X;break;case 1:if(h(r),r.mode=K,e===C){c>>>=2,lt-=2;break t}break;case 2:r.mode=Z;break;case 3:t.msg="invalid block type",r.mode=ot}c>>>=2,lt-=2;break;case X:for(c>>>=7&lt,lt-=7&lt;lt<32;){if(0===u)break t;u--,c+=i[s++]<<lt,lt+=8}if((65535&c)!=(c>>>16^65535)){t.msg="invalid stored block lengths",r.mode=ot;break}if(r.length=65535&c,c=0,lt=0,r.mode=W,e===C)break t;case W:r.mode=V;case V:if(dt=r.length){if(dt>u&&(dt=u),dt>f&&(dt=f),0===dt)break t;d.arraySet(a,i,s,dt,o),u-=dt,s+=dt,f-=dt,o+=dt,r.length-=dt;break}r.mode=q;break;case Z:for(;lt<14;){if(0===u)break t;u--,c+=i[s++]<<lt,lt+=8}if(r.nlen=257+(31&c),c>>>=5,lt-=5,r.ndist=1+(31&c),c>>>=5,lt-=5,r.ncode=4+(15&c),c>>>=4,lt-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=ot;break}r.have=0,r.mode=Y;case Y:for(;r.have<r.ncode;){for(;lt<3;){if(0===u)break t;u--,c+=i[s++]<<lt,lt+=8}r.lens[Ft[r.have++]]=7&c,c>>>=3,lt-=3}for(;r.have<19;)r.lens[Ft[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,Dt={bits:r.lenbits},Ct=g(m,r.lens,0,19,r.lencode,0,r.work,Dt),r.lenbits=Dt.bits,Ct){t.msg="invalid code lengths set",r.mode=ot;break}r.have=0,r.mode=J;case J:for(;r.have<r.nlen+r.ndist;){for(;gt=(Tt=r.lencode[c&(1<<r.lenbits)-1])>>>16&255,mt=65535&Tt,!((_t=Tt>>>24)<=lt);){if(0===u)break t;u--,c+=i[s++]<<lt,lt+=8}if(mt<16)c>>>=_t,lt-=_t,r.lens[r.have++]=mt;else{if(16===mt){for(St=_t+2;lt<St;){if(0===u)break t;u--,c+=i[s++]<<lt,lt+=8}if(c>>>=_t,lt-=_t,0===r.have){t.msg="invalid bit length repeat",r.mode=ot;break}Et=r.lens[r.have-1],dt=3+(3&c),c>>>=2,lt-=2}else if(17===mt){for(St=_t+3;lt<St;){if(0===u)break t;u--,c+=i[s++]<<lt,lt+=8}lt-=_t,Et=0,dt=3+(7&(c>>>=_t)),c>>>=3,lt-=3}else{for(St=_t+7;lt<St;){if(0===u)break t;u--,c+=i[s++]<<lt,lt+=8}lt-=_t,Et=0,dt=11+(127&(c>>>=_t)),c>>>=7,lt-=7}if(r.have+dt>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=ot;break}for(;dt--;)r.lens[r.have++]=Et}}if(r.mode===ot)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=ot;break}if(r.lenbits=9,Dt={bits:r.lenbits},Ct=g(y,r.lens,0,r.nlen,r.lencode,0,r.work,Dt),r.lenbits=Dt.bits,Ct){t.msg="invalid literal/lengths set",r.mode=ot;break}if(r.distbits=6,r.distcode=r.distdyn,Dt={bits:r.distbits},Ct=g(b,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,Dt),r.distbits=Dt.bits,Ct){t.msg="invalid distances set",r.mode=ot;break}if(r.mode=K,e===C)break t;case K:r.mode=Q;case Q:if(u>=6&&f>=258){t.next_out=o,t.avail_out=f,t.next_in=s,t.avail_in=u,r.hold=c,r.bits=lt,_(t,ct),o=t.next_out,a=t.output,f=t.avail_out,s=t.next_in,i=t.input,u=t.avail_in,c=r.hold,lt=r.bits,r.mode===q&&(r.back=-1);break}for(r.back=0;gt=(Tt=r.lencode[c&(1<<r.lenbits)-1])>>>16&255,mt=65535&Tt,!((_t=Tt>>>24)<=lt);){if(0===u)break t;u--,c+=i[s++]<<lt,lt+=8}if(gt&&0==(240&gt)){for(yt=_t,bt=gt,wt=mt;gt=(Tt=r.lencode[wt+((c&(1<<yt+bt)-1)>>yt)])>>>16&255,mt=65535&Tt,!(yt+(_t=Tt>>>24)<=lt);){if(0===u)break t;u--,c+=i[s++]<<lt,lt+=8}c>>>=yt,lt-=yt,r.back+=yt}if(c>>>=_t,lt-=_t,r.back+=_t,r.length=mt,0===gt){r.mode=nt;break}if(32&gt){r.back=-1,r.mode=q;break}if(64&gt){t.msg="invalid literal/length code",r.mode=ot;break}r.extra=15&gt,r.mode=$;case $:if(r.extra){for(St=r.extra;lt<St;){if(0===u)break t;u--,c+=i[s++]<<lt,lt+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,lt-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=tt;case tt:for(;gt=(Tt=r.distcode[c&(1<<r.distbits)-1])>>>16&255,mt=65535&Tt,!((_t=Tt>>>24)<=lt);){if(0===u)break t;u--,c+=i[s++]<<lt,lt+=8}if(0==(240&gt)){for(yt=_t,bt=gt,wt=mt;gt=(Tt=r.distcode[wt+((c&(1<<yt+bt)-1)>>yt)])>>>16&255,mt=65535&Tt,!(yt+(_t=Tt>>>24)<=lt);){if(0===u)break t;u--,c+=i[s++]<<lt,lt+=8}c>>>=yt,lt-=yt,r.back+=yt}if(c>>>=_t,lt-=_t,r.back+=_t,64&gt){t.msg="invalid distance code",r.mode=ot;break}r.offset=mt,r.extra=15&gt,r.mode=et;case et:if(r.extra){for(St=r.extra;lt<St;){if(0===u)break t;u--,c+=i[s++]<<lt,lt+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,lt-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=ot;break}r.mode=rt;case rt:if(0===f)break t;if(dt=ct-f,r.offset>dt){if((dt=r.offset-dt)>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=ot;break}dt>r.wnext?(dt-=r.wnext,pt=r.wsize-dt):pt=r.wnext-dt,dt>r.length&&(dt=r.length),vt=r.window}else vt=a,pt=o-r.offset,dt=r.length;dt>f&&(dt=f),f-=dt,r.length-=dt;do{a[o++]=vt[pt++]}while(--dt);0===r.length&&(r.mode=Q);break;case nt:if(0===f)break t;a[o++]=r.length,f--,r.mode=Q;break;case it:if(r.wrap){for(;lt<32;){if(0===u)break t;u--,c|=i[s++]<<lt,lt+=8}if(ct-=f,t.total_out+=ct,r.total+=ct,ct&&(t.adler=r.check=r.flags?v(r.check,a,ct,o-ct):p(r.check,a,ct,o-ct)),ct=f,(r.flags?c:n(c))!==r.check){t.msg="incorrect data check",r.mode=ot;break}c=0,lt=0}r.mode=at;case at:if(r.wrap&&r.flags){for(;lt<32;){if(0===u)break t;u--,c+=i[s++]<<lt,lt+=8}if(c!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=ot;break}c=0,lt=0}r.mode=st;case st:Ct=S;break t;case ot:Ct=F;break t;case ut:return A;case ht:default:return x}return t.next_out=o,t.avail_out=f,t.next_in=s,t.avail_in=u,r.hold=c,r.bits=lt,(r.wsize||ct!==t.avail_out&&r.mode<ot&&(r.mode<it||e!==w))&&l(t,t.output,t.next_out,ct-t.avail_out)?(r.mode=ut,A):(ft-=t.avail_in,ct-=t.avail_out,t.total_in+=ft,t.total_out+=ct,r.total+=ct,r.wrap&&ct&&(t.adler=r.check=r.flags?v(r.check,a,ct,t.next_out-ct):p(r.check,a,ct,t.next_out-ct)),t.data_type=r.bits+(r.last?64:0)+(r.mode===q?128:0)+(r.mode===K||r.mode===W?256:0),(0===ft&&0===ct||e===w)&&Ct===D&&(Ct=P),Ct)},r.inflateEnd=function(t){if(!t||!t.state)return x;var e=t.state;return e.window&&(e.window=null),t.state=null,D},r.inflateGetHeader=function(t,e){var r;return t&&t.state?0==(2&(r=t.state).wrap)?x:(r.head=e,e.done=!1,D):x},r.inflateSetDictionary=function(t,e){var r,n=e.length;return t&&t.state?0!==(r=t.state).wrap&&r.mode!==j?x:r.mode===j&&p(1,e,n,0)!==r.check?F:l(t,e,n,n)?(r.mode=ut,A):(r.havedict=1,D):x},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./inffast":10,"./inftrees":12}],12:[function(t,e,r){"use strict";var n=t("../utils/common"),i=15,a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,r,h,l,f,c,d){var p,v,_,g,m,y,b,w,E,C=d.bits,D=0,S=0,T=0,x=0,F=0,A=0,P=0,M=0,I=0,k=0,U=null,O=0,B=new n.Buf16(16),R=new n.Buf16(16),L=null,N=0;for(D=0;D<=i;D++)B[D]=0;for(S=0;S<h;S++)B[e[r+S]]++;for(F=C,x=i;x>=1&&0===B[x];x--);if(F>x&&(F=x),0===x)return l[f++]=20971520,l[f++]=20971520,d.bits=1,0;for(T=1;T<x&&0===B[T];T++);for(F<T&&(F=T),M=1,D=1;D<=i;D++)if(M<<=1,(M-=B[D])<0)return-1;if(M>0&&(0===t||1!==x))return-1;for(R[1]=0,D=1;D<i;D++)R[D+1]=R[D]+B[D];for(S=0;S<h;S++)0!==e[r+S]&&(c[R[e[r+S]]++]=S);if(0===t?(U=L=c,y=19):1===t?(U=a,O-=257,L=s,N-=257,y=256):(U=o,L=u,y=-1),k=0,S=0,D=T,m=f,A=F,P=0,_=-1,g=(I=1<<F)-1,1===t&&I>852||2===t&&I>592)return 1;for(;;){b=D-P,c[S]<y?(w=0,E=c[S]):c[S]>y?(w=L[N+c[S]],E=U[O+c[S]]):(w=96,E=0),p=1<<D-P,T=v=1<<A;do{l[m+(k>>P)+(v-=p)]=b<<24|w<<16|E|0}while(0!==v);for(p=1<<D-1;k&p;)p>>=1;if(0!==p?(k&=p-1,k+=p):k=0,S++,0==--B[D]){if(D===x)break;D=e[r+c[S]]}if(D>F&&(k&g)!==_){for(0===P&&(P=F),m+=T,M=1<<(A=D-P);A+P<x&&!((M-=B[A+P])<=0);)A++,M<<=1;if(I+=1<<A,1===t&&I>852||2===t&&I>592)return 1;l[_=k&g]=F<<24|A<<16|m-f|0}}return 0!==k&&(l[m+k]=D-P<<24|64<<16|0),d.bits=F,0}},{"../utils/common":3}],13:[function(t,e,r){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],14:[function(t,e,r){"use strict";function n(t){for(var e=t.length;--e>=0;)t[e]=0}function i(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}function a(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function s(t){return t<256?Z[t]:Z[256+(t>>>7)]}function o(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function u(t,e,r){t.bi_valid>B-r?(t.bi_buf|=e<<t.bi_valid&65535,o(t,t.bi_buf),t.bi_buf=e>>B-t.bi_valid,t.bi_valid+=r-B):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function h(t,e,r){u(t,r[2*e],r[2*e+1])}function l(t,e){var r=0;do{r|=1&t,t>>>=1,r<<=1}while(--e>0);return r>>>1}function f(t,e,r){var n,i,a=new Array(O+1),s=0;for(n=1;n<=O;n++)a[n]=s=s+r[n-1]<<1;for(i=0;i<=e;i++){var o=t[2*i+1];0!==o&&(t[2*i]=l(a[o]++,o))}}function c(t){var e;for(e=0;e<M;e++)t.dyn_ltree[2*e]=0;for(e=0;e<I;e++)t.dyn_dtree[2*e]=0;for(e=0;e<k;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*L]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function d(t){t.bi_valid>8?o(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function p(t,e,r,n){var i=2*e,a=2*r;return t[i]<t[a]||t[i]===t[a]&&n[e]<=n[r]}function v(t,e,r){for(var n=t.heap[r],i=r<<1;i<=t.heap_len&&(i<t.heap_len&&p(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!p(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n}function _(t,e,r){var n,i,a,o,l=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*l]<<8|t.pending_buf[t.d_buf+2*l+1],i=t.pending_buf[t.l_buf+l],l++,0===n?h(t,i,e):(h(t,(a=Y[i])+P+1,e),0!==(o=j[a])&&u(t,i-=J[a],o),h(t,a=s(--n),r),0!==(o=q[a])&&u(t,n-=K[a],o))}while(l<t.last_lit);h(t,L,e)}function g(t,e){var r,n,i,a=e.dyn_tree,s=e.stat_desc.static_tree,o=e.stat_desc.has_stree,u=e.stat_desc.elems,h=-1;for(t.heap_len=0,t.heap_max=U,r=0;r<u;r++)0!==a[2*r]?(t.heap[++t.heap_len]=h=r,t.depth[r]=0):a[2*r+1]=0;for(;t.heap_len<2;)a[2*(i=t.heap[++t.heap_len]=h<2?++h:0)]=1,t.depth[i]=0,t.opt_len--,o&&(t.static_len-=s[2*i+1]);for(e.max_code=h,r=t.heap_len>>1;r>=1;r--)v(t,a,r);i=u;do{r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],v(t,a,1),n=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=n,a[2*i]=a[2*r]+a[2*n],t.depth[i]=(t.depth[r]>=t.depth[n]?t.depth[r]:t.depth[n])+1,a[2*r+1]=a[2*n+1]=i,t.heap[1]=i++,v(t,a,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var r,n,i,a,s,o,u=e.dyn_tree,h=e.max_code,l=e.stat_desc.static_tree,f=e.stat_desc.has_stree,c=e.stat_desc.extra_bits,d=e.stat_desc.extra_base,p=e.stat_desc.max_length,v=0;for(a=0;a<=O;a++)t.bl_count[a]=0;for(u[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<U;r++)(a=u[2*u[2*(n=t.heap[r])+1]+1]+1)>p&&(a=p,v++),u[2*n+1]=a,n>h||(t.bl_count[a]++,s=0,n>=d&&(s=c[n-d]),o=u[2*n],t.opt_len+=o*(a+s),f&&(t.static_len+=o*(l[2*n+1]+s)));if(0!==v){do{for(a=p-1;0===t.bl_count[a];)a--;t.bl_count[a]--,t.bl_count[a+1]+=2,t.bl_count[p]--,v-=2}while(v>0);for(a=p;0!==a;a--)for(n=t.bl_count[a];0!==n;)(i=t.heap[--r])>h||(u[2*i+1]!==a&&(t.opt_len+=(a-u[2*i+1])*u[2*i],u[2*i+1]=a),n--)}}(t,e),f(a,h,t.bl_count)}function m(t,e,r){var n,i,a=-1,s=e[1],o=0,u=7,h=4;for(0===s&&(u=138,h=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)i=s,s=e[2*(n+1)+1],++o<u&&i===s||(o<h?t.bl_tree[2*i]+=o:0!==i?(i!==a&&t.bl_tree[2*i]++,t.bl_tree[2*N]++):o<=10?t.bl_tree[2*z]++:t.bl_tree[2*G]++,o=0,a=i,0===s?(u=138,h=3):i===s?(u=6,h=3):(u=7,h=4))}function y(t,e,r){var n,i,a=-1,s=e[1],o=0,l=7,f=4;for(0===s&&(l=138,f=3),n=0;n<=r;n++)if(i=s,s=e[2*(n+1)+1],!(++o<l&&i===s)){if(o<f)do{h(t,i,t.bl_tree)}while(0!=--o);else 0!==i?(i!==a&&(h(t,i,t.bl_tree),o--),h(t,N,t.bl_tree),u(t,o-3,2)):o<=10?(h(t,z,t.bl_tree),u(t,o-3,3)):(h(t,G,t.bl_tree),u(t,o-11,7));o=0,a=i,0===s?(l=138,f=3):i===s?(l=6,f=3):(l=7,f=4)}}function b(t,e,r,n){u(t,(T<<1)+(n?1:0),3),function(t,e,r,n){d(t),n&&(o(t,r),o(t,~r)),w.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}(t,e,r,!0)}var w=t("../utils/common"),E=4,C=0,D=1,S=2,T=0,x=1,F=2,A=29,P=256,M=P+1+A,I=30,k=19,U=2*M+1,O=15,B=16,R=7,L=256,N=16,z=17,G=18,j=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],q=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],H=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],X=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],W=new Array(2*(M+2));n(W);var V=new Array(2*I);n(V);var Z=new Array(512);n(Z);var Y=new Array(256);n(Y);var J=new Array(A);n(J);var K=new Array(I);n(K);var Q,$,tt,et=!1;r._tr_init=function(t){et||(function(){var t,e,r,n,a,s=new Array(O+1);for(r=0,n=0;n<A-1;n++)for(J[n]=r,t=0;t<1<<j[n];t++)Y[r++]=n;for(Y[r-1]=n,a=0,n=0;n<16;n++)for(K[n]=a,t=0;t<1<<q[n];t++)Z[a++]=n;for(a>>=7;n<I;n++)for(K[n]=a<<7,t=0;t<1<<q[n]-7;t++)Z[256+a++]=n;for(e=0;e<=O;e++)s[e]=0;for(t=0;t<=143;)W[2*t+1]=8,t++,s[8]++;for(;t<=255;)W[2*t+1]=9,t++,s[9]++;for(;t<=279;)W[2*t+1]=7,t++,s[7]++;for(;t<=287;)W[2*t+1]=8,t++,s[8]++;for(f(W,M+1,s),t=0;t<I;t++)V[2*t+1]=5,V[2*t]=l(t,5);Q=new i(W,j,P+1,M,O),$=new i(V,q,0,I,O),tt=new i(new Array(0),H,0,k,R)}(),et=!0),t.l_desc=new a(t.dyn_ltree,Q),t.d_desc=new a(t.dyn_dtree,$),t.bl_desc=new a(t.bl_tree,tt),t.bi_buf=0,t.bi_valid=0,c(t)},r._tr_stored_block=b,r._tr_flush_block=function(t,e,r,n){var i,a,s=0;t.level>0?(t.strm.data_type===S&&(t.strm.data_type=function(t){var e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return C;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return D;for(e=32;e<P;e++)if(0!==t.dyn_ltree[2*e])return D;return C}(t)),g(t,t.l_desc),g(t,t.d_desc),s=function(t){var e;for(m(t,t.dyn_ltree,t.l_desc.max_code),m(t,t.dyn_dtree,t.d_desc.max_code),g(t,t.bl_desc),e=k-1;e>=3&&0===t.bl_tree[2*X[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(a=t.static_len+3+7>>>3)<=i&&(i=a)):i=a=r+5,r+4<=i&&-1!==e?b(t,e,r,n):t.strategy===E||a===i?(u(t,(x<<1)+(n?1:0),3),_(t,W,V)):(u(t,(F<<1)+(n?1:0),3),function(t,e,r,n){var i;for(u(t,e-257,5),u(t,r-1,5),u(t,n-4,4),i=0;i<n;i++)u(t,t.bl_tree[2*X[i]+1],3);y(t,t.dyn_ltree,e-1),y(t,t.dyn_dtree,r-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),_(t,t.dyn_ltree,t.dyn_dtree)),c(t),n&&d(t)},r._tr_tally=function(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(Y[r]+P+1)]++,t.dyn_dtree[2*s(e)]++),t.last_lit===t.lit_bufsize-1},r._tr_align=function(t){u(t,x<<1,3),h(t,L,W),function(t){16===t.bi_valid?(o(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},{"../utils/common":3}],15:[function(t,e,r){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],"/":[function(t,e,r){"use strict";var n={};(0,t("./lib/utils/common").assign)(n,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=n},{"./lib/deflate":1,"./lib/inflate":2,"./lib/utils/common":3,"./lib/zlib/constants":6}]},{},[])("/")})),function(t){"use strict";var e=function(){function t(t){this.message="JPEG error: "+t}return t.prototype=new Error,t.prototype.name="JpegError",t.constructor=t,t}(),r=function(){var t=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);function r(t){null==t&&(t={}),null==t.decodeTransform&&(t.decodeTransform=null),null==t.colorTransform&&(t.colorTransform=-1),this._decodeTransform=t.decodeTransform,this._colorTransform=t.colorTransform}function n(t,e){for(var r,n,i=0,a=[],s=16;s>0&&!t[s-1];)s--;a.push({children:[],index:0});var o,u=a[0];for(r=0;r<s;r++){for(n=0;n<t[r];n++){for((u=a.pop()).children[u.index]=e[i];u.index>0;)u=a.pop();for(u.index++,a.push(u);a.length<=r;)a.push(o={children:[],index:0}),u.children[u.index]=o.children,u=o;i++}r+1<s&&(a.push(o={children:[],index:0}),u.children[u.index]=o.children,u=o)}return a[0].children}function i(t,e,r){return 64*((t.blocksPerLine+1)*e+r)}function a(r,n,a,s,o,h,l,f,d,p){null==p&&(p=!1);var v=a.mcusPerLine,_=a.progressive,g=n,m=0,y=0;function b(){if(y>0)return y--,m>>y&1;if(255===(m=r[n++])){var t=r[n++];if(t){if(220===t&&p){n+=2;var i=r[n++]<<8|r[n++];if(i>0&&i!==a.scanLines)throw new DNLMarkerError("Found DNL marker (0xFFDC) while parsing scan data",i)}else if(217===t)throw new EOIMarkerError("Found EOI marker (0xFFD9) while parsing scan data");throw new e("unexpected marker "+(m<<8|t).toString(16))}}return y=7,m>>>7}function w(t){for(var r=t;;){if("number"==typeof(r=r[b()]))return r;if("object"!=typeof r)throw new e("invalid huffman sequence")}}function E(t){for(var e=0;t>0;)e=e<<1|b(),t--;return e}function C(t){if(1===t)return 1===b()?1:-1;var e=E(t);return e>=1<<t-1?e:e+(-1<<t)+1}var D=0;var S,T=0;function x(t,e,r,n,a){var s=r%v;e(t,i(t,(r/v|0)*t.v+n,s*t.h+a))}function F(t,e,r){e(t,i(t,r/t.blocksPerLine|0,r%t.blocksPerLine))}var A,P,M,I,k,U,O=s.length;U=_?0===h?0===f?function(t,e){var r=w(t.huffmanTableDC),n=0===r?0:C(r)<<d;t.blockData[e]=t.pred+=n}:function(t,e){t.blockData[e]|=b()<<d}:0===f?function(e,r){if(D>0)D--;else for(var n=h,i=l;n<=i;){var a=w(e.huffmanTableAC),s=15&a,o=a>>4;if(0!==s){var u=t[n+=o];e.blockData[r+u]=C(s)*(1<<d),n++}else{if(o<15){D=E(o)+(1<<o)-1;break}n+=16}}}:function(r,n){for(var i,a,s=h,o=l,u=0;s<=o;){var f=n+t[s],c=r.blockData[f]<0?-1:1;switch(T){case 0:if(u=(a=w(r.huffmanTableAC))>>4,0===(i=15&a))u<15?(D=E(u)+(1<<u),T=4):(u=16,T=1);else{if(1!==i)throw new e("invalid ACn encoding");S=C(i),T=u?2:3}continue;case 1:case 2:r.blockData[f]?r.blockData[f]+=c*(b()<<d):0===--u&&(T=2===T?3:0);break;case 3:r.blockData[f]?r.blockData[f]+=c*(b()<<d):(r.blockData[f]=S<<d,T=0);break;case 4:r.blockData[f]&&(r.blockData[f]+=c*(b()<<d))}s++}4===T&&0===--D&&(T=0)}:function(e,r){var n=w(e.huffmanTableDC),i=0===n?0:C(n);e.blockData[r]=e.pred+=i;for(var a=1;a<64;){var s=w(e.huffmanTableAC),o=15&s,u=s>>4;if(0!==o){var h=t[a+=u];e.blockData[r+h]=C(o),a++}else{if(u<15)break;a+=16}}};var B,R,L,N,z=0;for(R=1===O?s[0].blocksPerLine*s[0].blocksPerColumn:v*a.mcusPerColumn;z<R;){var G=o?Math.min(R-z,o):R;for(P=0;P<O;P++)s[P].pred=0;if(D=0,1===O)for(A=s[0],k=0;k<G;k++)F(A,U,z),z++;else for(k=0;k<G;k++){for(P=0;P<O;P++)for(L=(A=s[P]).h,N=A.v,M=0;M<N;M++)for(I=0;I<L;I++)x(A,U,z,M,I);z++}y=0,(B=u(r,n))&&B.invalid&&(c("decodeScan - unexpected MCU data, current marker is: "+B.invalid),n=B.offset);var j=B&&B.marker;if(!j||j<=65280)throw new e("marker was not found");if(!(j>=65488&&j<=65495))break;n+=2}return(B=u(r,n))&&B.invalid&&(c("decodeScan - unexpected Scan data, current marker is: "+B.invalid),n=B.offset),n-g}function s(t,r,n){var i,a,s,o,u,h,l,f,c,d,p,v,_,g,m,y,b,w=t.quantizationTable,E=t.blockData;if(!w)throw new e("missing required Quantization Table.");for(var C=0;C<64;C+=8)c=E[r+C],d=E[r+C+1],p=E[r+C+2],v=E[r+C+3],_=E[r+C+4],g=E[r+C+5],m=E[r+C+6],y=E[r+C+7],c*=w[C],0!=(d|p|v|_|g|m|y)?(d*=w[C+1],p*=w[C+2],v*=w[C+3],_*=w[C+4],g*=w[C+5],a=(i=(i=5793*c+128>>8)+(a=5793*_+128>>8)+1>>1)-a,b=3784*(s=p)+1567*(o=m*=w[C+6])+128>>8,s=1567*s-3784*o+128>>8,l=(u=(u=2896*(d-(y*=w[C+7]))+128>>8)+(l=g<<4)+1>>1)-l,h=(f=(f=2896*(d+y)+128>>8)+(h=v<<4)+1>>1)-h,o=(i=i+(o=b)+1>>1)-o,s=(a=a+s+1>>1)-s,b=2276*u+3406*f+2048>>12,u=3406*u-2276*f+2048>>12,f=b,b=799*h+4017*l+2048>>12,h=4017*h-799*l+2048>>12,l=b,n[C]=i+f,n[C+7]=i-f,n[C+1]=a+l,n[C+6]=a-l,n[C+2]=s+h,n[C+5]=s-h,n[C+3]=o+u,n[C+4]=o-u):(b=5793*c+512>>10,n[C]=b,n[C+1]=b,n[C+2]=b,n[C+3]=b,n[C+4]=b,n[C+5]=b,n[C+6]=b,n[C+7]=b);for(var D=0;D<8;++D)c=n[D],0!=((d=n[D+8])|(p=n[D+16])|(v=n[D+24])|(_=n[D+32])|(g=n[D+40])|(m=n[D+48])|(y=n[D+56]))?(a=(i=4112+((i=5793*c+2048>>12)+(a=5793*_+2048>>12)+1>>1))-a,b=3784*(s=p)+1567*(o=m)+2048>>12,s=1567*s-3784*o+2048>>12,o=b,l=(u=(u=2896*(d-y)+2048>>12)+(l=g)+1>>1)-l,h=(f=(f=2896*(d+y)+2048>>12)+(h=v)+1>>1)-h,b=2276*u+3406*f+2048>>12,u=3406*u-2276*f+2048>>12,f=b,b=799*h+4017*l+2048>>12,h=4017*h-799*l+2048>>12,c=(c=(i=i+o+1>>1)+f)<16?0:c>=4080?255:c>>4,d=(d=(a=a+s+1>>1)+(l=b))<16?0:d>=4080?255:d>>4,p=(p=(s=a-s)+h)<16?0:p>=4080?255:p>>4,v=(v=(o=i-o)+u)<16?0:v>=4080?255:v>>4,_=(_=o-u)<16?0:_>=4080?255:_>>4,g=(g=s-h)<16?0:g>=4080?255:g>>4,m=(m=a-l)<16?0:m>=4080?255:m>>4,y=(y=i-f)<16?0:y>=4080?255:y>>4,E[r+D]=c,E[r+D+8]=d,E[r+D+16]=p,E[r+D+24]=v,E[r+D+32]=_,E[r+D+40]=g,E[r+D+48]=m,E[r+D+56]=y):(b=(b=5793*c+8192>>14)<-2040?0:b>=2024?255:b+2056>>4,E[r+D]=b,E[r+D+8]=b,E[r+D+16]=b,E[r+D+24]=b,E[r+D+32]=b,E[r+D+40]=b,E[r+D+48]=b,E[r+D+56]=b)}function o(t,e){for(var r=e.blocksPerLine,n=e.blocksPerColumn,a=new Int16Array(64),o=0;o<n;o++)for(var u=0;u<r;u++){s(e,i(e,o,u),a)}return e.blockData}function u(t,e,r){function n(e){return t[e]<<8|t[e+1]}null==r&&(r=e);var i=t.length-1,a=r<e?r:e;if(e>=i)return null;var s=n(e);if(s>=65472&&s<=65534)return{invalid:null,marker:s,offset:e};for(var o=n(a);!(o>=65472&&o<=65534);){if(++a>=i)return null;o=n(a)}return{invalid:s.toString(16),marker:o,offset:a}}return r.prototype={parse:function(r,i){null==i&&(i={});var s=i.dnlScanLines;function h(){var t=r[v]<<8|r[v+1];return v+=2,t}function l(){var t=h(),e=v+t-2,n=u(r,e,v);n&&n.invalid&&(c("readDataBlock - incorrect length, current marker is: "+n.invalid),e=n.offset);var i=r.subarray(v,e);return v+=i.length,i}function f(t){for(var e=Math.ceil(t.samplesPerLine/8/t.maxH),r=Math.ceil(t.scanLines/8/t.maxV),n=0;n<t.components.length;n++){H=t.components[n];var i=Math.ceil(Math.ceil(t.samplesPerLine/8)*H.h/t.maxH),a=Math.ceil(Math.ceil(t.scanLines/8)*H.v/t.maxV),s=e*H.h,o=64*(r*H.v)*(s+1);H.blockData=new Int16Array(o),H.blocksPerLine=i,H.blocksPerColumn=a}t.mcusPerLine=e,t.mcusPerColumn=r}var d,p,v=0,_=null,g=null,m=0,y=[],b=[],w=[],E=h();if(65496!==E)throw new e("SOI not found");E=h();t:for(;65497!==E;){var C,D,S;switch(E){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var T=l();65504===E&&74===T[0]&&70===T[1]&&73===T[2]&&70===T[3]&&0===T[4]&&(_={version:{major:T[5],minor:T[6]},densityUnits:T[7],xDensity:T[8]<<8|T[9],yDensity:T[10]<<8|T[11],thumbWidth:T[12],thumbHeight:T[13],thumbData:T.subarray(14,14+3*T[12]*T[13])}),65518===E&&65===T[0]&&100===T[1]&&111===T[2]&&98===T[3]&&101===T[4]&&(g={version:T[5]<<8|T[6],flags0:T[7]<<8|T[8],flags1:T[9]<<8|T[10],transformCode:T[11]});break;case 65499:for(var x=h()+v-2;v<x;){var F=r[v++],A=new Uint16Array(64);if(F>>4==0)for(D=0;D<64;D++)A[t[D]]=r[v++];else{if(F>>4!=1)throw new e("DQT - invalid table spec");for(D=0;D<64;D++)A[t[D]]=h()}y[15&F]=A}break;case 65472:case 65473:case 65474:if(d)throw new e("Only single frame JPEGs supported");h(),(d={}).extended=65473===E,d.progressive=65474===E,d.precision=r[v++];var P=h();d.scanLines=s||P,d.samplesPerLine=h(),d.components=[],d.componentIds={};var M,I=r[v++],k=0,U=0;for(C=0;C<I;C++){M=r[v];var O=r[v+1]>>4,B=15&r[v+1];k<O&&(k=O),U<B&&(U=B);var R=r[v+2];S=d.components.push({h:O,v:B,quantizationId:R,quantizationTable:null}),d.componentIds[M]=S-1,v+=3}d.maxH=k,d.maxV=U,f(d);break;case 65476:var L=h();for(C=2;C<L;){var N=r[v++],z=new Uint8Array(16),G=0;for(D=0;D<16;D++,v++)G+=z[D]=r[v];var j=new Uint8Array(G);for(D=0;D<G;D++,v++)j[D]=r[v];C+=17+G,(N>>4==0?w:b)[15&N]=n(z,j)}break;case 65501:h(),p=h();break;case 65498:var q=1==++m&&!s;h();var H,X=r[v++],W=[];for(C=0;C<X;C++){var V=d.componentIds[r[v++]];H=d.components[V];var Z=r[v++];H.huffmanTableDC=w[Z>>4],H.huffmanTableAC=b[15&Z],W.push(H)}var Y=r[v++],J=r[v++],K=r[v++];try{var Q=a(r,v,d,W,p,Y,J,K>>4,15&K,q);v+=Q}catch(t){if(t instanceof DNLMarkerError)return c(t.message+" -- attempting to re-parse the JPEG image."),this.parse(r,{dnlScanLines:t.scanLines});if(t instanceof EOIMarkerError){c(t.message+" -- ignoring the rest of the image data.");break t}throw t}break;case 65500:v+=4;break;case 65535:255!==r[v]&&v--;break;default:if(255===r[v-3]&&r[v-2]>=192&&r[v-2]<=254){v-=3;break}var $=u(r,v-2);if($&&$.invalid){c("JpegImage.parse - unexpected data, current marker is: "+$.invalid),v=$.offset;break}throw new e("unknown marker "+E.toString(16))}E=h()}for(this.width=d.samplesPerLine,this.height=d.scanLines,this.jfif=_,this.adobe=g,this.components=[],C=0;C<d.components.length;C++){var tt=y[(H=d.components[C]).quantizationId];tt&&(H.quantizationTable=tt),this.components.push({output:o(0,H),scaleX:H.h/d.maxH,scaleY:H.v/d.maxV,blocksPerLine:H.blocksPerLine,blocksPerColumn:H.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(t,e,r){null==r&&(r=!1);var n,i,a,s,o,u,h,l,f,c,d,p=this.width/t,v=this.height/e,_=0,g=this.components.length,m=t*e*g,y=new Uint8ClampedArray(m),b=new Uint32Array(t);for(h=0;h<g;h++){for(i=(n=this.components[h]).scaleX*p,a=n.scaleY*v,_=h,d=n.output,s=n.blocksPerLine+1<<3,o=0;o<t;o++)l=0|o*i,b[o]=(4294967288&l)<<3|7&l;for(u=0;u<e;u++)for(c=s*(4294967288&(l=0|u*a))|(7&l)<<3,o=0;o<t;o++)y[_]=d[c+b[o]],_+=g}var w=this._decodeTransform;if(w||4!==g||r||(w=new Int32Array([-256,255,-256,255,-256,255,-256,255])),w)for(h=0;h<m;)for(l=0,f=0;l<g;l++,h++,f+=2)y[h]=(y[h]*w[f]>>8)+w[f+1];return y},get _isColorConversionNeeded(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0!==this._colorTransform:1===this._colorTransform},_convertYccToRgb:function(t){for(var e,r,n,i=0,a=t.length;i<a;i+=3)e=t[i],r=t[i+1],n=t[i+2],t[i]=e-179.456+1.402*n,t[i+1]=e+135.459-.344*r-.714*n,t[i+2]=e-226.816+1.772*r;return t},_convertYcckToRgb:function(t){for(var e,r,n,i,a=0,s=0,o=t.length;s<o;s+=4)e=t[s],r=t[s+1],n=t[s+2],i=t[s+3],t[a++]=r*(-660635669420364e-19*r+.000437130475926232*n-54080610064599e-18*e+.00048449797120281*i-.154362151871126)-122.67195406894+n*(-.000957964378445773*n+.000817076911346625*e-.00477271405408747*i+1.53380253221734)+e*(.000961250184130688*e-.00266257332283933*i+.48357088451265)+i*(-.000336197177618394*i+.484791561490776),t[a++]=107.268039397724+r*(219927104525741e-19*r-.000640992018297945*n+.000659397001245577*e+.000426105652938837*i-.176491792462875)+n*(-.000778269941513683*n+.00130872261408275*e+.000770482631801132*i-.151051492775562)+e*(.00126935368114843*e-.00265090189010898*i+.25802910206845)+i*(-.000318913117588328*i-.213742400323665),t[a++]=r*(-.000570115196973677*r-263409051004589e-19*n+.0020741088115012*e-.00288260236853442*i+.814272968359295)-20.810012546947+n*(-153496057440975e-19*n-.000132689043961446*e+.000560833691242812*i-.195152027534049)+e*(.00174418132927582*e-.00255243321439347*i+.116935020465145)+i*(-.000343531996510555*i+.24165260232407);return t.subarray(0,a)},_convertYcckToCmyk:function(t){for(var e,r,n,i=0,a=t.length;i<a;i+=4)e=t[i],r=t[i+1],n=t[i+2],t[i]=434.456-e-1.402*n,t[i+1]=119.541-e+.344*r+.714*n,t[i+2]=481.816-e-1.772*r;return t},_convertCmykToRgb:function(t){for(var e,r,n,i,a=0,s=0,o=t.length;s<o;s+=4)e=t[s]*(1/255),r=t[s+1]*(1/255),n=t[s+2]*(1/255),i=t[s+3]*(1/255),t[a++]=255+e*(-4.387332384609988*e+54.48615194189176*r+18.82290502165302*n+212.25662451639585*i-285.2331026137004)+r*(1.7149763477362134*r-5.6096736904047315*n-17.873870861415444*i-5.497006427196366)+n*(-2.5217340131683033*n-21.248923337353073*i+17.5119270841813)-i*(21.86122147463605*i+189.48180835922747),t[a++]=255+e*(8.841041422036149*e+60.118027045597366*r+6.871425592049007*n+31.159100130055922*i-79.2970844816548)+r*(-15.310361306967817*r+17.575251261109482*n+131.35250912493976*i-190.9453302588951)+n*(4.444339102852739*n+9.8632861493405*i-24.86741582555878)-i*(20.737325471181034*i+187.80453709719578),t[a++]=255+e*(.8842522430003296*e+8.078677503112928*r+30.89978309703729*n-.23883238689178934*i-14.183576799673286)+r*(10.49593273432072*r+63.02378494754052*n+50.606957656360734*i-112.23884253719248)+n*(.03296041114873217*n+115.60384449646641*i-193.58209356861505)-i*(22.33816807309886*i+180.12613974708367);return t.subarray(0,a)},getData:function(t){null==t&&(t={});var r=t.width,n=t.height,i=null!=t.forceRGB&&t.forceRGB,a=null!=t.isSourcePDF&&t.isSourcePDF;if(this.numComponents>4)throw new e("Unsupported color mode");var s=this._getLinearizedBlockData(r,n,a);if(1===this.numComponents&&i){for(var o=s.length,u=new Uint8ClampedArray(3*o),h=0,l=0;l<o;l++){var f=s[l];u[h++]=f,u[h++]=f,u[h++]=f}return u}if(3===this.numComponents&&this._isColorConversionNeeded)return this._convertYccToRgb(s);if(4===this.numComponents){if(this._isColorConversionNeeded)return i?this._convertYcckToRgb(s):this._convertYcckToCmyk(s);if(i)return this._convertCmykToRgb(s)}return s}},r}(),n=function(){var t=[{qe:22017,nmps:1,nlps:1,switchFlag:1},{qe:13313,nmps:2,nlps:6,switchFlag:0},{qe:6145,nmps:3,nlps:9,switchFlag:0},{qe:2753,nmps:4,nlps:12,switchFlag:0},{qe:1313,nmps:5,nlps:29,switchFlag:0},{qe:545,nmps:38,nlps:33,switchFlag:0},{qe:22017,nmps:7,nlps:6,switchFlag:1},{qe:21505,nmps:8,nlps:14,switchFlag:0},{qe:18433,nmps:9,nlps:14,switchFlag:0},{qe:14337,nmps:10,nlps:14,switchFlag:0},{qe:12289,nmps:11,nlps:17,switchFlag:0},{qe:9217,nmps:12,nlps:18,switchFlag:0},{qe:7169,nmps:13,nlps:20,switchFlag:0},{qe:5633,nmps:29,nlps:21,switchFlag:0},{qe:22017,nmps:15,nlps:14,switchFlag:1},{qe:21505,nmps:16,nlps:14,switchFlag:0},{qe:20737,nmps:17,nlps:15,switchFlag:0},{qe:18433,nmps:18,nlps:16,switchFlag:0},{qe:14337,nmps:19,nlps:17,switchFlag:0},{qe:13313,nmps:20,nlps:18,switchFlag:0},{qe:12289,nmps:21,nlps:19,switchFlag:0},{qe:10241,nmps:22,nlps:19,switchFlag:0},{qe:9217,nmps:23,nlps:20,switchFlag:0},{qe:8705,nmps:24,nlps:21,switchFlag:0},{qe:7169,nmps:25,nlps:22,switchFlag:0},{qe:6145,nmps:26,nlps:23,switchFlag:0},{qe:5633,nmps:27,nlps:24,switchFlag:0},{qe:5121,nmps:28,nlps:25,switchFlag:0},{qe:4609,nmps:29,nlps:26,switchFlag:0},{qe:4353,nmps:30,nlps:27,switchFlag:0},{qe:2753,nmps:31,nlps:28,switchFlag:0},{qe:2497,nmps:32,nlps:29,switchFlag:0},{qe:2209,nmps:33,nlps:30,switchFlag:0},{qe:1313,nmps:34,nlps:31,switchFlag:0},{qe:1089,nmps:35,nlps:32,switchFlag:0},{qe:673,nmps:36,nlps:33,switchFlag:0},{qe:545,nmps:37,nlps:34,switchFlag:0},{qe:321,nmps:38,nlps:35,switchFlag:0},{qe:273,nmps:39,nlps:36,switchFlag:0},{qe:133,nmps:40,nlps:37,switchFlag:0},{qe:73,nmps:41,nlps:38,switchFlag:0},{qe:37,nmps:42,nlps:39,switchFlag:0},{qe:21,nmps:43,nlps:40,switchFlag:0},{qe:9,nmps:44,nlps:41,switchFlag:0},{qe:5,nmps:45,nlps:42,switchFlag:0},{qe:1,nmps:45,nlps:43,switchFlag:0},{qe:22017,nmps:46,nlps:46,switchFlag:0}];function e(t,e,r){this.data=t,this.bp=e,this.dataEnd=r,this.chigh=t[e],this.clow=0,this.byteIn(),this.chigh=this.chigh<<7&65535|this.clow>>9&127,this.clow=this.clow<<7&65535,this.ct-=7,this.a=32768}return e.prototype={byteIn:function(){var t=this.data,e=this.bp;255===t[e]?t[e+1]>143?(this.clow+=65280,this.ct=8):(e++,this.clow+=t[e]<<9,this.ct=7,this.bp=e):(e++,this.clow+=e<this.dataEnd?t[e]<<8:65280,this.ct=8,this.bp=e);this.clow>65535&&(this.chigh+=this.clow>>16,this.clow&=65535)},readBit:function(e,r){var n,i=e[r]>>1,a=1&e[r],s=t[i],o=s.qe,u=this.a-o;if(this.chigh<o)u<o?(u=o,n=a,i=s.nmps):(u=o,n=1^a,1===s.switchFlag&&(a=n),i=s.nlps);else{if(this.chigh-=o,0!=(32768&u))return this.a=u,a;u<o?(n=1^a,1===s.switchFlag&&(a=n),i=s.nlps):(n=a,i=s.nmps)}do{0===this.ct&&this.byteIn(),u<<=1,this.chigh=this.chigh<<1&65535|this.clow>>15&1,this.clow=this.clow<<1&65535,this.ct--}while(0==(32768&u));return this.a=u,e[r]=i<<1|a,n}},e}(),i=function(){var t={LL:0,LH:1,HL:1,HH:2};function e(){this.failOnCorruptedImage=!1}function r(t,e){t.x0=Math.ceil(e.XOsiz/t.XRsiz),t.x1=Math.ceil(e.Xsiz/t.XRsiz),t.y0=Math.ceil(e.YOsiz/t.YRsiz),t.y1=Math.ceil(e.Ysiz/t.YRsiz),t.width=t.x1-t.x0,t.height=t.y1-t.y0}function i(t,e){for(var r,n=t.SIZ,i=[],a=Math.ceil((n.Xsiz-n.XTOsiz)/n.XTsiz),s=Math.ceil((n.Ysiz-n.YTOsiz)/n.YTsiz),o=0;o<s;o++)for(var u=0;u<a;u++)(r={}).tx0=Math.max(n.XTOsiz+u*n.XTsiz,n.XOsiz),r.ty0=Math.max(n.YTOsiz+o*n.YTsiz,n.YOsiz),r.tx1=Math.min(n.XTOsiz+(u+1)*n.XTsiz,n.Xsiz),r.ty1=Math.min(n.YTOsiz+(o+1)*n.YTsiz,n.Ysiz),r.width=r.tx1-r.tx0,r.height=r.ty1-r.ty0,r.components=[],i.push(r);t.tiles=i;for(var h=0,l=n.Csiz;h<l;h++)for(var f=e[h],c=0,d=i.length;c<d;c++){var p={};r=i[c],p.tcx0=Math.ceil(r.tx0/f.XRsiz),p.tcy0=Math.ceil(r.ty0/f.YRsiz),p.tcx1=Math.ceil(r.tx1/f.XRsiz),p.tcy1=Math.ceil(r.ty1/f.YRsiz),p.width=p.tcx1-p.tcx0,p.height=p.tcy1-p.tcy0,r.components[h]=p}}function a(t,e,r){var n=e.codingStyleParameters,i={};return n.entropyCoderWithCustomPrecincts?(i.PPx=n.precinctsSizes[r].PPx,i.PPy=n.precinctsSizes[r].PPy):(i.PPx=15,i.PPy=15),i.xcb_=r>0?Math.min(n.xcb,i.PPx-1):Math.min(n.xcb,i.PPx),i.ycb_=r>0?Math.min(n.ycb,i.PPy-1):Math.min(n.ycb,i.PPy),i}function o(t,e,r){var n=1<<r.PPx,i=1<<r.PPy,a=0===e.resLevel,s=1<<r.PPx+(a?0:-1),o=1<<r.PPy+(a?0:-1),u=e.trx1>e.trx0?Math.ceil(e.trx1/n)-Math.floor(e.trx0/n):0,h=e.try1>e.try0?Math.ceil(e.try1/i)-Math.floor(e.try0/i):0,l=u*h;e.precinctParameters={precinctWidth:n,precinctHeight:i,numprecinctswide:u,numprecinctshigh:h,numprecincts:l,precinctWidthInSubband:s,precinctHeightInSubband:o}}function l(t,e,r){var n,i,a,s,o=r.xcb_,u=r.ycb_,h=1<<o,l=1<<u,f=e.tbx0>>o,c=e.tby0>>u,d=e.tbx1+h-1>>o,p=e.tby1+l-1>>u,v=e.resolution.precinctParameters,_=[],g=[];for(i=c;i<p;i++)for(n=f;n<d;n++){if((a={cbx:n,cby:i,tbx0:h*n,tby0:l*i,tbx1:h*(n+1),tby1:l*(i+1)}).tbx0_=Math.max(e.tbx0,a.tbx0),a.tby0_=Math.max(e.tby0,a.tby0),a.tbx1_=Math.min(e.tbx1,a.tbx1),a.tby1_=Math.min(e.tby1,a.tby1),s=Math.floor((a.tbx0_-e.tbx0)/v.precinctWidthInSubband)+Math.floor((a.tby0_-e.tby0)/v.precinctHeightInSubband)*v.numprecinctswide,a.precinctNumber=s,a.subbandType=e.type,a.Lblock=3,!(a.tbx1_<=a.tbx0_||a.tby1_<=a.tby0_)){_.push(a);var m=g[s];void 0!==m?(n<m.cbxMin?m.cbxMin=n:n>m.cbxMax&&(m.cbxMax=n),i<m.cbyMin?m.cbxMin=i:i>m.cbyMax&&(m.cbyMax=i)):g[s]=m={cbxMin:n,cbyMin:i,cbxMax:n,cbyMax:i},a.precinct=m}}e.codeblockParameters={codeblockWidth:o,codeblockHeight:u,numcodeblockwide:d-f+1,numcodeblockhigh:p-c+1},e.codeblocks=_,e.precincts=g}function p(t,e,r){for(var n=[],i=t.subbands,a=0,s=i.length;a<s;a++)for(var o=i[a].codeblocks,u=0,h=o.length;u<h;u++){var l=o[u];l.precinctNumber===e&&n.push(l)}return{layerNumber:r,codeblocks:n}}function v(t){for(var e=t.SIZ,r=t.currentTile.index,n=t.tiles[r],i=n.codingStyleDefaultParameters.layersCount,a=e.Csiz,s=0,o=0;o<a;o++)s=Math.max(s,n.components[o].codingStyleParameters.decompositionLevelsCount);var u=0,h=0,l=0,c=0;this.nextPacket=function(){for(;u<i;u++){for(;h<=s;h++){for(;l<a;l++){var t=n.components[l];if(!(h>t.codingStyleParameters.decompositionLevelsCount)){for(var e=t.resolutions[h],r=e.precinctParameters.numprecincts;c<r;){var o=p(e,c,u);return c++,o}c=0}}l=0}h=0}f("JPX Error: Out of packets")}}function _(t){for(var e=t.SIZ,r=t.currentTile.index,n=t.tiles[r],i=n.codingStyleDefaultParameters.layersCount,a=e.Csiz,s=0,o=0;o<a;o++)s=Math.max(s,n.components[o].codingStyleParameters.decompositionLevelsCount);var u=0,h=0,l=0,c=0;this.nextPacket=function(){for(;u<=s;u++){for(;h<i;h++){for(;l<a;l++){var t=n.components[l];if(!(u>t.codingStyleParameters.decompositionLevelsCount)){for(var e=t.resolutions[u],r=e.precinctParameters.numprecincts;c<r;){var o=p(e,c,h);return c++,o}c=0}}l=0}h=0}f("JPX Error: Out of packets")}}function g(t){var e,r,n,i,a=t.SIZ,s=t.currentTile.index,o=t.tiles[s],u=o.codingStyleDefaultParameters.layersCount,h=a.Csiz,l=0;for(n=0;n<h;n++){var c=o.components[n];l=Math.max(l,c.codingStyleParameters.decompositionLevelsCount)}var d=new Int32Array(l+1);for(r=0;r<=l;++r){var v=0;for(n=0;n<h;++n){var _=o.components[n].resolutions;r<_.length&&(v=Math.max(v,_[r].precinctParameters.numprecincts))}d[r]=v}e=0,r=0,n=0,i=0,this.nextPacket=function(){for(;r<=l;r++){for(;i<d[r];i++){for(;n<h;n++){var t=o.components[n];if(!(r>t.codingStyleParameters.decompositionLevelsCount)){var a=t.resolutions[r],s=a.precinctParameters.numprecincts;if(!(i>=s)){for(;e<u;){var c=p(a,i,e);return e++,c}e=0}}}n=0}i=0}f("JPX Error: Out of packets")}}function m(t){var e=t.SIZ,r=t.currentTile.index,n=t.tiles[r],i=n.codingStyleDefaultParameters.layersCount,a=e.Csiz,s=w(n),o=s,u=0,h=0,l=0,c=0,d=0;this.nextPacket=function(){for(;d<o.maxNumHigh;d++){for(;c<o.maxNumWide;c++){for(;l<a;l++){for(var t=n.components[l],e=t.codingStyleParameters.decompositionLevelsCount;h<=e;h++){var r=t.resolutions[h],v=s.components[l].resolutions[h],_=b(c,d,v,o,r);if(null!==_){for(;u<i;){var g=p(r,_,u);return u++,g}u=0}}h=0}l=0}c=0}f("JPX Error: Out of packets")}}function y(t){var e=t.SIZ,r=t.currentTile.index,n=t.tiles[r],i=n.codingStyleDefaultParameters.layersCount,a=e.Csiz,s=w(n),o=0,u=0,h=0,l=0,c=0;this.nextPacket=function(){for(;h<a;++h){for(var t=n.components[h],e=s.components[h],r=t.codingStyleParameters.decompositionLevelsCount;c<e.maxNumHigh;c++){for(;l<e.maxNumWide;l++){for(;u<=r;u++){var d=t.resolutions[u],v=e.resolutions[u],_=b(l,c,v,e,d);if(null!==_){for(;o<i;){var g=p(d,_,o);return o++,g}o=0}}u=0}l=0}c=0}f("JPX Error: Out of packets")}}function b(t,e,r,n,i){var a=t*n.minWidth,s=e*n.minHeight;if(a%r.width!=0||s%r.height!=0)return null;var o=s/r.width*i.precinctParameters.numprecinctswide;return a/r.height+o}function w(t){for(var e=t.components.length,r=Number.MAX_VALUE,n=Number.MAX_VALUE,i=0,a=0,s=new Array(e),o=0;o<e;o++){for(var u=t.components[o],h=u.codingStyleParameters.decompositionLevelsCount,l=new Array(h+1),f=Number.MAX_VALUE,c=Number.MAX_VALUE,d=0,p=0,v=1,_=h;_>=0;--_){var g=u.resolutions[_],m=v*g.precinctParameters.precinctWidth,y=v*g.precinctParameters.precinctHeight;f=Math.min(f,m),c=Math.min(c,y),d=Math.max(d,g.precinctParameters.numprecinctswide),p=Math.max(p,g.precinctParameters.numprecinctshigh),l[_]={width:m,height:y},v<<=1}r=Math.min(r,f),n=Math.min(n,c),i=Math.max(i,d),a=Math.max(a,p),s[o]={resolutions:l,minWidth:f,minHeight:c,maxNumWide:d,maxNumHigh:p}}return{components:s,minWidth:r,minHeight:n,maxNumWide:i,maxNumHigh:a}}function E(t){for(var e=t.SIZ,r=t.currentTile.index,n=t.tiles[r],i=e.Csiz,s=0;s<i;s++){for(var u=n.components[s],h=u.codingStyleParameters.decompositionLevelsCount,c=[],d=[],p=0;p<=h;p++){var b,w=a(0,u,p),E={},C=1<<h-p;if(E.trx0=Math.ceil(u.tcx0/C),E.try0=Math.ceil(u.tcy0/C),E.trx1=Math.ceil(u.tcx1/C),E.try1=Math.ceil(u.tcy1/C),E.resLevel=p,o(0,E,w),c.push(E),0===p)(b={}).type="LL",b.tbx0=Math.ceil(u.tcx0/C),b.tby0=Math.ceil(u.tcy0/C),b.tbx1=Math.ceil(u.tcx1/C),b.tby1=Math.ceil(u.tcy1/C),b.resolution=E,l(0,b,w),d.push(b),E.subbands=[b];else{var D=1<<h-p+1,S=[];(b={}).type="HL",b.tbx0=Math.ceil(u.tcx0/D-.5),b.tby0=Math.ceil(u.tcy0/D),b.tbx1=Math.ceil(u.tcx1/D-.5),b.tby1=Math.ceil(u.tcy1/D),b.resolution=E,l(0,b,w),d.push(b),S.push(b),(b={}).type="LH",b.tbx0=Math.ceil(u.tcx0/D),b.tby0=Math.ceil(u.tcy0/D-.5),b.tbx1=Math.ceil(u.tcx1/D),b.tby1=Math.ceil(u.tcy1/D-.5),b.resolution=E,l(0,b,w),d.push(b),S.push(b),(b={}).type="HH",b.tbx0=Math.ceil(u.tcx0/D-.5),b.tby0=Math.ceil(u.tcy0/D-.5),b.tbx1=Math.ceil(u.tcx1/D-.5),b.tby1=Math.ceil(u.tcy1/D-.5),b.resolution=E,l(0,b,w),d.push(b),S.push(b),E.subbands=S}}u.resolutions=c,u.subbands=d}var T=n.codingStyleDefaultParameters.progressionOrder;switch(T){case 0:n.packetsIterator=new v(t);break;case 1:n.packetsIterator=new _(t);break;case 2:n.packetsIterator=new g(t);break;case 3:n.packetsIterator=new m(t);break;case 4:n.packetsIterator=new y(t);break;default:f("JPX Error: Unsupported progression order "+T)}}function C(t,e,r,n){var i,a=0,o=0,u=!1;function h(t){for(;o<t;){var n=e[r+a];a++,u?(i=i<<7|n,o+=7,u=!1):(i=i<<8|n,o+=8),255===n&&(u=!0)}return i>>>(o-=t)&(1<<t)-1}function l(t){return 255===e[r+a-1]&&e[r+a]===t?(f(1),!0):255===e[r+a]&&e[r+a+1]===t&&(f(2),!0)}function f(t){a+=t}function c(){o=0,u&&(a++,u=!1)}function d(){if(0===h(1))return 1;if(0===h(1))return 2;var t=h(2);return t<3?t+3:(t=h(5))<31?t+6:(t=h(7))+37}for(var p=t.currentTile.index,v=t.tiles[p],_=t.COD.sopMarkerUsed,g=t.COD.ephMarkerUsed,m=v.packetsIterator;a<n;){c(),_&&l(145)&&f(4);var y=m.nextPacket();if(h(1)){for(var b,w=y.layerNumber,E=[],C=0,D=y.codeblocks.length;C<D;C++){var S=(b=y.codeblocks[C]).precinct,T=b.cbx-S.cbxMin,A=b.cby-S.cbyMin,P=!1,M=!1;if(void 0!==b.included)P=!!h(1);else{var I,k;if(void 0!==(S=b.precinct).inclusionTree)I=S.inclusionTree;else{var U=S.cbxMax-S.cbxMin+1,O=S.cbyMax-S.cbyMin+1;I=new F(U,O,w),k=new x(U,O),S.inclusionTree=I,S.zeroBitPlanesTree=k}if(I.reset(T,A,w))for(;;){if(!h(1)){I.incrementValue(w);break}if(!I.nextLevel()){b.included=!0,P=M=!0;break}}}if(P){if(M){for((k=S.zeroBitPlanesTree).reset(T,A);;)if(h(1)){if(!k.nextLevel())break}else k.incrementValue();b.zeroBitPlanes=k.value}for(var B=d();h(1);)b.Lblock++;var R=s(B),L=h((B<1<<R?R-1:R)+b.Lblock);E.push({codeblock:b,codingpasses:B,dataLength:L})}}for(c(),g&&l(146);E.length>0;){var N=E.shift();void 0===(b=N.codeblock).data&&(b.data=[]),b.data.push({data:e,start:r+a,end:r+a+N.dataLength,codingpasses:N.codingpasses}),a+=N.dataLength}}}return a}function D(t,e,r,i,a,s,o,u){for(var h=i.tbx0,l=i.tby0,f=i.tbx1-i.tbx0,c=i.codeblocks,d="H"===i.type.charAt(0)?1:0,p="H"===i.type.charAt(1)?e:0,v=0,_=c.length;v<_;++v){var g=c[v],m=g.tbx1_-g.tbx0_,y=g.tby1_-g.tby0_;if(0!==m&&0!==y&&void 0!==g.data){var b,w;b=new A(m,y,g.subbandType,g.zeroBitPlanes,s),w=2;var E,C,D,S=g.data,T=0,x=0;for(E=0,C=S.length;E<C;E++)T+=(D=S[E]).end-D.start,x+=D.codingpasses;var F=new Uint8Array(T),P=0;for(E=0,C=S.length;E<C;E++){var M=(D=S[E]).data.subarray(D.start,D.end);F.set(M,P),P+=M.length}var I=new n(F,0,T);for(b.setDecoder(I),E=0;E<x;E++){switch(w){case 0:b.runSignificancePropagationPass();break;case 1:b.runMagnitudeRefinementPass();break;case 2:b.runCleanupPass(),u&&b.checkSegmentationSymbol()}w=(w+1)%3}var k,U,O,B=g.tbx0_-h+(g.tby0_-l)*f,R=b.coefficentsSign,L=b.coefficentsMagnitude,N=b.bitsDecoded,z=o?0:.5;P=0;var G="LL"!==i.type;for(E=0;E<y;E++){var j=2*(B/f|0)*(e-f)+d+p;for(k=0;k<m;k++){if(0!==(U=L[P])){U=(U+z)*a,0!==R[P]&&(U=-U),O=N[P];var q=G?j+(B<<1):B;t[q]=o&&O>=s?U:U*(1<<s-O)}B++,P++}B+=f-m}}}}function S(e,r,n){for(var i=r.components[n],a=i.codingStyleParameters,s=i.quantizationParameters,o=a.decompositionLevelsCount,u=s.SPqcds,h=s.scalarExpounded,l=s.guardBits,f=a.segmentationSymbolUsed,c=e.components[n].precision,d=a.reversibleTransformation,p=d?new I:new M,v=[],_=0,g=0;g<=o;g++){for(var m=i.resolutions[g],y=m.trx1-m.trx0,b=m.try1-m.try0,w=new Float32Array(y*b),E=0,C=m.subbands.length;E<C;E++){var S,T;h?(S=u[_].mu,T=u[_].epsilon,_++):(S=u[0].mu,T=u[0].epsilon+(g>0?1-g:0));var x=m.subbands[E],F=t[x.type];D(w,y,0,x,d?1:Math.pow(2,c+F-T)*(1+S/2048),l+T-1,d,f)}v.push({width:y,height:b,items:w})}var A=p.calculate(v,i.tcx0,i.tcy0);return{left:i.tcx0,top:i.tcy0,width:A.width,height:A.height,items:A.items}}function T(t,e){for(var r=t.SIZ.Csiz,n=t.tiles[e],i=0;i<r;i++){var a=n.components[i],s=void 0!==t.currentTile.QCC[i]?t.currentTile.QCC[i]:t.currentTile.QCD;a.quantizationParameters=s;var o=void 0!==t.currentTile.COC[i]?t.currentTile.COC[i]:t.currentTile.COD;a.codingStyleParameters=o}n.codingStyleDefaultParameters=t.currentTile.COD}e.prototype={parse:function(t){if(65359!==u(t,0))for(var e=0,r=t.length;e<r;){var n=8,i=h(t,e),a=h(t,e+4);e+=n,1===i&&(i=4294967296*h(t,e)+h(t,e+4),e+=8,n+=8),0===i&&(i=r-e+n),i<n&&f("JPX Error: Invalid box field size");var s=i-n,o=!0;switch(a){case 1785737832:o=!1;break;case 1668246642:var l=t[e];if(1===l){var p=h(t,e+3);switch(p){case 16:case 17:case 18:break;default:c("Unknown colorspace "+p)}}else 2===l&&d("ICC profile not supported");break;case 1785737827:this.parseCodestream(t,e,e+s);break;case 1783636e3:218793738!==h(t,e)&&c("Invalid JP2 signature");break;case 1783634458:case 1718909296:case 1920099697:case 1919251232:case 1768449138:break;default:var v=String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,255&a);c("Unsupported header type "+a+" ("+v+")")}o&&(e+=s)}else this.parseCodestream(t,0,t.length)},parseImageProperties:function(t){for(var e=t.getByte();e>=0;){if(65361===(e<<8|(e=t.getByte()))){t.skip(4);var r=t.getInt32()>>>0,n=t.getInt32()>>>0,i=t.getInt32()>>>0,a=t.getInt32()>>>0;t.skip(16);var s=t.getUint16();return this.width=r-i,this.height=n-a,this.componentsCount=s,void(this.bitsPerComponent=8)}}f("JPX Error: No size marker found in JPX stream")},parseCodestream:function(t,e,n){var a={},s=!1;try{for(var o=e;o+1<n;){var l=u(t,o);o+=2;var d,p,v,_,g,m,y=0;switch(l){case 65359:a.mainHeader=!0;break;case 65497:break;case 65361:y=u(t,o);var b={};b.Xsiz=h(t,o+4),b.Ysiz=h(t,o+8),b.XOsiz=h(t,o+12),b.YOsiz=h(t,o+16),b.XTsiz=h(t,o+20),b.YTsiz=h(t,o+24),b.XTOsiz=h(t,o+28),b.YTOsiz=h(t,o+32);var w=u(t,o+36);b.Csiz=w;var D=[];d=o+38;for(var x=0;x<w;x++){var F={precision:1+(127&t[d]),isSigned:!!(128&t[d]),XRsiz:t[d+1],YRsiz:t[d+1]};r(F,b),D.push(F)}a.SIZ=b,a.components=D,i(a,D),a.QCC=[],a.COC=[];break;case 65372:y=u(t,o);var A={};switch(d=o+2,31&(p=t[d++])){case 0:_=8,g=!0;break;case 1:_=16,g=!1;break;case 2:_=16,g=!0;break;default:throw new Error("Invalid SQcd value "+p)}for(A.noQuantization=8===_,A.scalarExpounded=g,A.guardBits=p>>5,v=[];d<y+o;){var P={};8===_?(P.epsilon=t[d++]>>3,P.mu=0):(P.epsilon=t[d]>>3,P.mu=(7&t[d])<<8|t[d+1],d+=2),v.push(P)}A.SPqcds=v,a.mainHeader?a.QCD=A:(a.currentTile.QCD=A,a.currentTile.QCC=[]);break;case 65373:y=u(t,o);var M,I={};switch(d=o+2,a.SIZ.Csiz<257?M=t[d++]:(M=u(t,d),d+=2),31&(p=t[d++])){case 0:_=8,g=!0;break;case 1:_=16,g=!1;break;case 2:_=16,g=!0;break;default:throw new Error("Invalid SQcd value "+p)}for(I.noQuantization=8===_,I.scalarExpounded=g,I.guardBits=p>>5,v=[];d<y+o;)P={},8===_?(P.epsilon=t[d++]>>3,P.mu=0):(P.epsilon=t[d]>>3,P.mu=(7&t[d])<<8|t[d+1],d+=2),v.push(P);I.SPqcds=v,a.mainHeader?a.QCC[M]=I:a.currentTile.QCC[M]=I;break;case 65362:y=u(t,o);var k={};d=o+2;var U=t[d++];k.entropyCoderWithCustomPrecincts=!!(1&U),k.sopMarkerUsed=!!(2&U),k.ephMarkerUsed=!!(4&U),k.progressionOrder=t[d++],k.layersCount=u(t,d),d+=2,k.multipleComponentTransform=t[d++],k.decompositionLevelsCount=t[d++],k.xcb=2+(15&t[d++]),k.ycb=2+(15&t[d++]);var O=t[d++];if(k.selectiveArithmeticCodingBypass=!!(1&O),k.resetContextProbabilities=!!(2&O),k.terminationOnEachCodingPass=!!(4&O),k.verticalyStripe=!!(8&O),k.predictableTermination=!!(16&O),k.segmentationSymbolUsed=!!(32&O),k.reversibleTransformation=t[d++],k.entropyCoderWithCustomPrecincts){for(var B=[];d<y+o;){var R=t[d++];B.push({PPx:15&R,PPy:R>>4})}k.precinctsSizes=B}var L=[];if(k.selectiveArithmeticCodingBypass&&L.push("selectiveArithmeticCodingBypass"),k.resetContextProbabilities&&L.push("resetContextProbabilities"),k.terminationOnEachCodingPass&&L.push("terminationOnEachCodingPass"),k.verticalyStripe&&L.push("verticalyStripe"),k.predictableTermination&&L.push("predictableTermination"),L.length>0)throw s=!0,new Error("Unsupported COD options ("+L.join(", ")+")");a.mainHeader?a.COD=k:(a.currentTile.COD=k,a.currentTile.COC=[]);break;case 65424:y=u(t,o),(m={}).index=u(t,o+2),m.length=h(t,o+4),m.dataEnd=m.length+o-2,m.partIndex=t[o+8],m.partsCount=t[o+9],a.mainHeader=!1,0===m.partIndex&&(m.COD=a.COD,m.COC=a.COC.slice(0),m.QCD=a.QCD,m.QCC=a.QCC.slice(0)),a.currentTile=m;break;case 65427:0===(m=a.currentTile).partIndex&&(T(a,m.index),E(a)),C(a,t,o,y=m.dataEnd-o);break;case 65365:case 65367:case 65368:case 65380:y=u(t,o);break;case 65363:throw new Error("Codestream code 0xFF53 (COC) is not implemented");default:throw new Error("Unknown codestream code: "+l.toString(16))}o+=y}}catch(t){s||this.failOnCorruptedImage?f("JPX Error: "+t.message):c("JPX: Trying to recover from: "+t.message)}this.tiles=function(t){for(var e=t.SIZ,r=t.components,n=e.Csiz,i=[],a=0,s=t.tiles.length;a<s;a++){var o,u=t.tiles[a],h=[];for(o=0;o<n;o++)h[o]=S(t,u,o);var l,f,c,d,p,v,_,g,m,y,b,w,E,C,D,T=h[0],x=new Uint8Array(T.items.length*n),F={left:T.left,top:T.top,width:T.width,height:T.height,items:x},A=0;if(u.codingStyleDefaultParameters.multipleComponentTransform){var P=4===n,M=h[0].items,I=h[1].items,k=h[2].items,U=P?h[3].items:null;l=r[0].precision-8,f=.5+(128<<l),d=-(p=.5*(c=255*(1<<l)));var O=u.components[0],B=n-3;if(_=M.length,O.codingStyleParameters.reversibleTransformation)for(v=0;v<_;v++,A+=B)g=M[v]+f,m=I[v],y=k[v],b=(w=g-(y+m>>2))+y,E=w+m,x[A++]=b<=0?0:b>=c?255:b>>l,x[A++]=w<=0?0:w>=c?255:w>>l,x[A++]=E<=0?0:E>=c?255:E>>l;else for(v=0;v<_;v++,A+=B)g=M[v]+f,m=I[v],y=k[v],b=g+1.402*y,w=g-.34413*m-.71414*y,E=g+1.772*m,x[A++]=b<=0?0:b>=c?255:b>>l,x[A++]=w<=0?0:w>=c?255:w>>l,x[A++]=E<=0?0:E>=c?255:E>>l;if(P)for(v=0,A=3;v<_;v++,A+=4)C=U[v],x[A]=C<=d?0:C>=p?255:C+f>>l}else for(o=0;o<n;o++){var R=h[o].items;for(l=r[o].precision-8,f=.5+(128<<l),d=-(c=127.5*(1<<l)),A=o,v=0,_=R.length;v<_;v++)D=R[v],x[A]=D<=d?0:D>=c?255:D+f>>l,A+=n}i.push(F)}return i}(a),this.width=a.SIZ.Xsiz-a.SIZ.XOsiz,this.height=a.SIZ.Ysiz-a.SIZ.YOsiz,this.componentsCount=a.SIZ.Csiz}};var x=function(){function t(t,e){var r=s(Math.max(t,e))+1;this.levels=[];for(var n=0;n<r;n++){var i={width:t,height:e,items:[]};this.levels.push(i),t=Math.ceil(t/2),e=Math.ceil(e/2)}}return t.prototype={reset:function(t,e){for(var r,n=0,i=0;n<this.levels.length;){var a=t+e*(r=this.levels[n]).width;if(void 0!==r.items[a]){i=r.items[a];break}r.index=a,t>>=1,e>>=1,n++}n--,(r=this.levels[n]).items[r.index]=i,this.currentLevel=n,delete this.value},incrementValue:function(){var t=this.levels[this.currentLevel];t.items[t.index]++},nextLevel:function(){var t=this.currentLevel,e=this.levels[t],r=e.items[e.index];return--t<0?(this.value=r,!1):(this.currentLevel=t,(e=this.levels[t]).items[e.index]=r,!0)}},t}(),F=function(){function t(t,e,r){var n=s(Math.max(t,e))+1;this.levels=[];for(var i=0;i<n;i++){for(var a=new Uint8Array(t*e),o=0,u=a.length;o<u;o++)a[o]=r;var h={width:t,height:e,items:a};this.levels.push(h),t=Math.ceil(t/2),e=Math.ceil(e/2)}}return t.prototype={reset:function(t,e,r){for(var n=0;n<this.levels.length;){var i=this.levels[n],a=t+e*i.width;i.index=a;var s=i.items[a];if(255===s)break;if(s>r)return this.currentLevel=n,this.propagateValues(),!1;t>>=1,e>>=1,n++}return this.currentLevel=n-1,!0},incrementValue:function(t){var e=this.levels[this.currentLevel];e.items[e.index]=t+1,this.propagateValues()},propagateValues:function(){for(var t=this.currentLevel,e=this.levels[t],r=e.items[e.index];--t>=0;)(e=this.levels[t]).items[e.index]=r},nextLevel:function(){var t=this.currentLevel,e=this.levels[t],r=e.items[e.index];return e.items[e.index]=255,!(--t<0)&&(this.currentLevel=t,(e=this.levels[t]).items[e.index]=r,!0)}},t}(),A=function(){var t=new Uint8Array([0,5,8,0,3,7,8,0,4,7,8,0,0,0,0,0,1,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8]),e=new Uint8Array([0,3,4,0,5,7,7,0,8,8,8,0,0,0,0,0,1,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8]),r=new Uint8Array([0,1,2,0,1,2,2,0,2,2,2,0,0,0,0,0,3,4,5,0,4,5,5,0,5,5,5,0,0,0,0,0,6,7,7,0,7,7,7,0,7,7,7,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8]);function n(n,i,a,s,o){this.width=n,this.height=i,this.contextLabelTable="HH"===a?r:"HL"===a?e:t;var u=n*i;this.neighborsSignificance=new Uint8Array(u),this.coefficentsSign=new Uint8Array(u),this.coefficentsMagnitude=o>14?new Uint32Array(u):o>6?new Uint16Array(u):new Uint8Array(u),this.processingFlags=new Uint8Array(u);var h=new Uint8Array(u);if(0!==s)for(var l=0;l<u;l++)h[l]=s;this.bitsDecoded=h,this.reset()}return n.prototype={setDecoder:function(t){this.decoder=t},reset:function(){this.contexts=new Int8Array(19),this.contexts[0]=8,this.contexts[17]=92,this.contexts[18]=6},setNeighborsSignificance:function(t,e,r){var n,i=this.neighborsSignificance,a=this.width,s=this.height,o=e>0,u=e+1<a;t>0&&(n=r-a,o&&(i[n-1]+=16),u&&(i[n+1]+=16),i[n]+=4),t+1<s&&(n=r+a,o&&(i[n-1]+=16),u&&(i[n+1]+=16),i[n]+=4),o&&(i[r-1]+=1),u&&(i[r+1]+=1),i[r]|=128},runSignificancePropagationPass:function(){for(var t=this.decoder,e=this.width,r=this.height,n=this.coefficentsMagnitude,i=this.coefficentsSign,a=this.neighborsSignificance,s=this.processingFlags,o=this.contexts,u=this.contextLabelTable,h=this.bitsDecoded,l=0;l<r;l+=4)for(var f=0;f<e;f++)for(var c=l*e+f,d=0;d<4;d++,c+=e){var p=l+d;if(p>=r)break;if(s[c]&=-2,!n[c]&&a[c]){var v=u[a[c]];if(t.readBit(o,v)){var _=this.decodeSignBit(p,f,c);i[c]=_,n[c]=1,this.setNeighborsSignificance(p,f,c),s[c]|=2}h[c]++,s[c]|=1}}},decodeSignBit:function(t,e,r){var n,i,a,s,o,u,h=this.width,l=this.height,f=this.coefficentsMagnitude,c=this.coefficentsSign;s=e>0&&0!==f[r-1],e+1<h&&0!==f[r+1]?(a=c[r+1],n=s?1-a-(i=c[r-1]):1-a-a):n=s?1-(i=c[r-1])-i:0;var d=3*n;return s=t>0&&0!==f[r-h],t+1<l&&0!==f[r+h]?(a=c[r+h],n=s?1-a-(i=c[r-h])+d:1-a-a+d):n=s?1-(i=c[r-h])-i+d:d,n>=0?(o=9+n,u=this.decoder.readBit(this.contexts,o)):(o=9-n,u=1^this.decoder.readBit(this.contexts,o)),u},runMagnitudeRefinementPass:function(){for(var t,e=this.decoder,r=this.width,n=this.height,i=this.coefficentsMagnitude,a=this.neighborsSignificance,s=this.contexts,o=this.bitsDecoded,u=this.processingFlags,h=r*n,l=4*r,f=0;f<h;f=t){t=Math.min(h,f+l);for(var c=0;c<r;c++)for(var d=f+c;d<t;d+=r)if(i[d]&&0==(1&u[d])){var p=16;if(0!=(2&u[d]))u[d]^=2,p=0===(127&a[d])?15:14;var v=e.readBit(s,p);i[d]=i[d]<<1|v,o[d]++,u[d]|=1}}},runCleanupPass:function(){for(var t,e=this.decoder,r=this.width,n=this.height,i=this.neighborsSignificance,a=this.coefficentsMagnitude,s=this.coefficentsSign,o=this.contexts,u=this.contextLabelTable,h=this.bitsDecoded,l=this.processingFlags,f=r,c=2*r,d=3*r,p=0;p<n;p=t){t=Math.min(p+4,n);for(var v=p*r,_=p+3<n,g=0;g<r;g++){var m,y=v+g,b=0,w=y,E=p;if(_&&0===l[y]&&0===l[y+f]&&0===l[y+c]&&0===l[y+d]&&0===i[y]&&0===i[y+f]&&0===i[y+c]&&0===i[y+d]){if(!e.readBit(o,18)){h[y]++,h[y+f]++,h[y+c]++,h[y+d]++;continue}0!==(b=e.readBit(o,17)<<1|e.readBit(o,17))&&(E=p+b,w+=b*r),m=this.decodeSignBit(E,g,w),s[w]=m,a[w]=1,this.setNeighborsSignificance(E,g,w),l[w]|=2,w=y;for(var C=p;C<=E;C++,w+=r)h[w]++;b++}for(E=p+b;E<t;E++,w+=r)if(!a[w]&&0==(1&l[w])){var D=u[i[w]];1===e.readBit(o,D)&&(m=this.decodeSignBit(E,g,w),s[w]=m,a[w]=1,this.setNeighborsSignificance(E,g,w),l[w]|=2),h[w]++}}}},checkSegmentationSymbol:function(){var t=this.decoder,e=this.contexts;10!==(t.readBit(e,17)<<3|t.readBit(e,17)<<2|t.readBit(e,17)<<1|t.readBit(e,17))&&f("JPX Error: Invalid segmentation symbol")}},n}(),P=function(){function t(){}return t.prototype.calculate=function(t,e,r){for(var n=t[0],i=1,a=t.length;i<a;i++)n=this.iterate(n,t[i],e,r);return n},t.prototype.extend=function(t,e,r){var n=e-1,i=e+1,a=e+r-2,s=e+r;t[n--]=t[i++],t[s++]=t[a--],t[n--]=t[i++],t[s++]=t[a--],t[n--]=t[i++],t[s++]=t[a--],t[n]=t[i],t[s]=t[a]},t.prototype.iterate=function(t,e,r,n){var i,a,s,o,u,h,l=t.width,f=t.height,c=t.items,d=e.width,p=e.height,v=e.items;for(s=0,i=0;i<f;i++)for(o=2*i*d,a=0;a<l;a++,s++,o+=2)v[o]=c[s];c=t.items=null;var _=new Float32Array(d+8);if(1===d){if(0!=(1&r))for(h=0,s=0;h<p;h++,s+=d)v[s]*=.5}else for(h=0,s=0;h<p;h++,s+=d)_.set(v.subarray(s,s+d),4),this.extend(_,4,d),this.filter(_,4,d),v.set(_.subarray(4,4+d),s);var g=16,m=[];for(i=0;i<g;i++)m.push(new Float32Array(p+8));var y,b=0;if(t=4+p,1===p){if(0!=(1&n))for(u=0;u<d;u++)v[u]*=.5}else for(u=0;u<d;u++){if(0===b){for(g=Math.min(d-u,g),s=u,o=4;o<t;s+=d,o++)for(y=0;y<g;y++)m[y][o]=v[s+y];b=g}var w=m[--b];if(this.extend(w,4,p),this.filter(w,4,p),0===b)for(s=u-g+1,o=4;o<t;s+=d,o++)for(y=0;y<g;y++)v[s+y]=m[y][o]}return{width:d,height:p,items:v}},t}(),M=function(){function t(){P.call(this)}return t.prototype=Object.create(P.prototype),t.prototype.filter=function(t,e,r){var n,i,a,s,o=r>>1,u=-1.586134342059924,h=-.052980118572961,l=.882911075530934,f=.443506852043971,c=1.230174104914001;for(n=(e|=0)-3,i=o+4;i--;n+=2)t[n]*=.8128930661159609;for(a=f*t[(n=e-2)-1],i=o+3;i--&&(s=f*t[n+1],t[n]=c*t[n]-a-s,i--);n+=2)a=f*t[(n+=2)+1],t[n]=c*t[n]-a-s;for(a=l*t[(n=e-1)-1],i=o+2;i--&&(s=l*t[n+1],t[n]-=a+s,i--);n+=2)a=l*t[(n+=2)+1],t[n]-=a+s;for(a=h*t[(n=e)-1],i=o+1;i--&&(s=h*t[n+1],t[n]-=a+s,i--);n+=2)a=h*t[(n+=2)+1],t[n]-=a+s;if(0!==o)for(a=u*t[(n=e+1)-1],i=o;i--&&(s=u*t[n+1],t[n]-=a+s,i--);n+=2)a=u*t[(n+=2)+1],t[n]-=a+s},t}(),I=function(){function t(){P.call(this)}return t.prototype=Object.create(P.prototype),t.prototype.filter=function(t,e,r){var n,i,a=r>>1;for(n=e|=0,i=a+1;i--;n+=2)t[n]-=t[n-1]+t[n+1]+2>>2;for(n=e+1,i=a;i--;n+=2)t[n]+=t[n-1]+t[n+1]>>1},t}();return e}(),a=function(){function t(){}function e(t,e,r){this.data=t,this.start=e,this.end=r}function r(t,e,r){var n=t.getContexts(e),i=1;function a(t){for(var e=0,a=0;a<t;a++){var s=r.readBit(n,i);i=i<256?i<<1|s:511&(i<<1|s)|256,e=e<<1|s}return e>>>0}var s=a(1),o=a(1)?a(1)?a(1)?a(1)?a(1)?a(32)+4436:a(12)+340:a(8)+84:a(6)+20:a(4)+4:a(2);return 0===s?o:o>0?-o:null}function i(t,e,r){for(var n=t.getContexts("IAID"),i=1,a=0;a<r;a++){i=i<<1|e.readBit(n,i)}return r<31?i&(1<<r)-1:2147483647&i}t.prototype={getContexts:function(t){return t in this?this[t]:this[t]=new Int8Array(65536)}},e.prototype={get decoder(){return l(this,"decoder",new n(this.data,this.start,this.end))},get contextCache(){return l(this,"contextCache",new t)}};var a=["SymbolDictionary",null,null,null,"IntermediateTextRegion",null,"ImmediateTextRegion","ImmediateLosslessTextRegion",null,null,null,null,null,null,null,null,"patternDictionary",null,null,null,"IntermediateHalftoneRegion",null,"ImmediateHalftoneRegion","ImmediateLosslessHalftoneRegion",null,null,null,null,null,null,null,null,null,null,null,null,"IntermediateGenericRegion",null,"ImmediateGenericRegion","ImmediateLosslessGenericRegion","IntermediateGenericRefinementRegion",null,"ImmediateGenericRefinementRegion","ImmediateLosslessGenericRefinementRegion",null,null,null,null,"PageInformation","EndOfPage","EndOfStripe","EndOfFile","Profiles","Tables",null,null,null,null,null,null,null,null,"Extension"],c=[[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:2,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-2,y:0},{x:-1,y:0}],[{x:-3,y:-1},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}]],d=[{coding:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:-1,y:1},{x:0,y:1},{x:1,y:1}]},{coding:[{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:1,y:1}]}],p=[39717,1941,229,405],v=[32,8];function _(t,e,r,n,i,a,s,o){if(t&&f("JBIG2 error: MMR encoding is not supported"),0===n&&!a&&!i&&4===s.length&&3===s[0].x&&-1===s[0].y&&-3===s[1].x&&-1===s[1].y&&2===s[2].x&&-2===s[2].y&&-2===s[3].x&&-2===s[3].y)return function(t,e,r){var n,i,a,s,o,u,h,l=r.decoder,f=r.contextCache.getContexts("GB"),c=[];for(i=0;i<e;i++)for(o=c[i]=new Uint8Array(t),u=i<1?o:c[i-1],n=(h=i<2?o:c[i-2])[0]<<13|h[1]<<12|h[2]<<11|u[0]<<7|u[1]<<6|u[2]<<5|u[3]<<4,a=0;a<t;a++)o[a]=s=l.readBit(f,n),n=(31735&n)<<1|(a+3<t?h[a+3]<<11:0)|(a+4<t?u[a+4]<<4:0)|s;return c}(e,r,o);var u=!!a,h=c[n].concat(s);h.sort((function(t,e){return t.y-e.y||t.x-e.x}));var l,d,v=h.length,_=new Int8Array(v),g=new Int8Array(v),m=[],y=0,b=0,w=0,E=0;for(d=0;d<v;d++)_[d]=h[d].x,g[d]=h[d].y,b=Math.min(b,h[d].x),w=Math.max(w,h[d].x),E=Math.min(E,h[d].y),d<v-1&&h[d].y===h[d+1].y&&h[d].x===h[d+1].x-1?y|=1<<v-1-d:m.push(d);var C=m.length,D=new Int8Array(C),S=new Int8Array(C),T=new Uint16Array(C);for(l=0;l<C;l++)d=m[l],D[l]=h[d].x,S[l]=h[d].y,T[l]=1<<v-1-d;for(var x,F,A,P,M,I=-b,k=-E,U=e-w,O=p[n],B=new Uint8Array(e),R=[],L=o.decoder,N=o.contextCache.getContexts("GB"),z=0,G=0,j=0;j<r;j++){if(i)if(z^=L.readBit(N,O)){R.push(B);continue}for(B=new Uint8Array(B),R.push(B),x=0;x<e;x++)if(u&&a[j][x])B[x]=0;else{if(x>=I&&x<U&&j>=k)for(G=G<<1&y,d=0;d<C;d++)F=j+S[d],A=x+D[d],(P=R[F][A])&&(G|=P=T[d]);else for(G=0,M=v-1,d=0;d<v;d++,M--)(A=x+_[d])>=0&&A<e&&(F=j+g[d])>=0&&(P=R[F][A])&&(G|=P<<M);var q=L.readBit(N,G);B[x]=q}}return R}function g(t,e,r,n,i,a,s,o,u){var h=d[r].coding;0===r&&(h=h.concat([o[0]]));var l,c=h.length,p=new Int32Array(c),_=new Int32Array(c);for(l=0;l<c;l++)p[l]=h[l].x,_[l]=h[l].y;var g=d[r].reference;0===r&&(g=g.concat([o[1]]));var m=g.length,y=new Int32Array(m),b=new Int32Array(m);for(l=0;l<m;l++)y[l]=g[l].x,b[l]=g[l].y;for(var w=n[0].length,E=n.length,C=v[r],D=[],S=u.decoder,T=u.contextCache.getContexts("GR"),x=0,F=0;F<e;F++){if(s)(x^=S.readBit(T,C))&&f("JBIG2 error: prediction is not supported");var A=new Uint8Array(t);D.push(A);for(var P=0;P<t;P++){var M,I,k=0;for(l=0;l<c;l++)M=F+_[l],I=P+p[l],M<0||I<0||I>=t?k<<=1:k=k<<1|D[M][I];for(l=0;l<m;l++)M=F+b[l]+a,I=P+y[l]+i,M<0||M>=E||I<0||I>=w?k<<=1:k=k<<1|n[M][I];var U=S.readBit(T,k);A[P]=U}}return D}function m(t,e,n,a,s,o,u,h,l,c,d,p,v,_,m,y,b){t&&f("JBIG2 error: huffman is not supported");var w,E,C=[];for(w=0;w<a;w++){if(E=new Uint8Array(n),s)for(var D=0;D<n;D++)E[D]=s;C.push(E)}var S=b.decoder,T=b.contextCache,x=-r(T,"IADT",S),F=0;for(w=0;w<o;){x+=r(T,"IADT",S);for(var A=F+=r(T,"IAFS",S);;){var P=u*x+(1===u?0:r(T,"IAIT",S)),M=i(T,S,l),I=e&&r(T,"IARI",S),k=h[M],U=k[0].length,O=k.length;if(I){var B=r(T,"IARDW",S),R=r(T,"IARDH",S);k=g(U+=B,O+=R,m,k,(B>>1)+r(T,"IARDX",S),(R>>1)+r(T,"IARDY",S),!1,y,b)}var L,N,z,G=P-(1&p?0:O),j=A-(2&p?U:0);if(c){for(L=0;L<O;L++)if(E=C[j+L]){z=k[L];var q=Math.min(n-G,U);switch(v){case 0:for(N=0;N<q;N++)E[G+N]|=z[N];break;case 2:for(N=0;N<q;N++)E[G+N]^=z[N];break;default:f("JBIG2 error: operator "+v+" is not supported")}}A+=O-1}else{for(N=0;N<O;N++)if(E=C[G+N])switch(z=k[N],v){case 0:for(L=0;L<U;L++)E[j+L]|=z[L];break;case 2:for(L=0;L<U;L++)E[j+L]^=z[L];break;default:f("JBIG2 error: operator "+v+" is not supported")}A+=U-1}w++;var H=r(T,"IADS",S);if(null===H)break;A+=H+d}}return C}function y(t,e){var r={};r.number=h(t,e);var n=t[e+4],i=63&n;a[i]||f("JBIG2 error: invalid segment type: "+i),r.type=i,r.typeName=a[i],r.deferredNonRetain=!!(128&n);var s=!!(64&n),o=t[e+5],l=o>>5&7,c=[31&o],d=e+6;if(7===o){l=536870911&h(t,d-1),d+=3;var p=l+7>>3;for(c[0]=t[d++];--p>0;)c.push(t[d++])}else 5!==o&&6!==o||f("JBIG2 error: invalid referred-to flags");r.retainBits=c;var v,_,g=r.number<=256?1:r.number<=65536?2:4,m=[];for(v=0;v<l;v++){var y=1===g?t[d]:2===g?u(t,d):h(t,d);m.push(y),d+=g}if(r.referredTo=m,s?(r.pageAssociation=h(t,d),d+=4):r.pageAssociation=t[d++],r.length=h(t,d),d+=4,4294967295===r.length)if(38===i){var b=w(t,d),C=!!(1&t[d+E]),D=new Uint8Array(6);for(C||(D[0]=255,D[1]=172),D[2]=b.height>>>24&255,D[3]=b.height>>16&255,D[4]=b.height>>8&255,D[5]=255&b.height,v=d,_=t.length;v<_;v++){for(var S=0;S<6&&D[S]===t[v+S];)S++;if(6===S){r.length=v+6;break}}4294967295===r.length&&f("JBIG2 error: segment end was not found")}else f("JBIG2 error: invalid unknown segment length");return r.headerEnd=d,r}function b(t,e,r,n){for(var i=[],a=r;a<n;){var s=y(e,a);a=s.headerEnd;var o={header:s,data:e};if(t.randomAccess||(o.start=a,a+=s.length,o.end=a),i.push(o),51===s.type)break}if(t.randomAccess)for(var u=0,h=i.length;u<h;u++)i[u].start=a,a+=i[u].header.length,i[u].end=a;return i}function w(t,e){return{width:h(t,e),height:h(t,e+4),x:h(t,e+8),y:h(t,e+12),combinationOperator:7&t[e+16]}}var E=17;function C(t,e){var r,n,i,a,s=t.header,l=t.data,c=t.start,d=t.end;switch(s.type){case 0:var p={},v=u(l,c);if(p.huffman=!!(1&v),p.refinement=!!(2&v),p.huffmanDHSelector=v>>2&3,p.huffmanDWSelector=v>>4&3,p.bitmapSizeSelector=v>>6&1,p.aggregationInstancesSelector=v>>7&1,p.bitmapCodingContextUsed=!!(256&v),p.bitmapCodingContextRetained=!!(512&v),p.template=v>>10&3,p.refinementTemplate=v>>12&1,c+=2,!p.huffman){for(a=0===p.template?4:1,n=[],i=0;i<a;i++)n.push({x:o(l,c),y:o(l,c+1)}),c+=2;p.at=n}if(p.refinement&&!p.refinementTemplate){for(n=[],i=0;i<2;i++)n.push({x:o(l,c),y:o(l,c+1)}),c+=2;p.refinementAt=n}p.numberOfExportedSymbols=h(l,c),c+=4,p.numberOfNewSymbols=h(l,c),c+=4,r=[p,s.number,s.referredTo,l,c,d];break;case 6:case 7:var _={};_.info=w(l,c);var g=u(l,c+=E);if(c+=2,_.huffman=!!(1&g),_.refinement=!!(2&g),_.stripSize=1<<(g>>2&3),_.referenceCorner=g>>4&3,_.transposed=!!(64&g),_.combinationOperator=g>>7&3,_.defaultPixelValue=g>>9&1,_.dsOffset=g<<17>>27,_.refinementTemplate=g>>15&1,_.huffman){var m=u(l,c);c+=2,_.huffmanFS=3&m,_.huffmanDS=m>>2&3,_.huffmanDT=m>>4&3,_.huffmanRefinementDW=m>>6&3,_.huffmanRefinementDH=m>>8&3,_.huffmanRefinementDX=m>>10&3,_.huffmanRefinementDY=m>>12&3,_.huffmanRefinementSizeSelector=!!(14&m)}if(_.refinement&&!_.refinementTemplate){for(n=[],i=0;i<2;i++)n.push({x:o(l,c),y:o(l,c+1)}),c+=2;_.refinementAt=n}_.numberOfSymbolInstances=h(l,c),c+=4,_.huffman&&f("JBIG2 error: huffman is not supported"),r=[_,s.referredTo,l,c,d];break;case 38:case 39:var y={};y.info=w(l,c),c+=E;var b=l[c++];if(y.mmr=!!(1&b),y.template=b>>1&3,y.prediction=!!(8&b),!y.mmr){for(a=0===y.template?4:1,n=[],i=0;i<a;i++)n.push({x:o(l,c),y:o(l,c+1)}),c+=2;y.at=n}r=[y,l,c,d];break;case 48:var C={width:h(l,c),height:h(l,c+4),resolutionX:h(l,c+8),resolutionY:h(l,c+12)};4294967295===C.height&&delete C.height;var D=l[c+16];u(l,c+17),C.lossless=!!(1&D),C.refinement=!!(2&D),C.defaultPixelValue=D>>2&1,C.combinationOperator=D>>3&3,C.requiresBuffer=!!(32&D),C.combinationOperatorOverride=!!(64&D),r=[C];break;case 49:case 50:case 51:case 62:break;default:f("JBIG2 error: segment type "+s.typeName+"("+s.type+") is not implemented")}var S="on"+s.typeName;S in e&&e[S].apply(e,r)}function D(t,e){for(var r=0,n=t.length;r<n;r++)C(t[r],e)}function S(){}function T(){}return S.prototype={onPageInformation:function(t){this.currentPageInfo=t;var e=t.width+7>>3,r=new Uint8Array(e*t.height);if(t.defaultPixelValue)for(var n=0,i=r.length;n<i;n++)r[n]=255;this.buffer=r},drawBitmap:function(t,e){var r,n,i,a,s=this.currentPageInfo,o=t.width,u=t.height,h=s.width+7>>3,l=s.combinationOperatorOverride?t.combinationOperator:s.combinationOperator,c=this.buffer,d=128>>(7&t.x),p=t.y*h+(t.x>>3);switch(l){case 0:for(r=0;r<u;r++){for(i=d,a=p,n=0;n<o;n++)e[r][n]&&(c[a]|=i),(i>>=1)||(i=128,a++);p+=h}break;case 2:for(r=0;r<u;r++){for(i=d,a=p,n=0;n<o;n++)e[r][n]&&(c[a]^=i),(i>>=1)||(i=128,a++);p+=h}break;default:f("JBIG2 error: operator "+l+" is not supported")}},onImmediateGenericRegion:function(t,r,n,i){var a=t.info,s=new e(r,n,i),o=_(t.mmr,a.width,a.height,t.template,t.prediction,null,t.at,s);this.drawBitmap(a,o)},onImmediateLosslessGenericRegion:function(){this.onImmediateGenericRegion.apply(this,arguments)},onSymbolDictionary:function(t,n,a,o,u,h){t.huffman&&f("JBIG2 error: huffman is not supported");var l=this.symbols;l||(this.symbols=l={});for(var c=[],d=0,p=a.length;d<p;d++)c=c.concat(l[a[d]]);var v=new e(o,u,h);l[n]=function(t,e,n,a,o,u,h,l,c,d,p){t&&f("JBIG2 error: huffman is not supported");for(var v=[],y=0,b=s(n.length+a),w=p.decoder,E=p.contextCache;v.length<a;){y+=r(E,"IADH",w);for(var C=0;;){var D,S=r(E,"IADW",w);if(null===S)break;if(C+=S,e){var T=r(E,"IAAI",w);if(T>1)D=m(t,e,C,y,0,T,1,n.concat(v),b,0,0,1,0,u,c,d,p);else{var x=i(E,w,b),F=r(E,"IARDX",w),A=r(E,"IARDY",w);D=g(C,y,c,x<n.length?n[x]:v[x-n.length],F,A,!1,d,p)}}else D=_(!1,C,y,h,!1,null,l,p);v.push(D)}}for(var P=[],M=[],I=!1,k=n.length+a;M.length<k;){for(var U=r(E,"IAEX",w);U--;)M.push(I);I=!I}for(var O=0,B=n.length;O<B;O++)M[O]&&P.push(n[O]);for(var R=0;R<a;O++,R++)M[O]&&P.push(v[R]);return P}(t.huffman,t.refinement,c,t.numberOfNewSymbols,t.numberOfExportedSymbols,void 0,t.template,t.at,t.refinementTemplate,t.refinementAt,v)},onImmediateTextRegion:function(t,r,n,i,a){for(var o=t.info,u=this.symbols,h=[],l=0,f=r.length;l<f;l++)h=h.concat(u[r[l]]);var c=s(h.length),d=new e(n,i,a),p=m(t.huffman,t.refinement,o.width,o.height,t.defaultPixelValue,t.numberOfSymbolInstances,t.stripSize,h,c,t.transposed,t.dsOffset,t.referenceCorner,t.combinationOperator,0,t.refinementTemplate,t.refinementAt,d);this.drawBitmap(o,p)},onImmediateLosslessTextRegion:function(){this.onImmediateTextRegion.apply(this,arguments)}},T.prototype={parseChunks:function(t){return function(t){for(var e=new S,r=0,n=t.length;r<n;r++){var i=t[r];D(b({},i.data,i.start,i.end),e)}return e.buffer}(t)}},T}();function s(t){for(var e=1,r=0;t>e;)e<<=1,r++;return r}function o(t,e){return t[e]<<24>>24}function u(t,e){return t[e]<<8|t[e+1]}function h(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!1}),r}var f=function(){throw console.error.apply(console,arguments),new Error("PDFJS error: "+arguments[0])},c=function(){console.warn.apply(console,arguments)},d=function(){console.info.apply(console,arguments)};a.prototype.parse=function(t){var e=0,r=t.length;151===t[e]&&74===t[e+1]&&66===t[e+2]&&50===t[e+3]&&13===t[e+4]&&10===t[e+5]&&26===t[e+6]&&10===t[e+7]||f("JBIG2 error: invalid header");var n={};e+=8;var i=t[e++];n.randomAccess=!(1&i),2&i||(n.numberOfPages=h(t,e),e+=4);for(var a=this.parseChunks([{data:t,start:e,end:r}]),s=a.currentPageInfo.width,o=a.currentPageInfo.height,u=a.buffer,l=(t=new Uint8Array(s*o),0),c=0,d=0;d<o;d++)for(var p,v=0,_=0;_<s;_++)v||(v=128,p=u[c++]),t[l++]=p&v?0:255,v>>=1;this.width=s,this.height=o,this.data=t},t.JpegImage=r,t.JpxImage=i,t.Jbig2Image=a}(PDFJS||(PDFJS={})),function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).acorn=t()}((function(){return function t(e,r,n){function i(s,o){if(!r[s]){if(!e[s]){var u="function"==typeof require&&require;if(!o&&u)return u(s,!0);if(a)return a(s,!0);throw(u=Error("Cannot find module '"+s+"'")).code="MODULE_NOT_FOUND",u}u=r[s]={exports:{}},e[s][0].call(u.exports,(function(t){var r=e[s][1][t];return i(r||t)}),u,u.exports,t,e,r,n)}return r[s].exports}for(var a="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){var n=t("./tokentype");(t=t("./state").Parser.prototype).checkPropClash=function(t,e){if(!(6<=this.options.ecmaVersion&&(t.computed||t.method||t.shorthand))){var r=t.key;switch(r.type){case"Identifier":var n=r.name;break;case"Literal":n=String(r.value);break;default:return}var i=t.kind;if(6<=this.options.ecmaVersion)"__proto__"===n&&"init"===i&&(e.proto&&this.raiseRecoverable(r.start,"Redefinition of __proto__ property"),e.proto=!0);else{var a=e[n="$"+n];a?(n="init"!==i,(!this.strict&&!n||!a[i])&&n^a.init||this.raiseRecoverable(r.start,"Redefinition of property")):a=e[n]={init:!1,get:!1,set:!1},a[i]=!0}}},t.parseExpression=function(t,e){var r=this.start,i=this.startLoc,a=this.parseMaybeAssign(t,e);if(this.type===n.types.comma){for((r=this.startNodeAt(r,i)).expressions=[a];this.eat(n.types.comma);)r.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(r,"SequenceExpression")}return a},t.parseMaybeAssign=function(t,e,r){if(this.inGenerator&&this.isContextual("yield"))return this.parseYield();var i=!1;e||(e={shorthandAssign:0,trailingComma:0},i=!0);var a=this.start,s=this.startLoc;this.type!=n.types.parenL&&this.type!=n.types.name||(this.potentialArrowAt=this.start);var o=this.parseMaybeConditional(t,e);return r&&(o=r.call(this,o,a,s)),this.type.isAssign?(i&&this.checkPatternErrors(e,!0),(r=this.startNodeAt(a,s)).operator=this.value,r.left=this.type===n.types.eq?this.toAssignable(o):o,e.shorthandAssign=0,this.checkLVal(o),this.next(),r.right=this.parseMaybeAssign(t),this.finishNode(r,"AssignmentExpression")):(i&&this.checkExpressionErrors(e,!0),o)},t.parseMaybeConditional=function(t,e){var r=this.start,i=this.startLoc,a=this.parseExprOps(t,e);return this.checkExpressionErrors(e)?a:this.eat(n.types.question)?((r=this.startNodeAt(r,i)).test=a,r.consequent=this.parseMaybeAssign(),this.expect(n.types.colon),r.alternate=this.parseMaybeAssign(t),this.finishNode(r,"ConditionalExpression")):a},t.parseExprOps=function(t,e){var r=this.start,n=this.startLoc,i=this.parseMaybeUnary(e,!1);return this.checkExpressionErrors(e)?i:this.parseExprOp(i,r,n,-1,t)},t.parseExprOp=function(t,e,r,i,a){if(null!=(l=this.type.binop)&&(!a||this.type!==n.types._in)&&l>i){var s=this.type===n.types.logicalOR||this.type===n.types.logicalAND,o=this.value;this.next();var u=this.start,h=this.startLoc,l=this.parseExprOp(this.parseMaybeUnary(null,!1),u,h,l,a);return t=this.buildBinary(e,r,t,l,o,s),this.parseExprOp(t,e,r,i,a)}return t},t.buildBinary=function(t,e,r,n,i,a){return(t=this.startNodeAt(t,e)).left=r,t.operator=i,t.right=n,this.finishNode(t,a?"LogicalExpression":"BinaryExpression")},t.parseMaybeUnary=function(t,e){var r=this.start,i=this.startLoc;if(this.type.prefix){var a=this.startNode(),s=this.type===n.types.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(t,!0),s?this.checkLVal(a.argument):this.strict&&"delete"===a.operator&&"Identifier"===a.argument.type?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):e=!0,s=this.finishNode(a,s?"UpdateExpression":"UnaryExpression")}else{if(s=this.parseExprSubscripts(t),this.checkExpressionErrors(t))return s;for(;this.type.postfix&&!this.canInsertSemicolon();)(a=this.startNodeAt(r,i)).operator=this.value,a.prefix=!1,a.argument=s,this.checkLVal(s),this.next(),s=this.finishNode(a,"UpdateExpression")}return!e&&this.eat(n.types.starstar)?this.buildBinary(r,i,s,this.parseMaybeUnary(null,!1),"**",!1):s},t.parseExprSubscripts=function(t){var e=this.start,r=this.startLoc,n=this.parseExprAtom(t),i="ArrowFunctionExpression"===n.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);return this.checkExpressionErrors(t)||i?n:this.parseSubscripts(n,e,r)},t.parseSubscripts=function(t,e,r,i){for(var a;;)if(this.eat(n.types.dot))(a=this.startNodeAt(e,r)).object=t,a.property=this.parseIdent(!0),a.computed=!1,t=this.finishNode(a,"MemberExpression");else if(this.eat(n.types.bracketL))(a=this.startNodeAt(e,r)).object=t,a.property=this.parseExpression(),a.computed=!0,this.expect(n.types.bracketR),t=this.finishNode(a,"MemberExpression");else if(!i&&this.eat(n.types.parenL))(a=this.startNodeAt(e,r)).callee=t,a.arguments=this.parseExprList(n.types.parenR,!1),t=this.finishNode(a,"CallExpression");else{if(this.type!==n.types.backQuote)return t;(a=this.startNodeAt(e,r)).tag=t,a.quasi=this.parseTemplate(),t=this.finishNode(a,"TaggedTemplateExpression")}},t.parseExprAtom=function(t){var e=this.potentialArrowAt==this.start;switch(this.type){case n.types._super:this.inFunction||this.raise(this.start,"'super' outside of function or class");case n.types._this:return t=this.type===n.types._this?"ThisExpression":"Super",e=this.startNode(),this.next(),this.finishNode(e,t);case n.types.name:t=this.start;var r=this.startLoc,i=this.parseIdent(this.type!==n.types.name);return e&&!this.canInsertSemicolon()&&this.eat(n.types.arrow)?this.parseArrowExpression(this.startNodeAt(t,r),[i]):i;case n.types.regexp:return t=this.value,(e=this.parseLiteral(t.value)).regex={pattern:t.pattern,flags:t.flags},e;case n.types.num:case n.types.string:return this.parseLiteral(this.value);case n.types._null:case n.types._true:case n.types._false:return(e=this.startNode()).value=this.type===n.types._null?null:this.type===n.types._true,e.raw=this.type.keyword,this.next(),this.finishNode(e,"Literal");case n.types.parenL:return this.parseParenAndDistinguishExpression(e);case n.types.bracketL:return e=this.startNode(),this.next(),e.elements=this.parseExprList(n.types.bracketR,!0,!0,t),this.finishNode(e,"ArrayExpression");case n.types.braceL:return this.parseObj(!1,t);case n.types._function:return e=this.startNode(),this.next(),this.parseFunction(e,!1);case n.types._class:return this.parseClass(this.startNode(),!1);case n.types._new:return this.parseNew();case n.types.backQuote:return this.parseTemplate();default:this.unexpected()}},t.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),this.next(),this.finishNode(e,"Literal")},t.parseParenExpression=function(){this.expect(n.types.parenL);var t=this.parseExpression();return this.expect(n.types.parenR),t},t.parseParenAndDistinguishExpression=function(t){var e=this.start,r=this.startLoc;if(6<=this.options.ecmaVersion){this.next();for(var i=this.start,a=this.startLoc,s=[],o=!0,u={shorthandAssign:0,trailingComma:0},h=void 0,l=void 0;this.type!==n.types.parenR;){if(o?o=!1:this.expect(n.types.comma),this.type===n.types.ellipsis){h=this.start,s.push(this.parseParenItem(this.parseRest()));break}this.type!==n.types.parenL||l||(l=this.start),s.push(this.parseMaybeAssign(!1,u,this.parseParenItem))}o=this.start;var f=this.startLoc;if(this.expect(n.types.parenR),t&&!this.canInsertSemicolon()&&this.eat(n.types.arrow))return this.checkPatternErrors(u,!0),l&&this.unexpected(l),this.parseParenArrowList(e,r,s);s.length||this.unexpected(this.lastTokStart),h&&this.unexpected(h),this.checkExpressionErrors(u,!0),1<s.length?((t=this.startNodeAt(i,a)).expressions=s,this.finishNodeAt(t,"SequenceExpression",o,f)):t=s[0]}else t=this.parseParenExpression();return this.options.preserveParens?((e=this.startNodeAt(e,r)).expression=t,this.finishNode(e,"ParenthesizedExpression")):t},t.parseParenItem=function(t){return t},t.parseParenArrowList=function(t,e,r){return this.parseArrowExpression(this.startNodeAt(t,e),r)};var i=[];t.parseNew=function(){var t=this.startNode(),e=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(n.types.dot))return t.meta=e,t.property=this.parseIdent(!0),"target"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is new.target"),this.inFunction||this.raiseRecoverable(t.start,"new.target can only be used in functions"),this.finishNode(t,"MetaProperty");e=this.start;var r=this.startLoc;return t.callee=this.parseSubscripts(this.parseExprAtom(),e,r,!0),this.eat(n.types.parenL)?t.arguments=this.parseExprList(n.types.parenR,!1):t.arguments=i,this.finishNode(t,"NewExpression")},t.parseTemplateElement=function(){var t=this.startNode();return t.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),t.tail=this.type===n.types.backQuote,this.finishNode(t,"TemplateElement")},t.parseTemplate=function(){var t=this.startNode();this.next(),t.expressions=[];var e=this.parseTemplateElement();for(t.quasis=[e];!e.tail;)this.expect(n.types.dollarBraceL),t.expressions.push(this.parseExpression()),this.expect(n.types.braceR),t.quasis.push(e=this.parseTemplateElement());return this.next(),this.finishNode(t,"TemplateLiteral")},t.parseObj=function(t,e){var r=this.startNode(),i=!0,a={};for(r.properties=[],this.next();!this.eat(n.types.braceR);){if(i)i=!1;else if(this.expect(n.types.comma),this.afterTrailingComma(n.types.braceR))break;var s=this.startNode(),o=void 0,u=void 0,h=void 0;6<=this.options.ecmaVersion&&(s.method=!1,s.shorthand=!1,(t||e)&&(u=this.start,h=this.startLoc),t||(o=this.eat(n.types.star))),this.parsePropertyName(s),this.parsePropertyValue(s,t,o,u,h,e),this.checkPropClash(s,a),r.properties.push(this.finishNode(s,"Property"))}return this.finishNode(r,t?"ObjectPattern":"ObjectExpression")},t.parsePropertyValue=function(t,e,r,i,a,s){this.eat(n.types.colon)?(t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,s),t.kind="init"):6<=this.options.ecmaVersion&&this.type===n.types.parenL?(e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(r)):5<=this.options.ecmaVersion&&!t.computed&&"Identifier"===t.key.type&&("get"===t.key.name||"set"===t.key.name)&&this.type!=n.types.comma&&this.type!=n.types.braceR?((r||e)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1),t.value.params.length!==("get"===t.kind?0:1)&&(e=t.value.start,"get"===t.kind?this.raiseRecoverable(e,"getter should have no params"):this.raiseRecoverable(e,"setter should have exactly one param")),"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")):6<=this.options.ecmaVersion&&!t.computed&&"Identifier"===t.key.type?(t.kind="init",e?((this.keywords.test(t.key.name)||(this.strict?this.reservedWordsStrictBind:this.reservedWords).test(t.key.name)||this.inGenerator&&"yield"==t.key.name)&&this.raiseRecoverable(t.key.start,"Binding "+t.key.name),t.value=this.parseMaybeDefault(i,a,t.key)):this.type===n.types.eq&&s?(s.shorthandAssign||(s.shorthandAssign=this.start),t.value=this.parseMaybeDefault(i,a,t.key)):t.value=t.key,t.shorthand=!0):this.unexpected()},t.parsePropertyName=function(t){if(6<=this.options.ecmaVersion){if(this.eat(n.types.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(n.types.bracketR),t.key;t.computed=!1}return t.key=this.type===n.types.num||this.type===n.types.string?this.parseExprAtom():this.parseIdent(!0)},t.initFunction=function(t){t.id=null,6<=this.options.ecmaVersion&&(t.generator=!1,t.expression=!1)},t.parseMethod=function(t){var e=this.startNode(),r=this.inGenerator;return this.inGenerator=t,this.initFunction(e),this.expect(n.types.parenL),e.params=this.parseBindingList(n.types.parenR,!1,!1),6<=this.options.ecmaVersion&&(e.generator=t),this.parseFunctionBody(e,!1),this.inGenerator=r,this.finishNode(e,"FunctionExpression")},t.parseArrowExpression=function(t,e){var r=this.inGenerator;return this.inGenerator=!1,this.initFunction(t),t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0),this.inGenerator=r,this.finishNode(t,"ArrowFunctionExpression")},t.parseFunctionBody=function(t,e){var r=e&&this.type!==n.types.braceL;if(r)t.body=this.parseMaybeAssign(),t.expression=!0;else{var i=this.inFunction,a=this.labels;this.inFunction=!0,this.labels=[],t.body=this.parseBlock(!0),t.expression=!1,this.inFunction=i,this.labels=a}this.strict||!r&&t.body.body.length&&this.isUseStrict(t.body.body[0])?(r=this.strict,this.strict=!0,t.id&&this.checkLVal(t.id,!0),this.checkParams(t),this.strict=r):e&&this.checkParams(t)},t.checkParams=function(t){for(var e={},r=0;r<t.params.length;r++)this.checkLVal(t.params[r],!0,e)},t.parseExprList=function(t,e,r,i){for(var a=[],s=!0;!this.eat(t);){if(s)s=!1;else if(this.expect(n.types.comma),e&&this.afterTrailingComma(t))break;if(r&&this.type===n.types.comma)var o=null;else this.type===n.types.ellipsis?(o=this.parseSpread(i),this.type===n.types.comma&&i&&!i.trailingComma&&(i.trailingComma=this.lastTokStart)):o=this.parseMaybeAssign(!1,i);a.push(o)}return a},t.parseIdent=function(t){var e=this.startNode();return t&&"never"==this.options.allowReserved&&(t=!1),this.type===n.types.name?(!t&&(this.strict?this.reservedWordsStrict:this.reservedWords).test(this.value)&&(6<=this.options.ecmaVersion||-1==this.input.slice(this.start,this.end).indexOf("\\"))&&this.raiseRecoverable(this.start,"The keyword '"+this.value+"' is reserved"),!t&&this.inGenerator&&"yield"===this.value&&this.raiseRecoverable(this.start,"Can not use 'yield' as identifier inside a generator"),e.name=this.value):t&&this.type.keyword?e.name=this.type.keyword:this.unexpected(),this.next(),this.finishNode(e,"Identifier")},t.parseYield=function(){var t=this.startNode();return this.next(),this.type==n.types.semi||this.canInsertSemicolon()||this.type!=n.types.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(n.types.star),t.argument=this.parseMaybeAssign()),this.finishNode(t,"YieldExpression")}},{"./state":10,"./tokentype":14}],2:[function(t,e,r){function n(t,e){for(var r=65536,n=0;n<e.length;n+=2){if((r+=e[n])>t)return!1;if((r+=e[n+1])>=t)return!0}}r.__esModule=!0,r.isIdentifierStart=function(t,e){return 65>t?36===t:91>t||(97>t?95===t:123>t||(65535>=t?170<=t&&i.test(String.fromCharCode(t)):!1!==e&&n(t,s)))},r.isIdentifierChar=function(t,e){return 48>t?36===t:58>t||!(65>t)&&(91>t||(97>t?95===t:123>t||(65535>=t?170<=t&&a.test(String.fromCharCode(t)):!1!==e&&(n(t,s)||n(t,o)))))},r.reservedWords={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",7:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},r.keywords={5:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",6:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this const class extends export import super"},t="----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------";var i=new RegExp("["+t+"]"),a=new RegExp("["+t+"------------------------------------------------------------------------------------------------------------------------------------------------]");t=null;var s=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,17,26,6,37,11,29,3,35,5,7,2,4,43,157,99,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,26,45,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,785,52,76,44,33,24,27,35,42,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,287,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,86,25,391,63,32,0,449,56,1288,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,881,68,12,0,67,12,16481,1,3071,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,4149,196,1340,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,10591,541],o=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,1306,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,52,0,13,2,49,13,10,2,4,9,83,11,168,11,6,9,7,3,57,0,2,6,3,1,3,2,10,0,11,1,3,6,4,4,316,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,423,9,20855,9,135,4,60,6,26,9,1016,45,17,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,3617,6,792618,239]},{}],3:[function(t,e,r){r.__esModule=!0,r.parse=function(t,e){return new n.Parser(e,t).parse()},r.parseExpressionAt=function(t,e,r){return(t=new n.Parser(r,t,e)).nextToken(),t.parseExpression()},r.tokenizer=function(t,e){return new n.Parser(e,t)};var n=t("./state");t("./parseutil"),t("./statement"),t("./lval"),t("./expression"),t("./location"),r.Parser=n.Parser,r.plugins=n.plugins,e=t("./options"),r.defaultOptions=e.defaultOptions,e=t("./locutil"),r.Position=e.Position,r.SourceLocation=e.SourceLocation,r.getLineInfo=e.getLineInfo,e=t("./node"),r.Node=e.Node,e=t("./tokentype"),r.TokenType=e.TokenType,r.tokTypes=e.types,e=t("./tokencontext"),r.TokContext=e.TokContext,r.tokContexts=e.types,e=t("./identifier"),r.isIdentifierChar=e.isIdentifierChar,r.isIdentifierStart=e.isIdentifierStart,e=t("./tokenize"),r.Token=e.Token,t=t("./whitespace"),r.isNewLine=t.isNewLine,r.lineBreak=t.lineBreak,r.lineBreakG=t.lineBreakG,r.version="3.1.0"},{"./expression":1,"./identifier":2,"./location":4,"./locutil":5,"./lval":6,"./node":7,"./options":8,"./parseutil":9,"./state":10,"./statement":11,"./tokencontext":12,"./tokenize":13,"./tokentype":14,"./whitespace":16}],4:[function(t,e,r){e=t("./state");var n=t("./locutil");(t=e.Parser.prototype).raise=function(t,e){var r=n.getLineInfo(this.input,t);e+=" ("+r.line+":"+r.column+")";var i=new SyntaxError(e);throw i.pos=t,i.loc=r,i.raisedAt=this.pos,i},t.raiseRecoverable=t.raise,t.curPosition=function(){if(this.options.locations)return new n.Position(this.curLine,this.pos-this.lineStart)}},{"./locutil":5,"./state":10}],5:[function(t,e,r){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0,r.getLineInfo=function(t,e){for(var r=1,n=0;;){i.lineBreakG.lastIndex=n;var s=i.lineBreakG.exec(t);if(!(s&&s.index<e))return new a(r,e-n);++r,n=s.index+s[0].length}};var i=t("./whitespace"),a=function(){function t(e,r){n(this,t),this.line=e,this.column=r}return t.prototype.offset=function(e){return new t(this.line,this.column+e)},t}();r.Position=a,r.SourceLocation=function t(e,r,i){n(this,t),this.start=r,this.end=i,null!==e.sourceFile&&(this.source=e.sourceFile)}},{"./whitespace":16}],6:[function(t,e,r){var n=t("./tokentype");e=t("./state");var i=t("./util");(t=e.Parser.prototype).toAssignable=function(t,e){if(6<=this.options.ecmaVersion&&t)switch(t.type){case"Identifier":case"ObjectPattern":case"ArrayPattern":break;case"ObjectExpression":t.type="ObjectPattern";for(var r=0;r<t.properties.length;r++){var n=t.properties[r];"init"!==n.kind&&this.raise(n.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(n.value,e)}break;case"ArrayExpression":t.type="ArrayPattern",this.toAssignableList(t.elements,e);break;case"AssignmentExpression":if("="!==t.operator){this.raise(t.left.end,"Only '=' operator can be used for specifying default value.");break}t.type="AssignmentPattern",delete t.operator;case"AssignmentPattern":"YieldExpression"===t.right.type&&this.raise(t.right.start,"Yield expression cannot be a default value");break;case"ParenthesizedExpression":t.expression=this.toAssignable(t.expression,e);break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}return t},t.toAssignableList=function(t,e){var r=t.length;if(r){var n=t[r-1];if(n&&"RestElement"==n.type)--r;else if(n&&"SpreadElement"==n.type){n.type="RestElement";var i=n.argument;this.toAssignable(i,e),"Identifier"!==i.type&&"MemberExpression"!==i.type&&"ArrayPattern"!==i.type&&this.unexpected(i.start),--r}e&&"RestElement"===n.type&&"Identifier"!==n.argument.type&&this.unexpected(n.argument.start)}for(n=0;n<r;n++)(i=t[n])&&this.toAssignable(i,e);return t},t.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(t),this.finishNode(e,"SpreadElement")},t.parseRest=function(t){var e=this.startNode();return this.next(),e.argument=t?this.type===n.types.name?this.parseIdent():this.unexpected():this.type===n.types.name||this.type===n.types.bracketL?this.parseBindingAtom():this.unexpected(),this.finishNode(e,"RestElement")},t.parseBindingAtom=function(){if(6>this.options.ecmaVersion)return this.parseIdent();switch(this.type){case n.types.name:return this.parseIdent();case n.types.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(n.types.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case n.types.braceL:return this.parseObj(!0);default:this.unexpected()}},t.parseBindingList=function(t,e,r,i){for(var a=[],s=!0;!this.eat(t);)if(s?s=!1:this.expect(n.types.comma),e&&this.type===n.types.comma)a.push(null);else{if(r&&this.afterTrailingComma(t))break;if(this.type===n.types.ellipsis){e=this.parseRest(i),this.parseBindingListItem(e),a.push(e),this.type===n.types.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}var o=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(o),a.push(o)}return a},t.parseBindingListItem=function(t){return t},t.parseMaybeDefault=function(t,e,r){return r=r||this.parseBindingAtom(),6>this.options.ecmaVersion||!this.eat(n.types.eq)?r:((t=this.startNodeAt(t,e)).left=r,t.right=this.parseMaybeAssign(),this.finishNode(t,"AssignmentPattern"))},t.checkLVal=function(t,e,r){switch(t.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(e?"Binding ":"Assigning to ")+t.name+" in strict mode"),r&&(i.has(r,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),r[t.name]=!0);break;case"MemberExpression":e&&this.raiseRecoverable(t.start,(e?"Binding":"Assigning to")+" member expression");break;case"ObjectPattern":for(var n=0;n<t.properties.length;n++)this.checkLVal(t.properties[n].value,e,r);break;case"ArrayPattern":for(n=0;n<t.elements.length;n++){var a=t.elements[n];a&&this.checkLVal(a,e,r)}break;case"AssignmentPattern":this.checkLVal(t.left,e,r);break;case"RestElement":this.checkLVal(t.argument,e,r);break;case"ParenthesizedExpression":this.checkLVal(t.expression,e,r);break;default:this.raise(t.start,(e?"Binding":"Assigning to")+" rvalue")}}},{"./state":10,"./tokentype":14,"./util":15}],7:[function(t,e,r){function n(t,e,r,n){return t.type=e,t.end=r,this.options.locations&&(t.loc.end=n),this.options.ranges&&(t.range[1]=r),t}r.__esModule=!0,e=t("./state");var i=t("./locutil"),a=function t(e,r,n){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.type="",this.start=r,this.end=0,e.options.locations&&(this.loc=new i.SourceLocation(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[r,0])};r.Node=a,(t=e.Parser.prototype).startNode=function(){return new a(this,this.start,this.startLoc)},t.startNodeAt=function(t,e){return new a(this,t,e)},t.finishNode=function(t,e){return n.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},t.finishNodeAt=function(t,e,r,i){return n.call(this,t,e,r,i)}},{"./locutil":5,"./state":10}],8:[function(t,e,r){function n(t,e){return function(r,n,i,s,o,u){r={type:r?"Block":"Line",value:n,start:i,end:s},t.locations&&(r.loc=new a.SourceLocation(this,o,u)),t.ranges&&(r.range=[i,s]),e.push(r)}}r.__esModule=!0,r.getOptions=function(t){var e,r={};for(e in s)r[e]=t&&i.has(t,e)?t[e]:s[e];return null==r.allowReserved&&(r.allowReserved=5>r.ecmaVersion),i.isArray(r.onToken)&&function(){var t=r.onToken;r.onToken=function(e){return t.push(e)}}(),i.isArray(r.onComment)&&(r.onComment=n(r,r.onComment)),r};var i=t("./util"),a=t("./locutil"),s={ecmaVersion:6,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1,plugins:{}};r.defaultOptions=s},{"./locutil":5,"./util":15}],9:[function(t,e,r){var n=t("./tokentype");e=t("./state");var i=t("./whitespace");(t=e.Parser.prototype).isUseStrict=function(t){return 5<=this.options.ecmaVersion&&"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"use strict"===t.expression.raw.slice(1,-1)},t.eat=function(t){return this.type===t&&(this.next(),!0)},t.isContextual=function(t){return this.type===n.types.name&&this.value===t},t.eatContextual=function(t){return this.value===t&&this.eat(n.types.name)},t.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},t.canInsertSemicolon=function(){return this.type===n.types.eof||this.type===n.types.braceR||i.lineBreak.test(this.input.slice(this.lastTokEnd,this.start))},t.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},t.semicolon=function(){this.eat(n.types.semi)||this.insertSemicolon()||this.unexpected()},t.afterTrailingComma=function(t){if(this.type==t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),this.next(),!0},t.expect=function(t){this.eat(t)||this.unexpected()},t.unexpected=function(t){this.raise(null!=t?t:this.start,"Unexpected token")},t.checkPatternErrors=function(t,e){var r=t&&t.trailingComma;if(!e)return!!r;r&&this.raise(r,"Comma is not permitted after the rest element")},t.checkExpressionErrors=function(t,e){var r=t&&t.shorthandAssign;if(!e)return!!r;r&&this.raise(r,"Shorthand property assignments are valid only in destructuring patterns")}},{"./state":10,"./tokentype":14,"./whitespace":16}],10:[function(t,e,r){function n(t){return new RegExp("^("+t.replace(/ /g,"|")+")$")}r.__esModule=!0;var i=t("./identifier"),a=t("./tokentype"),s=t("./whitespace"),o=t("./options"),u={};r.plugins=u,t=function(){function t(e,r,u){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.options=e=o.getOptions(e),this.sourceFile=e.sourceFile,this.keywords=n(i.keywords[6<=e.ecmaVersion?6:5]);var h=e.allowReserved?"":i.reservedWords[e.ecmaVersion]+("module"==e.sourceType?" await":"");this.reservedWords=n(h),h=(h?h+" ":"")+i.reservedWords.strict,this.reservedWordsStrict=n(h),this.reservedWordsStrictBind=n(h+" "+i.reservedWords.strictBind),this.input=String(r),this.containsEsc=!1,this.loadPlugins(e.plugins),u?(this.pos=u,this.lineStart=Math.max(0,this.input.lastIndexOf("\n",u)),this.curLine=this.input.slice(0,this.lineStart).split(s.lineBreak).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=a.types.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.strict=this.inModule="module"===e.sourceType,this.potentialArrowAt=-1,this.inFunction=this.inGenerator=!1,this.labels=[],0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2)}return t.prototype.isKeyword=function(t){return this.keywords.test(t)},t.prototype.isReservedWord=function(t){return this.reservedWords.test(t)},t.prototype.extend=function(t,e){this[t]=e(this[t])},t.prototype.loadPlugins=function(t){for(var e in t){var r=u[e];if(!r)throw Error("Plugin '"+e+"' not found");r(this,t[e])}},t.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)},t}(),r.Parser=t},{"./identifier":2,"./options":8,"./tokentype":14,"./whitespace":16}],11:[function(t,e,r){var n=t("./tokentype");e=t("./state");var i=t("./whitespace"),a=t("./identifier");(t=e.Parser.prototype).parseTopLevel=function(t){var e=!0;for(t.body||(t.body=[]);this.type!==n.types.eof;){var r=this.parseStatement(!0,!0);t.body.push(r),e&&(this.isUseStrict(r)&&this.setStrict(!0),e=!1)}return this.next(),6<=this.options.ecmaVersion&&(t.sourceType=this.options.sourceType),this.finishNode(t,"Program")};var s={kind:"loop"},o={kind:"switch"};t.isLet=function(){if(this.type!==n.types.name||6>this.options.ecmaVersion||"let"!=this.value)return!1;i.skipWhiteSpace.lastIndex=this.pos;var t=i.skipWhiteSpace.exec(this.input),e=(t=this.pos+t[0].length,this.input.charCodeAt(t));if(91===e||123==e)return!0;if(a.isIdentifierStart(e,!0)){for(e=t+1;a.isIdentifierChar(this.input.charCodeAt(e,!0));++e);if(t=this.input.slice(t,e),!this.isKeyword(t))return!0}return!1},t.parseStatement=function(t,e){var r=this.type,i=this.startNode(),a=void 0;switch(this.isLet()&&(r=n.types._var,a="let"),r){case n.types._break:case n.types._continue:return this.parseBreakContinueStatement(i,r.keyword);case n.types._debugger:return this.parseDebuggerStatement(i);case n.types._do:return this.parseDoStatement(i);case n.types._for:return this.parseForStatement(i);case n.types._function:return!t&&6<=this.options.ecmaVersion&&this.unexpected(),this.parseFunctionStatement(i);case n.types._class:return t||this.unexpected(),this.parseClass(i,!0);case n.types._if:return this.parseIfStatement(i);case n.types._return:return this.parseReturnStatement(i);case n.types._switch:return this.parseSwitchStatement(i);case n.types._throw:return this.parseThrowStatement(i);case n.types._try:return this.parseTryStatement(i);case n.types._const:case n.types._var:return a=a||this.value,t||"var"==a||this.unexpected(),this.parseVarStatement(i,a);case n.types._while:return this.parseWhileStatement(i);case n.types._with:return this.parseWithStatement(i);case n.types.braceL:return this.parseBlock();case n.types.semi:return this.parseEmptyStatement(i);case n.types._export:case n.types._import:return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===n.types._import?this.parseImport(i):this.parseExport(i);default:a=this.value;var s=this.parseExpression();return r===n.types.name&&"Identifier"===s.type&&this.eat(n.types.colon)?this.parseLabeledStatement(i,a,s):this.parseExpressionStatement(i,s)}},t.parseBreakContinueStatement=function(t,e){var r="break"==e;this.next(),this.eat(n.types.semi)||this.insertSemicolon()?t.label=null:this.type!==n.types.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var i=0;i<this.labels.length;++i){var a=this.labels[i];if(null==t.label||a.name===t.label.name){if(null!=a.kind&&(r||"loop"===a.kind))break;if(t.label&&r)break}}return i===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,r?"BreakStatement":"ContinueStatement")},t.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")},t.parseDoStatement=function(t){return this.next(),this.labels.push(s),t.body=this.parseStatement(!1),this.labels.pop(),this.expect(n.types._while),t.test=this.parseParenExpression(),6<=this.options.ecmaVersion?this.eat(n.types.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")},t.parseForStatement=function(t){if(this.next(),this.labels.push(s),this.expect(n.types.parenL),this.type===n.types.semi)return this.parseFor(t,null);var e=this.isLet();if(this.type===n.types._var||this.type===n.types._const||e){var r=this.startNode();e=e?"let":this.value;return this.next(),this.parseVar(r,!0,e),this.finishNode(r,"VariableDeclaration"),!(this.type===n.types._in||6<=this.options.ecmaVersion&&this.isContextual("of"))||1!==r.declarations.length||"var"!==e&&r.declarations[0].init?this.parseFor(t,r):this.parseForIn(t,r)}return r={shorthandAssign:0,trailingComma:0},e=this.parseExpression(!0,r),this.type===n.types._in||6<=this.options.ecmaVersion&&this.isContextual("of")?(this.checkPatternErrors(r,!0),this.toAssignable(e),this.checkLVal(e),this.parseForIn(t,e)):(this.checkExpressionErrors(r,!0),this.parseFor(t,e))},t.parseFunctionStatement=function(t){return this.next(),this.parseFunction(t,!0)},t.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement(!1),t.alternate=this.eat(n.types._else)?this.parseStatement(!1):null,this.finishNode(t,"IfStatement")},t.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(n.types.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")},t.parseSwitchStatement=function(t){this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(n.types.braceL),this.labels.push(o);for(var e,r=!1;this.type!=n.types.braceR;)if(this.type===n.types._case||this.type===n.types._default){var i=this.type===n.types._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),i?e.test=this.parseExpression():(r&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),r=!0,e.test=null),this.expect(n.types.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(!0));return e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},t.parseThrowStatement=function(t){return this.next(),i.lineBreak.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var u=[];t.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===n.types._catch){var e=this.startNode();this.next(),this.expect(n.types.parenL),e.param=this.parseBindingAtom(),this.checkLVal(e.param,!0),this.expect(n.types.parenR),e.body=this.parseBlock(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(n.types._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")},t.parseVarStatement=function(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,"VariableDeclaration")},t.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(s),t.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(t,"WhileStatement")},t.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement(!1),this.finishNode(t,"WithStatement")},t.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")},t.parseLabeledStatement=function(t,e,r){for(var i=0;i<this.labels.length;++i)this.labels[i].name===e&&this.raise(r.start,"Label '"+e+"' is already declared");var a=this.type.isLoop?"loop":this.type===n.types._switch?"switch":null;for(i=this.labels.length-1;0<=i;i--){var s=this.labels[i];if(s.statementStart!=t.start)break;s.statementStart=this.start,s.kind=a}return this.labels.push({name:e,kind:a,statementStart:this.start}),t.body=this.parseStatement(!0),this.labels.pop(),t.label=r,this.finishNode(t,"LabeledStatement")},t.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")},t.parseBlock=function(t){var e=this.startNode(),r=!0,i=void 0;for(e.body=[],this.expect(n.types.braceL);!this.eat(n.types.braceR);){var a=this.parseStatement(!0);e.body.push(a),r&&t&&this.isUseStrict(a)&&(i=this.strict,this.setStrict(this.strict=!0)),r=!1}return!1===i&&this.setStrict(!1),this.finishNode(e,"BlockStatement")},t.parseFor=function(t,e){return t.init=e,this.expect(n.types.semi),t.test=this.type===n.types.semi?null:this.parseExpression(),this.expect(n.types.semi),t.update=this.type===n.types.parenR?null:this.parseExpression(),this.expect(n.types.parenR),t.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(t,"ForStatement")},t.parseForIn=function(t,e){var r=this.type===n.types._in?"ForInStatement":"ForOfStatement";return this.next(),t.left=e,t.right=this.parseExpression(),this.expect(n.types.parenR),t.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(t,r)},t.parseVar=function(t,e,r){for(t.declarations=[],t.kind=r;;){var i=this.startNode();if(this.parseVarId(i),this.eat(n.types.eq)?i.init=this.parseMaybeAssign(e):"const"!==r||this.type===n.types._in||6<=this.options.ecmaVersion&&this.isContextual("of")?"Identifier"==i.id.type||e&&(this.type===n.types._in||this.isContextual("of"))?i.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),t.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(n.types.comma))break}return t},t.parseVarId=function(t){t.id=this.parseBindingAtom(),this.checkLVal(t.id,!0)},t.parseFunction=function(t,e,r){this.initFunction(t),6<=this.options.ecmaVersion&&(t.generator=this.eat(n.types.star));var i=this.inGenerator;return this.inGenerator=t.generator,(e||this.type===n.types.name)&&(t.id=this.parseIdent()),this.parseFunctionParams(t),this.parseFunctionBody(t,r),this.inGenerator=i,this.finishNode(t,e?"FunctionDeclaration":"FunctionExpression")},t.parseFunctionParams=function(t){this.expect(n.types.parenL),t.params=this.parseBindingList(n.types.parenR,!1,!1,!0)},t.parseClass=function(t,e){this.next(),this.parseClassId(t,e),this.parseClassSuper(t);var r=this.startNode(),i=!1;for(r.body=[],this.expect(n.types.braceL);!this.eat(n.types.braceR);)if(!this.eat(n.types.semi)){var a=this.startNode(),s=this.eat(n.types.star),o=this.type===n.types.name&&"static"===this.value;if(this.parsePropertyName(a),a.static=o&&this.type!==n.types.parenL,a.static&&(s&&this.unexpected(),s=this.eat(n.types.star),this.parsePropertyName(a)),a.kind="method",o=!1,!a.computed){var u=a.key;s||"Identifier"!==u.type||this.type===n.types.parenL||"get"!==u.name&&"set"!==u.name||(o=!0,a.kind=u.name,u=this.parsePropertyName(a)),!a.static&&("Identifier"===u.type&&"constructor"===u.name||"Literal"===u.type&&"constructor"===u.value)&&(i&&this.raise(u.start,"Duplicate constructor in the same class"),o&&this.raise(u.start,"Constructor can't have get/set modifier"),s&&this.raise(u.start,"Constructor can't be a generator"),a.kind="constructor",i=!0)}this.parseClassMethod(r,a,s),o&&(a.value.params.length!==("get"===a.kind?0:1)&&(s=a.value.start,"get"===a.kind?this.raiseRecoverable(s,"getter should have no params"):this.raiseRecoverable(s,"setter should have exactly one param")),"set"===a.kind&&"RestElement"===a.value.params[0].type&&this.raise(a.value.params[0].start,"Setter cannot use rest params"))}return t.body=this.finishNode(r,"ClassBody"),this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},t.parseClassMethod=function(t,e,r){e.value=this.parseMethod(r),t.body.push(this.finishNode(e,"MethodDefinition"))},t.parseClassId=function(t,e){t.id=this.type===n.types.name?this.parseIdent():e?this.unexpected():null},t.parseClassSuper=function(t){t.superClass=this.eat(n.types._extends)?this.parseExprSubscripts():null},t.parseExport=function(t){if(this.next(),this.eat(n.types.star))return this.expectContextual("from"),t.source=this.type===n.types.string?this.parseExprAtom():this.unexpected(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(n.types._default)){var e=this.type==n.types.parenL,r=this.parseMaybeAssign(),i=!0;return e||"FunctionExpression"!=r.type&&"ClassExpression"!=r.type||(i=!1,r.id&&(r.type="FunctionExpression"==r.type?"FunctionDeclaration":"ClassDeclaration")),t.declaration=r,i&&this.semicolon(),this.finishNode(t,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(!0),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(),this.eatContextual("from"))t.source=this.type===n.types.string?this.parseExprAtom():this.unexpected();else{for(e=0;e<t.specifiers.length;e++)(this.keywords.test(t.specifiers[e].local.name)||this.reservedWords.test(t.specifiers[e].local.name))&&this.unexpected(t.specifiers[e].local.start);t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")},t.shouldParseExportStatement=function(){return this.type.keyword||this.isLet()},t.parseExportSpecifiers=function(){var t=[],e=!0;for(this.expect(n.types.braceL);!this.eat(n.types.braceR);){if(e)e=!1;else if(this.expect(n.types.comma),this.afterTrailingComma(n.types.braceR))break;var r=this.startNode();r.local=this.parseIdent(this.type===n.types._default),r.exported=this.eatContextual("as")?this.parseIdent(!0):r.local,t.push(this.finishNode(r,"ExportSpecifier"))}return t},t.parseImport=function(t){return this.next(),this.type===n.types.string?(t.specifiers=u,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===n.types.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")},t.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===n.types.name){var r=this.startNode();if(r.local=this.parseIdent(),this.checkLVal(r.local,!0),t.push(this.finishNode(r,"ImportDefaultSpecifier")),!this.eat(n.types.comma))return t}if(this.type===n.types.star)return r=this.startNode(),this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLVal(r.local,!0),t.push(this.finishNode(r,"ImportNamespaceSpecifier")),t;for(this.expect(n.types.braceL);!this.eat(n.types.braceR);){if(e)e=!1;else if(this.expect(n.types.comma),this.afterTrailingComma(n.types.braceR))break;(r=this.startNode()).imported=this.parseIdent(!0),this.eatContextual("as")?r.local=this.parseIdent():(r.local=r.imported,this.isKeyword(r.local.name)&&this.unexpected(r.local.start),this.reservedWordsStrict.test(r.local.name)&&this.raise(r.local.start,"The keyword '"+r.local.name+"' is reserved")),this.checkLVal(r.local,!0),t.push(this.finishNode(r,"ImportSpecifier"))}return t}},{"./identifier":2,"./state":10,"./tokentype":14,"./whitespace":16}],12:[function(t,e,r){r.__esModule=!0,e=t("./state");var n=t("./tokentype"),i=t("./whitespace");t=function t(e,r,n,i){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.token=e,this.isExpr=!!r,this.preserveSpace=!!n,this.override=i},r.TokContext=t;var a={b_stat:new t("{",!1),b_expr:new t("{",!0),b_tmpl:new t("${",!0),p_stat:new t("(",!1),p_expr:new t("(",!0),q_tmpl:new t("`",!0,!0,(function(t){return t.readTmplToken()})),f_expr:new t("function",!0)};r.types=a,(r=e.Parser.prototype).initialContext=function(){return[a.b_stat]},r.braceIsBlock=function(t){if(t===n.types.colon){var e=this.curContext();if(e===a.b_stat||e===a.b_expr)return!e.isExpr}return t===n.types._return?i.lineBreak.test(this.input.slice(this.lastTokEnd,this.start)):t===n.types._else||t===n.types.semi||t===n.types.eof||t===n.types.parenR||(t==n.types.braceL?this.curContext()===a.b_stat:!this.exprAllowed)},r.updateContext=function(t){var e,r=this.type;r.keyword&&t==n.types.dot?this.exprAllowed=!1:(e=r.updateContext)?e.call(this,t):this.exprAllowed=r.beforeExpr},n.types.parenR.updateContext=n.types.braceR.updateContext=function(){if(1==this.context.length)this.exprAllowed=!0;else{var t=this.context.pop();t===a.b_stat&&this.curContext()===a.f_expr?(this.context.pop(),this.exprAllowed=!1):this.exprAllowed=t===a.b_tmpl||!t.isExpr}},n.types.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?a.b_stat:a.b_expr),this.exprAllowed=!0},n.types.dollarBraceL.updateContext=function(){this.context.push(a.b_tmpl),this.exprAllowed=!0},n.types.parenL.updateContext=function(t){this.context.push(t===n.types._if||t===n.types._for||t===n.types._with||t===n.types._while?a.p_stat:a.p_expr),this.exprAllowed=!0},n.types.incDec.updateContext=function(){},n.types._function.updateContext=function(t){!t.beforeExpr||t===n.types.semi||t===n.types._else||t===n.types.colon&&this.curContext()===a.b_stat||this.context.push(a.f_expr),this.exprAllowed=!1},n.types.backQuote.updateContext=function(){this.curContext()===a.q_tmpl?this.context.pop():this.context.push(a.q_tmpl),this.exprAllowed=!1}},{"./state":10,"./tokentype":14,"./whitespace":16}],13:[function(t,e,r){function n(t,e,r,n){try{return new RegExp(t,e)}catch(t){if(void 0!==r)throw t instanceof SyntaxError&&n.raise(r,"Error parsing regular expression: "+t.message),t}}function i(t){return 65535>=t?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}r.__esModule=!0;var a=t("./identifier"),s=t("./tokentype");e=t("./state");var o=t("./locutil"),u=t("./whitespace"),h=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new o.SourceLocation(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])};r.Token=h,t=e.Parser.prototype;var l="object"==typeof Packages&&"[object JavaPackage]"==Object.prototype.toString.call(Packages);t.next=function(){this.options.onToken&&this.options.onToken(new h(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},t.getToken=function(){return this.next(),new h(this)},"undefined"!=typeof Symbol&&(t[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===s.types.eof,value:e}}}}),t.setStrict=function(t){if(this.strict=t,this.type===s.types.num||this.type===s.types.string){if(this.pos=this.start,this.options.locations)for(;this.pos<this.lineStart;)this.lineStart=this.input.lastIndexOf("\n",this.lineStart-2)+1,--this.curLine;this.nextToken()}},t.curContext=function(){return this.context[this.context.length-1]},t.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(s.types.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},t.readToken=function(t){return a.isIdentifierStart(t,6<=this.options.ecmaVersion)||92===t?this.readWord():this.getTokenFromCode(t)},t.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);return 55295>=t||57344<=t?t:(t<<10)+this.input.charCodeAt(this.pos+1)-56613888},t.skipBlockComment=function(){var t=this.options.onComment&&this.curPosition(),e=this.pos,r=this.input.indexOf("*/",this.pos+=2);if(-1===r&&this.raise(this.pos-2,"Unterminated comment"),this.pos=r+2,this.options.locations){u.lineBreakG.lastIndex=e;for(var n=void 0;(n=u.lineBreakG.exec(this.input))&&n.index<this.pos;)++this.curLine,this.lineStart=n.index+n[0].length}this.options.onComment&&this.options.onComment(!0,this.input.slice(e+2,r),e,this.pos,t,this.curPosition())},t.skipLineComment=function(t){for(var e=this.pos,r=this.options.onComment&&this.curPosition(),n=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&10!==n&&13!==n&&8232!==n&&8233!==n;)++this.pos,n=this.input.charCodeAt(this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,r,this.curPosition())},t.skipSpace=function(){t:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(!(8<t&&14>t||5760<=t&&u.nonASCIIwhitespace.test(String.fromCharCode(t))))break t;++this.pos}}},t.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var r=this.type;this.type=t,this.value=e,this.updateContext(r)},t.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(48<=t&&57>=t)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return 6<=this.options.ecmaVersion&&46===t&&46===e?(this.pos+=3,this.finishToken(s.types.ellipsis)):(++this.pos,this.finishToken(s.types.dot))},t.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(s.types.assign,2):this.finishOp(s.types.slash,1)},t.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),r=1;return t=42===t?s.types.star:s.types.modulo,7<=this.options.ecmaVersion&&42===e&&(++r,t=s.types.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(s.types.assign,r+1):this.finishOp(t,r)},t.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?this.finishOp(124===t?s.types.logicalOR:s.types.logicalAND,2):61===e?this.finishOp(s.types.assign,2):this.finishOp(124===t?s.types.bitwiseOR:s.types.bitwiseAND,1)},t.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(s.types.assign,2):this.finishOp(s.types.bitwiseXOR,1)},t.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45==e&&62==this.input.charCodeAt(this.pos+2)&&u.lineBreak.test(this.input.slice(this.lastTokEnd,this.pos))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(s.types.incDec,2):61===e?this.finishOp(s.types.assign,2):this.finishOp(s.types.plusMin,1)},t.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),r=1;return e===t?(r=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+r)?this.finishOp(s.types.assign,r+1):this.finishOp(s.types.bitShift,r)):33==e&&60==t&&45==this.input.charCodeAt(this.pos+2)&&45==this.input.charCodeAt(this.pos+3)?(this.inModule&&this.unexpected(),this.skipLineComment(4),this.skipSpace(),this.nextToken()):(61===e&&(r=2),this.finishOp(s.types.relational,r))},t.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(s.types.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&6<=this.options.ecmaVersion?(this.pos+=2,this.finishToken(s.types.arrow)):this.finishOp(61===t?s.types.eq:s.types.prefix,1)},t.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(s.types.parenL);case 41:return++this.pos,this.finishToken(s.types.parenR);case 59:return++this.pos,this.finishToken(s.types.semi);case 44:return++this.pos,this.finishToken(s.types.comma);case 91:return++this.pos,this.finishToken(s.types.bracketL);case 93:return++this.pos,this.finishToken(s.types.bracketR);case 123:return++this.pos,this.finishToken(s.types.braceL);case 125:return++this.pos,this.finishToken(s.types.braceR);case 58:return++this.pos,this.finishToken(s.types.colon);case 63:return++this.pos,this.finishToken(s.types.question);case 96:if(6>this.options.ecmaVersion)break;return++this.pos,this.finishToken(s.types.backQuote);case 48:if(120===(t=this.input.charCodeAt(this.pos+1))||88===t)return this.readRadixNumber(16);if(6<=this.options.ecmaVersion){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 126:return this.finishOp(s.types.prefix,1)}this.raise(this.pos,"Unexpected character '"+i(t)+"'")},t.finishOp=function(t,e){var r=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,r)};var f=!!n("","u");t.readRegexp=function(){for(var t=this,e=void 0,r=void 0,i=this.pos;;){this.pos>=this.input.length&&this.raise(i,"Unterminated regular expression");var a=this.input.charAt(this.pos);if(u.lineBreak.test(a)&&this.raise(i,"Unterminated regular expression"),e)e=!1;else{if("["===a)r=!0;else if("]"===a&&r)r=!1;else if("/"===a&&!r)break;e="\\"===a}++this.pos}if(e=this.input.slice(i,this.pos),++this.pos,a=e,r=this.readWord1()){var o=/^[gim]*$/;6<=this.options.ecmaVersion&&(o=/^[gimuy]*$/),o.test(r)||this.raise(i,"Invalid regular expression flag"),0<=r.indexOf("u")&&!f&&(a=(a=a.replace(/\\u\{([0-9a-fA-F]+)\}/g,(function(e,r,n){return 1114111<(r=Number("0x"+r))&&t.raise(i+n+3,"Code point out of bounds"),"x"}))).replace(/\\u([a-fA-F0-9]{4})|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"))}return o=null,l||(n(a,void 0,i,this),o=n(e,r)),this.finishToken(s.types.regexp,{pattern:e,flags:r,value:o})},t.readInt=function(t,e){for(var r=this.pos,n=0,i=0,a=null==e?1/0:e;i<a;++i){var s;if((s=97<=(s=this.input.charCodeAt(this.pos))?s-97+10:65<=s?s-65+10:48<=s&&57>=s?s-48:1/0)>=t)break;++this.pos,n=n*t+s}return this.pos===r||null!=e&&this.pos-r!==e?null:n},t.readRadixNumber=function(t){this.pos+=2;var e=this.readInt(t);return null==e&&this.raise(this.start+2,"Expected number in radix "+t),a.isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(s.types.num,e)},t.readNumber=function(t){var e=this.pos,r=!1,n=48===this.input.charCodeAt(this.pos);t||null!==this.readInt(10)||this.raise(e,"Invalid number"),46===(t=this.input.charCodeAt(this.pos))&&(++this.pos,this.readInt(10),r=!0,t=this.input.charCodeAt(this.pos)),69!==t&&101!==t||(43!==(t=this.input.charCodeAt(++this.pos))&&45!==t||++this.pos,null===this.readInt(10)&&this.raise(e,"Invalid number"),r=!0),a.isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),t=this.input.slice(e,this.pos);var i=void 0;return r?i=parseFloat(t):n&&1!==t.length?/[89]/.test(t)||this.strict?this.raise(e,"Invalid number"):i=parseInt(t,8):i=parseInt(t,10),this.finishToken(s.types.num,i)},t.readCodePoint=function(){if(123===this.input.charCodeAt(this.pos)){6>this.options.ecmaVersion&&this.unexpected();var t=++this.pos,e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos);++this.pos,1114111<e&&this.raise(t,"Code point out of bounds")}else e=this.readHexChar(4);return e},t.readString=function(t){for(var e="",r=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var n=this.input.charCodeAt(this.pos);if(n===t)break;92===n?(e+=this.input.slice(r,this.pos),e+=this.readEscapedChar(!1),r=this.pos):(u.isNewLine(n)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(r,this.pos++),this.finishToken(s.types.string,e)},t.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var r=this.input.charCodeAt(this.pos);if(96===r||36===r&&123===this.input.charCodeAt(this.pos+1))return this.pos===this.start&&this.type===s.types.template?36===r?(this.pos+=2,this.finishToken(s.types.dollarBraceL)):(++this.pos,this.finishToken(s.types.backQuote)):(t+=this.input.slice(e,this.pos),this.finishToken(s.types.template,t));if(92===r)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(u.isNewLine(r)){switch(t+=this.input.slice(e,this.pos),++this.pos,r){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(r)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}},t.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return i(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(48<=e&&55>=e){e=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0];var r=parseInt(e,8);return 255<r&&(e=e.slice(0,-1),r=parseInt(e,8)),"0"!==e&&(this.strict||t)&&this.raise(this.pos-2,"Octal literal in strict mode"),this.pos+=e.length-1,String.fromCharCode(r)}return String.fromCharCode(e)}},t.readHexChar=function(t){var e=this.pos;return null===(t=this.readInt(16,t))&&this.raise(e,"Bad character escape sequence"),t},t.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,r=this.pos,n=6<=this.options.ecmaVersion;this.pos<this.input.length;){var s=this.fullCharCodeAtPos();if(a.isIdentifierChar(s,n))this.pos+=65535>=s?1:2;else{if(92!==s)break;this.containsEsc=!0,t+=this.input.slice(r,this.pos),r=this.pos,117!=this.input.charCodeAt(++this.pos)&&this.raise(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos,s=this.readCodePoint(),(e?a.isIdentifierStart:a.isIdentifierChar)(s,n)||this.raise(r,"Invalid Unicode escape"),t+=i(s),r=this.pos}e=!1}return t+this.input.slice(r,this.pos)},t.readWord=function(){var t=this.readWord1(),e=s.types.name;return(6<=this.options.ecmaVersion||!this.containsEsc)&&this.keywords.test(t)&&(e=s.keywords[t]),this.finishToken(e,t)}},{"./identifier":2,"./locutil":5,"./state":10,"./tokentype":14,"./whitespace":16}],14:[function(t,e,r){function n(t,e){return new a(t,{beforeExpr:!0,binop:e})}function i(t){var e=1>=arguments.length||void 0===arguments[1]?{}:arguments[1];e.keyword=t,o[t]=s["_"+t]=new a(t,e)}r.__esModule=!0;var a=function t(e){var r=1>=arguments.length||void 0===arguments[1]?{}:arguments[1];if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.label=e,this.keyword=r.keyword,this.beforeExpr=!!r.beforeExpr,this.startsExpr=!!r.startsExpr,this.isLoop=!!r.isLoop,this.isAssign=!!r.isAssign,this.prefix=!!r.prefix,this.postfix=!!r.postfix,this.binop=r.binop||null,this.updateContext=null};r.TokenType=a,t={beforeExpr:!0};var s={num:new a("num",e={startsExpr:!0}),regexp:new a("regexp",e),string:new a("string",e),name:new a("name",e),eof:new a("eof"),bracketL:new a("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new a("]"),braceL:new a("{",{beforeExpr:!0,startsExpr:!0}),braceR:new a("}"),parenL:new a("(",{beforeExpr:!0,startsExpr:!0}),parenR:new a(")"),comma:new a(",",t),semi:new a(";",t),colon:new a(":",t),dot:new a("."),question:new a("?",t),arrow:new a("=>",t),template:new a("template"),ellipsis:new a("...",t),backQuote:new a("`",e),dollarBraceL:new a("${",{beforeExpr:!0,startsExpr:!0}),eq:new a("=",{beforeExpr:!0,isAssign:!0}),assign:new a("_=",{beforeExpr:!0,isAssign:!0}),incDec:new a("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new a("prefix",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:n("||",1),logicalAND:n("&&",2),bitwiseOR:n("|",3),bitwiseXOR:n("^",4),bitwiseAND:n("&",5),equality:n("==/!=",6),relational:n("</>",7),bitShift:n("<</>>",8),plusMin:new a("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:n("%",10),star:n("*",10),slash:n("/",10),starstar:new a("**",{beforeExpr:!0})};r.types=s;var o={};r.keywords=o,i("break"),i("case",t),i("catch"),i("continue"),i("debugger"),i("default",t),i("do",{isLoop:!0,beforeExpr:!0}),i("else",t),i("finally"),i("for",{isLoop:!0}),i("function",e),i("if"),i("return",t),i("switch"),i("throw",t),i("try"),i("var"),i("const"),i("while",{isLoop:!0}),i("with"),i("new",{beforeExpr:!0,startsExpr:!0}),i("this",e),i("super",e),i("class"),i("extends",t),i("export"),i("import"),i("null",e),i("true",e),i("false",e),i("in",{beforeExpr:!0,binop:7}),i("instanceof",{beforeExpr:!0,binop:7}),i("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),i("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),i("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},{}],15:[function(t,e,r){r.__esModule=!0,r.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},r.has=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},{}],16:[function(t,e,r){r.__esModule=!0,r.isNewLine=function(t){return 10===t||13===t||8232===t||8233==t},t=/\r\n?|\n|\u2028|\u2029/,r.lineBreak=t,r.lineBreakG=new RegExp(t.source,"g"),r.nonASCIIwhitespace=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,r.skipWhiteSpace=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g},{}]},{},[3])(3)}));var UPNG={};function GifWriter(t,e,r,n){var i=0,a=void 0===(n=void 0===n?{}:n).loop?null:n.loop,s=void 0===n.palette?null:n.palette;if(e<=0||r<=0||e>65535||r>65535)throw new Error("Width/Height invalid.");function o(t){var e=t.length;if(e<2||e>256||e&e-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return e}t[i++]=71,t[i++]=73,t[i++]=70,t[i++]=56,t[i++]=57,t[i++]=97;var u=0,h=0;if(null!==s){for(var l=o(s);l>>=1;)++u;if(l=1<<u,--u,void 0!==n.background){if((h=n.background)>=l)throw new Error("Background index out of range.");if(0===h)throw new Error("Background index explicitly passed as 0.")}}if(t[i++]=255&e,t[i++]=e>>8&255,t[i++]=255&r,t[i++]=r>>8&255,t[i++]=(null!==s?128:0)|u,t[i++]=h,t[i++]=0,null!==s)for(var f=0,c=s.length;f<c;++f){var d=s[f];t[i++]=d>>16&255,t[i++]=d>>8&255,t[i++]=255&d}if(null!==a){if(a<0||a>65535)throw new Error("Loop count invalid.");t[i++]=33,t[i++]=255,t[i++]=11,t[i++]=78,t[i++]=69,t[i++]=84,t[i++]=83,t[i++]=67,t[i++]=65,t[i++]=80,t[i++]=69,t[i++]=50,t[i++]=46,t[i++]=48,t[i++]=3,t[i++]=1,t[i++]=255&a,t[i++]=a>>8&255,t[i++]=0}var p=!1;this.addFrame=function(e,r,n,a,u,h){if(!0===p&&(--i,p=!1),h=void 0===h?{}:h,e<0||r<0||e>65535||r>65535)throw new Error("x/y invalid.");if(n<=0||a<=0||n>65535||a>65535)throw new Error("Width/Height invalid.");if(u.length<n*a)throw new Error("Not enough pixels for the frame size.");var l=!0,f=h.palette;if(null==f&&(l=!1,f=s),null==f)throw new Error("Must supply either a local or global palette.");for(var c=o(f),d=0;c>>=1;)++d;c=1<<d;var v=void 0===h.delay?0:h.delay,_=void 0===h.disposal?0:h.disposal;if(_<0||_>3)throw new Error("Disposal out of range.");var g=!1,m=0;if(void 0!==h.transparent&&null!==h.transparent&&(g=!0,(m=h.transparent)<0||m>=c))throw new Error("Transparent color index.");if((0!==_||g||0!==v)&&(t[i++]=33,t[i++]=249,t[i++]=4,t[i++]=_<<2|(!0===g?1:0),t[i++]=255&v,t[i++]=v>>8&255,t[i++]=m,t[i++]=0),t[i++]=44,t[i++]=255&e,t[i++]=e>>8&255,t[i++]=255&r,t[i++]=r>>8&255,t[i++]=255&n,t[i++]=n>>8&255,t[i++]=255&a,t[i++]=a>>8&255,t[i++]=!0===l?128|d-1:0,!0===l)for(var y=0,b=f.length;y<b;++y){var w=f[y];t[i++]=w>>16&255,t[i++]=w>>8&255,t[i++]=255&w}return i=GifWriterOutputLZWCodeStream(t,i,d<2?2:d,u)},this.end=function(){return!1===p&&(t[i++]=59,p=!0),i},this.getOutputBuffer=function(){return t},this.setOutputBuffer=function(e){t=e},this.getOutputBufferPosition=function(){return i},this.setOutputBufferPosition=function(t){i=t}}function GifWriterOutputLZWCodeStream(t,e,r,n){t[e++]=r;var i=e++,a=1<<r,s=a-1,o=a+1,u=o+1,h=r+1,l=0,f=0;function c(r){for(;l>=r;)t[e++]=255&f,f>>=8,l-=8,e===i+256&&(t[i]=255,i=e++)}function d(t){f|=t<<l,l+=h,c(8)}var p=n[0]&s,v={};d(a);for(var _=1,g=n.length;_<g;++_){var m=n[_]&s,y=p<<8|m,b=v[y];if(void 0===b){for(f|=p<<l,l+=h;l>=8;)t[e++]=255&f,f>>=8,l-=8,e===i+256&&(t[i]=255,i=e++);4096===u?(d(a),u=o+1,h=r+1,v={}):(u>=1<<h&&++h,v[y]=u++),p=m}else p=b}return d(p),d(o),c(1),i+1===e?t[i]=0:(t[i]=e-i-1,t[e++]=0),e}function GifReader(t){var e=0;if(71!==t[e++]||73!==t[e++]||70!==t[e++]||56!==t[e++]||56!=(t[e++]+1&253)||97!==t[e++])throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,i=t[e++],a=i>>7,s=1<<(7&i)+1;t[e++];t[e++];var o=null,u=null;a&&(o=e,u=s,e+=3*s);var h=!0,l=[],f=0,c=null,d=0,p=null;this.width=r,this.height=n;for(;h&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(11!==t[e]||78==t[e+1]&&69==t[e+2]&&84==t[e+3]&&83==t[e+4]&&67==t[e+5]&&65==t[e+6]&&80==t[e+7]&&69==t[e+8]&&50==t[e+9]&&46==t[e+10]&&48==t[e+11]&&3==t[e+12]&&1==t[e+13]&&0==t[e+16])e+=14,p=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((x=t[e++])>=0))throw Error("Invalid block size");if(0===x)break;e+=x}break;case 249:if(4!==t[e++]||0!==t[e+4])throw new Error("Invalid graphics extension block.");var v=t[e++];f=t[e++]|t[e++]<<8,c=t[e++],0==(1&v)&&(c=null),d=v>>2&7,e++;break;case 254:for(;;){if(!((x=t[e++])>=0))throw Error("Invalid block size");if(0===x)break;e+=x}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var _=t[e++]|t[e++]<<8,g=t[e++]|t[e++]<<8,m=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,b=t[e++],w=b>>6&1,E=1<<(7&b)+1,C=o,D=u,S=!1;if(b>>7){S=!0;C=e,D=E,e+=3*E}var T=e;for(e++;;){var x;if(!((x=t[e++])>=0))throw Error("Invalid block size");if(0===x)break;e+=x}m*y,l.push({x:_,y:g,width:m,height:y,has_local_palette:S,palette_offset:C,palette_size:D,data_offset:T,data_length:e-T,transparent_index:c,interlaced:!!w,delay:f,disposal:d});break;case 59:h=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return l.length},this.loopCount=function(){return p},this.frameInfo=function(t){if(t<0||t>=l.length)throw new Error("Frame index out of range.");return l[t]},this.decodeAndBlitFrameBGRA=function(e,n){var i=this.frameInfo(e),a=i.width*i.height,s=new Uint8Array(a);GifReaderLZWOutputIndexStream(t,i.data_offset,s,a);var o=i.palette_offset,u=i.transparent_index;null===u&&(u=256);var h=i.width,l=r-h,f=h,c=4*(i.y*r+i.x),d=4*((i.y+i.height)*r+i.x),p=c,v=4*l;!0===i.interlaced&&(v+=4*r*7);for(var _=8,g=0,m=s.length;g<m;++g){var y=s[g];if(0===f&&(f=h,(p+=v)>=d&&(v=4*l+4*r*(_-1),p=c+(h+l)*(_<<1),_>>=1)),y===u)p+=4;else{var b=t[o+3*y],w=t[o+3*y+1],E=t[o+3*y+2];n[p++]=E,n[p++]=w,n[p++]=b,n[p++]=255}--f}},this.decodeAndBlitFrameRGBA=function(e,n){var i=this.frameInfo(e),a=i.width*i.height,s=new Uint8Array(a);GifReaderLZWOutputIndexStream(t,i.data_offset,s,a);var o=i.palette_offset,u=i.transparent_index;null===u&&(u=256);var h=i.width,l=r-h,f=h,c=4*(i.y*r+i.x),d=4*((i.y+i.height)*r+i.x),p=c,v=4*l;!0===i.interlaced&&(v+=4*r*7);for(var _=8,g=0,m=s.length;g<m;++g){var y=s[g];if(0===f&&(f=h,(p+=v)>=d&&(v=4*l+4*r*(_-1),p=c+(h+l)*(_<<1),_>>=1)),y===u)p+=4;else{var b=t[o+3*y],w=t[o+3*y+1],E=t[o+3*y+2];n[p++]=b,n[p++]=w,n[p++]=E,n[p++]=255}--f}}}function GifReaderLZWOutputIndexStream(t,e,r,n){for(var i=t[e++],a=1<<i,s=a+1,o=s+1,u=i+1,h=(1<<u)-1,l=0,f=0,c=0,d=t[e++],p=new Int32Array(4096),v=null;;){for(;l<16&&0!==d;)f|=t[e++]<<l,l+=8,1===d?d=t[e++]:--d;if(l<u)break;var _=f&h;if(f>>=u,l-=u,_!==a){if(_===s)break;for(var g=_<o?_:v,m=0,y=g;y>a;)y=p[y]>>8,++m;var b=y;if(c+m+(g!==_?1:0)>n)return void console.log("Warning, gif stream longer than expected.");r[c++]=b;var w=c+=m;for(g!==_&&(r[c++]=b),y=g;m--;)y=p[y],r[--w]=255&y,y>>=8;null!==v&&o<4096&&(p[o++]=v<<8|b,o>=h+1&&u<12&&(++u,h=h<<1|1)),v=_}else o=s+1,h=(1<<(u=i+1))-1,v=null}return c!==n&&console.log("Warning, gif stream shorter than expected."),r}UPNG.toRGBA8=function(t){var e=t.width,r=t.height;if(null==t.tabs.acTL)return[UPNG.toRGBA8.decodeImage(t.data,e,r,t).buffer];var n=[];null==t.frames[0].data&&(t.frames[0].data=t.data);for(var i=e*r*4,a=new Uint8Array(i),s=new Uint8Array(i),o=new Uint8Array(i),u=0;u<t.frames.length;u++){var h=t.frames[u],l=h.rect.x,f=h.rect.y,c=h.rect.width,d=h.rect.height,p=UPNG.toRGBA8.decodeImage(h.data,c,d,t);if(0!=u)for(var v=0;v<i;v++)o[v]=a[v];if(0==h.blend?UPNG._copyTile(p,c,d,a,e,r,l,f,0):1==h.blend&&UPNG._copyTile(p,c,d,a,e,r,l,f,1),n.push(a.buffer.slice(0)),0==h.dispose);else if(1==h.dispose)UPNG._copyTile(s,c,d,a,e,r,l,f,0);else if(2==h.dispose)for(v=0;v<i;v++)a[v]=o[v]}return n},UPNG.toRGBA8.decodeImage=function(t,e,r,n){var i=e*r,a=UPNG.decode._getBPP(n),s=Math.ceil(e*a/8),o=new Uint8Array(4*i),u=new Uint32Array(o.buffer),h=n.ctype,l=n.depth,f=UPNG._bin.readUshort;Date.now();if(6==h){var c=i<<2;if(8==l)for(var d=0;d<c;d++)o[d]=t[d];if(16==l)for(d=0;d<c;d++)o[d]=t[d<<1]}else if(2==h){var p=n.tabs.tRNS;if(null==p){if(8==l)for(d=0;d<i;d++){var v=3*d;u[d]=255<<24|t[v+2]<<16|t[v+1]<<8|t[v]}if(16==l)for(d=0;d<i;d++){v=6*d;u[d]=255<<24|t[v+4]<<16|t[v+2]<<8|t[v]}}else{var _=p[0],g=p[1],m=p[2];if(8==l)for(d=0;d<i;d++){var y=d<<2;v=3*d;u[d]=255<<24|t[v+2]<<16|t[v+1]<<8|t[v],t[v]==_&&t[v+1]==g&&t[v+2]==m&&(o[y+3]=0)}if(16==l)for(d=0;d<i;d++){y=d<<2,v=6*d;u[d]=255<<24|t[v+4]<<16|t[v+2]<<8|t[v],f(t,v)==_&&f(t,v+2)==g&&f(t,v+4)==m&&(o[y+3]=0)}}}else if(3==h){var b=n.tabs.PLTE,w=n.tabs.tRNS,E=w?w.length:0;if(1==l)for(var C=0;C<r;C++){var D=C*s,S=C*e;for(d=0;d<e;d++){y=S+d<<2;var T=3*(x=t[D+(d>>3)]>>7-((7&d)<<0)&1);o[y]=b[T],o[y+1]=b[T+1],o[y+2]=b[T+2],o[y+3]=x<E?w[x]:255}}if(2==l)for(C=0;C<r;C++)for(D=C*s,S=C*e,d=0;d<e;d++){y=S+d<<2,T=3*(x=t[D+(d>>2)]>>6-((3&d)<<1)&3);o[y]=b[T],o[y+1]=b[T+1],o[y+2]=b[T+2],o[y+3]=x<E?w[x]:255}if(4==l)for(C=0;C<r;C++)for(D=C*s,S=C*e,d=0;d<e;d++){y=S+d<<2,T=3*(x=t[D+(d>>1)]>>4-((1&d)<<2)&15);o[y]=b[T],o[y+1]=b[T+1],o[y+2]=b[T+2],o[y+3]=x<E?w[x]:255}if(8==l)for(d=0;d<i;d++){var x;y=d<<2,T=3*(x=t[d]);o[y]=b[T],o[y+1]=b[T+1],o[y+2]=b[T+2],o[y+3]=x<E?w[x]:255}}else if(4==h){if(8==l)for(d=0;d<i;d++){y=d<<2;var F=t[A=d<<1];o[y]=F,o[y+1]=F,o[y+2]=F,o[y+3]=t[A+1]}if(16==l)for(d=0;d<i;d++){var A;y=d<<2,F=t[A=d<<2];o[y]=F,o[y+1]=F,o[y+2]=F,o[y+3]=t[A+2]}}else if(0==h)for(_=n.tabs.tRNS?n.tabs.tRNS:-1,C=0;C<r;C++){var P=C*s,M=C*e;if(1==l)for(var I=0;I<e;I++){var k=(F=255*(t[P+(I>>>3)]>>>7-(7&I)&1))==255*_?0:255;u[M+I]=k<<24|F<<16|F<<8|F}else if(2==l)for(I=0;I<e;I++){k=(F=85*(t[P+(I>>>2)]>>>6-((3&I)<<1)&3))==85*_?0:255;u[M+I]=k<<24|F<<16|F<<8|F}else if(4==l)for(I=0;I<e;I++){k=(F=17*(t[P+(I>>>1)]>>>4-((1&I)<<2)&15))==17*_?0:255;u[M+I]=k<<24|F<<16|F<<8|F}else if(8==l)for(I=0;I<e;I++){k=(F=t[P+I])==_?0:255;u[M+I]=k<<24|F<<16|F<<8|F}else if(16==l)for(I=0;I<e;I++){F=t[P+(I<<1)],k=f(t,P+(I<<d))==_?0:255;u[M+I]=k<<24|F<<16|F<<8|F}}return o},UPNG.decode=function(t){for(var e,r=new Uint8Array(t),n=8,i=UPNG._bin,a=i.readUshort,s=i.readUint,o={tabs:{},frames:[]},u=new Uint8Array(r.length),h=0,l=0,f=[137,80,78,71,13,10,26,10],c=0;c<8;c++)if(r[c]!=f[c])throw"The input is not a PNG file!";for(;n<r.length;){var d=i.readUint(r,n);n+=4;var p=i.readASCII(r,n,4);if(n+=4,"IHDR"==p)UPNG.decode._IHDR(r,n,o);else if("IDAT"==p){for(c=0;c<d;c++)u[h+c]=r[n+c];h+=d}else if("acTL"==p)o.tabs[p]={num_frames:s(r,n),num_plays:s(r,n+4)},e=new Uint8Array(r.length);else if("fcTL"==p){var v;if(0!=l)(v=o.frames[o.frames.length-1]).data=UPNG.decode._decompress(o,e.slice(0,l),v.rect.width,v.rect.height),l=0;var _={x:s(r,n+12),y:s(r,n+16),width:s(r,n+4),height:s(r,n+8)},g=a(r,n+22);g=a(r,n+20)/(0==g?100:g);var m={rect:_,delay:Math.round(1e3*g),dispose:r[n+24],blend:r[n+25]};o.frames.push(m)}else if("fdAT"==p){for(c=0;c<d-4;c++)e[l+c]=r[n+c+4];l+=d-4}else if("pHYs"==p)o.tabs[p]=[i.readUint(r,n),i.readUint(r,n+4),r[n+8]];else if("cHRM"==p){o.tabs[p]=[];for(c=0;c<8;c++)o.tabs[p].push(i.readUint(r,n+4*c))}else if("tEXt"==p){null==o.tabs[p]&&(o.tabs[p]={});var y=i.nextZero(r,n),b=i.readASCII(r,n,y-n),w=i.readASCII(r,y+1,n+d-y-1);o.tabs[p][b]=w}else if("iTXt"==p){null==o.tabs[p]&&(o.tabs[p]={});y=0;var E=n;y=i.nextZero(r,E);b=i.readASCII(r,E,y-E),r[E=y+1],r[E+1];E+=2,y=i.nextZero(r,E);i.readASCII(r,E,y-E);E=y+1,y=i.nextZero(r,E);i.readUTF8(r,E,y-E);E=y+1;w=i.readUTF8(r,E,d-(E-n));o.tabs[p][b]=w}else if("PLTE"==p)o.tabs[p]=i.readBytes(r,n,d);else if("hIST"==p){var C=o.tabs.PLTE.length/3;o.tabs[p]=[];for(c=0;c<C;c++)o.tabs[p].push(a(r,n+2*c))}else if("tRNS"==p)3==o.ctype?o.tabs[p]=i.readBytes(r,n,d):0==o.ctype?o.tabs[p]=a(r,n):2==o.ctype&&(o.tabs[p]=[a(r,n),a(r,n+2),a(r,n+4)]);else if("gAMA"==p)o.tabs[p]=i.readUint(r,n)/1e5;else if("sRGB"==p)o.tabs[p]=r[n];else if("bKGD"==p)0==o.ctype||4==o.ctype?o.tabs[p]=[a(r,n)]:2==o.ctype||6==o.ctype?o.tabs[p]=[a(r,n),a(r,n+2),a(r,n+4)]:3==o.ctype&&(o.tabs[p]=r[n]);else if("IEND"==p)break;n+=d;i.readUint(r,n);n+=4}0!=l&&((v=o.frames[o.frames.length-1]).data=UPNG.decode._decompress(o,e.slice(0,l),v.rect.width,v.rect.height),l=0);return o.data=UPNG.decode._decompress(o,u,o.width,o.height),delete o.compress,delete o.interlace,delete o.filter,o},UPNG.decode._decompress=function(t,e,r,n){Date.now();var i=UPNG.decode._getBPP(t),a=Math.ceil(r*i/8),s=new Uint8Array((a+1+t.interlace)*n);e=UPNG.decode._inflate(e,s);Date.now();return 0==t.interlace?e=UPNG.decode._filterZero(e,t,0,r,n):1==t.interlace&&(e=UPNG.decode._readInterlace(e,t)),e},UPNG.decode._inflate=function(t,e){return UPNG.inflateRaw(new Uint8Array(t.buffer,2,t.length-6),e)},UPNG.inflateRaw=function(){var t,e,r={};return r.H={},r.H.N=function(t,e){var n,i,a=Uint8Array,s=0,o=0,u=0,h=0,l=0,f=0,c=0,d=0,p=0;if(3==t[0]&&0==t[1])return e||new a(0);var v=r.H,_=v.b,g=v.e,m=v.R,y=v.n,b=v.A,w=v.Z,E=v.m,C=null==e;for(C&&(e=new a(t.length>>>2<<3));0==s;)if(s=_(t,p,1),o=_(t,p+1,2),p+=3,0!=o){if(C&&(e=r.H.W(e,d+(1<<17))),1==o&&(n=E.J,i=E.h,f=511,c=31),2==o){u=g(t,p,5)+257,h=g(t,p+5,5)+1,l=g(t,p+10,4)+4;p+=14;for(var D=1,S=0;S<38;S+=2)E.Q[S]=0,E.Q[S+1]=0;for(S=0;S<l;S++){var T=g(t,p+3*S,3);E.Q[1+(E.X[S]<<1)]=T,T>D&&(D=T)}p+=3*l,y(E.Q,D),b(E.Q,D,E.u),n=E.w,i=E.d,p=m(E.u,(1<<D)-1,u+h,t,p,E.v);var x=v.V(E.v,0,u,E.C);f=(1<<x)-1;var F=v.V(E.v,u,h,E.D);c=(1<<F)-1,y(E.C,x),b(E.C,x,n),y(E.D,F),b(E.D,F,i)}for(;;){var A=n[w(t,p)&f];p+=15&A;var P=A>>>4;if(P>>>8==0)e[d++]=P;else{if(256==P)break;var M=d+P-254;if(P>264){var I=E.q[P-257];M=d+(I>>>3)+g(t,p,7&I),p+=7&I}var k=i[w(t,p)&c];p+=15&k;var U=k>>>4,O=E.c[U],B=(O>>>4)+_(t,p,15&O);for(p+=15&O;d<M;)e[d]=e[d++-B],e[d]=e[d++-B],e[d]=e[d++-B],e[d]=e[d++-B];d=M}}}else{0!=(7&p)&&(p+=8-(7&p));var R=4+(p>>>3),L=t[R-4]|t[R-3]<<8;C&&(e=r.H.W(e,d+L)),e.set(new a(t.buffer,t.byteOffset+R,L),d),p=R+L<<3,d+=L}return e.length==d?e:e.slice(0,d)},r.H.W=function(t,e){var r=t.length;if(e<=r)return t;var n=new Uint8Array(r<<1);return n.set(t,0),n},r.H.R=function(t,e,n,i,a,s){for(var o=r.H.e,u=r.H.Z,h=0;h<n;){var l=t[u(i,a)&e];a+=15&l;var f=l>>>4;if(f<=15)s[h]=f,h++;else{var c=0,d=0;16==f?(d=3+o(i,a,2),a+=2,c=s[h-1]):17==f?(d=3+o(i,a,3),a+=3):18==f&&(d=11+o(i,a,7),a+=7);for(var p=h+d;h<p;)s[h]=c,h++}}return a},r.H.V=function(t,e,r,n){for(var i=0,a=0,s=n.length>>>1;a<r;){var o=t[a+e];n[a<<1]=0,n[1+(a<<1)]=o,o>i&&(i=o),a++}for(;a<s;)n[a<<1]=0,n[1+(a<<1)]=0,a++;return i},r.H.n=function(t,e){for(var n,i,a,s,o=r.H.m,u=t.length,h=o.j,l=0;l<=e;l++)h[l]=0;for(l=1;l<u;l+=2)h[t[l]]++;var f=o.K;for(n=0,h[0]=0,i=1;i<=e;i++)n=n+h[i-1]<<1,f[i]=n;for(a=0;a<u;a+=2)0!=(s=t[a+1])&&(t[a]=f[s],f[s]++)},r.H.A=function(t,e,n){for(var i=t.length,a=r.H.m.r,s=0;s<i;s+=2)if(0!=t[s+1])for(var o=s>>1,u=t[s+1],h=o<<4|u,l=e-u,f=t[s]<<l,c=f+(1<<l);f!=c;){n[a[f]>>>15-e]=h,f++}},r.H.l=function(t,e){for(var n=r.H.m.r,i=15-e,a=0;a<t.length;a+=2){var s=t[a]<<e-t[a+1];t[a]=n[s]>>>i}},r.H.M=function(t,e,r){r<<=7&e;var n=e>>>3;t[n]|=r,t[n+1]|=r>>>8},r.H.I=function(t,e,r){r<<=7&e;var n=e>>>3;t[n]|=r,t[n+1]|=r>>>8,t[n+2]|=r>>>16},r.H.e=function(t,e,r){return(t[e>>>3]|t[1+(e>>>3)]<<8)>>>(7&e)&(1<<r)-1},r.H.b=function(t,e,r){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)&(1<<r)-1},r.H.Z=function(t,e){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)},r.H.i=function(t,e){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16|t[3+(e>>>3)]<<24)>>>(7&e)},r.H.m=(t=Uint16Array,e=Uint32Array,{K:new t(16),j:new t(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new t(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new e(32),J:new t(512),_:[],h:new t(32),$:[],w:new t(32768),C:[],v:[],d:new t(32768),D:[],u:new t(512),Q:[],r:new t(32768),s:new e(286),Y:new e(30),a:new e(19),t:new e(15e3),k:new t(65536),g:new t(32768)}),function(){for(var t=r.H.m,e=0;e<32768;e++){var n=e;n=(4278255360&(n=(4042322160&(n=(3435973836&(n=(2863311530&n)>>>1|(1431655765&n)<<1))>>>2|(858993459&n)<<2))>>>4|(252645135&n)<<4))>>>8|(16711935&n)<<8,t.r[e]=(n>>>16|n<<16)>>>17}function i(t,e,r){for(;0!=e--;)t.push(0,r)}for(e=0;e<32;e++)t.q[e]=t.S[e]<<3|t.T[e],t.c[e]=t.p[e]<<4|t.z[e];i(t._,144,8),i(t._,112,9),i(t._,24,7),i(t._,8,8),r.H.n(t._,9),r.H.A(t._,9,t.J),r.H.l(t._,9),i(t.$,32,5),r.H.n(t.$,5),r.H.A(t.$,5,t.h),r.H.l(t.$,5),i(t.Q,19,0),i(t.C,286,0),i(t.D,30,0),i(t.v,320,0)}(),r.H.N}(),UPNG.decode._readInterlace=function(t,e){for(var r=e.width,n=e.height,i=UPNG.decode._getBPP(e),a=i>>3,s=Math.ceil(r*i/8),o=new Uint8Array(n*s),u=0,h=[0,0,4,0,2,0,1],l=[0,4,0,2,0,1,0],f=[8,8,8,4,4,2,2],c=[8,8,4,4,2,2,1],d=0;d<7;){for(var p=f[d],v=c[d],_=0,g=0,m=h[d];m<n;)m+=p,g++;for(var y=l[d];y<r;)y+=v,_++;var b=Math.ceil(_*i/8);UPNG.decode._filterZero(t,e,u,_,g);for(var w=0,E=h[d];E<n;){for(var C=l[d],D=u+w*b<<3;C<r;){var S;if(1==i)S=(S=t[D>>3])>>7-(7&D)&1,o[E*s+(C>>3)]|=S<<7-((7&C)<<0);if(2==i)S=(S=t[D>>3])>>6-(7&D)&3,o[E*s+(C>>2)]|=S<<6-((3&C)<<1);if(4==i)S=(S=t[D>>3])>>4-(7&D)&15,o[E*s+(C>>1)]|=S<<4-((1&C)<<2);if(i>=8)for(var T=E*s+C*a,x=0;x<a;x++)o[T+x]=t[(D>>3)+x];D+=i,C+=v}w++,E+=p}_*g!=0&&(u+=g*(1+b)),d+=1}return o},UPNG.decode._getBPP=function(t){return[1,null,3,1,2,null,4][t.ctype]*t.depth},UPNG.decode._filterZero=function(t,e,r,n,i){var a=UPNG.decode._getBPP(e),s=Math.ceil(n*a/8),o=UPNG.decode._paeth;a=Math.ceil(a/8);for(var u=0,h=1,l=0,f=0,c=0;c<i;c++)if(f=0,0==(l=t[(h=(u=r+c*s)+c+1)-1]))for(;f<s;f++)t[u+f]=t[h+f];else if(1==l){for(;f<a;f++)t[u+f]=t[h+f];for(;f<s;f++)t[u+f]=t[h+f]+t[u+f-a]&255}else if(0==c){for(;f<a;f++)t[u+f]=t[h+f];if(2==l)for(;f<s;f++)t[u+f]=t[h+f];else if(3==l)for(;f<s;f++)t[u+f]=t[h+f]+(t[u+f-a]>>>1)&255;else if(4==l)for(;f<s;f++)t[u+f]=t[h+f]+o(t[u+f-a],0,0)&255}else if(2==l)for(;f<s;f++)t[u+f]=t[h+f]+t[u+f-s]&255;else if(3==l){for(;f<a;f++)t[u+f]=t[h+f]+(t[u+f-s]>>>1)&255;for(;f<s;f++)t[u+f]=t[h+f]+(t[u+f-s]+t[u+f-a]>>>1)&255}else if(4==l){for(;f<a;f++)t[u+f]=t[h+f]+o(0,t[u+f-s],0)&255;for(;f<s;f++)t[u+f]=t[h+f]+o(t[u+f-a],t[u+f-s],t[u+f-a-s])&255}return t},UPNG.decode._paeth=function(t,e,r){var n=t+e-r,i=Math.abs(n-t),a=Math.abs(n-e),s=Math.abs(n-r);return i<=a&&i<=s?t:a<=s?e:r},UPNG.decode._IHDR=function(t,e,r){var n=UPNG._bin;r.width=n.readUint(t,e),e+=4,r.height=n.readUint(t,e),e+=4,r.depth=t[e],e++,r.ctype=t[e],e++,r.compress=t[e],e++,r.filter=t[e],e++,r.interlace=t[e],e++},UPNG._bin={nextZero:function(t,e){for(;0!=t[e];)e++;return e},readUshort:function(t,e){return t[e]<<8|t[e+1]},writeUshort:function(t,e,r){t[e]=r>>8&255,t[e+1]=255&r},readUint:function(t,e){return 16777216*t[e]+(t[e+1]<<16|t[e+2]<<8|t[e+3])},writeUint:function(t,e,r){t[e]=r>>24&255,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=255&r},readASCII:function(t,e,r){for(var n="",i=0;i<r;i++)n+=String.fromCharCode(t[e+i]);return n},writeASCII:function(t,e,r){for(var n=0;n<r.length;n++)t[e+n]=r.charCodeAt(n)},readBytes:function(t,e,r){for(var n=[],i=0;i<r;i++)n.push(t[e+i]);return n},pad:function(t){return t.length<2?"0"+t:t},readUTF8:function(t,e,r){for(var n,i="",a=0;a<r;a++)i+="%"+UPNG._bin.pad(t[e+a].toString(16));try{n=decodeURIComponent(i)}catch(n){return UPNG._bin.readASCII(t,e,r)}return n}},UPNG._copyTile=function(t,e,r,n,i,a,s,o,u){for(var h=Math.min(e,i),l=Math.min(r,a),f=0,c=0,d=0;d<l;d++)for(var p=0;p<h;p++)if(s>=0&&o>=0?(f=d*e+p<<2,c=(o+d)*i+s+p<<2):(f=(-o+d)*e-s+p<<2,c=d*i+p<<2),0==u)n[c]=t[f],n[c+1]=t[f+1],n[c+2]=t[f+2],n[c+3]=t[f+3];else if(1==u){var v=t[f+3]*(1/255),_=t[f]*v,g=t[f+1]*v,m=t[f+2]*v,y=n[c+3]*(1/255),b=n[c]*y,w=n[c+1]*y,E=n[c+2]*y,C=1-v,D=v+y*C,S=0==D?0:1/D;n[c+3]=255*D,n[c+0]=(_+b*C)*S,n[c+1]=(g+w*C)*S,n[c+2]=(m+E*C)*S}else if(2==u){v=t[f+3],_=t[f],g=t[f+1],m=t[f+2],y=n[c+3],b=n[c],w=n[c+1],E=n[c+2];v==y&&_==b&&g==w&&m==E?(n[c]=0,n[c+1]=0,n[c+2]=0,n[c+3]=0):(n[c]=_,n[c+1]=g,n[c+2]=m,n[c+3]=v)}else if(3==u){v=t[f+3],_=t[f],g=t[f+1],m=t[f+2],y=n[c+3],b=n[c],w=n[c+1],E=n[c+2];if(v==y&&_==b&&g==w&&m==E)continue;if(v<220&&y>20)return!1}return!0},UPNG.encode=function(t,e,r,n,i,a,s){null==n&&(n=0),null==s&&(s=!1);var o=UPNG.encode.compress(t,e,r,n,[!1,!1,!1,0,s]);return UPNG.encode.compressPNG(o,-1),UPNG.encode._main(o,e,r,i,a)},UPNG.encodeLL=function(t,e,r,n,i,a,s,o){for(var u={ctype:0+(1==n?0:2)+(0==i?0:4),depth:a,frames:[]},h=(n+i)*a,l=h*e,f=0;f<t.length;f++)u.frames.push({rect:{x:0,y:0,width:e,height:r},img:new Uint8Array(t[f]),blend:0,dispose:1,bpp:Math.ceil(h/8),bpl:Math.ceil(l/8)});return UPNG.encode.compressPNG(u,4),UPNG.encode._main(u,e,r,s,o)},UPNG.encode._main=function(t,e,r,n,i){null==i&&(i={});var a=UPNG.crc.crc,s=UPNG._bin.writeUint,o=UPNG._bin.writeUshort,u=UPNG._bin.writeASCII,h=8,l=t.frames.length>1,f=!1,c=33+(l?20:0);if(null!=i.sRGB&&(c+=13),null!=i.pHYs&&(c+=21),3==t.ctype){for(var d=t.plte.length,p=0;p<d;p++)t.plte[p]>>>24!=255&&(f=!0);c+=8+3*d+4+(f?8+1*d+4:0)}for(var v=0;v<t.frames.length;v++){l&&(c+=38),c+=(D=t.frames[v]).cimg.length+12,0!=v&&(c+=4)}c+=12;var _=new Uint8Array(c),g=[137,80,78,71,13,10,26,10];for(p=0;p<8;p++)_[p]=g[p];if(s(_,h,13),u(_,h+=4,"IHDR"),s(_,h+=4,e),s(_,h+=4,r),_[h+=4]=t.depth,_[++h]=t.ctype,_[++h]=0,_[++h]=0,_[++h]=0,s(_,++h,a(_,h-17,17)),h+=4,null!=i.sRGB&&(s(_,h,1),u(_,h+=4,"sRGB"),_[h+=4]=i.sRGB,s(_,++h,a(_,h-5,5)),h+=4),null!=i.pHYs&&(s(_,h,9),u(_,h+=4,"pHYs"),s(_,h+=4,i.pHYs[0]),s(_,h+=4,i.pHYs[1]),_[h+=4]=i.pHYs[2],s(_,++h,a(_,h-13,13)),h+=4),l&&(s(_,h,8),u(_,h+=4,"acTL"),s(_,h+=4,t.frames.length),s(_,h+=4,0),s(_,h+=4,a(_,h-12,12)),h+=4),3==t.ctype){s(_,h,3*(d=t.plte.length)),u(_,h+=4,"PLTE"),h+=4;for(p=0;p<d;p++){var m=3*p,y=t.plte[p],b=255&y,w=y>>>8&255,E=y>>>16&255;_[h+m+0]=b,_[h+m+1]=w,_[h+m+2]=E}if(s(_,h+=3*d,a(_,h-3*d-4,3*d+4)),h+=4,f){s(_,h,d),u(_,h+=4,"tRNS"),h+=4;for(p=0;p<d;p++)_[h+p]=t.plte[p]>>>24&255;s(_,h+=d,a(_,h-d-4,d+4)),h+=4}}var C=0;for(v=0;v<t.frames.length;v++){var D=t.frames[v];l&&(s(_,h,26),u(_,h+=4,"fcTL"),s(_,h+=4,C++),s(_,h+=4,D.rect.width),s(_,h+=4,D.rect.height),s(_,h+=4,D.rect.x),s(_,h+=4,D.rect.y),o(_,h+=4,n[v]),o(_,h+=2,1e3),_[h+=2]=D.dispose,_[++h]=D.blend,s(_,++h,a(_,h-30,30)),h+=4);var S=D.cimg;s(_,h,(d=S.length)+(0==v?0:4));var T=h+=4;u(_,h,0==v?"IDAT":"fdAT"),h+=4,0!=v&&(s(_,h,C++),h+=4);for(p=0;p<d;p++)_[h+p]=S[p];s(_,h+=d,a(_,T,h-T)),h+=4}return s(_,h,0),u(_,h+=4,"IEND"),s(_,h+=4,a(_,h-4,4)),h+=4,_.buffer},UPNG.encode.compressPNG=function(t,e){for(var r=0;r<t.frames.length;r++){var n=t.frames[r],i=(n.rect.width,n.rect.height),a=new Uint8Array(i*n.bpl+i);n.cimg=UPNG.encode._filterZero(n.img,i,n.bpp,n.bpl,a,e)}},UPNG.encode.compress=function(t,e,r,n,i){for(var a=i[0],s=i[1],o=i[2],u=i[3],h=i[4],l=6,f=8,c=255,d=0;d<t.length;d++)for(var p=new Uint8Array(t[d]),v=p.length,_=0;_<v;_+=4)c&=p[_+3];var g=255!=c,m=UPNG.encode.framize(t,e,r,a,s,o),y={},b=[],w=[];if(0!=n){var E=[];for(_=0;_<m.length;_++)E.push(m[_].img.buffer);var C=UPNG.encode.concatRGBA(E),D=UPNG.quantize(C,n),S=0,T=new Uint8Array(D.abuf);for(_=0;_<m.length;_++){var x=(X=m[_].img).length;w.push(new Uint8Array(D.inds.buffer,S>>2,x>>2));for(d=0;d<x;d+=4)X[d]=T[S+d],X[d+1]=T[S+d+1],X[d+2]=T[S+d+2],X[d+3]=T[S+d+3];S+=x}for(_=0;_<D.plte.length;_++)b.push(D.plte[_].est.rgba)}else for(d=0;d<m.length;d++){var F=m[d],A=new Uint32Array(F.img.buffer),P=F.rect.width,M=(v=A.length,new Uint8Array(v));w.push(M);for(_=0;_<v;_++){var I=A[_];if(0!=_&&I==A[_-1])M[_]=M[_-1];else if(_>P&&I==A[_-P])M[_]=M[_-P];else{var k=y[I];if(null==k&&(y[I]=k=b.length,b.push(I),b.length>=300))break;M[_]=k}}}var U=b.length;U<=256&&0==h&&(f=U<=2?1:U<=4?2:U<=16?4:8,f=Math.max(f,u));for(d=0;d<m.length;d++){(F=m[d]).rect.x,F.rect.y,P=F.rect.width;var O=F.rect.height,B=F.img,R=(new Uint32Array(B.buffer),4*P),L=4;if(U<=256&&0==h){R=Math.ceil(f*P/8);for(var N=new Uint8Array(R*O),z=w[d],G=0;G<O;G++){_=G*R;var j=G*P;if(8==f)for(var q=0;q<P;q++)N[_+q]=z[j+q];else if(4==f)for(q=0;q<P;q++)N[_+(q>>1)]|=z[j+q]<<4-4*(1&q);else if(2==f)for(q=0;q<P;q++)N[_+(q>>2)]|=z[j+q]<<6-2*(3&q);else if(1==f)for(q=0;q<P;q++)N[_+(q>>3)]|=z[j+q]<<7-1*(7&q)}B=N,l=3,L=1}else if(0==g&&1==m.length){N=new Uint8Array(P*O*3);var H=P*O;for(_=0;_<H;_++){var X,W=4*_;N[X=3*_]=B[W],N[X+1]=B[W+1],N[X+2]=B[W+2]}B=N,l=2,L=3,R=3*P}F.img=B,F.bpl=R,F.bpp=L}return{ctype:l,depth:f,plte:b,frames:m}},UPNG.encode.framize=function(t,e,r,n,i,a){for(var s=[],o=0;o<t.length;o++){var u,h=new Uint8Array(t[o]),l=new Uint32Array(h.buffer),f=0,c=0,d=e,p=r,v=n?1:0;if(0!=o){for(var _=a||n||1==o||0!=s[o-2].dispose?1:2,g=0,m=1e9,y=0;y<_;y++){for(var b=new Uint8Array(t[o-1-y]),w=new Uint32Array(t[o-1-y]),E=e,C=r,D=-1,S=-1,T=0;T<r;T++)for(var x=0;x<e;x++){l[U=T*e+x]!=w[U]&&(x<E&&(E=x),x>D&&(D=x),T<C&&(C=T),T>S&&(S=T))}-1==D&&(E=C=D=S=0),i&&(1==(1&E)&&E--,1==(1&C)&&C--);var F=(D-E+1)*(S-C+1);F<m&&(m=F,g=y,f=E,c=C,d=D-E+1,p=S-C+1)}b=new Uint8Array(t[o-1-g]);1==g&&(s[o-1].dispose=2),u=new Uint8Array(d*p*4),UPNG._copyTile(b,e,r,u,d,p,-f,-c,0),1==(v=UPNG._copyTile(h,e,r,u,d,p,-f,-c,3)?1:0)?UPNG.encode._prepareDiff(h,e,r,u,{x:f,y:c,width:d,height:p}):UPNG._copyTile(h,e,r,u,d,p,-f,-c,0)}else u=h.slice(0);s.push({rect:{x:f,y:c,width:d,height:p},img:u,blend:v,dispose:0})}if(n)for(o=0;o<s.length;o++){if(1!=(O=s[o]).blend){var A=O.rect,P=s[o-1].rect,M=Math.min(A.x,P.x),I=Math.min(A.y,P.y),k={x:M,y:I,width:Math.max(A.x+A.width,P.x+P.width)-M,height:Math.max(A.y+A.height,P.y+P.height)-I};s[o-1].dispose=1,o-1!=0&&UPNG.encode._updateFrame(t,e,r,s,o-1,k,i),UPNG.encode._updateFrame(t,e,r,s,o,k,i)}}if(1!=t.length)for(var U=0;U<s.length;U++){var O;(O=s[U]).rect.width*O.rect.height}return s},UPNG.encode._updateFrame=function(t,e,r,n,i,a,s){for(var o=Uint8Array,u=Uint32Array,h=new o(t[i-1]),l=new u(t[i-1]),f=i+1<t.length?new o(t[i+1]):null,c=new o(t[i]),d=new u(c.buffer),p=e,v=r,_=-1,g=-1,m=0;m<a.height;m++)for(var y=0;y<a.width;y++){var b=a.x+y,w=a.y+m,E=w*e+b,C=d[E];0==C||0==n[i-1].dispose&&l[E]==C&&(null==f||0!=f[4*E+3])||(b<p&&(p=b),b>_&&(_=b),w<v&&(v=w),w>g&&(g=w))}-1==_&&(p=v=_=g=0),s&&(1==(1&p)&&p--,1==(1&v)&&v--),a={x:p,y:v,width:_-p+1,height:g-v+1};var D=n[i];D.rect=a,D.blend=1,D.img=new Uint8Array(a.width*a.height*4),0==n[i-1].dispose?(UPNG._copyTile(h,e,r,D.img,a.width,a.height,-a.x,-a.y,0),UPNG.encode._prepareDiff(c,e,r,D.img,a)):UPNG._copyTile(c,e,r,D.img,a.width,a.height,-a.x,-a.y,0)},UPNG.encode._prepareDiff=function(t,e,r,n,i){UPNG._copyTile(t,e,r,n,i.width,i.height,-i.x,-i.y,2)},UPNG.encode._filterZero=function(t,e,r,n,i,a){if(-1!=a){for(var s=0;s<e;s++)UPNG.encode._filterLine(i,t,s,n,r,a);return pako.deflate(i)}for(var o=[],u=0;u<5;u++)if(!(e*n>5e5)||2!=u&&3!=u&&4!=u){for(s=0;s<e;s++)UPNG.encode._filterLine(i,t,s,n,r,u);if(o.push(pako.deflate(i)),1==r)break}for(var h,l=1e9,f=0;f<o.length;f++)o[f].length<l&&(h=f,l=o[f].length);return o[h]},UPNG.encode._filterLine=function(t,e,r,n,i,a){var s=r*n,o=s+r,u=UPNG.decode._paeth;if(t[o]=a,o++,0==a)for(var h=0;h<n;h++)t[o+h]=e[s+h];else if(1==a){for(h=0;h<i;h++)t[o+h]=e[s+h];for(h=i;h<n;h++)t[o+h]=e[s+h]-e[s+h-i]+256&255}else if(0==r){for(h=0;h<i;h++)t[o+h]=e[s+h];if(2==a)for(h=i;h<n;h++)t[o+h]=e[s+h];if(3==a)for(h=i;h<n;h++)t[o+h]=e[s+h]-(e[s+h-i]>>1)+256&255;if(4==a)for(h=i;h<n;h++)t[o+h]=e[s+h]-u(e[s+h-i],0,0)+256&255}else{if(2==a)for(h=0;h<n;h++)t[o+h]=e[s+h]+256-e[s+h-n]&255;if(3==a){for(h=0;h<i;h++)t[o+h]=e[s+h]+256-(e[s+h-n]>>1)&255;for(h=i;h<n;h++)t[o+h]=e[s+h]+256-(e[s+h-n]+e[s+h-i]>>1)&255}if(4==a){for(h=0;h<i;h++)t[o+h]=e[s+h]+256-u(0,e[s+h-n],0)&255;for(h=i;h<n;h++)t[o+h]=e[s+h]+256-u(e[s+h-i],e[s+h-n],e[s+h-i-n])&255}}},UPNG.crc={table:function(){for(var t=new Uint32Array(256),e=0;e<256;e++){for(var r=e,n=0;n<8;n++)1&r?r=3988292384^r>>>1:r>>>=1;t[e]=r}return t}(),update:function(t,e,r,n){for(var i=0;i<n;i++)t=UPNG.crc.table[255&(t^e[r+i])]^t>>>8;return t},crc:function(t,e,r){return 4294967295^UPNG.crc.update(4294967295,t,e,r)}},UPNG.quantize=function(t,e){for(var r=new Uint8Array(t),n=r.slice(0),i=new Uint32Array(n.buffer),a=UPNG.quantize.getKDtree(n,e),s=a[0],o=a[1],u=(UPNG.quantize.planeDst,r),h=i,l=u.length,f=new Uint8Array(r.length>>2),c=0;c<l;c+=4){var d=u[c]*(1/255),p=u[c+1]*(1/255),v=u[c+2]*(1/255),_=u[c+3]*(1/255),g=UPNG.quantize.getNearest(s,d,p,v,_);f[c>>2]=g.ind,h[c>>2]=g.est.rgba}return{abuf:n.buffer,inds:f,plte:o}},UPNG.quantize.getKDtree=function(t,e,r){null==r&&(r=1e-4);var n=new Uint32Array(t.buffer),i={i0:0,i1:t.length,bst:null,est:null,tdst:0,left:null,right:null};i.bst=UPNG.quantize.stats(t,i.i0,i.i1),i.est=UPNG.quantize.estats(i.bst);for(var a=[i];a.length<e;){for(var s=0,o=0,u=0;u<a.length;u++)a[u].est.L>s&&(s=a[u].est.L,o=u);if(s<r)break;var h=a[o],l=UPNG.quantize.splitPixels(t,n,h.i0,h.i1,h.est.e,h.est.eMq255);if(h.i0>=l||h.i1<=l)h.est.L=0;else{var f={i0:h.i0,i1:l,bst:null,est:null,tdst:0,left:null,right:null};f.bst=UPNG.quantize.stats(t,f.i0,f.i1),f.est=UPNG.quantize.estats(f.bst);var c={i0:l,i1:h.i1,bst:null,est:null,tdst:0,left:null,right:null};c.bst={R:[],m:[],N:h.bst.N-f.bst.N};for(u=0;u<16;u++)c.bst.R[u]=h.bst.R[u]-f.bst.R[u];for(u=0;u<4;u++)c.bst.m[u]=h.bst.m[u]-f.bst.m[u];c.est=UPNG.quantize.estats(c.bst),h.left=f,h.right=c,a[o]=f,a.push(c)}}a.sort((function(t,e){return e.bst.N-t.bst.N}));for(u=0;u<a.length;u++)a[u].ind=u;return[i,a]},UPNG.quantize.getNearest=function(t,e,r,n,i){if(null==t.left)return t.tdst=UPNG.quantize.dist(t.est.q,e,r,n,i),t;var a=UPNG.quantize.planeDst(t.est,e,r,n,i),s=t.left,o=t.right;a>0&&(s=t.right,o=t.left);var u=UPNG.quantize.getNearest(s,e,r,n,i);if(u.tdst<=a*a)return u;var h=UPNG.quantize.getNearest(o,e,r,n,i);return h.tdst<u.tdst?h:u},UPNG.quantize.planeDst=function(t,e,r,n,i){var a=t.e;return a[0]*e+a[1]*r+a[2]*n+a[3]*i-t.eMq},UPNG.quantize.dist=function(t,e,r,n,i){var a=e-t[0],s=r-t[1],o=n-t[2],u=i-t[3];return a*a+s*s+o*o+u*u},UPNG.quantize.splitPixels=function(t,e,r,n,i,a){var s=UPNG.quantize.vecDot;n-=4;for(;r<n;){for(;s(t,r,i)<=a;)r+=4;for(;s(t,n,i)>a;)n-=4;if(r>=n)break;var o=e[r>>2];e[r>>2]=e[n>>2],e[n>>2]=o,r+=4,n-=4}for(;s(t,r,i)>a;)r-=4;return r+4},UPNG.quantize.vecDot=function(t,e,r){return t[e]*r[0]+t[e+1]*r[1]+t[e+2]*r[2]+t[e+3]*r[3]},UPNG.quantize.stats=function(t,e,r){for(var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=[0,0,0,0],a=r-e>>2,s=e;s<r;s+=4){var o=t[s]*(1/255),u=t[s+1]*(1/255),h=t[s+2]*(1/255),l=t[s+3]*(1/255);i[0]+=o,i[1]+=u,i[2]+=h,i[3]+=l,n[0]+=o*o,n[1]+=o*u,n[2]+=o*h,n[3]+=o*l,n[5]+=u*u,n[6]+=u*h,n[7]+=u*l,n[10]+=h*h,n[11]+=h*l,n[15]+=l*l}return n[4]=n[1],n[8]=n[2],n[9]=n[6],n[12]=n[3],n[13]=n[7],n[14]=n[11],{R:n,m:i,N:a}},UPNG.quantize.estats=function(t){var e=t.R,r=t.m,n=t.N,i=r[0],a=r[1],s=r[2],o=r[3],u=0==n?0:1/n,h=[e[0]-i*i*u,e[1]-i*a*u,e[2]-i*s*u,e[3]-i*o*u,e[4]-a*i*u,e[5]-a*a*u,e[6]-a*s*u,e[7]-a*o*u,e[8]-s*i*u,e[9]-s*a*u,e[10]-s*s*u,e[11]-s*o*u,e[12]-o*i*u,e[13]-o*a*u,e[14]-o*s*u,e[15]-o*o*u],l=h,f=UPNG.M4,c=[.5,.5,.5,.5],d=0,p=0;if(0!=n)for(var v=0;v<10&&(c=f.multVec(l,c),p=Math.sqrt(f.dot(c,c)),c=f.sml(1/p,c),!(Math.abs(p-d)<1e-9));v++)d=p;var _=[i*u,a*u,s*u,o*u];return{Cov:h,q:_,e:c,L:d,eMq255:f.dot(f.sml(255,_),c),eMq:f.dot(c,_),rgba:(Math.round(255*_[3])<<24|Math.round(255*_[2])<<16|Math.round(255*_[1])<<8|Math.round(255*_[0])<<0)>>>0}},UPNG.M4={multVec:function(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3],t[4]*e[0]+t[5]*e[1]+t[6]*e[2]+t[7]*e[3],t[8]*e[0]+t[9]*e[1]+t[10]*e[2]+t[11]*e[3],t[12]*e[0]+t[13]*e[1]+t[14]*e[2]+t[15]*e[3]]},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},sml:function(t,e){return[t*e[0],t*e[1],t*e[2],t*e[3]]}},UPNG.encode.concatRGBA=function(t){for(var e=0,r=0;r<t.length;r++)e+=t[r].byteLength;var n=new Uint8Array(e),i=0;for(r=0;r<t.length;r++){for(var a=new Uint8Array(t[r]),s=a.length,o=0;o<s;o+=4){var u=a[o],h=a[o+1],l=a[o+2],f=a[o+3];0==f&&(u=h=l=0),n[i+o]=u,n[i+o+1]=h,n[i+o+2]=l,n[i+o+3]=f}i+=s}return n.buffer},UTEX={},UTEX.readATC=function(t,e,r,n,i){for(var a=new Uint8Array(64),s=0;s<i;s+=4)for(var o=0;o<n;o+=4)UTEX.readATCcolor(t,e,a),UTEX.write4x4(r,n,i,o,s,a),e+=8;return e},UTEX.readATA=function(t,e,r,n,i){for(var a=new Uint8Array(64),s=0;s<i;s+=4)for(var o=0;o<n;o+=4)UTEX.readATCcolor(t,e+8,a),UTEX.write4x4(r,n,i,o,s,a),e+=16;return e},UTEX.readBC1=function(t,e,r,n,i){for(var a=new Uint8Array(64),s=0;s<i;s+=4)for(var o=0;o<n;o+=4)UTEX.readBCcolor(t,e,a),UTEX.write4x4(r,n,i,o,s,a),e+=8;return e},UTEX.writeBC1=function(t,e,r,n,i){for(var a=new Uint8Array(64),s=0;s<r;s+=4)for(var o=0;o<e;o+=4)UTEX.read4x4(t,e,r,o,s,a),UTEX.writeBCcolor(n,i,a),i+=8;return i},UTEX.readBC2=function(t,e,r,n,i){for(var a={boff:8*e},s=new Uint8Array(64),o=0;o<i;o+=4)for(var u=0;u<n;u+=4){UTEX.readBCcolor(t,e+8,s);for(var h=0;h<64;h+=4){var l=UTEX.readBits(t,a,4);s[h+3]=l/15*255}UTEX.write4x4(r,n,i,u,o,s),e+=16,a.boff+=64}return e},UTEX.inter8=function(t,e){var r=[t,e];return t>e?r.push(6/7*t+1/7*e,5/7*t+2/7*e,4/7*t+3/7*e,3/7*t+4/7*e,2/7*t+5/7*e,1/7*t+6/7*e):r.push(.8*t+.2*e,.6*t+.4*e,.4*t+.6*e,.2*t+.8*e,0,255),r},UTEX.readBC3=function(t,e,r,n,i){for(var a={boff:8*e},s=new Uint8Array(64),o=0;o<i;o+=4)for(var u=0;u<n;u+=4){UTEX.readBCcolor(t,e+8,s);var h=UTEX.inter8(t[e],t[e+1]);a.boff+=16;for(var l=0;l<64;l+=4){var f=UTEX.readBits(t,a,3);s[l+3]=h[f]}a.boff+=64,UTEX.write4x4(r,n,i,u,o,s),e+=16}return e},UTEX.writeBC3=function(t,e,r,n,i){for(var a=new Uint8Array(64),s=0;s<r;s+=4)for(var o=0;o<e;o+=4){UTEX.read4x4(t,e,r,o,s,a);for(var u=a[3],h=a[3],l=7;l<64;l+=4){(g=a[l])<u?u=g:h<g&&(h=g)}n[i]=h,n[i+1]=u,i+=2;var f=UTEX.inter8(h,u),c=i+2<<3;for(l=0;l<64;l+=32){for(var d=0,p=(c=0,0);p<32;p+=4){for(var v=0,_=500,g=a[l+p+3],m=0;m<8;m++){var y=Math.abs(f[m]-g);y<_&&(_=y,v=m)}d|=v<<c,c+=3}n[i]=d,n[i+1]=d>>8,n[i+2]=d>>16,i+=3}UTEX.writeBCcolor(n,i,a),i+=8}return i},UTEX._arr16=new Uint8Array(16),UTEX.readATCcolor=function(t,e,r){var n=t[e+1]<<8|t[e],i=t[e+3]<<8|t[e+2],a=255/31*(31&n),s=255/31*(n>>>5&31),o=255/31*(n>>10),u=255/31*(31&i),h=255/63*(i>>>5&63),l=255/31*(i>>11),f=UTEX._arr16;f[0]=~~o,f[1]=~~s,f[2]=~~a,f[3]=255,f[12]=~~l,f[13]=~~h,f[14]=~~u,f[15]=255;var c=2/3,d=1-c;f[4]=~~(c*o+d*l),f[5]=~~(c*s+d*h),f[6]=~~(c*a+d*u),f[7]=255,d=1-(c=1/3),f[8]=~~(c*o+d*l),f[9]=~~(c*s+d*h),f[10]=~~(c*a+d*u),f[11]=255,UTEX.toSquare(t,r,f,e)},UTEX.readBCcolor=function(t,e,r){var n=t[e+1]<<8|t[e],i=t[e+3]<<8|t[e+2],a=255/31*(31&n),s=255/63*(n>>>5&63),o=255/31*(n>>11),u=255/31*(31&i),h=255/63*(i>>>5&63),l=255/31*(i>>11),f=UTEX._arr16;if(f[0]=~~o,f[1]=~~s,f[2]=~~a,f[3]=255,f[4]=~~l,f[5]=~~h,f[6]=~~u,f[7]=255,i<n){var c=1-(d=2/3);f[8]=~~(d*o+c*l),f[9]=~~(d*s+c*h),f[10]=~~(d*a+c*u),f[11]=255,c=1-(d=1/3),f[12]=~~(d*o+c*l),f[13]=~~(d*s+c*h),f[14]=~~(d*a+c*u),f[15]=255}else{var d;c=1-(d=.5);f[8]=~~(d*o+c*l),f[9]=~~(d*s+c*h),f[10]=~~(d*a+c*u),f[11]=255,f[12]=0,f[13]=0,f[14]=0,f[15]=0}UTEX.toSquare(t,r,f,e)},UTEX.writeBCcolor=function(t,e,r){var n=UTEX.colorDist,i=UTEX.mostDistant(r),a=(l=r[i>>8])>>3<<11|(h=r[1+(i>>8)])>>2<<5|(u=r[2+(i>>8)])>>3,s=(d=r[255&i])>>3<<11|(c=r[1+(255&i)])>>2<<5|(f=r[2+(255&i)])>>3;if(a<s){var o=a;a=s,s=o}var u=Math.floor(255/31*(31&a)),h=Math.floor(255/63*(a>>>5&63)),l=Math.floor(255/31*(a>>11)),f=Math.floor(255/31*(31&s)),c=Math.floor(255/63*(s>>>5&63)),d=Math.floor(255/31*(s>>11));t[e+0]=255&a,t[e+1]=a>>8,t[e+2]=255&s,t[e+3]=s>>8;var p=2/3,v=1-p,_=Math.floor(p*l+v*d),g=Math.floor(p*h+v*c),m=Math.floor(p*u+v*f);v=1-(p=1/3);for(var y=Math.floor(p*l+v*d),b=Math.floor(p*h+v*c),w=Math.floor(p*u+v*f),E=8*e+32,C=0;C<64;C+=4){var D=r[C],S=r[C+1],T=r[C+2],x=n(D,S,T,l,h,u),F=n(D,S,T,d,c,f),A=n(D,S,T,_,g,m),P=n(D,S,T,y,b,w),M=Math.min(x,Math.min(F,Math.min(A,P))),I=0;M==F?I=1:M==A?I=2:M==P&&(I=3),t[E>>3]|=I<<(7&E),E+=2}},UTEX.toSquare=function(t,e,r,n){for(var i=n+4<<3,a=0;a<64;a+=4){var s=t[i>>3]>>(7&i)&3;i+=2,s<<=2,e[a]=r[s],e[a+1]=r[s+1],e[a+2]=r[s+2],e[a+3]=r[s+3]}},UTEX.read4x4=function(t,e,r,n,i,a){for(var s=0;s<4;s++){var o=(i+s)*e+n<<2,u=s<<4;a[u+0]=t[o+0],a[u+1]=t[o+1],a[u+2]=t[o+2],a[u+3]=t[o+3],a[u+4]=t[o+4],a[u+5]=t[o+5],a[u+6]=t[o+6],a[u+7]=t[o+7],a[u+8]=t[o+8],a[u+9]=t[o+9],a[u+10]=t[o+10],a[u+11]=t[o+11],a[u+12]=t[o+12],a[u+13]=t[o+13],a[u+14]=t[o+14],a[u+15]=t[o+15]}},UTEX.write4x4=function(t,e,r,n,i,a){for(var s=0;s<4;s++){var o=(i+s)*e+n<<2,u=s<<4;t[o+0]=a[u+0],t[o+1]=a[u+1],t[o+2]=a[u+2],t[o+3]=a[u+3],t[o+4]=a[u+4],t[o+5]=a[u+5],t[o+6]=a[u+6],t[o+7]=a[u+7],t[o+8]=a[u+8],t[o+9]=a[u+9],t[o+10]=a[u+10],t[o+11]=a[u+11],t[o+12]=a[u+12],t[o+13]=a[u+13],t[o+14]=a[u+14],t[o+15]=a[u+15]}},UTEX._subs2=["0011001100110011","0001000100010001","0111011101110111","0001001100110111","0000000100010011","0011011101111111","0001001101111111","0000000100110111","0000000000010011","0011011111111111","0000000101111111","0000000000010111","0001011111111111","0000000011111111","0000111111111111","0000000000001111","0000100011101111","0111000100000000","0000000010001110","0111001100010000","0011000100000000","0000100011001110","0000000010001100","0111001100110001","0011000100010000","0000100010001100","0110011001100110","0011011001101100","0001011111101000","0000111111110000","0111000110001110","0011100110011100","0101010101010101","0000111100001111","0101101001011010","0011001111001100","0011110000111100","0101010110101010","0110100101101001","0101101010100101","0111001111001110","0001001111001000","0011001001001100","0011101111011100","0110100110010110","0011110011000011","0110011010011001","0000011001100000","0100111001000000","0010011100100000","0000001001110010","0000010011100100","0110110010010011","0011011011001001","0110001110011100","0011100111000110","0110110011001001","0110001100111001","0111111010000001","0001100011100111","0000111100110011","0011001111110000","0010001011101110","0100010001110111"],UTEX._subs3=["0011001102212222","0001001122112221","0000200122112211","0222002200110111","0000000011221122","0011001100220022","0022002211111111","0011001122112211","0000000011112222","0000111111112222","0000111122222222","0012001200120012","0112011201120112","0122012201220122","0011011211221222","0011200122002220","0001001101121122","0111001120012200","0000112211221122","0022002200221111","0111011102220222","0001000122212221","0000001101220122","0000110022102210","0122012200110000","0012001211222222","0110122112210110","0000011012211221","0022110211020022","0110011020022222","0011012201220011","0000200022112221","0000000211221222","0222002200120011","0011001200220222","0120012001200120","0000111122220000","0120120120120120","0120201212010120","0011220011220011","0011112222000011","0101010122222222","0000000021212121","0022112200221122","0022001100220011","0220122102201221","0101222222220101","0000212121212121","0101010101012222","0222011102220111","0002111200021112","0000211221122112","0222011101110222","0002111211120002","0110011001102222","0000000021122112","0110011022222222","0022001100110022","0022112211220022","0000000000002112","0002000100020001","0222122202221222","0101222222222222","0111201122012220"],UTEX._anch2=[[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,2,0],[0,8,0],[0,2,0],[0,2,0],[0,8,0],[0,8,0],[0,15,0],[0,2,0],[0,8,0],[0,2,0],[0,2,0],[0,8,0],[0,8,0],[0,2,0],[0,2,0],[0,15,0],[0,15,0],[0,6,0],[0,8,0],[0,2,0],[0,8,0],[0,15,0],[0,15,0],[0,2,0],[0,8,0],[0,2,0],[0,2,0],[0,2,0],[0,15,0],[0,15,0],[0,6,0],[0,6,0],[0,2,0],[0,6,0],[0,8,0],[0,15,0],[0,15,0],[0,2,0],[0,2,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,2,0],[0,2,0],[0,15,0]],UTEX._anch3=[[0,3,15],[0,3,8],[0,15,8],[0,15,3],[0,8,15],[0,3,15],[0,15,3],[0,15,8],[0,8,15],[0,8,15],[0,6,15],[0,6,15],[0,6,15],[0,5,15],[0,3,15],[0,3,8],[0,3,15],[0,3,8],[0,8,15],[0,15,3],[0,3,15],[0,3,8],[0,6,15],[0,10,8],[0,5,3],[0,8,15],[0,8,6],[0,6,10],[0,8,15],[0,5,15],[0,15,10],[0,15,8],[0,8,15],[0,15,3],[0,3,15],[0,5,10],[0,6,10],[0,10,8],[0,8,9],[0,15,10],[0,15,6],[0,3,15],[0,15,8],[0,5,15],[0,15,3],[0,15,6],[0,15,6],[0,15,8],[0,3,15],[0,15,3],[0,5,15],[0,5,15],[0,5,15],[0,8,15],[0,5,15],[0,10,15],[0,5,15],[0,10,15],[0,8,15],[0,13,15],[0,15,3],[0,12,15],[0,3,15],[0,3,8]],UTEX.readBC7=function(t,e,r,n,i){for(var a=UTEX.readBits,s={boff:0},o=new Uint8Array(64),u=[null,null,[0,21,43,64],[0,9,18,27,37,46,55,64],[0,4,9,13,17,21,26,30,34,38,43,47,51,55,60,64]],h=[null,null,UTEX._subs2,UTEX._subs3],l=[null,null,UTEX._anch2,UTEX._anch3],f=0;f<i;f+=4)for(var c=0;c<n;c+=4){for(var d=0;1!=(t[e]>>d&1);)d++;s.boff=(e<<3)+d+1;for(var p=4==d||5==d?a(t,s,2):0,v=4==d?a(t,s,1):0,_=a(t,s,[4,6,6,6,0,0,0,6][d]),g=[4,6,5,7,5,7,7,5][d],m=[0,0,0,0,6,8,7,5][d],y=[1,1,0,1,0,0,1,1][d],b=[6,4,6,4,2,2,2,4][d],w=[],E=0;E<4;E++)for(var C=3==E?m:g,D=0;D<b;D++)w[E*b+D]=a(t,s,C);for(D=0;D<b;D++){1==d&&1==(1&D)&&s.boff--;var S=a(t,s,y);for(E=0;E<3;E++)w[E*b+D]=w[E*b+D]<<y|S;0!=m&&(w[3*b+D]=w[3*b+D]<<y|S)}g+=y,0!=m&&(m+=y);for(E=0;E<4;E++){var T=0==(C=3==E?m:g)?0:1/((1<<C)-1);for(D=0;D<b;D++)w[E*b+D]*=T}if(0==m)for(D=0;D<b;D++)w[3*b+D]=1;var x=[3,2,3,2,1,1,1,2][d],F=[3,3,2,2,2,2,4,2][d],A=[0,0,0,0,3,2,0,0][d],P="0000000000000000",M=[0,0,0];1!=x&&(P=h[x][_],M=l[x][_]);var I=s.boff,k=I+16*F-x;if(1==v){var U=I;I=k,k=U,U=F,F=A,A=U}var O=u[F];s.boff=I;for(E=0;E<64;E+=4){var B=(1-(G=O[a(t,s,F-(M[z=P.charCodeAt(E>>2)-48]==E>>2?1:0))]/64))*w[0*b+2*z+0]+G*w[0*b+2*z+1],R=(1-G)*w[1*b+2*z+0]+G*w[1*b+2*z+1],L=(1-G)*w[2*b+2*z+0]+G*w[2*b+2*z+1],N=(1-G)*w[3*b+2*z+0]+G*w[3*b+2*z+1];o[E]=255*B,o[E+1]=255*R,o[E+2]=255*L,o[E+3]=255*N}if(O=u[A],s.boff=k,0!=A)for(E=0;E<64;E+=4){var z,G;N=(1-(G=O[a(t,s,A-(M[z=P.charCodeAt(E>>2)-48]==E>>2?1:0))]/64))*w[3*b+2*z+0]+G*w[3*b+2*z+1];o[E+3]=255*N}UTEX.rotate(o,p),UTEX.write4x4(r,n,i,c,f,o),e+=16}return e},UTEX.rotate=function(t,e){if(0!=e)for(var r=0;r<64;r+=4){var n=t[r],i=t[r+1],a=t[r+2],s=t[r+3];if(1==e){var o=s;s=n,n=o}if(2==e){o=s;s=i,i=o}if(3==e){o=s;s=a,a=o}t[r]=n,t[r+1]=i,t[r+2]=a,t[r+3]=s}},UTEX.readBits=function(t,e,r){for(var n=0,i=r;0!=r;)n|=UTEX.readBit(t,e)<<i-r,r--;return n},UTEX.readBit=function(t,e){var r=e.boff;return e.boff++,t[r>>3]>>(7&r)&1},UTEX.mipmapB=function(t,e,r){for(var n=e>>1,i=r>>1,a=new Uint8Array(n*i*4),s=0;s<i;s++)for(var o=0;o<n;o++){var u=s*n+o<<2,h=(s<<1)*e+(o<<1)<<2,l=t[h+3],f=t[h+7],c=t[h]*l+t[h+4]*f,d=t[h+1]*l+t[h+5]*f,p=t[h+2]*l+t[h+6]*f,v=t[(h+=e<<2)+3],_=t[h+7];c+=t[h]*v+t[h+4]*_,d+=t[h+1]*v+t[h+5]*_,p+=t[h+2]*v+t[h+6]*_;var g=l+f+v+_+2>>2,m=0==g?0:.25/g;a[u]=~~(c*m+.5),a[u+1]=~~(d*m+.5),a[u+2]=~~(p*m+.5),a[u+3]=g}return a},UTEX.colorDist=function(t,e,r,n,i,a){return(t-n)*(t-n)+(e-i)*(e-i)+(r-a)*(r-a)},UTEX.mostDistant=function(t){for(var e=UTEX.colorDist,r=0,n=0,i=0;i<64;i+=4)for(var a=t[i],s=t[i+1],o=t[i+2],u=i+4;u<64;u+=4){var h=e(a,s,o,t[u],t[u+1],t[u+2]);h>n&&(n=h,r=i<<8|u)}return r},UTEX.U={_int8:new Uint8Array(4),readUintLE:function(t,e){return UTEX.U._int8[0]=t[e+0],UTEX.U._int8[1]=t[e+1],UTEX.U._int8[2]=t[e+2],UTEX.U._int8[3]=t[e+3],UTEX.U._int[0]},writeUintLE:function(t,e,r){UTEX.U._int[0]=r,t[e+0]=UTEX.U._int8[0],t[e+1]=UTEX.U._int8[1],t[e+2]=UTEX.U._int8[2],t[e+3]=UTEX.U._int8[3]},readASCII:function(t,e,r){for(var n="",i=0;i<r;i++)n+=String.fromCharCode(t[e+i]);return n},writeASCII:function(t,e,r){for(var n=0;n<r.length;n++)t[e+n]=r.charCodeAt(n)}},UTEX.U._int=new Uint32Array(UTEX.U._int8.buffer),null==UTEX&&(UTEX={}),UTEX.DDS={C:{DDSD_CAPS:1,DDSD_HEIGHT:2,DDSD_WIDTH:4,DDSD_PITCH:8,DDSD_PIXELFORMAT:4096,DDSD_MIPMAPCOUNT:131072,DDSD_LINEARSIZE:524288,DDSD_DEPTH:8388608,DDPF_ALPHAPIXELS:1,DDPF_ALPHA:2,DDPF_FOURCC:4,DDPF_RGB:64,DDPF_YUV:512,DDPF_LUMINANCE:131072,DDSCAPS_COMPLEX:8,DDSCAPS_MIPMAP:4194304,DDSCAPS_TEXTURE:4096},decode:function(t){var e=new Uint8Array(t),r=0;UTEX.U.readASCII(e,r,4);r+=4;var n,i,a=UTEX.DDS.C;n=UTEX.DDS.readHeader(e,r),r+=124,(i=n.pixFormat).flags&a.DDPF_FOURCC&&"DX10"==i.fourCC&&(UTEX.DDS.readHeader10(e,r),r+=20);for(var s=n.width,o=n.height,u=[],h=i.fourCC,l=i.bitCount,f=Math.max(1,n.mmcount),c=0;c<f;c++){var d=new Uint8Array(s*o*4);if("DXT1"==h)r=UTEX.readBC1(e,r,d,s,o);else if("DXT3"==h)r=UTEX.readBC2(e,r,d,s,o);else if("DXT5"==h)r=UTEX.readBC3(e,r,d,s,o);else if("DX10"==h)r=UTEX.readBC7(e,r,d,s,o);else if("ATC "==h)r=UTEX.readATC(e,r,d,s,o);else if("ATCA"==h)r=UTEX.readATA(e,r,d,s,o);else if("ATCI"==h)r=UTEX.readATA(e,r,d,s,o);else if(i.flags&a.DDPF_ALPHAPIXELS&&i.flags&a.DDPF_RGB)if(32==l){for(var p=0;p<d.length;p++)d[p]=e[r+p];r+=d.length}else{if(16!=l)throw"unknown bit count "+l;for(p=0;p<d.length;p+=4){var v=e[r+(p>>1)+1]<<8|e[r+(p>>1)];d[p+0]=255*(v&i.RMask)/i.RMask,d[p+1]=255*(v&i.GMask)/i.GMask,d[p+2]=255*(v&i.BMask)/i.BMask,d[p+3]=255*(v&i.AMask)/i.AMask}r+=d.length>>1}else{if(!(i.flags&a.DDPF_ALPHA||i.flags&a.DDPF_ALPHAPIXELS||i.flags&a.DDPF_LUMINANCE))throw console.log("unknown texture format, head flags: ",n.flags.toString(2),"pixelFormat flags: ",i.flags.toString(2)),"e";if(8!=l)throw"unknown bit count "+l;for(p=0;p<d.length;p+=4)d[p+3]=e[r+(p>>2)];r+=d.length>>2}u.push({width:s,height:o,image:d.buffer}),s>>=1,o>>=1}return u},encode:function(t,e,r){t=new Uint8Array(t);for(var n=255,i=3;i<t.length;i+=4)n&=t[i];var a=n<250,s=new Uint8Array(124+e*r*2),o=0;UTEX.U.writeASCII(s,o,"DDS "),o+=4,UTEX.DDS.writeHeader(s,e,r,a,o),o+=124;for(var u=0;e*r!=0;)o=a?UTEX.writeBC3(t,e,r,s,o):UTEX.writeBC1(t,e,r,s,o),t=UTEX.mipmapB(t,e,r),e>>=1,r>>=1,u++;return s[28]=u,s.buffer.slice(0,o)},readHeader:function(t,e){var r={},n=UTEX.U.readUintLE;return e+=4,r.flags=n(t,e),e+=4,r.height=n(t,e),e+=4,r.width=n(t,e),e+=4,r.pitch=n(t,e),e+=4,r.depth=n(t,e),e+=4,r.mmcount=n(t,e),e+=4,e+=44,r.pixFormat=UTEX.DDS.readPixFormat(t,e),e+=32,r.caps=n(t,e),e+=4,r.caps2=n(t,e),e+=4,r.caps3=n(t,e),e+=4,r.caps4=n(t,e),e+=4,e+=4,r},writeHeader:function(t,e,r,n,i){var a=UTEX.U.writeUintLE,s=UTEX.DDS.C,o=s.DDSD_CAPS|s.DDSD_HEIGHT|s.DDSD_WIDTH|s.DDSD_PIXELFORMAT;o|=s.DDSD_MIPMAPCOUNT|s.DDSD_LINEARSIZE;var u=s.DDSCAPS_COMPLEX|s.DDSCAPS_MIPMAP|s.DDSCAPS_TEXTURE,h=(e*r>>1)*(n?2:1),l=n?1:0;a(t,i,124),a(t,i+=4,o),a(t,i+=4,r),a(t,i+=4,e),a(t,i+=4,h),a(t,i+=4,l),a(t,i+=4,10),i+=4,i+=44,UTEX.DDS.writePixFormat(t,n,i),a(t,i+=32,u),i+=4,i+=16},readPixFormat:function(t,e){var r={},n=UTEX.U.readUintLE;return e+=4,r.flags=n(t,e),e+=4,r.fourCC=UTEX.U.readASCII(t,e,4),e+=4,r.bitCount=n(t,e),e+=4,r.RMask=n(t,e),e+=4,r.GMask=n(t,e),e+=4,r.BMask=n(t,e),e+=4,r.AMask=n(t,e),e+=4,r},writePixFormat:function(t,e,r){var n=UTEX.U.writeUintLE,i=UTEX.DDS.C.DDPF_FOURCC;n(t,r,32),n(t,r+=4,i),r+=4,UTEX.U.writeASCII(t,r,e?"DXT5":"DXT1"),r+=4,r+=20},readHeader10:function(t,e){var r={},n=UTEX.U.readUintLE;return r.format=n(t,e),e+=4,r.dimension=n(t,e),e+=4,r.miscFlags=n(t,e),e+=4,r.arraySize=n(t,e),e+=4,r.miscFlags2=n(t,e),e+=4,r}},UTEX.PVR={decode:function(t){var e=new Uint8Array(t),r=0,n=UTEX.PVR.readHeader(e,r);r+=52,r+=n.mdsize,console.log(n);var i=n.width,a=n.height,s=new Uint8Array(a*i*4),o=n.pf0;if(0==o)for(var u=0;u<a;u++)for(var h=0;h<i;h++){var l=u*i+h;s[(l<<2)+3]=255}else console.log("Unknown pixel format: "+o);return[{width:i,height:a,image:s.buffer}]},readHeader:function(t,e){var r={},n=UTEX.U.readUintLE;return r.version=n(t,e),e+=4,r.flags=n(t,e),e+=4,r.pf0=n(t,e),e+=4,r.pf1=n(t,e),e+=4,r.cspace=n(t,e),e+=4,r.ctype=n(t,e),e+=4,r.height=n(t,e),e+=4,r.width=n(t,e),e+=4,r.sfnum=n(t,e),e+=4,r.fcnum=n(t,e),e+=4,r.mmcount=n(t,e),e+=4,r.mdsize=n(t,e),e+=4,r}},function(){var t={};function e(){"undefined"!=typeof process&&"development"!=process.env.NODE_ENV||console.log.apply(console,arguments)}"object"==typeof module?module.exports=t:self.UTIF=t,function(t,r){var n,i,a;n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t){this.message="JPEG error: "+t}return t.prototype=Error(),t.prototype.name="JpegError",t.constructor=t}(),a=function(){function t(t,e){this.message=t,this.g=e}return t.prototype=Error(),t.prototype.name="DNLMarkerError",t.constructor=t}(),function(){function e(){this.M=null,this.B=-1}function r(t,e){for(var r,n,i=0,a=[],s=16;0<s&&!t[s-1];)s--;a.push({children:[],index:0});var o,u=a[0];for(r=0;r<s;r++){for(n=0;n<t[r];n++){for((u=a.pop()).children[u.index]=e[i];0<u.index;)u=a.pop();for(u.index++,a.push(u);a.length<=r;)a.push(o={children:[],index:0}),u.children[u.index]=o.children,u=o;i++}r+1<s&&(a.push(o={children:[],index:0}),u.children[u.index]=o.children,u=o)}return a[0].children}function s(t,e,r,s,o,l,f,c,d){function p(){if(0<U)return U--,k>>U&1;if(255===(k=t[e++])){var n=t[e++];if(n){if(220===n&&P){e+=2;var s=t[e++]<<8|t[e++];if(0<s&&s!==r.g)throw new a("Found DNL marker (0xFFDC) while parsing scan data",s)}throw new i("unexpected marker "+(k<<8|n).toString(16))}}return U=7,k>>>7}function v(t){for(;;){if("number"==typeof(t=t[p()]))return t;if("object"!==(void 0===t?"undefined":n(t)))throw new i("invalid huffman sequence")}}function _(t){for(var e=0;0<t;)e=e<<1|p(),t--;return e}function g(t){if(1===t)return 1===p()?1:-1;var e=_(t);return e>=1<<t-1?e:e+(-1<<t)+1}function m(t,e){var r=v(t.D);for(r=0===r?0:g(r),t.a[e]=t.m+=r,r=1;64>r;){var n=v(t.o),i=15&n;if(n>>=4,0===i){if(15>n)break;r+=16}else r+=n,t.a[e+h[r]]=g(i),r++}}function y(t,e){var r=v(t.D);r=0===r?0:g(r)<<d,t.a[e]=t.m+=r}function b(t,e){t.a[e]|=p()<<d}function w(t,e){if(0<O)O--;else for(var r=l;r<=f;){var n=v(t.o),i=15&n;if(n>>=4,0===i){if(15>n){O=_(n)+(1<<n)-1;break}r+=16}else r+=n,t.a[e+h[r]]=g(i)*(1<<d),r++}}function E(t,e){for(var r,n=l,a=0;n<=f;){r=e+h[n];var s=0>t.a[r]?-1:1;switch(B){case 0:if(r=15&(a=v(t.o)),a>>=4,0===r)15>a?(O=_(a)+(1<<a),B=4):(a=16,B=1);else{if(1!==r)throw new i("invalid ACn encoding");C=g(r),B=a?2:3}continue;case 1:case 2:t.a[r]?t.a[r]+=s*(p()<<d):0==--a&&(B=2===B?3:0);break;case 3:t.a[r]?t.a[r]+=s*(p()<<d):(t.a[r]=C<<d,B=0);break;case 4:t.a[r]&&(t.a[r]+=s*(p()<<d))}n++}4===B&&0==--O&&(B=0)}for(var C,D,S,T,x,F,A,P=9<arguments.length&&void 0!==arguments[9]&&arguments[9],M=r.P,I=e,k=0,U=0,O=0,B=0,R=s.length,L=r.S?0===l?0===c?y:b:0===c?w:E:m,N=0,z=1===R?s[0].c*s[0].l:M*r.O;N<z;){var G=o?Math.min(z-N,o):z;for(D=0;D<R;D++)s[D].m=0;if(O=0,1===R){var j=s[0];for(x=0;x<G;x++)L(j,64*((j.c+1)*(N/j.c|0)+N%j.c)),N++}else for(x=0;x<G;x++){for(D=0;D<R;D++)for(F=(j=s[D]).h,A=j.j,S=0;S<A;S++)for(T=0;T<F;T++)L(j,64*((j.c+1)*((N/M|0)*j.j+S)+(N%M*j.h+T)));N++}if(U=0,(j=u(t,e))&&j.f&&((0,_util.warn)("decodeScan - unexpected MCU data, current marker is: "+j.f),e=j.offset),!(j=j&&j.F)||65280>=j)throw new i("marker was not found");if(!(65488<=j&&65495>=j))break;e+=2}return(j=u(t,e))&&j.f&&((0,_util.warn)("decodeScan - unexpected Scan data, current marker is: "+j.f),e=j.offset),e-I}function o(t,e){for(var r=e.c,n=e.l,a=new Int16Array(64),s=0;s<n;s++)for(var o=0;o<r;o++){var u=64*((e.c+1)*s+o),h=a,l=e.G,f=e.a;if(!l)throw new i("missing required Quantization Table.");for(var c=0;64>c;c+=8){var d=f[u+c],p=f[u+c+1],v=f[u+c+2],_=f[u+c+3],g=f[u+c+4],m=f[u+c+5],y=f[u+c+6],b=f[u+c+7];if(d*=l[c],0==(p|v|_|g|m|y|b))d=5793*d+512>>10,h[c]=d,h[c+1]=d,h[c+2]=d,h[c+3]=d,h[c+4]=d,h[c+5]=d,h[c+6]=d,h[c+7]=d;else{p*=l[c+1],v*=l[c+2],_*=l[c+3],g*=l[c+4],m*=l[c+5];var w=5793*d+128>>8,E=5793*g+128>>8,C=v,D=y*=l[c+6];E=(w=w+E+1>>1)-E,d=3784*C+1567*D+128>>8,C=1567*C-3784*D+128>>8,m=(g=(g=2896*(p-(b*=l[c+7]))+128>>8)+(m<<=4)+1>>1)-m,_=(b=(b=2896*(p+b)+128>>8)+(_<<=4)+1>>1)-_,D=(w=w+(D=d)+1>>1)-D,C=(E=E+C+1>>1)-C,d=2276*g+3406*b+2048>>12,g=3406*g-2276*b+2048>>12,b=d,d=799*_+4017*m+2048>>12,_=4017*_-799*m+2048>>12,m=d,h[c]=w+b,h[c+7]=w-b,h[c+1]=E+m,h[c+6]=E-m,h[c+2]=C+_,h[c+5]=C-_,h[c+3]=D+g,h[c+4]=D-g}}for(l=0;8>l;++l)d=h[l],0==((p=h[l+8])|(v=h[l+16])|(_=h[l+24])|(g=h[l+32])|(m=h[l+40])|(y=h[l+48])|(b=h[l+56]))?(d=-2040>(d=5793*d+8192>>14)?0:2024<=d?255:d+2056>>4,f[u+l]=d,f[u+l+8]=d,f[u+l+16]=d,f[u+l+24]=d,f[u+l+32]=d,f[u+l+40]=d,f[u+l+48]=d,f[u+l+56]=d):(w=5793*d+2048>>12,E=5793*g+2048>>12,d=3784*(C=v)+1567*(D=y)+2048>>12,C=1567*C-3784*D+2048>>12,D=d,m=(g=(g=2896*(p-b)+2048>>12)+m+1>>1)-m,_=(b=(b=2896*(p+b)+2048>>12)+_+1>>1)-_,d=2276*g+3406*b+2048>>12,g=3406*g-2276*b+2048>>12,b=d,d=799*_+4017*m+2048>>12,_=4017*_-799*m+2048>>12,p=(E=(E=(w=4112+(w+E+1>>1))-E)+C+1>>1)+(m=d),y=E-m,m=(C=E-C)-_,d=16>(d=(w=w+D+1>>1)+b)?0:4080<=d?255:d>>4,p=16>p?0:4080<=p?255:p>>4,v=16>(v=C+_)?0:4080<=v?255:v>>4,_=16>(_=(D=w-D)+g)?0:4080<=_?255:_>>4,g=16>(g=D-g)?0:4080<=g?255:g>>4,m=16>m?0:4080<=m?255:m>>4,y=16>y?0:4080<=y?255:y>>4,b=16>(b=w-b)?0:4080<=b?255:b>>4,f[u+l]=d,f[u+l+8]=p,f[u+l+16]=v,f[u+l+24]=_,f[u+l+32]=g,f[u+l+40]=m,f[u+l+48]=y,f[u+l+56]=b)}return e.a}function u(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:e,n=t.length-1;if(r=r<e?r:e,e>=n)return null;var i=t[e]<<8|t[e+1];if(65472<=i&&65534>=i)return{f:null,F:i,offset:e};for(var a=t[r]<<8|t[r+1];!(65472<=a&&65534>=a);){if(++r>=n)return null;a=t[r]<<8|t[r+1]}return{f:i.toString(16),F:a,offset:r}}var h=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);e.prototype={parse:function(t){function e(){var e=t[d]<<8|t[d+1];return d+=2,e}function n(){var r=e(),n=u(t,r=d+r-2,d);return n&&n.f&&((0,_util.warn)("readDataBlock - incorrect length, current marker is: "+n.f),r=n.offset),r=t.subarray(d,r),d+=r.length,r}function l(t){for(var e=Math.ceil(t.v/8/t.s),r=Math.ceil(t.g/8/t.u),n=0;n<t.b.length;n++){x=t.b[n];var i=Math.ceil(Math.ceil(t.v/8)*x.h/t.s),a=Math.ceil(Math.ceil(t.g/8)*x.j/t.u);x.a=new Int16Array(64*r*x.j*(e*x.h+1)),x.c=i,x.l=a}t.P=e,t.O=r}var f=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).N,c=void 0===f?null:f,d=0,p=null,v=0;f=[];var _=[],g=[],m=e();if(65496!==m)throw new i("SOI not found");for(m=e();65497!==m;){switch(m){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var y=n();65518===m&&65===y[0]&&100===y[1]&&111===y[2]&&98===y[3]&&101===y[4]&&(p={version:y[5]<<8|y[6],Y:y[7]<<8|y[8],Z:y[9]<<8|y[10],W:y[11]});break;case 65499:m=e()+d-2;for(var b;d<m;){var w=t[d++],E=new Uint16Array(64);if(0==w>>4)for(y=0;64>y;y++)E[b=h[y]]=t[d++];else{if(1!=w>>4)throw new i("DQT - invalid table spec");for(y=0;64>y;y++)E[b=h[y]]=e()}f[15&w]=E}break;case 65472:case 65473:case 65474:if(C)throw new i("Only single frame JPEGs supported");e();var C={};for(C.X=65473===m,C.S=65474===m,C.precision=t[d++],m=e(),C.g=c||m,C.v=e(),C.b=[],C.C={},y=t[d++],m=E=w=0;m<y;m++){b=t[d];var D=t[d+1]>>4,S=15&t[d+1];w<D&&(w=D),E<S&&(E=S),D=C.b.push({h:D,j:S,T:t[d+2],G:null}),C.C[b]=D-1,d+=3}C.s=w,C.u=E,l(C);break;case 65476:for(b=e(),m=2;m<b;){for(w=t[d++],E=new Uint8Array(16),y=D=0;16>y;y++,d++)D+=E[y]=t[d];for(S=new Uint8Array(D),y=0;y<D;y++,d++)S[y]=t[d];m+=17+D,(0==w>>4?g:_)[15&w]=r(E,S)}break;case 65501:e();var T=e();break;case 65498:for(y=1==++v&&!c,e(),w=t[d++],b=[],m=0;m<w;m++){E=C.C[t[d++]];var x=C.b[E];E=t[d++],x.D=g[E>>4],x.o=_[15&E],b.push(x)}m=t[d++],w=t[d++],E=t[d++];try{var F=s(t,d,C,b,T,m,w,E>>4,15&E,y);d+=F}catch(e){if(e instanceof a)return(0,_util.warn)('Attempting to re-parse JPEG image using "scanLines" parameter found in DNL marker (0xFFDC) segment.'),this.parse(t,{N:e.g});throw e}break;case 65500:d+=4;break;case 65535:255!==t[d]&&d--;break;default:if(255===t[d-3]&&192<=t[d-2]&&254>=t[d-2])d-=3;else{if(!(y=u(t,d-2))||!y.f)throw new i("unknown marker "+m.toString(16));(0,_util.warn)("JpegImage.parse - unexpected data, current marker is: "+y.f),d=y.offset}}m=e()}for(this.width=C.v,this.height=C.g,this.A=p,this.b=[],m=0;m<C.b.length;m++)(T=f[(x=C.b[m]).T])&&(x.G=T),this.b.push({R:o(0,x),U:x.h/C.s,V:x.j/C.u,c:x.c,l:x.l});this.i=this.b.length},L:function(t,e){var r,n,i=this.width/t,a=this.height/e,s=this.b.length,o=t*e*s,u=new Uint8ClampedArray(o),h=new Uint32Array(t);for(n=0;n<s;n++){var l=this.b[n],f=l.U*i,c=l.V*a,d=n,p=l.R,v=l.c+1<<3;for(r=0;r<t;r++)l=0|r*f,h[r]=(4294967288&l)<<3|7&l;for(f=0;f<e;f++)for(l=v*(4294967288&(l=0|f*c))|(7&l)<<3,r=0;r<t;r++)u[d]=p[l+h[r]],d+=s}if(a=this.M)for(n=0;n<o;)for(i=l=0;l<s;l++,n++,i+=2)u[n]=(u[n]*a[i]>>8)+a[i+1];return u},w:function(){return this.A?!!this.A.W:3===this.i?0!==this.B:1===this.B},I:function(t){for(var e,r,n,i=0,a=t.length;i<a;i+=3)e=t[i],r=t[i+1],n=t[i+2],t[i]=e-179.456+1.402*n,t[i+1]=e+135.459-.344*r-.714*n,t[i+2]=e-226.816+1.772*r;return t},K:function(t){for(var e,r,n,i,a=0,s=0,o=t.length;s<o;s+=4)e=t[s],r=t[s+1],n=t[s+2],i=t[s+3],t[a++]=r*(-660635669420364e-19*r+.000437130475926232*n-54080610064599e-18*e+.00048449797120281*i-.154362151871126)-122.67195406894+n*(-.000957964378445773*n+.000817076911346625*e-.00477271405408747*i+1.53380253221734)+e*(.000961250184130688*e-.00266257332283933*i+.48357088451265)+i*(-.000336197177618394*i+.484791561490776),t[a++]=107.268039397724+r*(219927104525741e-19*r-.000640992018297945*n+.000659397001245577*e+.000426105652938837*i-.176491792462875)+n*(-.000778269941513683*n+.00130872261408275*e+.000770482631801132*i-.151051492775562)+e*(.00126935368114843*e-.00265090189010898*i+.25802910206845)+i*(-.000318913117588328*i-.213742400323665),t[a++]=r*(-.000570115196973677*r-263409051004589e-19*n+.0020741088115012*e-.00288260236853442*i+.814272968359295)-20.810012546947+n*(-153496057440975e-19*n-.000132689043961446*e+.000560833691242812*i-.195152027534049)+e*(.00174418132927582*e-.00255243321439347*i+.116935020465145)+i*(-.000343531996510555*i+.24165260232407);return t.subarray(0,a)},J:function(t){for(var e,r,n,i=0,a=t.length;i<a;i+=4)e=t[i],r=t[i+1],n=t[i+2],t[i]=434.456-e-1.402*n,t[i+1]=119.541-e+.344*r+.714*n,t[i+2]=481.816-e-1.772*r;return t},H:function(t){for(var e,r,n,i,a=0,s=1/255,o=0,u=t.length;o<u;o+=4)e=t[o]*s,r=t[o+1]*s,n=t[o+2]*s,i=t[o+3]*s,t[a++]=255+e*(-4.387332384609988*e+54.48615194189176*r+18.82290502165302*n+212.25662451639585*i-285.2331026137004)+r*(1.7149763477362134*r-5.6096736904047315*n-17.873870861415444*i-5.497006427196366)+n*(-2.5217340131683033*n-21.248923337353073*i+17.5119270841813)-i*(21.86122147463605*i+189.48180835922747),t[a++]=255+e*(8.841041422036149*e+60.118027045597366*r+6.871425592049007*n+31.159100130055922*i-79.2970844816548)+r*(-15.310361306967817*r+17.575251261109482*n+131.35250912493976*i-190.9453302588951)+n*(4.444339102852739*n+9.8632861493405*i-24.86741582555878)-i*(20.737325471181034*i+187.80453709719578),t[a++]=255+e*(.8842522430003296*e+8.078677503112928*r+30.89978309703729*n-.23883238689178934*i-14.183576799673286)+r*(10.49593273432072*r+63.02378494754052*n+50.606957656360734*i-112.23884253719248)+n*(.03296041114873217*n+115.60384449646641*i-193.58209356861505)-i*(22.33816807309886*i+180.12613974708367);return t.subarray(0,a)},getData:function(t,e,r){if(4<this.i)throw new i("Unsupported color mode");if(t=this.L(t,e),1===this.i&&r){r=t.length,e=new Uint8ClampedArray(3*r);for(var n=0,a=0;a<r;a++){var s=t[a];e[n++]=s,e[n++]=s,e[n++]=s}return e}if(3===this.i&&this.w())return this.I(t);if(4===this.i){if(this.w())return r?this.K(t):this.J(t);if(r)return this.H(t)}return t}},t.JpegDecoder=e}(),t.encodeImage=function(e,r,n,i){var a={t256:[r],t257:[n],t258:[8,8,8,8],t259:[1],t262:[2],t273:[1e3],t277:[4],t278:[n],t279:[r*n*4],t282:[1],t283:[1],t284:[1],t286:[0],t287:[0],t296:[1],t305:["Photopea (UTIF.js)"],t338:[1]};if(i)for(var s in i)a[s]=i[s];var o=new Uint8Array(t.encode([a])),u=new Uint8Array(e),h=new Uint8Array(1e3+r*n*4);for(s=0;s<o.length;s++)h[s]=o[s];for(s=0;s<u.length;s++)h[1e3+s]=u[s];return h.buffer},t.encode=function(e){var r=new Uint8Array(2e4),n=4,i=t._binBE;r[0]=77,r[1]=77,r[3]=42;var a=8;i.writeUint(r,n,a),n+=4;for(var s=0;s<e.length;s++){var o=t._writeIFD(i,r,a,e[s]);a=o[1],s<e.length-1&&i.writeUint(r,o[0],a)}return r.slice(0,a).buffer},t.decode=function(e){t.decode._decodeG3.allow2D=null;var r=new Uint8Array(e),n=0,i=t._binBE.readASCII(r,n,2);n+=2;var a="II"==i?t._binLE:t._binBE;a.readUshort(r,n);n+=2;var s=a.readUint(r,n);n+=4;for(var o=[];;){var u=t._readIFD(a,r,s,o,0,!1);if(0==(s=a.readUint(r,u)))break}return o},t.decodeImage=function(r,n,i){var a=new Uint8Array(r),s=t._binBE.readASCII(a,0,2);if(null!=n.t256){n.isLE="II"==s,n.width=n.t256[0],n.height=n.t257[0];var o,u=n.t259?n.t259[0]:1,h=n.t266?n.t266[0]:1;n.t284&&2==n.t284[0]&&e("PlanarConfiguration 2 should not be used!"),o=n.t258?Math.min(32,n.t258[0])*n.t258.length:n.t277?n.t277[0]:1,1==u&&null!=n.t279&&n.t278&&32803==n.t262[0]&&(o=Math.round(8*n.t279[0]/(n.width*n.t278[0])));var l=8*Math.ceil(n.width*o/8),f=n.t273;null==f&&(f=n.t324);var c=n.t279;1==u&&1==f.length&&(c=[n.height*(l>>>3)]),null==c&&(c=n.t325);var d=new Uint8Array(n.height*(l>>>3)),p=0;if(null!=n.t322){for(var v=n.t322[0],_=n.t323[0],g=Math.floor((n.width+v-1)/v),m=Math.floor((n.height+_-1)/_),y=new Uint8Array(0|Math.ceil(v*_*o/8)),b=0;b<m;b++)for(var w=0;w<g;w++){for(var E=b*g+w,C=0;C<y.length;C++)y[C]=0;t.decode._decompress(n,i,a,f[E],c[E],u,y,0,h),6==u?d=y:t._copyTile(y,0|Math.ceil(v*o/8),_,d,0|Math.ceil(n.width*o/8),n.height,0|Math.ceil(w*v*o/8),b*_)}p=8*d.length}else{var D=n.t278?n.t278[0]:n.height;D=Math.min(D,n.height);for(E=0;E<f.length;E++)t.decode._decompress(n,i,a,f[E],c[E],u,d,0|Math.ceil(p/8),h),p+=l*D;p=Math.min(p,8*d.length)}n.data=new Uint8Array(d.buffer,0,0|Math.ceil(p/8))}},t.decode._decompress=function(n,i,a,s,o,u,h,l,f){if(1==u||o==h.length&&32767!=u)for(var c=0;c<o;c++)h[l+c]=a[s+c];else if(3==u)t.decode._decodeG3(a,s,o,h,l,n.width,f);else if(4==u)t.decode._decodeG4(a,s,o,h,l,n.width,f);else if(5==u)t.decode._decodeLZW(a,s,h,l);else if(6==u)t.decode._decodeOldJPEG(n,a,s,o,h,l);else if(7==u)t.decode._decodeNewJPEG(n,a,s,o,h,l);else if(8==u)for(var d=new Uint8Array(a.buffer,s,o),p=r.inflate(d),v=0;v<p.length;v++)h[l+v]=p[v];else 32767==u?t.decode._decodeARW(n,a,s,o,h,l):32773==u?t.decode._decodePackBits(a,s,o,h,l):32809==u?t.decode._decodeThunder(a,s,o,h,l):34713==u?t.decode._decodeNikon(n,i,a,s,o,h,l):e("Unknown compression",u);var _=n.t258?Math.min(32,n.t258[0]):1,g=n.t277?n.t277[0]:1,m=_*g>>>3,y=n.t278?n.t278[0]:n.height,b=Math.ceil(_*g*n.width/8);if(16==_&&!n.isLE&&null==n.t33422)for(var w=0;w<y;w++)for(var E=l+w*b,C=1;C<b;C+=2){var D=h[E+C];h[E+C]=h[E+C-1],h[E+C-1]=D}if(n.t317&&2==n.t317[0])for(w=0;w<y;w++){var S=l+w*b;if(16==_)for(c=m;c<b;c+=2){var T=(h[S+c+1]<<8|h[S+c])+(h[S+c-m+1]<<8|h[S+c-m]);h[S+c]=255&T,h[S+c+1]=T>>>8&255}else if(3==g)for(c=3;c<b;c+=3)h[S+c]=h[S+c]+h[S+c-3]&255,h[S+c+1]=h[S+c+1]+h[S+c-2]&255,h[S+c+2]=h[S+c+2]+h[S+c-1]&255;else for(c=m;c<b;c++)h[S+c]=h[S+c]+h[S+c-m]&255}},t.decode._ljpeg_diff=function(e,r,n){var i,a,s=t.decode._getbithuff;return i=s(e,r,n[0],n),0==((a=s(e,r,i,0))&1<<i-1)&&(a-=(1<<i)-1),a},t.decode._decodeARW=function(e,r,n,i,a,s){var o=e.t256[0],u=e.t257[0],h=e.t258[0],l=e.isLE?t._binLE:t._binBE;if(o*u==i||o*u*1.5==i)if(o*u*1.5!=i){var f,c,d,p,v,_,g,m,y=new Uint16Array(16),b=new Uint8Array(o+1);for(F=0;F<u;F++){for(var w=0;w<o;w++)b[w]=r[n++];for(m=0,x=0;x<o-30;m+=16){for(c=2047&(f=l.readUint(b,m)),d=2047&f>>>11,p=15&f>>>22,v=15&f>>>26,_=0;_<4&&128<<_<=c-d;_++);for(g=30,E=0;E<16;E++)E==p?y[E]=c:E==v?y[E]=d:(y[E]=((l.readUshort(b,m+(g>>3))>>>(7&g)&127)<<_)+d,y[E]>2047&&(y[E]=2047),g+=7);for(E=0;E<16;E++,x+=2){B=y[E]<<1;t.decode._putsF(a,(F*o+x)*h,B<<16-h)}x-=1&x?1:31}}}else for(var E=0;E<i;E+=3){var C=r[n+E+0],D=r[n+E+1],S=r[n+E+2];a[s+E]=D<<4|C>>>4,a[s+E+1]=C<<4|S>>>4,a[s+E+2]=S<<4|D>>>4}else{u+=8;var T,x,F,A=[n,0,0,0],P=new Uint16Array(32770),M=[3857,3856,3599,3342,3085,2828,2571,2314,2057,1800,1543,1286,1029,772,771,768,514,513],I=0,k=t.decode._ljpeg_diff;for(P[0]=15,T=E=0;E<18;E++)for(var U=32768>>>(M[E]>>>8),O=0;O<U;O++)P[++T]=M[E];for(x=o;x--;)for(F=0;F<u+1;F+=2)if(F==u&&(F=1),I+=k(r,A,P),F<u){var B=4095&I;t.decode._putsF(a,(F*o+x)*h,B<<16-h)}}},t.decode._decodeNikon=function(e,r,n,i,a,s,o){var u=[[0,0,1,5,1,1,1,1,1,1,2,0,0,0,0,0,0,5,4,3,6,2,7,1,0,8,9,11,10,12],[0,0,1,5,1,1,1,1,1,1,2,0,0,0,0,0,0,57,90,56,39,22,5,4,3,2,1,0,11,12,12],[0,0,1,4,2,3,1,2,0,0,0,0,0,0,0,0,0,5,4,6,3,7,2,8,1,9,0,10,11,12],[0,0,1,4,3,1,1,1,1,1,2,0,0,0,0,0,0,5,6,4,7,8,3,9,2,1,0,10,11,12,13,14],[0,0,1,5,1,1,1,1,1,1,1,2,0,0,0,0,0,8,92,75,58,41,7,6,5,4,3,2,1,0,13,14],[0,0,1,4,2,2,3,1,2,0,0,0,0,0,0,0,0,7,6,8,5,9,4,10,3,11,12,2,0,1,13,14]],h=e.t256[0],l=e.t257[0],f=e.t258[0],c=0,d=0,p=t.decode._make_decoder,v=t.decode._getbithuff,_=r[0].exifIFD.makerNote,g=_.t150?_.t150:_.t140,m=0,y=g[m++],b=g[m++];73!=y&&88!=b||(m+=2110),70==y&&(c=2),14==f&&(c+=3);for(var w=[[0,0],[0,0]],E=e.isLE?t._binLE:t._binBE,C=0;C<2;C++)for(var D=0;D<2;D++)w[C][D]=E.readShort(g,m),m+=2;var S,T,x,F,A,P=1<<f&32767,M=0,I=E.readShort(g,m);m+=2,I>1&&(M=Math.floor(P/(I-1))),68==y&&32==b&&M>0&&(d=E.readShort(g,562));var k=[0,0],U=p(u[c]),O=[i,0,0,0];for(S=0;S<l;S++)for(d&&S==d&&(U=p(u[c+1])),T=0;T<h;T++){C=v(n,O,U[0],U),0==((A=1+(v(n,O,(x=15&C)-(F=C>>>4),0)<<1)<<F>>>1)&1<<x-1)&&(A-=(1<<x)-(0==F?1:0)),T<2?k[T]=w[1&S][T]+=A:k[1&T]+=A;var B=Math.min(Math.max(k[1&T],0),(1<<f)-1),R=(S*h+T)*f;t.decode._putsF(s,R,B<<16-f)}},t.decode._putsF=function(t,e,r){r<<=8-(7&e);var n=e>>>3;t[n]|=r>>>16,t[n+1]|=r>>>8,t[n+2]|=r},t.decode._getbithuff=function(e,r,n,i){t.decode._get_byte;var a,s=r[0],o=r[1],u=r[2],h=r[3];if(0==n||u<0)return 0;for(;!h&&u<n&&-1!=(a=e[s++])&&!(h=0);)o=(o<<8)+a,u+=8;if(a=o<<32-u>>>32-n,i?(u-=i[a+1]>>>8,a=255&i[a+1]):u-=n,u<0)throw"e";return r[0]=s,r[1]=o,r[2]=u,r[3]=h,a},t.decode._make_decoder=function(t){var e,r,n,i,a,s=[];for(e=16;0!=e&&!t[e];e--);var o=17;for(s[0]=e,n=r=1;r<=e;r++)for(i=0;i<t[r];i++,++o)for(a=0;a<1<<e-r;a++)n<=1<<e&&(s[n++]=r<<8|t[o]);return s},t.decode._decodeNewJPEG=function(e,r,n,i,a,s){var o=e.t347,u=o?o.length:0,h=new Uint8Array(u+i);if(o){for(var l=0,f=0;f<u-1&&(255!=o[f]||217!=o[f+1]);f++)h[l++]=o[f];var c=r[n],d=r[n+1];255==c&&216==d||(h[l++]=c,h[l++]=d);for(f=2;f<i;f++)h[l++]=r[n+f]}else for(f=0;f<i;f++)h[f]=r[n+f];if(32803==e.t262[0]||34892==e.t262[0]){var p=e.t258[0],v=t.LosslessJpegDecode(h),_=v.length;if(16==p)if(e.isLE)for(f=0;f<_;f++)a[s+(f<<1)]=255&v[f],a[s+(f<<1)+1]=v[f]>>>8;else for(f=0;f<_;f++)a[s+(f<<1)]=v[f]>>>8,a[s+(f<<1)+1]=255&v[f];else{if(12!=p)throw new Error("unsupported bit depth "+p);for(f=0;f<_;f+=2)a[s++]=v[f]>>>4,a[s++]=255&(v[f]<<4|v[f+1]>>>8),a[s++]=255&v[f+1]}}else{var g=new t.JpegDecoder;g.parse(h);var m=g.getData(g.width,g.height);for(f=0;f<m.length;f++)a[s+f]=m[f]}6==e.t262[0]&&(e.t262[0]=2)},t.decode._decodeOldJPEGInit=function(t,r,n,i){var a,s,o,u,h,l=0,f=0,c=!1,d=t.t513,p=d?d[0]:0,v=t.t514,_=v?v[0]:0,g=t.t324||t.t273||d,m=t.t530,y=0,b=0,w=t.t277?t.t277[0]:1,E=t.t515;if(g&&(f=g[0],c=g.length>1),!c){if(255==r[n]&&216==r[n+1])return{jpegOffset:n};if(null!=d&&(255==r[n+p]&&216==r[n+p+1]?l=n+p:e("JPEGInterchangeFormat does not point to SOI"),null==v?e("JPEGInterchangeFormatLength field is missing"):(p>=f||p+_<=f)&&e("JPEGInterchangeFormatLength field value is invalid"),null!=l))return{jpegOffset:l}}if(null!=m&&(y=m[0],b=m[1]),null!=d&&null!=v)if(_>=2&&p+_<=f){for(a=255==r[n+p+_-2]&&216==r[n+p+_-1]?new Uint8Array(_-2):new Uint8Array(_),o=0;o<a.length;o++)a[o]=r[n+p+o];e("Incorrect JPEG interchange format: using JPEGInterchangeFormat offset to derive tables")}else e("JPEGInterchangeFormat+JPEGInterchangeFormatLength > offset to first strip or tile");if(null==a){var C=0,D=[];D[C++]=255,D[C++]=216;var S=t.t519;if(null==S)throw new Error("JPEGQTables tag is missing");for(o=0;o<S.length;o++)for(D[C++]=255,D[C++]=219,D[C++]=0,D[C++]=67,D[C++]=o,u=0;u<64;u++)D[C++]=r[n+S[o]+u];for(h=0;h<2;h++){var T=t[0==h?"t520":"t521"];if(null==T)throw new Error((0==h?"JPEGDCTables":"JPEGACTables")+" tag is missing");for(o=0;o<T.length;o++){D[C++]=255,D[C++]=196;var x=19;for(u=0;u<16;u++)x+=r[n+T[o]+u];for(D[C++]=x>>>8,D[C++]=255&x,D[C++]=o|h<<4,u=0;u<16;u++)D[C++]=r[n+T[o]+u];for(u=0;u<x;u++)D[C++]=r[n+T[o]+16+u]}}if(D[C++]=255,D[C++]=192,D[C++]=0,D[C++]=8+3*w,D[C++]=8,D[C++]=t.height>>>8&255,D[C++]=255&t.height,D[C++]=t.width>>>8&255,D[C++]=255&t.width,D[C++]=w,1==w)D[C++]=1,D[C++]=17,D[C++]=0;else for(o=0;o<3;o++)D[C++]=o+1,D[C++]=0!=o?17:(15&y)<<4|15&b,D[C++]=o;null!=E&&0!=E[0]&&(D[C++]=255,D[C++]=221,D[C++]=0,D[C++]=4,D[C++]=E[0]>>>8&255,D[C++]=255&E[0]),a=new Uint8Array(D)}var F=-1;for(o=0;o<a.length-1;){if(255==a[o]&&192==a[o+1]){F=o;break}o++}if(-1==F){var A=new Uint8Array(a.length+10+3*w);A.set(a);var P=a.length;if(F=a.length,(a=A)[P++]=255,a[P++]=192,a[P++]=0,a[P++]=8+3*w,a[P++]=8,a[P++]=t.height>>>8&255,a[P++]=255&t.height,a[P++]=t.width>>>8&255,a[P++]=255&t.width,a[P++]=w,1==w)a[P++]=1,a[P++]=17,a[P++]=0;else for(o=0;o<3;o++)a[P++]=o+1,a[P++]=0!=o?17:(15&y)<<4|15&b,a[P++]=o}if(255==r[f]&&218==r[f+1]){var M=r[f+2]<<8|r[f+3];for((s=new Uint8Array(M+2))[0]=r[f],s[1]=r[f+1],s[2]=r[f+2],s[3]=r[f+3],o=0;o<M-2;o++)s[o+4]=r[f+o+4]}else{var I=0;if((s=new Uint8Array(8+2*w))[I++]=255,s[I++]=218,s[I++]=0,s[I++]=6+2*w,s[I++]=w,1==w)s[I++]=1,s[I++]=0;else for(o=0;o<3;o++)s[I++]=o+1,s[I++]=o<<4|o;s[I++]=0,s[I++]=63,s[I++]=0}return{jpegOffset:n,tables:a,sosMarker:s,sofPosition:F}},t.decode._decodeOldJPEG=function(e,r,n,i,a,s){var o,u,h,l,f=t.decode._decodeOldJPEGInit(e,r,n,i);if(null!=f.jpegOffset)for(o=n+i-f.jpegOffset,h=new Uint8Array(o),p=0;p<o;p++)h[p]=r[f.jpegOffset+p];else{for(u=f.tables.length,(h=new Uint8Array(u+f.sosMarker.length+i+2)).set(f.tables),l=u,h[f.sofPosition+5]=e.height>>>8&255,h[f.sofPosition+6]=255&e.height,h[f.sofPosition+7]=e.width>>>8&255,h[f.sofPosition+8]=255&e.width,255==r[n]&&r[n+1]==SOS||(h.set(f.sosMarker,l),l+=sosMarker.length),p=0;p<i;p++)h[l++]=r[n+p];h[l++]=255,h[l++]=EOI}var c=new t.JpegDecoder;c.parse(h);for(var d=c.getData(c.width,c.height),p=0;p<d.length;p++)a[s+p]=d[p];e.t262&&6==e.t262[0]&&(e.t262[0]=2)},t.decode._decodePackBits=function(t,e,r,n,i){for(var a=new Int8Array(t.buffer),s=new Int8Array(n.buffer),o=e+r;e<o;){var u=a[e];if(e++,u>=0&&u<128)for(var h=0;h<u+1;h++)s[i]=a[e],i++,e++;if(u>=-127&&u<0){for(h=0;h<1-u;h++)s[i]=a[e],i++;e++}}},t.decode._decodeThunder=function(t,e,r,n,i){for(var a=[0,1,0,-1],s=[0,1,2,3,0,-3,-2,-1],o=e+r,u=2*i,h=0;e<o;){var l=t[e],f=l>>>6,c=63&l;if(e++,3==f&&(h=15&c,n[u>>>1]|=h<<4*(1-u&1),u++),0==f)for(var d=0;d<c;d++)n[u>>>1]|=h<<4*(1-u&1),u++;if(2==f)for(d=0;d<2;d++){4!=(p=c>>>3*(1-d)&7)&&(h+=s[p],n[u>>>1]|=h<<4*(1-u&1),u++)}if(1==f)for(d=0;d<3;d++){var p;2!=(p=c>>>2*(2-d)&3)&&(h+=a[p],n[u>>>1]|=h<<4*(1-u&1),u++)}}},t.decode._dmap={1:0,"011":1,"000011":2,"0000011":3,"010":-1,"000010":-2,"0000010":-3},t.decode._lens=function(){var t=function(t,e,r,n){for(var i=0;i<e.length;i++)t[e[i]]=r+i*n},e="00110101,000111,0111,1000,1011,1100,1110,1111,10011,10100,00111,01000,001000,000011,110100,110101,101010,101011,0100111,0001100,0001000,0010111,0000011,0000100,0101000,0101011,0010011,0100100,0011000,00000010,00000011,00011010,00011011,00010010,00010011,00010100,00010101,00010110,00010111,00101000,00101001,00101010,00101011,00101100,00101101,00000100,00000101,00001010,00001011,01010010,01010011,01010100,01010101,00100100,00100101,01011000,01011001,01011010,01011011,01001010,01001011,00110010,00110011,00110100",r="0000110111,010,11,10,011,0011,0010,00011,000101,000100,0000100,0000101,0000111,00000100,00000111,000011000,0000010111,0000011000,0000001000,00001100111,00001101000,00001101100,00000110111,00000101000,00000010111,00000011000,000011001010,000011001011,000011001100,000011001101,000001101000,000001101001,000001101010,000001101011,000011010010,000011010011,000011010100,000011010101,000011010110,000011010111,000001101100,000001101101,000011011010,000011011011,000001010100,000001010101,000001010110,000001010111,000001100100,000001100101,000001010010,000001010011,000000100100,000000110111,000000111000,000000100111,000000101000,000001011000,000001011001,000000101011,000000101100,000001011010,000001100110,000001100111",n="11011,10010,010111,0110111,00110110,00110111,01100100,01100101,01101000,01100111,011001100,011001101,011010010,011010011,011010100,011010101,011010110,011010111,011011000,011011001,011011010,011011011,010011000,010011001,010011010,011000,010011011",i="0000001111,000011001000,000011001001,000001011011,000000110011,000000110100,000000110101,0000001101100,0000001101101,0000001001010,0000001001011,0000001001100,0000001001101,0000001110010,0000001110011,0000001110100,0000001110101,0000001110110,0000001110111,0000001010010,0000001010011,0000001010100,0000001010101,0000001011010,0000001011011,0000001100100,0000001100101",a="00000001000,00000001100,00000001101,000000010010,000000010011,000000010100,000000010101,000000010110,000000010111,000000011100,000000011101,000000011110,000000011111";e=e.split(","),r=r.split(","),n=n.split(","),i=i.split(","),a=a.split(",");var s={},o={};return t(s,e,0,1),t(s,n,64,64),t(s,a,1792,64),t(o,r,0,1),t(o,i,64,64),t(o,a,1792,64),[s,o]}(),t.decode._decodeG4=function(e,r,n,i,a,s,o){for(var u=t.decode,h=r<<3,l=0,f="",c=[],d=[],p=0;p<s;p++)d.push(0);d=u._makeDiff(d);for(var v=0,_=0,g=0,m=0,y=0,b=0,w="",E=0,C=8*Math.ceil(s/8);h>>>3<r+n;){g=u._findDiff(d,v+(0==v?0:1),1-y),m=u._findDiff(d,g,y);var D=0;if(1==o&&(D=e[h>>>3]>>>7-(7&h)&1),2==o&&(D=e[h>>>3]>>>(7&h)&1),h++,f+=D,"H"==w){if(null!=u._lens[y][f]){var S=u._lens[y][f];f="",l+=S,S<64&&(u._addNtimes(c,l,y),v+=l,y=1-y,l=0,0==--E&&(w=""))}}else"0001"==f&&(f="",u._addNtimes(c,m-v,y),v=m),"001"==f&&(f="",w="H",E=2),null!=u._dmap[f]&&(_=g+u._dmap[f],u._addNtimes(c,_-v,y),v=_,f="",y=1-y);c.length==s&&""==w&&(u._writeBits(c,i,8*a+b*C),y=0,b++,v=0,d=u._makeDiff(c),c=[])}},t.decode._findDiff=function(t,e,r){for(var n=0;n<t.length;n+=2)if(t[n]>=e&&t[n+1]==r)return t[n]},t.decode._makeDiff=function(t){var e=[];1==t[0]&&e.push(0,1);for(var r=1;r<t.length;r++)t[r-1]!=t[r]&&e.push(r,t[r]);return e.push(t.length,0,t.length,1),e},t.decode._decodeG3=function(e,r,n,i,a,s,o){for(var u=t.decode,h=r<<3,l=0,f="",c=[],d=[],p=0;p<s;p++)c.push(0);for(var v=0,_=0,g=0,m=0,y=0,b=-1,w="",E=0,C=!1,D=8*Math.ceil(s/8);h>>>3<r+n;){g=u._findDiff(d,v+(0==v?0:1),1-y),m=u._findDiff(d,g,y);var S=0;if(1==o&&(S=e[h>>>3]>>>7-(7&h)&1),2==o&&(S=e[h>>>3]>>>(7&h)&1),h++,f+=S,C){if(null!=u._lens[y][f]){var T=u._lens[y][f];f="",l+=T,T<64&&(u._addNtimes(c,l,y),y=1-y,l=0)}}else if("H"==w){if(null!=u._lens[y][f]){T=u._lens[y][f];f="",l+=T,T<64&&(u._addNtimes(c,l,y),v+=l,y=1-y,l=0,0==--E&&(w=""))}}else"0001"==f&&(f="",u._addNtimes(c,m-v,y),v=m),"001"==f&&(f="",w="H",E=2),null!=u._dmap[f]&&(_=g+u._dmap[f],u._addNtimes(c,_-v,y),v=_,f="",y=1-y);f.endsWith("000000000001")&&(b>=0&&u._writeBits(c,i,8*a+b*D),1==o&&(C=1==(e[h>>>3]>>>7-(7&h)&1)),2==o&&(C=1==(e[h>>>3]>>>(7&h)&1)),h++,null==u._decodeG3.allow2D&&(u._decodeG3.allow2D=C),u._decodeG3.allow2D||(C=!0,h--),f="",y=0,b++,v=0,d=u._makeDiff(c),c=[])}c.length==s&&u._writeBits(c,i,8*a+b*D)},t.decode._addNtimes=function(t,e,r){for(var n=0;n<e;n++)t.push(r)},t.decode._writeBits=function(t,e,r){for(var n=0;n<t.length;n++)e[r+n>>>3]|=t[n]<<7-(r+n&7)},t.decode._decodeLZW=function(e,r,n,i){if(null==t.decode._lzwTab){for(var a=new Uint32Array(65535),s=new Uint16Array(65535),o=new Uint8Array(2e6),u=0;u<256;u++)o[u<<2]=u,a[u]=u<<2,s[u]=1;t.decode._lzwTab=[a,s,o]}for(var h=t.decode._copyData,l=t.decode._lzwTab[0],f=t.decode._lzwTab[1],c=(o=t.decode._lzwTab[2],258),d=1032,p=9,v=r<<3,_=0,g=0;_=(e[v>>>3]<<16|e[v+8>>>3]<<8|e[v+16>>>3])>>24-(7&v)-p&(1<<p)-1,v+=p,257!=_;){if(256==_){if(p=9,c=258,d=1032,_=(e[v>>>3]<<16|e[v+8>>>3]<<8|e[v+16>>>3])>>24-(7&v)-p&(1<<p)-1,v+=p,257==_)break;n[i]=_,i++}else if(_<c){var m=l[_],y=f[_];if(h(o,m,n,i,y),i+=y,g>=c)l[c]=d,o[l[c]]=m[0],f[c]=1,d=d+1+3&-4,c++;else l[c]=d,h(o,l[g],o,d,b=f[g]),o[d+b]=o[m],b++,f[c]=b,c++,d=d+b+3&-4;c+1==1<<p&&p++}else{var b;if(g>=c)l[c]=d,f[c]=0,c++;else l[c]=d,h(o,l[g],o,d,b=f[g]),o[d+b]=o[d],b++,f[c]=b,c++,h(o,d,n,i,b),i+=b,d=d+b+3&-4;c+1==1<<p&&p++}g=_}},t.decode._copyData=function(t,e,r,n,i){for(var a=0;a<i;a+=4)r[n+a]=t[e+a],r[n+a+1]=t[e+a+1],r[n+a+2]=t[e+a+2],r[n+a+3]=t[e+a+3]},t.tags={},t.ttypes={256:3,257:3,258:3,259:3,262:3,273:4,274:3,277:3,278:4,279:4,282:5,283:5,284:3,286:5,287:5,296:3,305:2,306:2,338:3,513:4,514:4,34665:4},t._readIFD=function(r,n,i,a,s,o){var u=r.readUshort(n,i);i+=2;var h={};a.push(h),o&&e("   ".repeat(s),a.length-1,">>>----------------");for(var l=0;l<u;l++){var f=r.readUshort(n,i);i+=2;var c=r.readUshort(n,i);i+=2;var d=r.readUint(n,i);i+=4;var p=r.readUint(n,i);i+=4;var v=[];if(1!=c&&7!=c||(v=new Uint8Array(n.buffer,d<5?i-4:p,d)),2==c){var _=d<5?i-4:p;n[_]<128?v.push(r.readASCII(n,_,d-1)):v=new Uint8Array(n.buffer,_,d-1)}if(3==c)for(var g=0;g<d;g++)v.push(r.readUshort(n,(d<3?i-4:p)+2*g));if(4==c)for(g=0;g<d;g++)v.push(r.readUint(n,(d<2?i-4:p)+4*g));if(5==c)for(g=0;g<d;g++)v.push(r.readUint(n,p+8*g)/r.readUint(n,p+8*g+4));if(8==c)for(g=0;g<d;g++)v.push(r.readShort(n,(d<3?i-4:p)+2*g));if(9==c)for(g=0;g<d;g++)v.push(r.readInt(n,(d<2?i-4:p)+4*g));if(10==c)for(g=0;g<d;g++)v.push(r.readInt(n,p+8*g)/r.readInt(n,p+8*g+4));if(11==c)for(g=0;g<d;g++)v.push(r.readFloat(n,p+4*g));if(12==c)for(g=0;g<d;g++)v.push(r.readDouble(n,p+8*g));if(h["t"+f]=v,0!=d&&0==v.length&&e("unknown TIFF tag type: ",c,"num:",d),o&&e("   ".repeat(s),f,c,t.tags[f],v),330==f&&h.t272&&"DSLR-A100"==h.t272[0]);else if(330==f||34665==f||50740==f&&r.readUshort(n,r.readUint(v,0))<300){var m=50740==f?[r.readUint(v,0)]:v,y=[];for(g=0;g<m.length;g++)t._readIFD(r,n,m[g],y,s+1,o);330==f&&(h.subIFD=y),34665==f&&(h.exifIFD=y[0]),50740==f&&(h.dngPrvt=y[0])}if(37500==f){var b=v;if("Nikon"==r.readASCII(b,0,5))h.makerNote=t.decode(b.slice(10).buffer)[0];else if(r.readUshort(n,p)<300){var w=[];t._readIFD(r,n,p,w,s+1,o),h.makerNote=w[0]}}}return o&&e("   ".repeat(s),"<<<---------------"),i},t._writeIFD=function(e,r,n,i){var a=Object.keys(i);e.writeUshort(r,n,a.length);for(var s=(n+=2)+12*a.length+4,o=0;o<a.length;o++){var u=a[o],h=parseInt(u.slice(1)),l=t.ttypes[h];if(null==l)throw new Error("unknown type of tag: "+h);var f=i[u];2==l&&(f=f[0]+"\0");var c=f.length;e.writeUshort(r,n,h),n+=2,e.writeUshort(r,n,l),n+=2,e.writeUint(r,n,c);var d=[-1,1,1,2,4,8,0,0,0,0,0,0,8][l]*c,p=n+=4;if(d>4&&(e.writeUint(r,n,s),p=s),2==l&&e.writeASCII(r,p,f),3==l)for(var v=0;v<c;v++)e.writeUshort(r,p+2*v,f[v]);if(4==l)for(v=0;v<c;v++)e.writeUint(r,p+4*v,f[v]);if(5==l)for(v=0;v<c;v++)e.writeUint(r,p+8*v,Math.round(1e4*f[v])),e.writeUint(r,p+8*v+4,1e4);if(12==l)for(v=0;v<c;v++)e.writeDouble(r,p+8*v,f[v]);d>4&&(s+=d+=1&d),n+=4}return[n,s]},t.toRGBA8=function(t){var r=t.width,n=t.height,i=r*n,a=4*i,s=t.data,o=new Uint8Array(4*i),u=t.t262?t.t262[0]:2,h=t.t258?Math.min(32,t.t258[0]):1;if(0==u)for(var l=Math.ceil(h*r/8),f=0;f<n;f++){var c=f*l,d=f*r;if(1==h)for(var p=0;p<r;p++){var v=d+p<<2,_=s[c+(p>>3)]>>7-(7&p)&1;o[v]=o[v+1]=o[v+2]=255*(1-_),o[v+3]=255}if(4==h)for(p=0;p<r;p++){v=d+p<<2,_=s[c+(p>>1)]>>4-4*(1&p)&15;o[v]=o[v+1]=o[v+2]=17*(15-_),o[v+3]=255}if(8==h)for(p=0;p<r;p++){v=d+p<<2,_=s[c+p];o[v]=o[v+1]=o[v+2]=255-_,o[v+3]=255}}else if(1==u)for(l=Math.ceil(h*r/8),f=0;f<n;f++){c=f*l,d=f*r;if(1==h)for(p=0;p<r;p++){v=d+p<<2,_=s[c+(p>>3)]>>7-(7&p)&1;o[v]=o[v+1]=o[v+2]=255*_,o[v+3]=255}if(2==h)for(p=0;p<r;p++){v=d+p<<2,_=s[c+(p>>2)]>>6-2*(3&p)&3;o[v]=o[v+1]=o[v+2]=85*_,o[v+3]=255}if(8==h)for(p=0;p<r;p++){v=d+p<<2,_=s[c+p];o[v]=o[v+1]=o[v+2]=_,o[v+3]=255}if(16==h)for(p=0;p<r;p++){v=d+p<<2,_=s[c+(2*p+1)];o[v]=o[v+1]=o[v+2]=Math.min(255,_),o[v+3]=255}}else if(2==u){var g=t.t258?t.t258.length:3;if(8==h){if(4==g)for(p=0;p<a;p++)o[p]=s[p];if(3==g)for(p=0;p<i;p++){var m=3*p;o[v=p<<2]=s[m],o[v+1]=s[m+1],o[v+2]=s[m+2],o[v+3]=255}}else{if(4==g)for(p=0;p<i;p++){m=8*p+1;o[v=p<<2]=s[m],o[v+1]=s[m+2],o[v+2]=s[m+4],o[v+3]=s[m+6]}if(3==g)for(p=0;p<i;p++){m=6*p+1;o[v=p<<2]=s[m],o[v+1]=s[m+2],o[v+2]=s[m+4],o[v+3]=255}}}else if(3==u){var y=t.t320;for(p=0;p<i;p++){v=p<<2;var b=s[p];o[v]=y[b]>>8,o[v+1]=y[256+b]>>8,o[v+2]=y[512+b]>>8,o[v+3]=255}}else if(5==u){var w=(g=t.t258?t.t258.length:4)>4?1:0;for(p=0;p<i;p++){v=p<<2;var E=p*g,C=255-s[E],D=255-s[E+1],S=255-s[E+2],T=(255-s[E+3])*(1/255);o[v]=~~(C*T+.5),o[v+1]=~~(D*T+.5),o[v+2]=~~(S*T+.5),o[v+3]=255*(1-w)+s[E+4]*w}}else e("Unknown Photometric interpretation: "+u);return o},t.replaceIMG=function(){for(var e=document.getElementsByTagName("img"),r=["tif","tiff","dng","cr2","nef"],n=0;n<e.length;n++){var i=e[n],a=i.getAttribute("src");if(null!=a){var s=a.split(".").pop().toLowerCase();if(-1!=r.indexOf(s)){var o=new XMLHttpRequest;t._xhrs.push(o),t._imgs.push(i),o.open("GET",a),o.responseType="arraybuffer",o.onload=t._imgLoaded,o.send()}}}},t._xhrs=[],t._imgs=[],t._imgLoaded=function(e){var r=e.target.response,n=t.decode(r),i=n,a=0,s=i[0];n[0].subIFD&&(i=i.concat(n[0].subIFD));for(var o=0;o<i.length;o++){if(!(null==(d=i[o]).t258||d.t258.length<3)){var u=d.t256*d.t257;u>a&&(a=u,s=d)}}t.decodeImage(r,s,n);var h=t.toRGBA8(s),l=s.width,f=s.height,c=t._xhrs.indexOf(e.target),d=t._imgs[c];t._xhrs.splice(c,1),t._imgs.splice(c,1);var p=document.createElement("canvas");p.width=l,p.height=f;var v=p.getContext("2d"),_=v.createImageData(l,f);for(o=0;o<h.length;o++)_.data[o]=h[o];v.putImageData(_,0,0);var g=["style","class","id"];for(o=0;o<g.length;o++)p.setAttribute(g[o],d.getAttribute(g[o]));d.parentNode.replaceChild(p,d)},t._binBE={nextZero:function(t,e){for(;0!=t[e];)e++;return e},readUshort:function(t,e){return t[e]<<8|t[e+1]},readShort:function(e,r){var n=t._binBE.ui8;return n[0]=e[r+1],n[1]=e[r+0],t._binBE.i16[0]},readInt:function(e,r){var n=t._binBE.ui8;return n[0]=e[r+3],n[1]=e[r+2],n[2]=e[r+1],n[3]=e[r+0],t._binBE.i32[0]},readUint:function(e,r){var n=t._binBE.ui8;return n[0]=e[r+3],n[1]=e[r+2],n[2]=e[r+1],n[3]=e[r+0],t._binBE.ui32[0]},readASCII:function(t,e,r){for(var n="",i=0;i<r;i++)n+=String.fromCharCode(t[e+i]);return n},readFloat:function(e,r){for(var n=t._binBE.ui8,i=0;i<4;i++)n[i]=e[r+3-i];return t._binBE.fl32[0]},readDouble:function(e,r){for(var n=t._binBE.ui8,i=0;i<8;i++)n[i]=e[r+7-i];return t._binBE.fl64[0]},writeUshort:function(t,e,r){t[e]=r>>8&255,t[e+1]=255&r},writeUint:function(t,e,r){t[e]=r>>24&255,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=r>>0&255},writeASCII:function(t,e,r){for(var n=0;n<r.length;n++)t[e+n]=r.charCodeAt(n)},writeDouble:function(e,r,n){t._binBE.fl64[0]=n;for(var i=0;i<8;i++)e[r+i]=t._binBE.ui8[7-i]}},t._binBE.ui8=new Uint8Array(8),t._binBE.i16=new Int16Array(t._binBE.ui8.buffer),t._binBE.i32=new Int32Array(t._binBE.ui8.buffer),t._binBE.ui32=new Uint32Array(t._binBE.ui8.buffer),t._binBE.fl32=new Float32Array(t._binBE.ui8.buffer),t._binBE.fl64=new Float64Array(t._binBE.ui8.buffer),t._binLE={nextZero:t._binBE.nextZero,readUshort:function(t,e){return t[e+1]<<8|t[e]},readShort:function(e,r){var n=t._binBE.ui8;return n[0]=e[r+0],n[1]=e[r+1],t._binBE.i16[0]},readInt:function(e,r){var n=t._binBE.ui8;return n[0]=e[r+0],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],t._binBE.i32[0]},readUint:function(e,r){var n=t._binBE.ui8;return n[0]=e[r+0],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],t._binBE.ui32[0]},readASCII:t._binBE.readASCII,readFloat:function(e,r){for(var n=t._binBE.ui8,i=0;i<4;i++)n[i]=e[r+i];return t._binBE.fl32[0]},readDouble:function(e,r){for(var n=t._binBE.ui8,i=0;i<8;i++)n[i]=e[r+i];return t._binBE.fl64[0]}},t._copyTile=function(t,e,r,n,i,a,s,o){for(var u=Math.min(e,i-s),h=Math.min(r,a-o),l=0;l<h;l++)for(var f=(o+l)*i+s,c=l*e,d=0;d<u;d++)n[f+d]=t[c+d]},t.LosslessJpegDecode=function(){function t(t){this.w=t,this.N=0,this._=0,this.G=0}t.prototype={t:function(t){this.N=Math.max(0,Math.min(this.w.length,t))},i:function(){return this.w[this.N++]},l:function(){var t=this.N;return this.N+=2,this.w[t]<<8|this.w[t+1]},J:function(){return 0==this._&&(this.G=this.w[this.N],this.N+=1+(this.G+1>>>8),this._=8),this.G>>>--this._&1},Z:function(t){var e=this._,r=this.G,n=Math.min(e,t);t-=n;for(var i=r>>>(e-=n)&(1<<n)-1;t>0;)r=this.w[this.N],this.N+=1+(r+1>>>8),t-=n=Math.min(8,t),i<<=n,i|=r>>>(e=8-n)&(1<<n)-1;return this._=e,this.G=r,i}};var e={};function r(e){this.z=new t(e),this.D(this.z)}return e.X=function(){return[0,0,-1]},e.s=function(t,r,n){t[e.Y(t,0,n)+2]=r},e.Y=function(t,r,n){if(-1!=t[r+2])return 0;if(0==n)return r;for(var i=0;i<2;i++){0==t[r+i]&&(t[r+i]=t.length,t.push(0),t.push(0),t.push(-1));var a=e.Y(t,t[r+i],n-1);if(0!=a)return a}return 0},e.B=function(t,e){for(var r=0,n=0,i=e._,a=e.G,s=e.N;;)if(0==i&&(s+=1+((a=e.w[s])+1>>>8),i=8),-1!=(n=t[(r=t[r+(a>>>--i&1)])+2]))return e._=i,e.G=a,e.N=s,n;return-1},r.prototype={$:function(t,e){this.Q=t.i(),this.F=t.l(),this.o=t.l();var r=this.O=t.i();this.L=[];for(var n=0;n<r;n++){var i=t.i();t.i();t.i(),this.L[i]=n}t.t(t.N+e-(6+3*r))},e:function(){var t=0,r=this.z.i();null==this.H&&(this.H={});for(var n=this.H[r]=e.X(),i=[],a=0;a<16;a++)i[a]=this.z.i(),t+=i[a];for(a=0;a<16;a++)for(var s=0;s<i[a];s++)e.s(n,this.z.i(),a+1);return t+17},W:function(t){for(;t>0;)t-=this.e()},p:function(t,e){var r=t.i();this.U||(this.U=[]);for(var n=0;n<r;n++){var i=t.i(),a=t.i();this.U[this.L[i]]=this.H[a>>>4]}this.g=t.i(),t.t(t.N+e-(2+2*r))},D:function(t){var e=!1;if((n=t.l())===r.q)do{var n=t.l(),i=t.l()-2;switch(n){case r.m:this.$(t,i);break;case r.K:this.W(i);break;case r.V:this.p(t,i),e=!0;break;default:t.t(t.N+i)}}while(!e)},I:function(t,r){var n=e.B(r,t);if(16==n)return-32768;var i=t.Z(n);return 0==(i&1<<n-1)&&(i-=(1<<n)-1),i},B:function(t,e){for(var r=this.z,n=this.O,i=this.F,a=this.I,s=this.g,o=this.o*n,u=this.U,h=0;h<n;h++)t[h]=a(r,u[h])+(1<<this.Q-1);for(var l=n;l<o;l+=n)for(h=0;h<n;h++)t[l+h]=a(r,u[h])+t[l+h-n];for(var f=e,c=1;c<i;c++){for(h=0;h<n;h++)t[f+h]=a(r,u[h])+t[f+h-e];for(l=n;l<o;l+=n)for(h=0;h<n;h++){var d=f+l+h,p=t[d-n];6==s&&(p=t[d-e]+(p-t[d-n-e]>>>1)),t[d]=p+a(r,u[h])}f+=e}}},r.m=65475,r.K=65476,r.q=65496,r.V=65498,function(t){var e=new r(t),n=new(e.Q>8?Uint16Array:Uint8Array)(e.o*e.F*e.O),i=e.o*e.O;return e.B(n,i),n}}()}(t,"function"==typeof require?require("pako"):self.pako)}(),function(){function t(t){if(!t)throw Error("assert :P")}function e(t,e,r){for(var n=0;4>n;n++)if(t[e+n]!=r.charCodeAt(n))return!0;return!1}function r(t,e,r,n,i){for(var a=0;a<i;a++)t[e+a]=r[n+a]}function n(t,e,r,n){for(var i=0;i<n;i++)t[e+i]=r}function i(t){return new Int32Array(t)}function a(t,e){for(var r=[],n=0;n<t;n++)r.push(new e);return r}function s(t,e){var r=[];return function t(r,n,i){for(var a=i[n],s=0;s<a&&(r.push(i.length>n+1?[]:new e),!(i.length<n+1));s++)t(r[s],n+1,i)}(r,0,t),r}window.WebPDecoder=function(){function o(){i(55)}function u(t,e){for(var r=1<<e-1>>>0;t&r;)r>>>=1;return r?(t&r-1)+r:t}function h(e,r,n,i,a){t(!(i%n));do{e[r+(i-=n)]=a}while(0<i)}function l(e,r,n,a,s){if(t(2328>=s),512>=s)var o=i(512);else if(null==(o=i(s)))return 0;return function(e,r,n,a,s,o){var l,c,d=r,p=1<<n,v=i(16),_=i(16);for(t(0!=s),t(null!=a),t(null!=e),t(0<n),c=0;c<s;++c){if(15<a[c])return 0;++v[a[c]]}if(v[0]==s)return 0;for(_[1]=0,l=1;15>l;++l){if(v[l]>1<<l)return 0;_[l+1]=_[l]+v[l]}for(c=0;c<s;++c)l=a[c],0<a[c]&&(o[_[l]++]=c);if(1==_[15])return(a=new f).g=0,a.value=o[0],h(e,d,1,p,a),p;var g,m=-1,y=p-1,b=0,w=1,E=1,C=1<<n;for(c=0,l=1,s=2;l<=n;++l,s<<=1){if(w+=E<<=1,0>(E-=v[l]))return 0;for(;0<v[l];--v[l])(a=new f).g=l,a.value=o[c++],h(e,d+b,s,C,a),b=u(b,l)}for(l=n+1,s=2;15>=l;++l,s<<=1){if(w+=E<<=1,0>(E-=v[l]))return 0;for(;0<v[l];--v[l]){if(a=new f,(b&y)!=m){for(d+=C,g=1<<(m=l)-n;15>m&&!(0>=(g-=v[m]));)++m,g<<=1;p+=C=1<<(g=m-n),e[r+(m=b&y)].g=g+n,e[r+m].value=d-r-m}a.g=l-n,a.value=o[c++],h(e,d+(b>>n),s,C,a),b=u(b,l)}}return w!=2*_[15]-1?0:p}(e,r,n,a,s,o)}function f(){this.value=this.g=0}function c(){this.value=this.g=0}function d(){this.G=a(5,f),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Lr,c)}function p(e,r,n,i){t(null!=e),t(null!=r),t(2147483648>i),e.Ca=254,e.I=0,e.b=-8,e.Ka=0,e.oa=r,e.pa=n,e.Jd=r,e.Yc=n+i,e.Zc=4<=i?n+i-4+1:n,T(e)}function v(t,e){for(var r=0;0<e--;)r|=F(t,128)<<e;return r}function _(t,e){var r=v(t,e);return x(t)?-r:r}function g(e,r,n,i){var a,s=0;for(t(null!=e),t(null!=r),t(4294967288>i),e.Sb=i,e.Ra=0,e.u=0,e.h=0,4<i&&(i=4),a=0;a<i;++a)s+=r[n+a]<<8*a;e.Ra=s,e.bb=i,e.oa=r,e.pa=n}function m(t){for(;8<=t.u&&t.bb<t.Sb;)t.Ra>>>=8,t.Ra+=t.oa[t.pa+t.bb]<<Gr-8>>>0,++t.bb,t.u-=8;C(t)&&(t.h=1,t.u=0)}function y(e,r){if(t(0<=r),!e.h&&r<=zr){var n=E(e)&Nr[r];return e.u+=r,m(e),n}return e.h=1,e.u=0}function b(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function w(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function E(t){return t.Ra>>>(t.u&Gr-1)>>>0}function C(e){return t(e.bb<=e.Sb),e.h||e.bb==e.Sb&&e.u>Gr}function D(t,e){t.u=e,t.h=C(t)}function S(e){e.u>=jr&&(t(e.u>=jr),m(e))}function T(e){t(null!=e&&null!=e.oa),e.pa<e.Zc?(e.I=(e.oa[e.pa++]|e.I<<8)>>>0,e.b+=8):(t(null!=e&&null!=e.oa),e.pa<e.Yc?(e.b+=8,e.I=e.oa[e.pa++]|e.I<<8):e.Ka?e.b=0:(e.I<<=8,e.b+=8,e.Ka=1))}function x(t){return v(t,1)}function F(t,e){var r=t.Ca;0>t.b&&T(t);var n=t.b,i=r*e>>>8,a=(t.I>>>n>i)+0;for(a?(r-=i,t.I-=i+1<<n>>>0):r=i+1,n=r,i=0;256<=n;)i+=8,n>>=8;return n=7^i+qr[n],t.b-=n,t.Ca=(r<<n)-1,a}function A(t,e,r){t[e+0]=r>>24&255,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=r>>0&255}function P(t,e){return t[e+0]<<0|t[e+1]<<8}function M(t,e){return P(t,e)|t[e+2]<<16}function I(t,e){return P(t,e)|P(t,e+2)<<16}function k(e,r){var n=1<<r;return t(null!=e),t(0<r),e.X=i(n),null==e.X?0:(e.Mb=32-r,e.Xa=r,1)}function U(e,n){t(null!=e),t(null!=n),t(e.Xa==n.Xa),r(n.X,0,e.X,0,1<<n.Xa)}function O(){this.X=[],this.Xa=this.Mb=0}function B(e,r,n,i){t(null!=n),t(null!=i);var a=n[0],s=i[0];return 0==a&&(a=(e*s+r/2)/r),0==s&&(s=(r*a+e/2)/e),0>=a||0>=s?0:(n[0]=a,i[0]=s,1)}function R(t,e){return t+(1<<e)-1>>>e}function L(t,e){return((4278255360&t)+(4278255360&e)>>>0&4278255360)+((16711935&t)+(16711935&e)>>>0&16711935)>>>0}function N(t,e){self[e]=function(e,r,n,i,a,s,o){var u;for(u=0;u<a;++u){var h=self[t](s[o+u-1],n,i+u);s[o+u]=L(e[r+u],h)}}}function z(){this.ud=this.hd=this.jd=0}function G(t,e){return((4278124286&(t^e))>>>1)+(t&e)>>>0}function j(t){return 0<=t&&256>t?t:0>t?0:255<t?255:void 0}function q(t,e){return j(t+(t-e+.5>>1))}function H(t,e,r){return Math.abs(e-r)-Math.abs(t-r)}function X(t,e,r,n,i,a,s){for(n=a[s-1],r=0;r<i;++r)a[s+r]=n=L(t[e+r],n)}function W(t,e,r,n,i){var a;for(a=0;a<r;++a){var s=t[e+a],o=s>>8&255,u=16711935&(u=(u=16711935&s)+((o<<16)+o));n[i+a]=(4278255360&s)+u>>>0}}function V(t,e){e.jd=t>>0&255,e.hd=t>>8&255,e.ud=t>>16&255}function Z(t,e,r,n,i,a){var s;for(s=0;s<n;++s){var o=e[r+s],u=o>>>8,h=o,l=255&(l=(l=o>>>16)+((t.jd<<24>>24)*(u<<24>>24)>>>5));h=255&(h=(h=h+((t.hd<<24>>24)*(u<<24>>24)>>>5))+((t.ud<<24>>24)*(l<<24>>24)>>>5));i[a+s]=(4278255360&o)+(l<<16)+h}}function Y(t,e,r,n,i){self[e]=function(t,e,r,a,s,o,u,h,l){for(a=u;a<h;++a)for(u=0;u<l;++u)s[o++]=i(r[n(t[e++])])},self[t]=function(t,e,a,s,o,u,h){var l=8>>t.b,f=t.Ea,c=t.K[0],d=t.w;if(8>l)for(t=(1<<t.b)-1,d=(1<<l)-1;e<a;++e){var p,v=0;for(p=0;p<f;++p)p&t||(v=n(s[o++])),u[h++]=i(c[v&d]),v>>=l}else self["VP8LMapColor"+r](s,o,c,d,u,h,e,a,f)}}function J(t,e,r,n,i){for(r=e+r;e<r;){var a=t[e++];n[i++]=a>>16&255,n[i++]=a>>8&255,n[i++]=a>>0&255}}function K(t,e,r,n,i){for(r=e+r;e<r;){var a=t[e++];n[i++]=a>>16&255,n[i++]=a>>8&255,n[i++]=a>>0&255,n[i++]=a>>24&255}}function Q(t,e,r,n,i){for(r=e+r;e<r;){var a=(s=t[e++])>>16&240|s>>12&15,s=s>>0&240|s>>28&15;n[i++]=a,n[i++]=s}}function $(t,e,r,n,i){for(r=e+r;e<r;){var a=(s=t[e++])>>16&248|s>>13&7,s=s>>5&224|s>>3&31;n[i++]=a,n[i++]=s}}function tt(t,e,r,n,i){for(r=e+r;e<r;){var a=t[e++];n[i++]=a>>0&255,n[i++]=a>>8&255,n[i++]=a>>16&255}}function et(t,e,n,i,a,s){if(0==s)for(n=e+n;e<n;)A(i,((s=t[e++])[0]>>24|s[1]>>8&65280|s[2]<<8&16711680|s[3]<<24)>>>0),a+=32;else r(i,a,t,e,n)}function rt(t,e){self[e][0]=self[t+"0"],self[e][1]=self[t+"1"],self[e][2]=self[t+"2"],self[e][3]=self[t+"3"],self[e][4]=self[t+"4"],self[e][5]=self[t+"5"],self[e][6]=self[t+"6"],self[e][7]=self[t+"7"],self[e][8]=self[t+"8"],self[e][9]=self[t+"9"],self[e][10]=self[t+"10"],self[e][11]=self[t+"11"],self[e][12]=self[t+"12"],self[e][13]=self[t+"13"],self[e][14]=self[t+"0"],self[e][15]=self[t+"0"]}function nt(t){return t==qn||t==Hn||t==Xn||t==Wn}function it(){this.eb=[],this.size=this.A=this.fb=0}function at(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function st(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new it,this.f.kb=new at,this.sd=null}function ot(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ut(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ht(t){return alert("todo:WebPSamplerProcessPlane"),t.T}function lt(t,e){var n=t.T,i=e.ba.f.RGBA,a=i.eb,s=i.fb+t.ka*i.A,o=gi[e.ba.S],u=t.y,h=t.O,l=t.f,f=t.N,c=t.ea,d=t.W,p=e.cc,v=e.dc,_=e.Mc,g=e.Nc,m=t.ka,y=t.ka+t.T,b=t.U,w=b+1>>1;for(0==m?o(u,h,null,null,l,f,c,d,l,f,c,d,a,s,null,null,b):(o(e.ec,e.fc,u,h,p,v,_,g,l,f,c,d,a,s-i.A,a,s,b),++n);m+2<y;m+=2)p=l,v=f,_=c,g=d,f+=t.Rc,d+=t.Rc,s+=2*i.A,o(u,(h+=2*t.fa)-t.fa,u,h,p,v,_,g,l,f,c,d,a,s-i.A,a,s,b);return h+=t.fa,t.j+y<t.o?(r(e.ec,e.fc,u,h,b),r(e.cc,e.dc,l,f,w),r(e.Mc,e.Nc,c,d,w),n--):1&y||o(u,h,null,null,l,f,c,d,l,f,c,d,a,s+i.A,null,null,b),n}function ft(e,r,n){var i=e.F,a=[e.J];if(null!=i){var s=e.U,o=r.ba.S,u=o==zn||o==Xn;r=r.ba.f.RGBA;var h=[0],l=e.ka;h[0]=e.T,e.Kb&&(0==l?--h[0]:(--l,a[0]-=e.width),e.j+e.ka+e.T==e.o&&(h[0]=e.o-e.j-l));var f=r.eb;l=r.fb+l*r.A;e=Sn(i,a[0],e.width,s,h,f,l+(u?0:3),r.A),t(n==h),e&&nt(o)&&Cn(f,l,u,s,h,r.A)}return 0}function ct(t){var e=t.ma,r=e.ba.S,n=11>r,a=r==Rn||r==Nn||r==zn||r==Gn||12==r||nt(r);if(e.memory=null,e.Ib=null,e.Jb=null,e.Nd=null,!Or(e.Oa,t,a?11:12))return 0;if(a&&nt(r)&&mr(),t.da)alert("todo:use_scaling");else{if(n){if(e.Ib=ht,t.Kb){if(r=t.U+1>>1,e.memory=i(t.U+2*r),null==e.memory)return 0;e.ec=e.memory,e.fc=0,e.cc=e.ec,e.dc=e.fc+t.U,e.Mc=e.cc,e.Nc=e.dc+r,e.Ib=lt,mr()}}else alert("todo:EmitYUV");a&&(e.Jb=ft,n&&_r())}if(n&&!Mi){for(t=0;256>t;++t)Ii[t]=89858*(t-128)+Ti>>Si,Oi[t]=-22014*(t-128)+Ti,Ui[t]=-45773*(t-128),ki[t]=113618*(t-128)+Ti>>Si;for(t=xi;t<Fi;++t)e=76283*(t-16)+Ti>>Si,Bi[t-xi]=Xt(e,255),Ri[t-xi]=Xt(e+8>>4,15);Mi=1}return 1}function dt(e){var r=e.ma,n=e.U,i=e.T;return t(!(1&e.ka)),0>=n||0>=i?0:(n=r.Ib(e,r),null!=r.Jb&&r.Jb(e,r,n),r.Dc+=n,1)}function pt(t){t.ma.memory=null}function vt(t,e,r,n){return 47!=y(t,8)?0:(e[0]=y(t,14)+1,r[0]=y(t,14)+1,n[0]=y(t,1),0!=y(t,3)?0:!t.h)}function _t(t,e){if(4>t)return t+1;var r=t-2>>1;return(2+(1&t)<<r)+y(e,r)+1}function gt(t,e){return 120<e?e-120:1<=(r=((r=Qn[e-1])>>4)*t+(8-(15&r)))?r:1;var r}function mt(t,e,r){var n=E(r),i=t[e+=255&n].g-8;return 0<i&&(D(r,r.u+8),n=E(r),e+=t[e].value,e+=n&(1<<i)-1),D(r,r.u+t[e].g),t[e].value}function yt(e,r,n){return n.g+=e.g,n.value+=e.value<<r>>>0,t(8>=n.g),e.g}function bt(e,r,n){var i=e.xc;return t((r=0==i?0:e.vc[e.md*(n>>i)+(r>>i)])<e.Wb),e.Ya[r]}function wt(e,n,i,a){var s=e.ab,o=e.c*n,u=e.C;n=u+n;var h=i,l=a;for(a=e.Ta,i=e.Ua;0<s--;){var f=e.gc[s],c=u,d=n,p=h,v=l,_=(l=a,h=i,f.Ea);switch(t(c<d),t(d<=f.nc),f.hc){case 2:Wr(p,v,(d-c)*_,l,h);break;case 0:var g=c,m=d,y=l,b=h,w=(T=f).Ea;0==g&&(Hr(p,v,null,null,1,y,b),X(p,v+1,0,0,w-1,y,b+1),v+=w,b+=w,++g);for(var E=1<<T.b,C=E-1,D=R(w,T.b),S=T.K,T=T.w+(g>>T.b)*D;g<m;){var x=S,F=T,A=1;for(Xr(p,v,y,b-w,1,y,b);A<w;){var P=(A&~C)+E;P>w&&(P=w),(0,Kr[x[F++]>>8&15])(p,v+ +A,y,b+A-w,P-A,y,b+A),A=P}v+=w,b+=w,++g&C||(T+=D)}d!=f.nc&&r(l,h-_,l,h+(d-c-1)*_,_);break;case 1:for(_=p,m=v,w=(p=f.Ea)-(b=p&~(y=(v=1<<f.b)-1)),g=R(p,f.b),E=f.K,f=f.w+(c>>f.b)*g;c<d;){for(C=E,D=f,S=new z,T=m+b,x=m+p;m<T;)V(C[D++],S),Qr(S,_,m,v,l,h),m+=v,h+=v;m<x&&(V(C[D++],S),Qr(S,_,m,w,l,h),m+=w,h+=w),++c&y||(f+=g)}break;case 3:if(p==l&&v==h&&0<f.b){for(m=l,p=_=h+(d-c)*_-(b=(d-c)*R(f.Ea,f.b)),v=l,y=h,g=[],b=(w=b)-1;0<=b;--b)g[b]=v[y+b];for(b=w-1;0<=b;--b)m[p+b]=g[b];Vr(f,c,d,l,_,l,h)}else Vr(f,c,d,p,v,l,h)}h=a,l=i}l!=i&&r(a,i,h,l,o)}function Et(e,r){var n=e.V,i=e.Ba+e.c*e.C,a=r-e.C;if(t(r<=e.l.o),t(16>=a),0<a){var s=e.l,o=e.Ta,u=e.Ua,h=s.width;if(wt(e,a,n,i),a=u=[u],t((n=e.C)<(i=r)),t(s.v<s.va),i>s.o&&(i=s.o),n<s.j){var l=s.j-n;n=s.j;a[0]+=l*h}if(n>=i?n=0:(a[0]+=4*s.v,s.ka=n-s.j,s.U=s.va-s.v,s.T=i-n,n=1),n){if(u=u[0],11>(n=e.ca).S){var f=n.f.RGBA,c=(i=n.S,a=s.U,s=s.T,l=f.eb,f.A),d=s;for(f=f.fb+e.Ma*f.A;0<d--;){var p=o,v=u,_=a,g=l,m=f;switch(i){case Bn:$r(p,v,_,g,m);break;case Rn:tn(p,v,_,g,m);break;case qn:tn(p,v,_,g,m),Cn(g,m,0,_,1,0);break;case Ln:nn(p,v,_,g,m);break;case Nn:et(p,v,_,g,m,1);break;case Hn:et(p,v,_,g,m,1),Cn(g,m,0,_,1,0);break;case zn:et(p,v,_,g,m,0);break;case Xn:et(p,v,_,g,m,0),Cn(g,m,1,_,1,0);break;case Gn:en(p,v,_,g,m);break;case Wn:en(p,v,_,g,m),Dn(g,m,_,1,0);break;case jn:rn(p,v,_,g,m);break;default:t(0)}u+=h,f+=c}e.Ma+=s}else alert("todo:EmitRescaledRowsYUVA");t(e.Ma<=n.height)}}e.C=r,t(e.C<=e.i)}function Ct(t){var e;if(0<t.ua)return 0;for(e=0;e<t.Wb;++e){var r=t.Ya[e].G,n=t.Ya[e].H;if(0<r[1][n[1]+0].g||0<r[2][n[2]+0].g||0<r[3][n[3]+0].g)return 0}return 1}function Dt(e,r,n,i,a,s){if(0!=e.Z){var o=e.qd,u=e.rd;for(t(null!=_i[e.Z]);r<n;++r)_i[e.Z](o,u,i,a,i,a,s),o=i,u=a,a+=s;e.qd=o,e.rd=u}}function St(e,r){var n=e.l.ma,i=0==n.Z||1==n.Z?e.l.j:e.C;i=e.C<i?i:e.C;if(t(r<=e.l.o),r>i){var a=e.l.width,s=n.ca,o=n.tb+a*i,u=e.V,h=e.Ba+e.c*i,l=e.gc;t(1==e.ab),t(3==l[0].hc),Yr(l[0],i,r,u,h,s,o),Dt(n,i,r,s,o,a)}e.C=e.Ma=r}function Tt(e,r,n,i,a,s,o){var u=e.$/i,h=e.$%i,l=e.m,f=e.s,c=n+e.$,d=c;a=n+i*a;var p=n+i*s,v=280+f.ua,_=e.Pb?u:16777216,g=0<f.ua?f.Wa:null,m=f.wc,y=c<p?bt(f,h,u):null;t(e.C<s),t(p<=a);var b=!1;t:for(;;){for(;b||c<p;){var w=0;if(u>=_){var T=c-n;t((_=e).Pb),_.wd=_.m,_.xd=T,0<_.s.ua&&U(_.s.Wa,_.s.vb),_=u+ti}if(h&m||(y=bt(f,h,u)),t(null!=y),y.Qb&&(r[c]=y.qb,b=!0),!b)if(S(l),y.jc){w=l,T=r;var x=c,F=y.pd[E(w)&Lr-1];t(y.jc),256>F.g?(D(w,w.u+F.g),T[x]=F.value,w=0):(D(w,w.u+F.g-256),t(256<=F.value),w=F.value),0==w&&(b=!0)}else w=mt(y.G[0],y.H[0],l);if(l.h)break;if(b||256>w){if(!b)if(y.nd)r[c]=(y.qb|w<<8)>>>0;else{if(S(l),b=mt(y.G[1],y.H[1],l),S(l),T=mt(y.G[2],y.H[2],l),x=mt(y.G[3],y.H[3],l),l.h)break;r[c]=(x<<24|b<<16|w<<8|T)>>>0}if(b=!1,++c,++h>=i&&(h=0,++u,null!=o&&u<=s&&!(u%16)&&o(e,u),null!=g))for(;d<c;)w=r[d++],g.X[(506832829*w&4294967295)>>>g.Mb]=w}else if(280>w){if(w=_t(w-256,l),T=mt(y.G[4],y.H[4],l),S(l),T=gt(i,T=_t(T,l)),l.h)break;if(c-n<T||a-c<w)break t;for(x=0;x<w;++x)r[c+x]=r[c+x-T];for(c+=w,h+=w;h>=i;)h-=i,++u,null!=o&&u<=s&&!(u%16)&&o(e,u);if(t(c<=a),h&m&&(y=bt(f,h,u)),null!=g)for(;d<c;)w=r[d++],g.X[(506832829*w&4294967295)>>>g.Mb]=w}else{if(!(w<v))break t;for(b=w-280,t(null!=g);d<c;)w=r[d++],g.X[(506832829*w&4294967295)>>>g.Mb]=w;w=c,t(!(b>>>(T=g).Xa)),r[w]=T.X[b],b=!0}b||t(l.h==C(l))}if(e.Pb&&l.h&&c<a)t(e.m.h),e.a=5,e.m=e.wd,e.$=e.xd,0<e.s.ua&&U(e.s.vb,e.s.Wa);else{if(l.h)break t;null!=o&&o(e,u>s?s:u),e.a=0,e.$=c-n}return 1}return e.a=3,0}function xt(e){t(null!=e),e.vc=null,e.yc=null,e.Ya=null;var r=e.Wa;null!=r&&(r.X=null),e.vb=null,t(null!=e)}function Ft(){var t=new sr;return null==t?null:(t.a=0,t.xb=vi,rt("Predictor","VP8LPredictors"),rt("Predictor","VP8LPredictors_C"),rt("PredictorAdd","VP8LPredictorsAdd"),rt("PredictorAdd","VP8LPredictorsAdd_C"),Wr=W,Qr=Z,$r=J,tn=K,en=Q,rn=$,nn=tt,self.VP8LMapColor32b=Zr,self.VP8LMapColor8b=Jr,t)}function At(e,r,s,o,u){var h=1,c=[e],p=[r],v=o.m,_=o.s,g=null,m=0;t:for(;;){if(s)for(;h&&y(v,1);){var b=c,w=p,C=o,T=1,x=C.m,F=C.gc[C.ab],A=y(x,2);if(C.Oc&1<<A)h=0;else{switch(C.Oc|=1<<A,F.hc=A,F.Ea=b[0],F.nc=w[0],F.K=[null],++C.ab,t(4>=C.ab),A){case 0:case 1:F.b=y(x,3)+2,T=At(R(F.Ea,F.b),R(F.nc,F.b),0,C,F.K),F.K=F.K[0];break;case 3:var P,M=y(x,8)+1,I=16<M?0:4<M?1:2<M?2:3;if(b[0]=R(F.Ea,I),F.b=I,P=T=At(M,1,0,C,F.K)){var U,O=M,B=F,N=1<<(8>>B.b),z=i(N);if(null==z)P=0;else{var G=B.K[0],j=B.w;for(z[0]=B.K[0][0],U=1;U<1*O;++U)z[U]=L(G[j+U],z[U-1]);for(;U<4*N;++U)z[U]=0;B.K[0]=null,B.K[0]=z,P=1}}T=P;break;case 2:break;default:t(0)}h=T}}if(c=c[0],p=p[0],h&&y(v,1)&&!(h=1<=(m=y(v,4))&&11>=m)){o.a=3;break t}var q;if(q=h)e:{var H,X,W,V=o,Z=c,Y=p,J=m,K=s,Q=V.m,$=V.s,tt=[null],et=1,rt=0,nt=$n[J];r:for(;;){if(K&&y(Q,1)){var it=y(Q,3)+2,at=R(Z,it),st=R(Y,it),ot=at*st;if(!At(at,st,0,V,tt))break r;for(tt=tt[0],$.xc=it,H=0;H<ot;++H){var ut=tt[H]>>8&65535;tt[H]=ut,ut>=et&&(et=ut+1)}}if(Q.h)break r;for(X=0;5>X;++X){var ht=Yn[X];!X&&0<J&&(ht+=1<<J),rt<ht&&(rt=ht)}var lt=a(et*nt,f),ft=et,ct=a(ft,d);if(null==ct)var dt=null;else t(65536>=ft),dt=ct;var pt=i(rt);if(null==dt||null==pt||null==lt){V.a=1;break r}var vt=lt;for(H=W=0;H<et;++H){var _t=dt[H],gt=_t.G,mt=_t.H,bt=0,wt=1,Et=0;for(X=0;5>X;++X){ht=Yn[X],gt[X]=vt,mt[X]=W,!X&&0<J&&(ht+=1<<J);n:{var Ct,Dt=ht,St=V,Ft=pt,Pt=vt,Mt=W,It=0,kt=St.m,Ut=y(kt,1);if(n(Ft,0,0,Dt),Ut){var Ot=y(kt,1)+1,Bt=y(kt,1),Rt=y(kt,0==Bt?1:8);Ft[Rt]=1,2==Ot&&(Ft[Rt=y(kt,8)]=1);var Lt=1}else{var Nt=i(19),zt=y(kt,4)+4;if(19<zt){St.a=3;var Gt=0;break n}for(Ct=0;Ct<zt;++Ct)Nt[Kn[Ct]]=y(kt,3);var jt=void 0,qt=void 0,Ht=St,Xt=Nt,Wt=Dt,Vt=Ft,Zt=0,Yt=Ht.m,Jt=8,Kt=a(128,f);i:for(;l(Kt,0,7,Xt,19);){if(y(Yt,1)){var Qt=2+2*y(Yt,3);if((jt=2+y(Yt,Qt))>Wt)break i}else jt=Wt;for(qt=0;qt<Wt&&jt--;){S(Yt);var $t=Kt[0+(127&E(Yt))];D(Yt,Yt.u+$t.g);var te=$t.value;if(16>te)Vt[qt++]=te,0!=te&&(Jt=te);else{var ee=16==te,re=te-16,ne=Zn[re],ie=y(Yt,Vn[re])+ne;if(qt+ie>Wt)break i;for(var ae=ee?Jt:0;0<ie--;)Vt[qt++]=ae}}Zt=1;break i}Zt||(Ht.a=3),Lt=Zt}(Lt=Lt&&!kt.h)&&(It=l(Pt,Mt,8,Ft,Dt)),Lt&&0!=It?Gt=It:(St.a=3,Gt=0)}if(0==Gt)break r;if(wt&&1==Jn[X]&&(wt=0==vt[W].g),bt+=vt[W].g,W+=Gt,3>=X){var se,oe=pt[0];for(se=1;se<ht;++se)pt[se]>oe&&(oe=pt[se]);Et+=oe}}if(_t.nd=wt,_t.Qb=0,wt&&(_t.qb=(gt[3][mt[3]+0].value<<24|gt[1][mt[1]+0].value<<16|gt[2][mt[2]+0].value)>>>0,0==bt&&256>gt[0][mt[0]+0].value&&(_t.Qb=1,_t.qb+=gt[0][mt[0]+0].value<<8)),_t.jc=!_t.Qb&&6>Et,_t.jc){var ue,he=_t;for(ue=0;ue<Lr;++ue){var le=ue,fe=he.pd[le],ce=he.G[0][he.H[0]+le];256<=ce.value?(fe.g=ce.g+256,fe.value=ce.value):(fe.g=0,fe.value=0,le>>=yt(ce,8,fe),le>>=yt(he.G[1][he.H[1]+le],16,fe),le>>=yt(he.G[2][he.H[2]+le],0,fe),yt(he.G[3][he.H[3]+le],24,fe))}}}$.vc=tt,$.Wb=et,$.Ya=dt,$.yc=lt,q=1;break e}q=0}if(!(h=q)){o.a=3;break t}if(0<m){if(_.ua=1<<m,!k(_.Wa,m)){o.a=1,h=0;break t}}else _.ua=0;var de=o,pe=c,ve=p,_e=de.s,ge=_e.xc;if(de.c=pe,de.i=ve,_e.md=R(pe,ge),_e.wc=0==ge?-1:(1<<ge)-1,s){o.xb=pi;break t}if(null==(g=i(c*p))){o.a=1,h=0;break t}h=(h=Tt(o,g,0,c,p,p,null))&&!v.h;break t}return h?(null!=u?u[0]=g:(t(null==g),t(s)),o.$=0,s||xt(_)):xt(_),h}function Pt(e,r){var n=e.c*e.i,a=n+r+16*r;return t(e.c<=r),e.V=i(a),null==e.V?(e.Ta=null,e.Ua=0,e.a=1,0):(e.Ta=e.V,e.Ua=e.Ba+n+r,1)}function Mt(e,r){var n=e.C,i=r-n,a=e.V,s=e.Ba+e.c*n;for(t(r<=e.l.o);0<i;){var o=16<i?16:i,u=e.l.ma,h=e.l.width,l=h*o,f=u.ca,c=u.tb+h*n,d=e.Ta,p=e.Ua;wt(e,o,a,s),Tn(d,p,f,c,l),Dt(u,n,n+o,f,c,h),i-=o,a+=o*e.c,n+=o}t(n==r),e.C=e.Ma=r}function It(){this.ub=this.yd=this.td=this.Rb=0}function kt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ut(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Ot(){this.Yb=function(){var t=[];return function t(e,r,n){for(var i=n[r],a=0;a<i&&(e.push(n.length>r+1?[]:0),!(n.length<r+1));a++)t(e[a],r+1,n)}(t,0,[3,11]),t}()}function Bt(){this.jb=i(3),this.Wc=s([4,8],Ot),this.Xc=s([4,17],Ot)}function Rt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Lt(){this.ld=this.La=this.dd=this.tc=0}function Nt(){this.Na=this.la=0}function zt(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Gt(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function jt(){this.uc=this.M=this.Nb=0,this.wa=Array(new Lt),this.Y=0,this.ya=Array(new Gt),this.aa=0,this.l=new Wt}function qt(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Ht(){this.cb=this.a=0,this.sc="",this.m=new b,this.Od=new It,this.Kc=new kt,this.ed=new Rt,this.Qa=new Ut,this.Ic=this.$c=this.Aa=0,this.D=new jt,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,b),this.ia=0,new o,this.pb=a(4,zt),this.Pa=new Bt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new qt),this.Hd=0,this.rb=Array(new Nt),this.sb=0,this.wa=Array(new Lt),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Gt),this.L=this.aa=0,this.gd=s([4,2],Lt),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Xt(t,e){return 0>t?0:t>e?e:t}function Wt(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Vt(){var t=new Ht;return null!=t&&(t.a=0,t.sc="OK",t.cb=0,t.Xb=0,ni||(ni=Kt)),t}function Zt(t,e,r){return 0==t.a&&(t.a=e,t.sc=r,t.cb=0),0}function Yt(t,e,r){return 3<=r&&157==t[e+0]&&1==t[e+1]&&42==t[e+2]}function Jt(e,r){if(null==e)return 0;if(e.a=0,e.sc="OK",null==r)return Zt(e,2,"null VP8Io passed to VP8GetHeaders()");var i=r.data,a=r.w,s=r.ha;if(4>s)return Zt(e,7,"Truncated header.");var o=i[a+0]|i[a+1]<<8|i[a+2]<<16,u=e.Od;if(u.Rb=!(1&o),u.td=o>>1&7,u.yd=o>>4&1,u.ub=o>>5,3<u.td)return Zt(e,3,"Incorrect keyframe parameters.");if(!u.yd)return Zt(e,4,"Frame not displayable.");a+=3,s-=3;var h=e.Kc;if(u.Rb){if(7>s)return Zt(e,7,"cannot parse picture header");if(!Yt(i,a,s))return Zt(e,3,"Bad code word");h.c=16383&(i[a+4]<<8|i[a+3]),h.Td=i[a+4]>>6,h.i=16383&(i[a+6]<<8|i[a+5]),h.Ud=i[a+6]>>6,a+=7,s-=7,e.za=h.c+15>>4,e.Ub=h.i+15>>4,r.width=h.c,r.height=h.i,r.Da=0,r.j=0,r.v=0,r.va=r.width,r.o=r.height,r.da=0,r.ib=r.width,r.hb=r.height,r.U=r.width,r.T=r.height,n((o=e.Pa).jb,0,255,o.jb.length),t(null!=(o=e.Qa)),o.Cb=0,o.Bb=0,o.Fb=1,n(o.Zb,0,0,o.Zb.length),n(o.Lb,0,0,o.Lb)}if(u.ub>s)return Zt(e,7,"bad partition length");p(o=e.m,i,a,u.ub),a+=u.ub,s-=u.ub,u.Rb&&(h.Ld=x(o),h.Kd=x(o)),h=e.Qa;var l,f=e.Pa;if(t(null!=o),t(null!=h),h.Cb=x(o),h.Cb){if(h.Bb=x(o),x(o)){for(h.Fb=x(o),l=0;4>l;++l)h.Zb[l]=x(o)?_(o,7):0;for(l=0;4>l;++l)h.Lb[l]=x(o)?_(o,6):0}if(h.Bb)for(l=0;3>l;++l)f.jb[l]=x(o)?v(o,8):255}else h.Bb=0;if(o.Ka)return Zt(e,3,"cannot parse segment header");if((h=e.ed).zd=x(o),h.Tb=v(o,6),h.wb=v(o,3),h.Pc=x(o),h.Pc&&x(o)){for(f=0;4>f;++f)x(o)&&(h.vd[f]=_(o,6));for(f=0;4>f;++f)x(o)&&(h.od[f]=_(o,6))}if(e.L=0==h.Tb?0:h.zd?1:2,o.Ka)return Zt(e,3,"cannot parse filter header");var c=s;if(s=l=a,a=l+c,h=c,e.Xb=(1<<v(e.m,2))-1,c<3*(f=e.Xb))i=7;else{for(l+=3*f,h-=3*f,c=0;c<f;++c){var d=i[s+0]|i[s+1]<<8|i[s+2]<<16;d>h&&(d=h),p(e.Jc[+c],i,l,d),l+=d,h-=d,s+=3}p(e.Jc[+f],i,l,h),i=l<a?0:5}if(0!=i)return Zt(e,i,"cannot parse partitions");for(i=v(l=e.m,7),s=x(l)?_(l,4):0,a=x(l)?_(l,4):0,h=x(l)?_(l,4):0,f=x(l)?_(l,4):0,l=x(l)?_(l,4):0,c=e.Qa,d=0;4>d;++d){if(c.Cb){var g=c.Zb[d];c.Fb||(g+=i)}else{if(0<d){e.pb[d]=e.pb[0];continue}g=i}var m=e.pb[d];m.Sc[0]=ei[Xt(g+s,127)],m.Sc[1]=ri[Xt(g+0,127)],m.Eb[0]=2*ei[Xt(g+a,127)],m.Eb[1]=101581*ri[Xt(g+h,127)]>>16,8>m.Eb[1]&&(m.Eb[1]=8),m.Qc[0]=ei[Xt(g+f,117)],m.Qc[1]=ri[Xt(g+l,127)],m.lc=g+l}if(!u.Rb)return Zt(e,4,"Not a key frame.");for(x(o),u=e.Pa,i=0;4>i;++i){for(s=0;8>s;++s)for(a=0;3>a;++a)for(h=0;11>h;++h)f=F(o,hi[i][s][a][h])?v(o,8):oi[i][s][a][h],u.Wc[i][s].Yb[a][h]=f;for(s=0;17>s;++s)u.Xc[i][s]=u.Wc[i][li[s]]}return e.kc=x(o),e.kc&&(e.Bd=v(o,8)),e.cb=1}function Kt(t,e,r,n,i,a,s){var o=e[i].Yb[r];for(r=0;16>i;++i){if(!F(t,o[r+0]))return i;for(;!F(t,o[r+1]);)if(o=e[++i].Yb[0],r=0,16==i)return 16;var u=e[i+1].Yb;if(F(t,o[r+2])){var h=t,l=0;if(F(h,(c=o)[(f=r)+3]))if(F(h,c[f+6])){for(o=0,f=2*(l=F(h,c[f+8]))+(c=F(h,c[f+9+l])),l=0,c=ii[f];c[o];++o)l+=l+F(h,c[o]);l+=3+(8<<f)}else F(h,c[f+7])?(l=7+2*F(h,165),l+=F(h,145)):l=5+F(h,159);else l=F(h,c[f+4])?3+F(h,c[f+5]):2;o=u[2]}else l=1,o=u[1];u=s+ai[i],0>(h=t).b&&T(h);var f,c=h.b,d=(f=h.Ca>>1)-(h.I>>c)>>31;--h.b,h.Ca+=d,h.Ca|=1,h.I-=(f+1&d)<<c,a[u]=((l^d)-d)*n[(0<i)+0]}return 16}function Qt(t){var e=t.rb[t.sb-1];e.la=0,e.Na=0,n(t.zc,0,0,t.zc.length),t.ja=0}function $t(e,s){if(null==e)return 0;if(null==s)return Zt(e,2,"NULL VP8Io parameter in VP8Decode().");if(!e.cb&&!Jt(e,s))return 0;if(t(e.cb),null==s.ac||s.ac(s)){s.ob&&(e.L=0);var o=Ni[e.L];if(2==e.L?(e.yb=0,e.zb=0):(e.yb=s.v-o>>4,e.zb=s.j-o>>4,0>e.yb&&(e.yb=0),0>e.zb&&(e.zb=0)),e.Va=s.o+15+o>>4,e.Hb=s.va+15+o>>4,e.Hb>e.za&&(e.Hb=e.za),e.Va>e.Ub&&(e.Va=e.Ub),0<e.L){var u=e.ed;for(o=0;4>o;++o){var h;if(e.Qa.Cb){var l=e.Qa.Lb[o];e.Qa.Fb||(l+=u.Tb)}else l=u.Tb;for(h=0;1>=h;++h){var f=e.gd[o][h],c=l;if(u.Pc&&(c+=u.vd[0],h&&(c+=u.od[0])),0<(c=0>c?0:63<c?63:c)){var d=c;0<u.wb&&((d=4<u.wb?d>>2:d>>1)>9-u.wb&&(d=9-u.wb)),1>d&&(d=1),f.dd=d,f.tc=2*c+d,f.ld=40<=c?2:15<=c?1:0}else f.tc=0;f.La=h}}}o=0}else Zt(e,6,"Frame setup failed"),o=e.a;if(o=0==o){if(o){e.$c=0,0<e.Aa||(e.Ic=Gi);t:{o=e.Ic;u=4*(d=e.za);var p=32*d,v=d+1,_=0<e.L?d*(0<e.Aa?2:1):0,g=(2==e.Aa?2:1)*d;if((f=u+832+(h=3*(16*o+Ni[e.L])/2*p)+(l=null!=e.Fa&&0<e.Fa.length?e.Kc.c*e.Kc.i:0))!=f)o=0;else{if(f>e.Vb){if(e.Vb=0,e.Ec=i(f),e.Fc=0,null==e.Ec){o=Zt(e,1,"no memory during frame initialization.");break t}e.Vb=f}f=e.Ec,c=e.Fc,e.Ac=f,e.Bc=c,c+=u,e.Gd=a(p,qt),e.Hd=0,e.rb=a(v+1,Nt),e.sb=1,e.wa=_?a(_,Lt):null,e.Y=0,e.D.Nb=0,e.D.wa=e.wa,e.D.Y=e.Y,0<e.Aa&&(e.D.Y+=d),t(!0),e.oc=f,e.pc=c,c+=832,e.ya=a(g,Gt),e.aa=0,e.D.ya=e.ya,e.D.aa=e.aa,2==e.Aa&&(e.D.aa+=d),e.R=16*d,e.B=8*d,d=(p=Ni[e.L])*e.R,p=p/2*e.B,e.sa=f,e.ta=c+d,e.qa=e.sa,e.ra=e.ta+16*o*e.R+p,e.Ha=e.qa,e.Ia=e.ra+8*o*e.B+p,e.$c=0,c+=h,e.mb=l?f:null,e.nb=l?c:null,t(c+l<=e.Fc+e.Vb),Qt(e),n(e.Ac,e.Bc,0,u),o=1}}if(o){if(s.ka=0,s.y=e.sa,s.O=e.ta,s.f=e.qa,s.N=e.ra,s.ea=e.Ha,s.Vd=e.Ia,s.fa=e.R,s.Rc=e.B,s.F=null,s.J=0,!Mn){for(o=-255;255>=o;++o)xn[255+o]=0>o?-o:o;for(o=-1020;1020>=o;++o)Fn[1020+o]=-128>o?-128:127<o?127:o;for(o=-112;112>=o;++o)An[112+o]=-16>o?-16:15<o?15:o;for(o=-255;510>=o;++o)Pn[255+o]=0>o?0:255<o?255:o;Mn=1}an=he,sn=ae,un=se,hn=oe,ln=ue,on=ie,fn=Ze,cn=Ye,dn=Qe,pn=$e,vn=Je,_n=Ke,gn=tr,mn=er,yn=je,bn=qe,wn=He,En=Xe,ci[0]=De,ci[1]=fe,ci[2]=Ee,ci[3]=Ce,ci[4]=Se,ci[5]=xe,ci[6]=Te,ci[7]=Fe,ci[8]=Pe,ci[9]=Ae,fi[0]=ge,fi[1]=de,fi[2]=pe,fi[3]=ve,fi[4]=me,fi[5]=ye,fi[6]=be,di[0]=Ue,di[1]=ce,di[2]=Me,di[3]=Ie,di[4]=Be,di[5]=Oe,di[6]=Re,o=1}else o=0}o&&(o=function(e,a){for(e.M=0;e.M<e.Va;++e.M){var s,o=e.Jc[e.M&e.Xb],u=e.m,h=e;for(s=0;s<h.za;++s){var l=u,f=h,c=f.Ac,d=f.Bc+4*s,p=f.zc,v=f.ya[f.aa+s];if(f.Qa.Bb?v.$b=F(l,f.Pa.jb[0])?2+F(l,f.Pa.jb[2]):F(l,f.Pa.jb[1]):v.$b=0,f.kc&&(v.Ad=F(l,f.Bd)),v.Za=!F(l,145)+0,v.Za){var _=v.Ob,g=0;for(f=0;4>f;++f){var m,y=p[0+f];for(m=0;4>m;++m){y=ui[c[d+m]][y];for(var b=si[F(l,y[0])];0<b;)b=si[2*b+F(l,y[b])];y=-b,c[d+m]=y}r(_,g,c,d,4),g+=4,p[0+f]=y}}else y=F(l,156)?F(l,128)?1:3:F(l,163)?2:0,v.Ob[0]=y,n(c,d,y,4),n(p,0,y,4);v.Dd=F(l,142)?F(l,114)?F(l,183)?1:3:2:0}if(h.m.Ka)return Zt(e,7,"Premature end-of-partition0 encountered.");for(;e.ja<e.za;++e.ja){if(h=o,l=(u=e).rb[u.sb-1],c=u.rb[u.sb+u.ja],s=u.ya[u.aa+u.ja],d=u.kc?s.Ad:0)l.la=c.la=0,s.Za||(l.Na=c.Na=0),s.Hc=0,s.Gc=0,s.ia=0;else{var w,E;l=c,c=h,d=u.Pa.Xc,p=u.ya[u.aa+u.ja],v=u.pb[p.$b];if(f=p.ad,_=0,g=u.rb[u.sb-1],y=m=0,n(f,_,0,384),p.Za)var C=0,D=d[3];else{b=i(16);var S=l.Na+g.Na;if(S=ni(c,d[1],S,v.Eb,0,b,0),l.Na=g.Na=(0<S)+0,1<S)an(b,0,f,_);else{var T=b[0]+3>>3;for(b=0;256>b;b+=16)f[_+b]=T}C=1,D=d[0]}var x=15&l.la,A=15&g.la;for(b=0;4>b;++b){var P=1&A;for(T=E=0;4>T;++T)x=x>>1|(P=(S=ni(c,D,S=P+(1&x),v.Sc,C,f,_))>C)<<7,E=E<<2|(3<S?3:1<S?2:0!=f[_+0]),_+=16;x>>=4,A=A>>1|P<<7,m=(m<<8|E)>>>0}for(D=x,C=A>>4,w=0;4>w;w+=2){for(E=0,x=l.la>>4+w,A=g.la>>4+w,b=0;2>b;++b){for(P=1&A,T=0;2>T;++T)S=P+(1&x),x=x>>1|(P=0<(S=ni(c,d[2],S,v.Qc,0,f,_)))<<3,E=E<<2|(3<S?3:1<S?2:0!=f[_+0]),_+=16;x>>=2,A=A>>1|P<<5}y|=E<<4*w,D|=x<<4<<w,C|=(240&A)<<w}l.la=D,g.la=C,p.Hc=m,p.Gc=y,p.ia=43690&y?0:v.ia,d=!(m|y)}if(0<u.L&&(u.wa[u.Y+u.ja]=u.gd[s.$b][s.Za],u.wa[u.Y+u.ja].La|=!d),h.Ka)return Zt(e,7,"Premature end-of-file encountered.")}if(Qt(e),u=a,h=1,s=(o=e).D,l=0<o.L&&o.M>=o.zb&&o.M<=o.Va,0==o.Aa)t:{if(s.M=o.M,s.uc=l,kr(o,s),h=1,s=(E=o.D).Nb,l=(y=Ni[o.L])*o.R,c=y/2*o.B,b=16*s*o.R,T=8*s*o.B,d=o.sa,p=o.ta-l+b,v=o.qa,f=o.ra-c+T,_=o.Ha,g=o.Ia-c+T,A=0==(x=E.M),m=x>=o.Va-1,2==o.Aa&&kr(o,E),E.uc)for(P=(S=o).D.M,t(S.D.uc),E=S.yb;E<S.Hb;++E){C=E,D=P;var M=(I=(G=S).D).Nb;w=G.R;var I=I.wa[I.Y+C],k=G.sa,U=G.ta+16*M*w+16*C,O=I.dd,B=I.tc;if(0!=B)if(t(3<=B),1==G.L)0<C&&bn(k,U,w,B+4),I.La&&En(k,U,w,B),0<D&&yn(k,U,w,B+4),I.La&&wn(k,U,w,B);else{var R=G.B,L=G.qa,N=G.ra+8*M*R+8*C,z=G.Ha,G=G.Ia+8*M*R+8*C;M=I.ld;0<C&&(cn(k,U,w,B+4,O,M),pn(L,N,z,G,R,B+4,O,M)),I.La&&(_n(k,U,w,B,O,M),mn(L,N,z,G,R,B,O,M)),0<D&&(fn(k,U,w,B+4,O,M),dn(L,N,z,G,R,B+4,O,M)),I.La&&(vn(k,U,w,B,O,M),gn(L,N,z,G,R,B,O,M))}}if(o.ia&&alert("todo:DitherRow"),null!=u.put){if(E=16*x,x=16*(x+1),A?(u.y=o.sa,u.O=o.ta+b,u.f=o.qa,u.N=o.ra+T,u.ea=o.Ha,u.W=o.Ia+T):(E-=y,u.y=d,u.O=p,u.f=v,u.N=f,u.ea=_,u.W=g),m||(x-=y),x>u.o&&(x=u.o),u.F=null,u.J=null,null!=o.Fa&&0<o.Fa.length&&E<x&&(u.J=fr(o,u,E,x-E),u.F=o.mb,null==u.F&&0==u.F.length)){h=Zt(o,3,"Could not decode alpha data.");break t}E<u.j&&(y=u.j-E,E=u.j,t(!(1&y)),u.O+=o.R*y,u.N+=o.B*(y>>1),u.W+=o.B*(y>>1),null!=u.F&&(u.J+=u.width*y)),E<x&&(u.O+=u.v,u.N+=u.v>>1,u.W+=u.v>>1,null!=u.F&&(u.J+=u.v),u.ka=E-u.j,u.U=u.va-u.v,u.T=x-E,h=u.put(u))}s+1!=o.Ic||m||(r(o.sa,o.ta-l,d,p+16*o.R,l),r(o.qa,o.ra-c,v,f+8*o.B,c),r(o.Ha,o.Ia-c,_,g+8*o.B,c))}if(!h)return Zt(e,6,"Output aborted.")}return 1}(e,s)),null!=s.bc&&s.bc(s),o&=1}return o?(e.cb=0,o):0}function te(t,e,r,n,i){i=t[e+r+32*n]+(i>>3),t[e+r+32*n]=-256&i?0>i?0:255:i}function ee(t,e,r,n,i,a){te(t,e,0,r,n+i),te(t,e,1,r,n+a),te(t,e,2,r,n-a),te(t,e,3,r,n-i)}function re(t){return(20091*t>>16)+t}function ne(t,e,r,n){var a,s=0,o=i(16);for(a=0;4>a;++a){var u=t[e+0]+t[e+8],h=t[e+0]-t[e+8],l=(35468*t[e+4]>>16)-re(t[e+12]),f=re(t[e+4])+(35468*t[e+12]>>16);o[s+0]=u+f,o[s+1]=h+l,o[s+2]=h-l,o[s+3]=u-f,s+=4,e++}for(a=s=0;4>a;++a)u=(t=o[s+0]+4)+o[s+8],h=t-o[s+8],l=(35468*o[s+4]>>16)-re(o[s+12]),te(r,n,0,0,u+(f=re(o[s+4])+(35468*o[s+12]>>16))),te(r,n,1,0,h+l),te(r,n,2,0,h-l),te(r,n,3,0,u-f),s++,n+=32}function ie(t,e,r,n){var i=t[e+0]+4,a=35468*t[e+4]>>16,s=re(t[e+4]),o=35468*t[e+1]>>16;ee(r,n,0,i+s,t=re(t[e+1]),o),ee(r,n,1,i+a,t,o),ee(r,n,2,i-a,t,o),ee(r,n,3,i-s,t,o)}function ae(t,e,r,n,i){ne(t,e,r,n),i&&ne(t,e+16,r,n+4)}function se(t,e,r,n){sn(t,e+0,r,n,1),sn(t,e+32,r,n+128,1)}function oe(t,e,r,n){var i;for(t=t[e+0]+4,i=0;4>i;++i)for(e=0;4>e;++e)te(r,n,e,i,t)}function ue(t,e,r,n){t[e+0]&&hn(t,e+0,r,n),t[e+16]&&hn(t,e+16,r,n+4),t[e+32]&&hn(t,e+32,r,n+128),t[e+48]&&hn(t,e+48,r,n+128+4)}function he(t,e,r,n){var a,s=i(16);for(a=0;4>a;++a){var o=t[e+0+a]+t[e+12+a],u=t[e+4+a]+t[e+8+a],h=t[e+4+a]-t[e+8+a],l=t[e+0+a]-t[e+12+a];s[0+a]=o+u,s[8+a]=o-u,s[4+a]=l+h,s[12+a]=l-h}for(a=0;4>a;++a)o=(t=s[0+4*a]+3)+s[3+4*a],u=s[1+4*a]+s[2+4*a],h=s[1+4*a]-s[2+4*a],l=t-s[3+4*a],r[n+0]=o+u>>3,r[n+16]=l+h>>3,r[n+32]=o-u>>3,r[n+48]=l-h>>3,n+=64}function le(t,e,r){var n,i=e-32,a=Un,s=255-t[i-1];for(n=0;n<r;++n){var o,u=a,h=s+t[e-1];for(o=0;o<r;++o)t[e+o]=u[h+t[i+o]];e+=32}}function fe(t,e){le(t,e,4)}function ce(t,e){le(t,e,8)}function de(t,e){le(t,e,16)}function pe(t,e){var n;for(n=0;16>n;++n)r(t,e+32*n,t,e-32,16)}function ve(t,e){var r;for(r=16;0<r;--r)n(t,e,t[e-1],16),e+=32}function _e(t,e,r){var i;for(i=0;16>i;++i)n(e,r+32*i,t,16)}function ge(t,e){var r,n=16;for(r=0;16>r;++r)n+=t[e-1+32*r]+t[e+r-32];_e(n>>5,t,e)}function me(t,e){var r,n=8;for(r=0;16>r;++r)n+=t[e-1+32*r];_e(n>>4,t,e)}function ye(t,e){var r,n=8;for(r=0;16>r;++r)n+=t[e+r-32];_e(n>>4,t,e)}function be(t,e){_e(128,t,e)}function we(t,e,r){return t+2*e+r+2>>2}function Ee(t,e){var n,i=e-32;i=new Uint8Array([we(t[i-1],t[i+0],t[i+1]),we(t[i+0],t[i+1],t[i+2]),we(t[i+1],t[i+2],t[i+3]),we(t[i+2],t[i+3],t[i+4])]);for(n=0;4>n;++n)r(t,e+32*n,i,0,i.length)}function Ce(t,e){var r=t[e-1],n=t[e-1+32],i=t[e-1+64],a=t[e-1+96];A(t,e+0,16843009*we(t[e-1-32],r,n)),A(t,e+32,16843009*we(r,n,i)),A(t,e+64,16843009*we(n,i,a)),A(t,e+96,16843009*we(i,a,a))}function De(t,e){var r,i=4;for(r=0;4>r;++r)i+=t[e+r-32]+t[e-1+32*r];for(i>>=3,r=0;4>r;++r)n(t,e+32*r,i,4)}function Se(t,e){var r=t[e-1+0],n=t[e-1+32],i=t[e-1+64],a=t[e-1-32],s=t[e+0-32],o=t[e+1-32],u=t[e+2-32],h=t[e+3-32];t[e+0+96]=we(n,i,t[e-1+96]),t[e+1+96]=t[e+0+64]=we(r,n,i),t[e+2+96]=t[e+1+64]=t[e+0+32]=we(a,r,n),t[e+3+96]=t[e+2+64]=t[e+1+32]=t[e+0+0]=we(s,a,r),t[e+3+64]=t[e+2+32]=t[e+1+0]=we(o,s,a),t[e+3+32]=t[e+2+0]=we(u,o,s),t[e+3+0]=we(h,u,o)}function Te(t,e){var r=t[e+1-32],n=t[e+2-32],i=t[e+3-32],a=t[e+4-32],s=t[e+5-32],o=t[e+6-32],u=t[e+7-32];t[e+0+0]=we(t[e+0-32],r,n),t[e+1+0]=t[e+0+32]=we(r,n,i),t[e+2+0]=t[e+1+32]=t[e+0+64]=we(n,i,a),t[e+3+0]=t[e+2+32]=t[e+1+64]=t[e+0+96]=we(i,a,s),t[e+3+32]=t[e+2+64]=t[e+1+96]=we(a,s,o),t[e+3+64]=t[e+2+96]=we(s,o,u),t[e+3+96]=we(o,u,u)}function xe(t,e){var r=t[e-1+0],n=t[e-1+32],i=t[e-1+64],a=t[e-1-32],s=t[e+0-32],o=t[e+1-32],u=t[e+2-32],h=t[e+3-32];t[e+0+0]=t[e+1+64]=a+s+1>>1,t[e+1+0]=t[e+2+64]=s+o+1>>1,t[e+2+0]=t[e+3+64]=o+u+1>>1,t[e+3+0]=u+h+1>>1,t[e+0+96]=we(i,n,r),t[e+0+64]=we(n,r,a),t[e+0+32]=t[e+1+96]=we(r,a,s),t[e+1+32]=t[e+2+96]=we(a,s,o),t[e+2+32]=t[e+3+96]=we(s,o,u),t[e+3+32]=we(o,u,h)}function Fe(t,e){var r=t[e+0-32],n=t[e+1-32],i=t[e+2-32],a=t[e+3-32],s=t[e+4-32],o=t[e+5-32],u=t[e+6-32],h=t[e+7-32];t[e+0+0]=r+n+1>>1,t[e+1+0]=t[e+0+64]=n+i+1>>1,t[e+2+0]=t[e+1+64]=i+a+1>>1,t[e+3+0]=t[e+2+64]=a+s+1>>1,t[e+0+32]=we(r,n,i),t[e+1+32]=t[e+0+96]=we(n,i,a),t[e+2+32]=t[e+1+96]=we(i,a,s),t[e+3+32]=t[e+2+96]=we(a,s,o),t[e+3+64]=we(s,o,u),t[e+3+96]=we(o,u,h)}function Ae(t,e){var r=t[e-1+0],n=t[e-1+32],i=t[e-1+64],a=t[e-1+96];t[e+0+0]=r+n+1>>1,t[e+2+0]=t[e+0+32]=n+i+1>>1,t[e+2+32]=t[e+0+64]=i+a+1>>1,t[e+1+0]=we(r,n,i),t[e+3+0]=t[e+1+32]=we(n,i,a),t[e+3+32]=t[e+1+64]=we(i,a,a),t[e+3+64]=t[e+2+64]=t[e+0+96]=t[e+1+96]=t[e+2+96]=t[e+3+96]=a}function Pe(t,e){var r=t[e-1+0],n=t[e-1+32],i=t[e-1+64],a=t[e-1+96],s=t[e-1-32],o=t[e+0-32],u=t[e+1-32],h=t[e+2-32];t[e+0+0]=t[e+2+32]=r+s+1>>1,t[e+0+32]=t[e+2+64]=n+r+1>>1,t[e+0+64]=t[e+2+96]=i+n+1>>1,t[e+0+96]=a+i+1>>1,t[e+3+0]=we(o,u,h),t[e+2+0]=we(s,o,u),t[e+1+0]=t[e+3+32]=we(r,s,o),t[e+1+32]=t[e+3+64]=we(n,r,s),t[e+1+64]=t[e+3+96]=we(i,n,r),t[e+1+96]=we(a,i,n)}function Me(t,e){var n;for(n=0;8>n;++n)r(t,e+32*n,t,e-32,8)}function Ie(t,e){var r;for(r=0;8>r;++r)n(t,e,t[e-1],8),e+=32}function ke(t,e,r){var i;for(i=0;8>i;++i)n(e,r+32*i,t,8)}function Ue(t,e){var r,n=8;for(r=0;8>r;++r)n+=t[e+r-32]+t[e-1+32*r];ke(n>>4,t,e)}function Oe(t,e){var r,n=4;for(r=0;8>r;++r)n+=t[e+r-32];ke(n>>3,t,e)}function Be(t,e){var r,n=4;for(r=0;8>r;++r)n+=t[e-1+32*r];ke(n>>3,t,e)}function Re(t,e){ke(128,t,e)}function Le(t,e,r){var n=t[e-r],i=t[e+0],a=3*(i-n)+In[1020+t[e-2*r]-t[e+r]],s=kn[112+(a+4>>3)];t[e-r]=Un[255+n+kn[112+(a+3>>3)]],t[e+0]=Un[255+i-s]}function Ne(t,e,r,n){var i=t[e+0],a=t[e+r];return On[255+t[e-2*r]-t[e-r]]>n||On[255+a-i]>n}function ze(t,e,r,n){return 4*On[255+t[e-r]-t[e+0]]+On[255+t[e-2*r]-t[e+r]]<=n}function Ge(t,e,r,n,i){var a=t[e-3*r],s=t[e-2*r],o=t[e-r],u=t[e+0],h=t[e+r],l=t[e+2*r],f=t[e+3*r];return 4*On[255+o-u]+On[255+s-h]>n?0:On[255+t[e-4*r]-a]<=i&&On[255+a-s]<=i&&On[255+s-o]<=i&&On[255+f-l]<=i&&On[255+l-h]<=i&&On[255+h-u]<=i}function je(t,e,r,n){var i=2*n+1;for(n=0;16>n;++n)ze(t,e+n,r,i)&&Le(t,e+n,r)}function qe(t,e,r,n){var i=2*n+1;for(n=0;16>n;++n)ze(t,e+n*r,1,i)&&Le(t,e+n*r,1)}function He(t,e,r,n){var i;for(i=3;0<i;--i)je(t,e+=4*r,r,n)}function Xe(t,e,r,n){var i;for(i=3;0<i;--i)qe(t,e+=4,r,n)}function We(t,e,r,n,i,a,s,o){for(a=2*a+1;0<i--;){if(Ge(t,e,r,a,s))if(Ne(t,e,r,o))Le(t,e,r);else{var u=t,h=e,l=r,f=u[h-2*l],c=u[h-l],d=u[h+0],p=u[h+l],v=u[h+2*l],_=27*(m=In[1020+3*(d-c)+In[1020+f-p]])+63>>7,g=18*m+63>>7,m=9*m+63>>7;u[h-3*l]=Un[255+u[h-3*l]+m],u[h-2*l]=Un[255+f+g],u[h-l]=Un[255+c+_],u[h+0]=Un[255+d-_],u[h+l]=Un[255+p-g],u[h+2*l]=Un[255+v-m]}e+=n}}function Ve(t,e,r,n,i,a,s,o){for(a=2*a+1;0<i--;){if(Ge(t,e,r,a,s))if(Ne(t,e,r,o))Le(t,e,r);else{var u=t,h=e,l=r,f=u[h-l],c=u[h+0],d=u[h+l],p=kn[112+((v=3*(c-f))+4>>3)],v=kn[112+(v+3>>3)],_=p+1>>1;u[h-2*l]=Un[255+u[h-2*l]+_],u[h-l]=Un[255+f+v],u[h+0]=Un[255+c-p],u[h+l]=Un[255+d-_]}e+=n}}function Ze(t,e,r,n,i,a){We(t,e,r,1,16,n,i,a)}function Ye(t,e,r,n,i,a){We(t,e,1,r,16,n,i,a)}function Je(t,e,r,n,i,a){var s;for(s=3;0<s;--s)Ve(t,e+=4*r,r,1,16,n,i,a)}function Ke(t,e,r,n,i,a){var s;for(s=3;0<s;--s)Ve(t,e+=4,1,r,16,n,i,a)}function Qe(t,e,r,n,i,a,s,o){We(t,e,i,1,8,a,s,o),We(r,n,i,1,8,a,s,o)}function $e(t,e,r,n,i,a,s,o){We(t,e,1,i,8,a,s,o),We(r,n,1,i,8,a,s,o)}function tr(t,e,r,n,i,a,s,o){Ve(t,e+4*i,i,1,8,a,s,o),Ve(r,n+4*i,i,1,8,a,s,o)}function er(t,e,r,n,i,a,s,o){Ve(t,e+4,1,i,8,a,s,o),Ve(r,n+4,1,i,8,a,s,o)}function rr(){this.ba=new st,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ut,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function nr(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ir(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ar(){this.ua=0,this.Wa=new O,this.vb=new O,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new d,this.yc=new f}function sr(){this.xb=this.a=0,this.l=new Wt,this.ca=new st,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new w,this.Pb=0,this.wd=new w,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ar,this.ab=0,this.gc=a(4,ir),this.Oc=0}function or(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Wt,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ur(t,e,r,n,i,a,s){for(t=null==t?0:t[e+0],e=0;e<s;++e)i[a+e]=t+r[n+e]&255,t=i[a+e]}function hr(t,e,r,n,i,a,s){var o;if(null==t)ur(null,null,r,n,i,a,s);else for(o=0;o<s;++o)i[a+o]=t[e+o]+r[n+o]&255}function lr(t,e,r,n,i,a,s){if(null==t)ur(null,null,r,n,i,a,s);else{var o,u=t[e+0],h=u,l=u;for(o=0;o<s;++o)h=l+(u=t[e+o])-h,l=r[n+o]+(-256&h?0>h?0:255:h)&255,h=u,i[a+o]=l}}function fr(e,n,a,s){var o=n.width,u=n.o;if(t(null!=e&&null!=n),0>a||0>=s||a+s>u)return null;if(!e.Cc){if(null==e.ga){var h;if(e.ga=new or,(h=null==e.ga)||(h=n.width*n.o,t(0==e.Gb.length),e.Gb=i(h),e.Uc=0,null==e.Gb?h=0:(e.mb=e.Gb,e.nb=e.Uc,e.rc=null,h=1),h=!h),!h){h=e.ga;var l=e.Fa,f=e.P,c=e.qc,d=e.mb,p=e.nb,v=f+1,_=c-1,m=h.l;if(t(null!=l&&null!=d&&null!=n),_i[0]=null,_i[1]=ur,_i[2]=hr,_i[3]=lr,h.ca=d,h.tb=p,h.c=n.width,h.i=n.height,t(0<h.c&&0<h.i),1>=c)n=0;else if(h.$a=l[f+0]>>0&3,h.Z=l[f+0]>>2&3,h.Lc=l[f+0]>>4&3,f=l[f+0]>>6&3,0>h.$a||1<h.$a||4<=h.Z||1<h.Lc||f)n=0;else if(m.put=dt,m.ac=ct,m.bc=pt,m.ma=h,m.width=n.width,m.height=n.height,m.Da=n.Da,m.v=n.v,m.va=n.va,m.j=n.j,m.o=n.o,h.$a)t:{t(1==h.$a),n=Ft();e:for(;;){if(null==n){n=0;break t}if(t(null!=h),h.mc=n,n.c=h.c,n.i=h.i,n.l=h.l,n.l.ma=h,n.l.width=h.c,n.l.height=h.i,n.a=0,g(n.m,l,v,_),!At(h.c,h.i,1,n,null))break e;if(1==n.ab&&3==n.gc[0].hc&&Ct(n.s)?(h.ic=1,l=n.c*n.i,n.Ta=null,n.Ua=0,n.V=i(l),n.Ba=0,null==n.V?(n.a=1,n=0):n=1):(h.ic=0,n=Pt(n,h.c)),!n)break e;n=1;break t}h.mc=null,n=0}else n=_>=h.c*h.i;h=!n}if(h)return null;1!=e.ga.Lc?e.Ga=0:s=u-a}t(null!=e.ga),t(a+s<=u);t:{if(n=(l=e.ga).c,u=l.l.o,0==l.$a){if(v=e.rc,_=e.Vc,m=e.Fa,f=e.P+1+a*n,c=e.mb,d=e.nb+a*n,t(f<=e.P+e.qc),0!=l.Z)for(t(null!=_i[l.Z]),h=0;h<s;++h)_i[l.Z](v,_,m,f,c,d,n),v=c,_=d,d+=n,f+=n;else for(h=0;h<s;++h)r(c,d,m,f,n),v=c,_=d,d+=n,f+=n;e.rc=v,e.Vc=_}else{if(t(null!=l.mc),n=a+s,t(null!=(h=l.mc)),t(n<=h.i),h.C>=n)n=1;else if(l.ic||_r(),l.ic){l=h.V,v=h.Ba,_=h.c;var y=h.i,b=(m=1,f=h.$/_,c=h.$%_,d=h.m,p=h.s,h.$),w=_*y,E=_*n,D=p.wc,T=b<E?bt(p,c,f):null;t(b<=w),t(n<=y),t(Ct(p));e:for(;;){for(;!d.h&&b<E;){if(c&D||(T=bt(p,c,f)),t(null!=T),S(d),256>(y=mt(T.G[0],T.H[0],d)))l[v+b]=y,++b,++c>=_&&(c=0,++f<=n&&!(f%16)&&St(h,f));else{if(!(280>y)){m=0;break e}y=_t(y-256,d);var x,F=mt(T.G[4],T.H[4],d);if(S(d),!(b>=(F=gt(_,F=_t(F,d)))&&w-b>=y)){m=0;break e}for(x=0;x<y;++x)l[v+b+x]=l[v+b+x-F];for(b+=y,c+=y;c>=_;)c-=_,++f<=n&&!(f%16)&&St(h,f);b<E&&c&D&&(T=bt(p,c,f))}t(d.h==C(d))}St(h,f>n?n:f);break e}!m||d.h&&b<w?(m=0,h.a=d.h?5:3):h.$=b,n=m}else n=Tt(h,h.V,h.Ba,h.c,h.i,n,Mt);if(!n){s=0;break t}}a+s>=u&&(e.Cc=1),s=1}if(!s)return null;if(e.Cc&&(null!=(s=e.ga)&&(s.mc=null),e.ga=null,0<e.Ga))return alert("todo:WebPDequantizeLevels"),null}return e.nb+a*o}function cr(t,e,r,n,i,a){for(;0<i--;){var s,o=t,u=e+(r?1:0),h=t,l=e+(r?0:3);for(s=0;s<n;++s){var f=h[l+4*s];255!=f&&(f*=32897,o[u+4*s+0]=o[u+4*s+0]*f>>23,o[u+4*s+1]=o[u+4*s+1]*f>>23,o[u+4*s+2]=o[u+4*s+2]*f>>23)}e+=a}}function dr(t,e,r,n,i){for(;0<n--;){var a;for(a=0;a<r;++a){var s=t[e+2*a+0],o=15&(h=t[e+2*a+1]),u=4369*o,h=(240&h|h>>4)*u>>16;t[e+2*a+0]=(240&s|s>>4)*u>>16&240|(15&s|s<<4)*u>>16>>4&15,t[e+2*a+1]=240&h|o}e+=i}}function pr(t,e,r,n,i,a,s,o){var u,h,l=255;for(h=0;h<i;++h){for(u=0;u<n;++u){var f=t[e+u];a[s+4*u]=f,l&=f}e+=r,s+=o}return 255!=l}function vr(t,e,r,n,i){var a;for(a=0;a<i;++a)r[n+a]=t[e+a]>>8}function _r(){Cn=cr,Dn=dr,Sn=pr,Tn=vr}function gr(e,r,n){self[e]=function(e,i,a,s,o,u,h,l,f,c,d,p,v,_,g,m,y){var b,w=y-1>>1,E=o[u+0]|h[l+0]<<16,C=f[c+0]|d[p+0]<<16;t(null!=e);var D=3*E+C+131074>>2;for(r(e[i+0],255&D,D>>16,v,_),null!=a&&(D=3*C+E+131074>>2,r(a[s+0],255&D,D>>16,g,m)),b=1;b<=w;++b){var S=o[u+b]|h[l+b]<<16,T=f[c+b]|d[p+b]<<16,x=E+S+C+T+524296,F=x+2*(S+C)>>3;D=F+E>>1,E=(x=x+2*(E+T)>>3)+S>>1,r(e[i+2*b-1],255&D,D>>16,v,_+(2*b-1)*n),r(e[i+2*b-0],255&E,E>>16,v,_+(2*b-0)*n),null!=a&&(D=x+C>>1,E=F+T>>1,r(a[s+2*b-1],255&D,D>>16,g,m+(2*b-1)*n),r(a[s+2*b+0],255&E,E>>16,g,m+(2*b+0)*n)),E=S,C=T}1&y||(D=3*E+C+131074>>2,r(e[i+y-1],255&D,D>>16,v,_+(y-1)*n),null!=a&&(D=3*C+E+131074>>2,r(a[s+y-1],255&D,D>>16,g,m+(y-1)*n)))}}function mr(){gi[Bn]=mi,gi[Rn]=bi,gi[Ln]=yi,gi[Nn]=wi,gi[zn]=Ei,gi[Gn]=Ci,gi[jn]=Di,gi[qn]=bi,gi[Hn]=wi,gi[Xn]=Ei,gi[Wn]=Ci}function yr(t){return t&~Pi?0>t?0:255:t>>Ai}function br(t,e){return yr((19077*t>>8)+(26149*e>>8)-14234)}function wr(t,e,r){return yr((19077*t>>8)-(6419*e>>8)-(13320*r>>8)+8708)}function Er(t,e){return yr((19077*t>>8)+(33050*e>>8)-17685)}function Cr(t,e,r,n,i){n[i+0]=br(t,r),n[i+1]=wr(t,e,r),n[i+2]=Er(t,e)}function Dr(t,e,r,n,i){n[i+0]=Er(t,e),n[i+1]=wr(t,e,r),n[i+2]=br(t,r)}function Sr(t,e,r,n,i){var a=wr(t,e,r);e=a<<3&224|Er(t,e)>>3,n[i+0]=248&br(t,r)|a>>5,n[i+1]=e}function Tr(t,e,r,n,i){var a=240&Er(t,e)|15;n[i+0]=240&br(t,r)|wr(t,e,r)>>4,n[i+1]=a}function xr(t,e,r,n,i){n[i+0]=255,Cr(t,e,r,n,i+1)}function Fr(t,e,r,n,i){Dr(t,e,r,n,i),n[i+3]=255}function Ar(t,e,r,n,i){Cr(t,e,r,n,i),n[i+3]=255}function Xt(t,e){return 0>t?0:t>e?e:t}function Pr(t,e,r){self[t]=function(t,n,i,a,s,o,u,h,l){for(var f=h+(-2&l)*r;h!=f;)e(t[n+0],i[a+0],s[o+0],u,h),e(t[n+1],i[a+0],s[o+0],u,h+r),n+=2,++a,++o,h+=2*r;1&l&&e(t[n+0],i[a+0],s[o+0],u,h)}}function Mr(t,e,r){return 0==r?0==t?0==e?6:5:0==e?4:0:r}function Ir(t,e,r,n,i){switch(t>>>30){case 3:sn(e,r,n,i,0);break;case 2:on(e,r,n,i);break;case 1:hn(e,r,n,i)}}function kr(t,e){var i,a,s=e.M,o=e.Nb,u=t.oc,h=t.pc+40,l=t.oc,f=t.pc+584,c=t.oc,d=t.pc+600;for(i=0;16>i;++i)u[h+32*i-1]=129;for(i=0;8>i;++i)l[f+32*i-1]=129,c[d+32*i-1]=129;for(0<s?u[h-1-32]=l[f-1-32]=c[d-1-32]=129:(n(u,h-32-1,127,21),n(l,f-32-1,127,9),n(c,d-32-1,127,9)),a=0;a<t.za;++a){var p=e.ya[e.aa+a];if(0<a){for(i=-1;16>i;++i)r(u,h+32*i-4,u,h+32*i+12,4);for(i=-1;8>i;++i)r(l,f+32*i-4,l,f+32*i+4,4),r(c,d+32*i-4,c,d+32*i+4,4)}var v=t.Gd,_=t.Hd+a,g=p.ad,m=p.Hc;if(0<s&&(r(u,h-32,v[_].y,0,16),r(l,f-32,v[_].f,0,8),r(c,d-32,v[_].ea,0,8)),p.Za){var y=u,b=h-32+16;for(0<s&&(a>=t.za-1?n(y,b,v[_].y[15],4):r(y,b,v[_+1].y,0,4)),i=0;4>i;i++)y[b+128+i]=y[b+256+i]=y[b+384+i]=y[b+0+i];for(i=0;16>i;++i,m<<=2)y=u,b=h+Li[i],ci[p.Ob[i]](y,b),Ir(m,g,16*+i,y,b)}else if(y=Mr(a,s,p.Ob[0]),fi[y](u,h),0!=m)for(i=0;16>i;++i,m<<=2)Ir(m,g,16*+i,u,h+Li[i]);for(i=p.Gc,y=Mr(a,s,p.Dd),di[y](l,f),di[y](c,d),m=g,y=l,b=f,255&(p=i>>0)&&(170&p?un(m,256,y,b):ln(m,256,y,b)),p=c,m=d,255&(i>>=8)&&(170&i?un(g,320,p,m):ln(g,320,p,m)),s<t.Ub-1&&(r(v[_].y,0,u,h+480,16),r(v[_].f,0,l,f+224,8),r(v[_].ea,0,c,d+224,8)),i=8*o*t.B,v=t.sa,_=t.ta+16*a+16*o*t.R,g=t.qa,p=t.ra+8*a+i,m=t.Ha,y=t.Ia+8*a+i,i=0;16>i;++i)r(v,_+i*t.R,u,h+32*i,16);for(i=0;8>i;++i)r(g,p+i*t.B,l,f+32*i,8),r(m,y+i*t.B,c,d+32*i,8)}}function Ur(r,n,i,a,s,o,u,h,l){var f=[0],c=[0],d=0,p=null!=l?l.kd:0,v=null!=l?l:new nr;if(null==r||12>i)return 7;v.data=r,v.w=n,v.ha=i,n=[n],i=[i],v.gb=[v.gb];t:{var _=n,m=i,y=v.gb;if(t(null!=r),t(null!=m),t(null!=y),y[0]=0,12<=m[0]&&!e(r,_[0],"RIFF")){if(e(r,_[0]+8,"WEBP")){y=3;break t}var b=I(r,_[0]+4);if(12>b||4294967286<b){y=3;break t}if(p&&b>m[0]-8){y=7;break t}y[0]=b,_[0]+=12,m[0]-=12}y=0}if(0!=y)return y;for(b=0<v.gb[0],i=i[0];;){t:{var E=r;m=n,y=i;var C=f,D=c,S=_=[0];if((F=d=[d])[0]=0,8>y[0])y=7;else{if(!e(E,m[0],"VP8X")){if(10!=I(E,m[0]+4)){y=3;break t}if(18>y[0]){y=7;break t}var T=I(E,m[0]+8),x=1+M(E,m[0]+12);if(2147483648<=x*(E=1+M(E,m[0]+15))){y=3;break t}null!=S&&(S[0]=T),null!=C&&(C[0]=x),null!=D&&(D[0]=E),m[0]+=18,y[0]-=18,F[0]=1}y=0}}if(d=d[0],_=_[0],0!=y)return y;if(m=!!(2&_),!b&&d)return 3;if(null!=o&&(o[0]=!!(16&_)),null!=u&&(u[0]=m),null!=h&&(h[0]=0),u=f[0],_=c[0],d&&m&&null==l){y=0;break}if(4>i){y=7;break}if(b&&d||!b&&!d&&!e(r,n[0],"ALPH")){i=[i],v.na=[v.na],v.P=[v.P],v.Sa=[v.Sa];t:{T=r,y=n,b=i;var F=v.gb;C=v.na,D=v.P,S=v.Sa;x=22,t(null!=T),t(null!=b),E=y[0];var A=b[0];for(t(null!=C),t(null!=S),C[0]=null,D[0]=null,S[0]=0;;){if(y[0]=E,b[0]=A,8>A){y=7;break t}var P=I(T,E+4);if(4294967286<P){y=3;break t}var k=8+P+1&-2;if(x+=k,0<F&&x>F){y=3;break t}if(!e(T,E,"VP8 ")||!e(T,E,"VP8L")){y=0;break t}if(A[0]<k){y=7;break t}e(T,E,"ALPH")||(C[0]=T,D[0]=E+8,S[0]=P),E+=k,A-=k}}if(i=i[0],v.na=v.na[0],v.P=v.P[0],v.Sa=v.Sa[0],0!=y)break}i=[i],v.Ja=[v.Ja],v.xa=[v.xa];t:if(F=r,y=n,b=i,C=v.gb[0],D=v.Ja,S=v.xa,T=y[0],E=!e(F,T,"VP8 "),x=!e(F,T,"VP8L"),t(null!=F),t(null!=b),t(null!=D),t(null!=S),8>b[0])y=7;else{if(E||x){if(F=I(F,T+4),12<=C&&F>C-12){y=3;break t}if(p&&F>b[0]-8){y=7;break t}D[0]=F,y[0]+=8,b[0]-=8,S[0]=x}else S[0]=5<=b[0]&&47==F[T+0]&&!(F[T+4]>>5),D[0]=b[0];y=0}if(i=i[0],v.Ja=v.Ja[0],v.xa=v.xa[0],n=n[0],0!=y)break;if(4294967286<v.Ja)return 3;if(null==h||m||(h[0]=v.xa?2:1),u=[u],_=[_],v.xa){if(5>i){y=7;break}h=u,p=_,m=o,null==r||5>i?r=0:5<=i&&47==r[n+0]&&!(r[n+4]>>5)?(b=[0],F=[0],C=[0],g(D=new w,r,n,i),vt(D,b,F,C)?(null!=h&&(h[0]=b[0]),null!=p&&(p[0]=F[0]),null!=m&&(m[0]=C[0]),r=1):r=0):r=0}else{if(10>i){y=7;break}h=_,null==r||10>i||!Yt(r,n+3,i-3)?r=0:(p=r[n+0]|r[n+1]<<8|r[n+2]<<16,m=16383&(r[n+7]<<8|r[n+6]),r=16383&(r[n+9]<<8|r[n+8]),1&p||3<(p>>1&7)||!(p>>4&1)||p>>5>=v.Ja||!m||!r?r=0:(u&&(u[0]=m),h&&(h[0]=r),r=1))}if(!r)return 3;if(u=u[0],_=_[0],d&&(f[0]!=u||c[0]!=_))return 3;null!=l&&(l[0]=v,l.offset=n-l.w,t(4294967286>n-l.w),t(l.offset==l.ha-i));break}return 0==y||7==y&&d&&null==l?(null!=o&&(o[0]|=null!=v.na&&0<v.na.length),null!=a&&(a[0]=u),null!=s&&(s[0]=_),0):y}function Or(t,e,r){var n=e.width,i=e.height,a=0,s=0,o=n,u=i;if(e.Da=null!=t&&0<t.Da,e.Da&&(o=t.cd,u=t.bd,a=t.v,s=t.j,11>r||(a&=-2,s&=-2),0>a||0>s||0>=o||0>=u||a+o>n||s+u>i))return 0;if(e.v=a,e.j=s,e.va=a+o,e.o=s+u,e.U=o,e.T=u,e.da=null!=t&&0<t.da,e.da){if(!B(o,u,r=[t.ib],a=[t.hb]))return 0;e.ib=r[0],e.hb=a[0]}return e.ob=null!=t&&t.ob,e.Kb=null==t||!t.Sd,e.da&&(e.ob=e.ib<3*n/4&&e.hb<3*i/4,e.Kb=0),1}function Br(t){if(null==t)return 2;if(11>t.S){var e=t.f.RGBA;e.fb+=(t.height-1)*e.A,e.A=-e.A}else e=t.f.kb,t=t.height,e.O+=(t-1)*e.fa,e.fa=-e.fa,e.N+=(t-1>>1)*e.Ab,e.Ab=-e.Ab,e.W+=(t-1>>1)*e.Db,e.Db=-e.Db,null!=e.F&&(e.J+=(t-1)*e.lb,e.lb=-e.lb);return 0}function Rr(t,e,r,n){if(null==n||0>=t||0>=e)return 2;if(null!=r){if(r.Da){var a=r.cd,s=r.bd,o=-2&r.v,u=-2&r.j;if(0>o||0>u||0>=a||0>=s||o+a>t||u+s>e)return 2;t=a,e=s}if(r.da){if(!B(t,e,a=[r.ib],s=[r.hb]))return 2;t=a[0],e=s[0]}}n.width=t,n.height=e;t:{var h=n.width,l=n.height;if(t=n.S,0>=h||0>=l||!(t>=Bn&&13>t))t=2;else{if(0>=n.Rd&&null==n.sd){o=s=a=e=0;var f=(u=h*ji[t])*l;if(11>t||(s=(l+1)/2*(e=(h+1)/2),12==t&&(o=(a=h)*l)),null==(l=i(f+2*s+o))){t=1;break t}n.sd=l,11>t?((h=n.f.RGBA).eb=l,h.fb=0,h.A=u,h.size=f):((h=n.f.kb).y=l,h.O=0,h.fa=u,h.Fd=f,h.f=l,h.N=0+f,h.Ab=e,h.Cd=s,h.ea=l,h.W=0+f+s,h.Db=e,h.Ed=s,12==t&&(h.F=l,h.J=0+f+2*s),h.Tc=o,h.lb=a)}if(e=1,a=n.S,s=n.width,o=n.height,a>=Bn&&13>a)if(11>a)t=n.f.RGBA,e&=(u=Math.abs(t.A))*(o-1)+s<=t.size,e&=u>=s*ji[a],e&=null!=t.eb;else{t=n.f.kb,u=(s+1)/2,f=(o+1)/2,h=Math.abs(t.fa);l=Math.abs(t.Ab);var c=Math.abs(t.Db),d=Math.abs(t.lb),p=d*(o-1)+s;e&=h*(o-1)+s<=t.Fd,e&=l*(f-1)+u<=t.Cd,e=(e&=c*(f-1)+u<=t.Ed)&h>=s&l>=u&c>=u,e&=null!=t.y,e&=null!=t.f,e&=null!=t.ea,12==a&&(e&=d>=s,e&=p<=t.Tc,e&=null!=t.F)}else e=0;t=e?0:2}}return 0!=t||null!=r&&r.fd&&(t=Br(n)),t}var Lr=64,Nr=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],zr=24,Gr=32,jr=8,qr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];N("Predictor0","PredictorAdd0"),self.Predictor0=function(){return 4278190080},self.Predictor1=function(t){return t},self.Predictor2=function(t,e,r){return e[r+0]},self.Predictor3=function(t,e,r){return e[r+1]},self.Predictor4=function(t,e,r){return e[r-1]},self.Predictor5=function(t,e,r){return G(G(t,e[r+1]),e[r+0])},self.Predictor6=function(t,e,r){return G(t,e[r-1])},self.Predictor7=function(t,e,r){return G(t,e[r+0])},self.Predictor8=function(t,e,r){return G(e[r-1],e[r+0])},self.Predictor9=function(t,e,r){return G(e[r+0],e[r+1])},self.Predictor10=function(t,e,r){return G(G(t,e[r-1]),G(e[r+0],e[r+1]))},self.Predictor11=function(t,e,r){var n=e[r+0];return 0>=H(n>>24&255,t>>24&255,(e=e[r-1])>>24&255)+H(n>>16&255,t>>16&255,e>>16&255)+H(n>>8&255,t>>8&255,e>>8&255)+H(255&n,255&t,255&e)?n:t},self.Predictor12=function(t,e,r){var n=e[r+0];return(j((t>>24&255)+(n>>24&255)-((e=e[r-1])>>24&255))<<24|j((t>>16&255)+(n>>16&255)-(e>>16&255))<<16|j((t>>8&255)+(n>>8&255)-(e>>8&255))<<8|j((255&t)+(255&n)-(255&e)))>>>0},self.Predictor13=function(t,e,r){var n=e[r-1];return(q((t=G(t,e[r+0]))>>24&255,n>>24&255)<<24|q(t>>16&255,n>>16&255)<<16|q(t>>8&255,n>>8&255)<<8|q(t>>0&255,n>>0&255))>>>0};var Hr=self.PredictorAdd0;self.PredictorAdd1=X,N("Predictor2","PredictorAdd2"),N("Predictor3","PredictorAdd3"),N("Predictor4","PredictorAdd4"),N("Predictor5","PredictorAdd5"),N("Predictor6","PredictorAdd6"),N("Predictor7","PredictorAdd7"),N("Predictor8","PredictorAdd8"),N("Predictor9","PredictorAdd9"),N("Predictor10","PredictorAdd10"),N("Predictor11","PredictorAdd11"),N("Predictor12","PredictorAdd12"),N("Predictor13","PredictorAdd13");var Xr=self.PredictorAdd2;Y("ColorIndexInverseTransform","MapARGB","32b",(function(t){return t>>8&255}),(function(t){return t})),Y("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(t){return t}),(function(t){return t>>8&255}));var Wr,Vr=self.ColorIndexInverseTransform,Zr=self.MapARGB,Yr=self.VP8LColorIndexInverseTransformAlpha,Jr=self.MapAlpha,Kr=self.VP8LPredictorsAdd=[];Kr.length=16,(self.VP8LPredictors=[]).length=16,(self.VP8LPredictorsAdd_C=[]).length=16,(self.VP8LPredictors_C=[]).length=16;var Qr,$r,tn,en,rn,nn,an,sn,on,un,hn,ln,fn,cn,dn,pn,vn,_n,gn,mn,yn,bn,wn,En,Cn,Dn,Sn,Tn,xn=i(511),Fn=i(2041),An=i(225),Pn=i(767),Mn=0,In=Fn,kn=An,Un=Pn,On=xn,Bn=0,Rn=1,Ln=2,Nn=3,zn=4,Gn=5,jn=6,qn=7,Hn=8,Xn=9,Wn=10,Vn=[2,3,7],Zn=[3,3,11],Yn=[280,256,256,256,40],Jn=[0,1,1,1,0],Kn=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Qn=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],$n=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ti=8,ei=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ri=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ni=null,ii=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ai=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],si=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],oi=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ui=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],hi=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],li=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],fi=[],ci=[],di=[],pi=1,vi=2,_i=[],gi=[];gr("UpsampleRgbLinePair",Cr,3),gr("UpsampleBgrLinePair",Dr,3),gr("UpsampleRgbaLinePair",Ar,4),gr("UpsampleBgraLinePair",Fr,4),gr("UpsampleArgbLinePair",xr,4),gr("UpsampleRgba4444LinePair",Tr,2),gr("UpsampleRgb565LinePair",Sr,2);var mi=window.UpsampleRgbLinePair,yi=window.UpsampleBgrLinePair,bi=window.UpsampleRgbaLinePair,wi=window.UpsampleBgraLinePair,Ei=window.UpsampleArgbLinePair,Ci=window.UpsampleRgba4444LinePair,Di=window.UpsampleRgb565LinePair,Si=16,Ti=1<<Si-1,xi=-227,Fi=482,Ai=6,Pi=(256<<Ai)-1,Mi=0,Ii=i(256),ki=i(256),Ui=i(256),Oi=i(256),Bi=i(Fi-xi),Ri=i(Fi-xi);Pr("YuvToRgbRow",Cr,3),Pr("YuvToBgrRow",Dr,3),Pr("YuvToRgbaRow",Ar,4),Pr("YuvToBgraRow",Fr,4),Pr("YuvToArgbRow",xr,4),Pr("YuvToRgba4444Row",Tr,2),Pr("YuvToRgb565Row",Sr,2);var Li=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ni=[0,2,8],zi=[8,7,6,4,4,2,2,2,1,1,1,1],Gi=1;this.WebPDecodeRGBA=function(e,r,n,i,a){var s=Rn,o=new rr,u=new st;o.ba=u,u.S=s,u.width=[u.width],u.height=[u.height];var h=u.width,l=u.height,f=new ot;if(null==f||null==e)var c=2;else t(null!=f),c=Ur(e,r,n,f.width,f.height,f.Pd,f.Qd,f.format,null);if(0!=c?h=0:(null!=h&&(h[0]=f.width[0]),null!=l&&(l[0]=f.height[0]),h=1),h){u.width=u.width[0],u.height=u.height[0],null!=i&&(i[0]=u.width),null!=a&&(a[0]=u.height);t:{if(i=new Wt,(a=new nr).data=e,a.w=r,a.ha=n,a.kd=1,r=[0],t(null!=a),(0==(e=Ur(a.data,a.w,a.ha,null,null,null,r,null,a))||7==e)&&r[0]&&(e=4),0==(r=e)){if(t(null!=o),i.data=a.data,i.w=a.w+a.offset,i.ha=a.ha-a.offset,i.put=dt,i.ac=ct,i.bc=pt,i.ma=o,a.xa){if(null==(e=Ft())){o=1;break t}if(function(e,r){var n=[0],i=[0],a=[0];e:for(;;){if(null==e)return 0;if(null==r)return e.a=2,0;if(e.l=r,e.a=0,g(e.m,r.data,r.w,r.ha),!vt(e.m,n,i,a)){e.a=3;break e}if(e.xb=vi,r.width=n[0],r.height=i[0],!At(n[0],i[0],1,e,null))break e;return 1}return t(0!=e.a),0}(e,i)){if(i=0==(r=Rr(i.width,i.height,o.Oa,o.ba))){e:{i=e;r:for(;;){if(null==i){i=0;break e}if(t(null!=i.s.yc),t(null!=i.s.Ya),t(0<i.s.Wb),t(null!=(n=i.l)),t(null!=(a=n.ma)),0!=i.xb){if(i.ca=a.ba,i.tb=a.tb,t(null!=i.ca),!Or(a.Oa,n,Nn)){i.a=2;break r}if(!Pt(i,n.width))break r;if(n.da)break r;if((n.da||nt(i.ca.S))&&_r(),11>i.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=i.ca.f.kb.F&&_r()),i.Pb&&0<i.s.ua&&null==i.s.vb.X&&!k(i.s.vb,i.s.Wa.Xa)){i.a=1;break r}i.xb=0}if(!Tt(i,i.V,i.Ba,i.c,i.i,n.o,Et))break r;a.Dc=i.Ma,i=1;break e}t(0!=i.a),i=0}i=!i}i&&(r=e.a)}else r=e.a}else{if(null==(e=new Vt)){o=1;break t}if(e.Fa=a.na,e.P=a.P,e.qc=a.Sa,Jt(e,i)){if(0==(r=Rr(i.width,i.height,o.Oa,o.ba))){if(e.Aa=0,n=o.Oa,t(null!=(a=e)),null!=n){if(0<(h=0>(h=n.Md)?0:100<h?255:255*h/100)){for(l=f=0;4>l;++l)12>(c=a.pb[l]).lc&&(c.ia=h*zi[0>c.lc?0:c.lc]>>3),f|=c.ia;f&&(alert("todo:VP8InitRandom"),a.ia=1)}a.Ga=n.Id,100<a.Ga?a.Ga=100:0>a.Ga&&(a.Ga=0)}$t(e,i)||(r=e.a)}}else r=e.a}0==r&&null!=o.Oa&&o.Oa.fd&&(r=Br(o.ba))}o=r}s=0!=o?null:11>s?u.f.RGBA.eb:u.f.kb.y}else s=null;return s};var ji=[3,4,3,4,4,2,2,4,4,4,2,1,1]},new window.WebPDecoder}();try{exports.GifWriter=GifWriter,exports.GifReader=GifReader}catch(t){}!function(t){var e=t.noise={};function r(t,e,r){this.x=t,this.y=e,this.z=r}r.prototype.dot2=function(t,e){return this.x*t+this.y*e},r.prototype.dot3=function(t,e,r){return this.x*t+this.y*e+this.z*r};var n=[new r(1,1,0),new r(-1,1,0),new r(1,-1,0),new r(-1,-1,0),new r(1,0,1),new r(-1,0,1),new r(1,0,-1),new r(-1,0,-1),new r(0,1,1),new r(0,-1,1),new r(0,1,-1),new r(0,-1,-1)],i=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],a=new Array(512),s=new Array(512);e.seed=function(t){t>0&&t<1&&(t*=65536),(t=Math.floor(t))<256&&(t|=t<<8);for(var e=0;e<256;e++){var r;r=1&e?i[e]^255&t:i[e]^t>>8&255,a[e]=a[e+256]=r,s[e]=s[e+256]=n[r%12]}},e.seed(0);var o=.5*(Math.sqrt(3)-1),u=(3-Math.sqrt(3))/6,h=1/6;function l(t){return t*t*t*(t*(6*t-15)+10)}function f(t,e,r){return(1-r)*t+r*e}e.simplex2=function(t,e){var r,n,i=(t+e)*o,h=Math.floor(t+i),l=Math.floor(e+i),f=(h+l)*u,c=t-h+f,d=e-l+f;c>d?(r=1,n=0):(r=0,n=1);var p=c-r+u,v=d-n+u,_=c-1+2*u,g=d-1+2*u,m=s[(h&=255)+a[l&=255]],y=s[h+r+a[l+n]],b=s[h+1+a[l+1]],w=.5-c*c-d*d,E=.5-p*p-v*v,C=.5-_*_-g*g;return 70*((w<0?0:(w*=w)*w*m.dot2(c,d))+(E<0?0:(E*=E)*E*y.dot2(p,v))+(C<0?0:(C*=C)*C*b.dot2(_,g)))},e.simplex3=function(t,e,r){var n,i,o,u,l,f,c=(t+e+r)*(1/3),d=Math.floor(t+c),p=Math.floor(e+c),v=Math.floor(r+c),_=(d+p+v)*h,g=t-d+_,m=e-p+_,y=r-v+_;g>=m?m>=y?(n=1,i=0,o=0,u=1,l=1,f=0):g>=y?(n=1,i=0,o=0,u=1,l=0,f=1):(n=0,i=0,o=1,u=1,l=0,f=1):m<y?(n=0,i=0,o=1,u=0,l=1,f=1):g<y?(n=0,i=1,o=0,u=0,l=1,f=1):(n=0,i=1,o=0,u=1,l=1,f=0);var b=g-n+h,w=m-i+h,E=y-o+h,C=g-u+2*h,D=m-l+2*h,S=y-f+2*h,T=g-1+.5,x=m-1+.5,F=y-1+.5,A=s[(d&=255)+a[(p&=255)+a[v&=255]]],P=s[d+n+a[p+i+a[v+o]]],M=s[d+u+a[p+l+a[v+f]]],I=s[d+1+a[p+1+a[v+1]]],k=.6-g*g-m*m-y*y,U=.6-b*b-w*w-E*E,O=.6-C*C-D*D-S*S,B=.6-T*T-x*x-F*F;return 32*((k<0?0:(k*=k)*k*A.dot3(g,m,y))+(U<0?0:(U*=U)*U*P.dot3(b,w,E))+(O<0?0:(O*=O)*O*M.dot3(C,D,S))+(B<0?0:(B*=B)*B*I.dot3(T,x,F)))},e.perlin2=function(t,e){var r=Math.floor(t),n=Math.floor(e);t-=r,e-=n;var i=s[(r&=255)+a[n&=255]].dot2(t,e),o=s[r+a[n+1]].dot2(t,e-1),u=s[r+1+a[n]].dot2(t-1,e),h=s[r+1+a[n+1]].dot2(t-1,e-1),c=l(t);return f(f(i,u,c),f(o,h,c),l(e))},e.perlin3=function(t,e,r){var n=Math.floor(t),i=Math.floor(e),o=Math.floor(r);t-=n,e-=i,r-=o;var u=s[(n&=255)+a[(i&=255)+a[o&=255]]].dot3(t,e,r),h=s[n+a[i+a[o+1]]].dot3(t,e,r-1),c=s[n+a[i+1+a[o]]].dot3(t,e-1,r),d=s[n+a[i+1+a[o+1]]].dot3(t,e-1,r-1),p=s[n+1+a[i+a[o]]].dot3(t-1,e,r),v=s[n+1+a[i+a[o+1]]].dot3(t-1,e,r-1),_=s[n+1+a[i+1+a[o]]].dot3(t-1,e-1,r),g=s[n+1+a[i+1+a[o+1]]].dot3(t-1,e-1,r-1),m=l(t),y=l(e),b=l(r);return f(f(f(u,p,m),f(h,v,m),b),f(f(c,_,m),f(d,g,m),b),y)}}(this);var Typr={parse:function(t){var e=Typr._bin,r=new Uint8Array(t);if("ttcf"==e.readASCII(r,0,4)){var n=4;e.readUshort(r,n);n+=2;e.readUshort(r,n);n+=2;var i=e.readUint(r,n);n+=4;for(var a=[],s=0;s<i;s++){var o=e.readUint(r,n);n+=4,a.push(Typr._readFont(r,o))}return a}return[Typr._readFont(r,0)]},_readFont:function(t,e){var r=Typr._bin,n=e;r.readFixed(t,e);e+=4;var i=r.readUshort(t,e);e+=2;r.readUshort(t,e);e+=2;r.readUshort(t,e);e+=2;r.readUshort(t,e);e+=2;for(var a=["cmap","DSIG","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],s={_data:t,_offset:n},o={},u=0;u<i;u++){var h=r.readASCII(t,e,4);e+=4;r.readUint(t,e);e+=4;var l=r.readUint(t,e);e+=4;var f=r.readUint(t,e);e+=4,o[h]={offset:l,length:f}}for(u=0;u<a.length;u++){var c=a[u];if(o[c]){o[c].offset,o[c].length;s[c.trim()]=Typr[c.trim()].parse(t,o[c].offset,o[c].length,s)}}return s},_tabOffset:function(t,e,r){for(var n=Typr._bin,i=n.readUshort(t,r+4),a=r+12,s=0;s<i;s++){var o=n.readASCII(t,a,4);a+=4;n.readUint(t,a);a+=4;var u=n.readUint(t,a);a+=4;n.readUint(t,a);if(a+=4,o==e)return u}return 0}};Typr._bin={readFixed:function(t,e){return(t[e]<<8|t[e+1])+(t[e+2]<<8|t[e+3])/65540},readF2dot14:function(t,e){return Typr._bin.readShort(t,e)/16384},readInt:function(t,e){var r=Typr._bin.t.uint8;return r[0]=t[e+3],r[1]=t[e+2],r[2]=t[e+1],r[3]=t[e],Typr._bin.t.int32[0]},readInt8:function(t,e){return Typr._bin.t.uint8[0]=t[e],Typr._bin.t.int8[0]},readShort:function(t,e){var r=Typr._bin.t.uint8;return r[1]=t[e],r[0]=t[e+1],Typr._bin.t.int16[0]},readUshort:function(t,e){return t[e]<<8|t[e+1]},readUshorts:function(t,e,r){for(var n=[],i=0;i<r;i++){var a=Typr._bin.readUshort(t,e+2*i);n.push(a)}return n},readUint:function(t,e){var r=Typr._bin.t.uint8;return r[3]=t[e],r[2]=t[e+1],r[1]=t[e+2],r[0]=t[e+3],Typr._bin.t.uint32[0]},readUint64:function(t,e){return 4294967296*Typr._bin.readUint(t,e)+Typr._bin.readUint(t,e+4)},readASCII:function(t,e,r){for(var n="",i=0;i<r;i++)n+=String.fromCharCode(t[e+i]);return n},readUnicode:function(t,e,r){for(var n="",i=0;i<r;i++){var a=t[e++]<<8|t[e++];n+=String.fromCharCode(a)}return n},_tdec:window.TextDecoder?new window.TextDecoder:null,readUTF8:function(t,e,r){var n=Typr._bin._tdec;return n&&0==e&&r==t.length?n.decode(t):Typr._bin.readASCII(t,e,r)},readBytes:function(t,e,r){for(var n=[],i=0;i<r;i++)n.push(t[e+i]);return n},readASCIIArray:function(t,e,r){for(var n=[],i=0;i<r;i++)n.push(String.fromCharCode(t[e+i]));return n}},Typr._bin.t={buff:new ArrayBuffer(8)},Typr._bin.t.int8=new Int8Array(Typr._bin.t.buff),Typr._bin.t.uint8=new Uint8Array(Typr._bin.t.buff),Typr._bin.t.int16=new Int16Array(Typr._bin.t.buff),Typr._bin.t.uint16=new Uint16Array(Typr._bin.t.buff),Typr._bin.t.int32=new Int32Array(Typr._bin.t.buff),Typr._bin.t.uint32=new Uint32Array(Typr._bin.t.buff),Typr._lctf={},Typr._lctf.parse=function(t,e,r,n,i){var a=Typr._bin,s={},o=e;a.readFixed(t,e);e+=4;var u=a.readUshort(t,e);e+=2;var h=a.readUshort(t,e);e+=2;var l=a.readUshort(t,e);return e+=2,s.scriptList=Typr._lctf.readScriptList(t,o+u),s.featureList=Typr._lctf.readFeatureList(t,o+h),s.lookupList=Typr._lctf.readLookupList(t,o+l,i),s},Typr._lctf.readLookupList=function(t,e,r){var n=Typr._bin,i=e,a=[],s=n.readUshort(t,e);e+=2;for(var o=0;o<s;o++){var u=n.readUshort(t,e);e+=2;var h=Typr._lctf.readLookupTable(t,i+u,r);a.push(h)}return a},Typr._lctf.readLookupTable=function(t,e,r){var n=Typr._bin,i=e,a={tabs:[]};a.ltype=n.readUshort(t,e),e+=2,a.flag=n.readUshort(t,e),e+=2;var s,o=n.readUshort(t,e);e+=2;for(var u=0;u<o;u++){var h=n.readUshort(t,e);e+=2;var l=r(t,a.ltype,i+h);a.tabs.push(l?l[0]:null),l&&null!=l[1]&&(s=l[1])}return null!=s&&(a.ltype=s),a},Typr._lctf.numOfOnes=function(t){for(var e=0,r=0;r<32;r++)0!=(t>>>r&1)&&e++;return e},Typr._lctf.readClassDef=function(t,e){var r=Typr._bin,n=[],i=r.readUshort(t,e);if(e+=2,1==i){var a=r.readUshort(t,e);e+=2;var s=r.readUshort(t,e);e+=2;for(var o=0;o<s;o++)n.push(a+o),n.push(a+o),n.push(r.readUshort(t,e)),e+=2}if(2==i){var u=r.readUshort(t,e);e+=2;for(o=0;o<u;o++)n.push(r.readUshort(t,e)),e+=2,n.push(r.readUshort(t,e)),e+=2,n.push(r.readUshort(t,e)),e+=2}return n},Typr._lctf.getInterval=function(t,e){for(var r=0;r<t.length;r+=3){var n=t[r],i=t[r+1];t[r+2];if(n<=e&&e<=i)return r}return-1},Typr._lctf.readCoverage=function(t,e){var r=Typr._bin,n={};n.fmt=r.readUshort(t,e),e+=2;var i=r.readUshort(t,e);return e+=2,1==n.fmt&&(n.tab=r.readUshorts(t,e,i)),2==n.fmt&&(n.tab=r.readUshorts(t,e,3*i)),n},Typr._lctf.coverageIndex=function(t,e){var r=t.tab;if(1==t.fmt)return r.indexOf(e);if(2==t.fmt){var n=Typr._lctf.getInterval(r,e);if(-1!=n)return r[n+2]+(e-r[n])}return-1},Typr._lctf.readFeatureList=function(t,e){var r=Typr._bin,n=e,i=[],a=r.readUshort(t,e);e+=2;for(var s=0;s<a;s++){var o=r.readASCII(t,e,4);e+=4;var u=r.readUshort(t,e);e+=2,i.push({tag:o.trim(),tab:Typr._lctf.readFeatureTable(t,n+u)})}return i},Typr._lctf.readFeatureTable=function(t,e){var r=Typr._bin;r.readUshort(t,e);e+=2;var n=r.readUshort(t,e);e+=2;for(var i=[],a=0;a<n;a++)i.push(r.readUshort(t,e+2*a));return i},Typr._lctf.readScriptList=function(t,e){var r=Typr._bin,n=e,i={},a=r.readUshort(t,e);e+=2;for(var s=0;s<a;s++){var o=r.readASCII(t,e,4);e+=4;var u=r.readUshort(t,e);e+=2,i[o.trim()]=Typr._lctf.readScriptTable(t,n+u)}return i},Typr._lctf.readScriptTable=function(t,e){var r=Typr._bin,n=e,i={},a=r.readUshort(t,e);e+=2,i.default=Typr._lctf.readLangSysTable(t,n+a);var s=r.readUshort(t,e);e+=2;for(var o=0;o<s;o++){var u=r.readASCII(t,e,4);e+=4;var h=r.readUshort(t,e);e+=2,i[u.trim()]=Typr._lctf.readLangSysTable(t,n+h)}return i},Typr._lctf.readLangSysTable=function(t,e){var r=Typr._bin,n={};r.readUshort(t,e);e+=2,n.reqFeature=r.readUshort(t,e),e+=2;var i=r.readUshort(t,e);return e+=2,n.features=r.readUshorts(t,e,i),n},Typr.CFF={},Typr.CFF.parse=function(t,e,r){var n=Typr._bin;(t=new Uint8Array(t.buffer,e,r))[e=0],t[++e],t[++e],t[++e];e++;var i=[];e=Typr.CFF.readIndex(t,e,i);for(var a=[],s=0;s<i.length-1;s++)a.push(n.readASCII(t,e+i[s],i[s+1]-i[s]));e+=i[i.length-1];var o=[];e=Typr.CFF.readIndex(t,e,o);var u=[];for(s=0;s<o.length-1;s++)u.push(Typr.CFF.readDict(t,e+o[s],e+o[s+1]));e+=o[o.length-1];var h=u[0],l=[];e=Typr.CFF.readIndex(t,e,l);var f=[];for(s=0;s<l.length-1;s++)f.push(n.readASCII(t,e+l[s],l[s+1]-l[s]));if(e+=l[l.length-1],Typr.CFF.readSubrs(t,e,h),h.CharStrings){e=h.CharStrings;l=[];e=Typr.CFF.readIndex(t,e,l);var c=[];for(s=0;s<l.length-1;s++)c.push(n.readBytes(t,e+l[s],l[s+1]-l[s]));h.CharStrings=c}if(h.ROS){e=h.FDArray;var d=[];e=Typr.CFF.readIndex(t,e,d),h.FDArray=[];for(s=0;s<d.length-1;s++){var p=Typr.CFF.readDict(t,e+d[s],e+d[s+1]);Typr.CFF._readFDict(t,p,f),h.FDArray.push(p)}e+=d[d.length-1],e=h.FDSelect,h.FDSelect=[];var v=t[e];if(e++,3!=v)throw v;var _=n.readUshort(t,e);e+=2;for(s=0;s<_+1;s++)h.FDSelect.push(n.readUshort(t,e),t[e+2]),e+=3}return h.Encoding&&(h.Encoding=Typr.CFF.readEncoding(t,h.Encoding,h.CharStrings.length)),h.charset&&(h.charset=Typr.CFF.readCharset(t,h.charset,h.CharStrings.length)),Typr.CFF._readFDict(t,h,f),h},Typr.CFF._readFDict=function(t,e,r){var n;for(var i in e.Private&&(n=e.Private[1],e.Private=Typr.CFF.readDict(t,n,n+e.Private[0]),e.Private.Subrs&&Typr.CFF.readSubrs(t,n+e.Private.Subrs,e.Private)),e)-1!=["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(i)&&(e[i]=r[e[i]-426+35])},Typr.CFF.readSubrs=function(t,e,r){var n=Typr._bin,i=[];e=Typr.CFF.readIndex(t,e,i);var a,s=i.length;a=s<1240?107:s<33900?1131:32768,r.Bias=a,r.Subrs=[];for(var o=0;o<i.length-1;o++)r.Subrs.push(n.readBytes(t,e+i[o],i[o+1]-i[o]))},Typr.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],Typr.CFF.glyphByUnicode=function(t,e){for(var r=0;r<t.charset.length;r++)if(t.charset[r]==e)return r;return-1},Typr.CFF.glyphBySE=function(t,e){return e<0||e>255?-1:Typr.CFF.glyphByUnicode(t,Typr.CFF.tableSE[e])},Typr.CFF.readEncoding=function(t,e,r){Typr._bin;var n=[".notdef"],i=t[e];if(e++,0!=i)throw"error: unknown encoding format: "+i;var a=t[e];e++;for(var s=0;s<a;s++)n.push(t[e+s]);return n},Typr.CFF.readCharset=function(t,e,r){var n=Typr._bin,i=[".notdef"],a=t[e];if(e++,0==a)for(var s=0;s<r;s++){var o=n.readUshort(t,e);e+=2,i.push(o)}else{if(1!=a&&2!=a)throw"error: format: "+a;for(;i.length<r;){o=n.readUshort(t,e);e+=2;var u=0;1==a?(u=t[e],e++):(u=n.readUshort(t,e),e+=2);for(s=0;s<=u;s++)i.push(o),o++}}return i},Typr.CFF.readIndex=function(t,e,r){var n=Typr._bin,i=n.readUshort(t,e)+1,a=t[e+=2];if(e++,1==a)for(var s=0;s<i;s++)r.push(t[e+s]);else if(2==a)for(s=0;s<i;s++)r.push(n.readUshort(t,e+2*s));else if(3==a)for(s=0;s<i;s++)r.push(16777215&n.readUint(t,e+3*s-1));else if(4==a)for(s=0;s<i;s++)r.push(n.readUint(t,e+4*s));else if(1!=i)throw"unsupported offset size: "+a+", count: "+i;return(e+=i*a)-1},Typr.CFF.getCharString=function(t,e,r){var n=Typr._bin,i=t[e],a=t[e+1],s=(t[e+2],t[e+3],t[e+4],1),o=null,u=null;i<=20&&(o=i,s=1),12==i&&(o=100*i+a,s=2),21<=i&&i<=27&&(o=i,s=1),28==i&&(u=n.readShort(t,e+1),s=3),29<=i&&i<=31&&(o=i,s=1),32<=i&&i<=246&&(u=i-139,s=1),247<=i&&i<=250&&(u=256*(i-247)+a+108,s=2),251<=i&&i<=254&&(u=256*-(i-251)-a-108,s=2),255==i&&(u=n.readInt(t,e+1)/65535,s=5),r.val=null!=u?u:"o"+o,r.size=s},Typr.CFF.readCharString=function(t,e,r){for(var n=e+r,i=Typr._bin,a=[];e<n;){var s=t[e],o=t[e+1],u=(t[e+2],t[e+3],t[e+4],1),h=null,l=null;s<=20&&(h=s,u=1),12==s&&(h=100*s+o,u=2),19!=s&&20!=s||(h=s,u=2),21<=s&&s<=27&&(h=s,u=1),28==s&&(l=i.readShort(t,e+1),u=3),29<=s&&s<=31&&(h=s,u=1),32<=s&&s<=246&&(l=s-139,u=1),247<=s&&s<=250&&(l=256*(s-247)+o+108,u=2),251<=s&&s<=254&&(l=256*-(s-251)-o-108,u=2),255==s&&(l=i.readInt(t,e+1)/65535,u=5),a.push(null!=l?l:"o"+h),e+=u}return a},Typr.CFF.readDict=function(t,e,r){for(var n=Typr._bin,i={},a=[];e<r;){var s=t[e],o=t[e+1],u=(t[e+2],t[e+3],t[e+4],1),h=null,l=null;if(28==s&&(l=n.readShort(t,e+1),u=3),29==s&&(l=n.readInt(t,e+1),u=5),32<=s&&s<=246&&(l=s-139,u=1),247<=s&&s<=250&&(l=256*(s-247)+o+108,u=2),251<=s&&s<=254&&(l=256*-(s-251)-o-108,u=2),255==s)throw l=n.readInt(t,e+1)/65535,u=5,"unknown number";if(30==s){var f=[];for(u=1;;){var c=t[e+u];u++;var d=c>>4,p=15&c;if(15!=d&&f.push(d),15!=p&&f.push(p),15==p)break}for(var v="",_=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],g=0;g<f.length;g++)v+=_[f[g]];l=parseFloat(v)}if(s<=21)if(h=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][s],u=1,12==s)h=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][o],u=2;null!=h?(i[h]=1==a.length?a[0]:a,a=[]):a.push(l),e+=u}return i},Typr.cmap={},Typr.cmap.parse=function(t,e,r){t=new Uint8Array(t.buffer,e,r);e=0;var n=Typr._bin,i={};n.readUshort(t,e);e+=2;var a=n.readUshort(t,e);e+=2;var s=[];i.tables=[];for(var o=0;o<a;o++){var u=n.readUshort(t,e);e+=2;var h=n.readUshort(t,e);e+=2;var l=n.readUint(t,e);e+=4;var f="p"+u+"e"+h,c=s.indexOf(l);if(-1==c){var d;c=i.tables.length,s.push(l);var p=n.readUshort(t,l);0==p?d=Typr.cmap.parse0(t,l):4==p?d=Typr.cmap.parse4(t,l):6==p?d=Typr.cmap.parse6(t,l):12==p?d=Typr.cmap.parse12(t,l):console.log("unknown format: "+p,u,h,l),i.tables.push(d)}if(null!=i[f])throw"multiple tables for one platform+encoding";i[f]=c}return i},Typr.cmap.parse0=function(t,e){var r=Typr._bin,n={};n.format=r.readUshort(t,e),e+=2;var i=r.readUshort(t,e);e+=2;r.readUshort(t,e);e+=2,n.map=[];for(var a=0;a<i-6;a++)n.map.push(t[e+a]);return n},Typr.cmap.parse4=function(t,e){var r=Typr._bin,n=e,i={};i.format=r.readUshort(t,e),e+=2;var a=r.readUshort(t,e);e+=2;r.readUshort(t,e);e+=2;var s=r.readUshort(t,e);e+=2;var o=s/2;i.searchRange=r.readUshort(t,e),e+=2,i.entrySelector=r.readUshort(t,e),e+=2,i.rangeShift=r.readUshort(t,e),e+=2,i.endCount=r.readUshorts(t,e,o),e+=2*o,e+=2,i.startCount=r.readUshorts(t,e,o),e+=2*o,i.idDelta=[];for(var u=0;u<o;u++)i.idDelta.push(r.readShort(t,e)),e+=2;for(i.idRangeOffset=r.readUshorts(t,e,o),e+=2*o,i.glyphIdArray=[];e<n+a;)i.glyphIdArray.push(r.readUshort(t,e)),e+=2;return i},Typr.cmap.parse6=function(t,e){var r=Typr._bin,n={};n.format=r.readUshort(t,e),e+=2;r.readUshort(t,e);e+=2;r.readUshort(t,e);e+=2,n.firstCode=r.readUshort(t,e),e+=2;var i=r.readUshort(t,e);e+=2,n.glyphIdArray=[];for(var a=0;a<i;a++)n.glyphIdArray.push(r.readUshort(t,e)),e+=2;return n},Typr.cmap.parse12=function(t,e){var r=Typr._bin,n={};n.format=r.readUshort(t,e),e+=2,e+=2;r.readUint(t,e);e+=4;r.readUint(t,e);e+=4;var i=r.readUint(t,e);e+=4,n.groups=[];for(var a=0;a<i;a++){var s=e+12*a,o=r.readUint(t,s+0),u=r.readUint(t,s+4),h=r.readUint(t,s+8);n.groups.push([o,u,h])}return n},Typr.DSIG={},Typr.DSIG.parse=function(t,e,r){return{}},Typr.glyf={},Typr.glyf.parse=function(t,e,r,n){for(var i=[],a=0;a<n.maxp.numGlyphs;a++)i.push(null);return i},Typr.glyf._parseGlyf=function(t,e){var r=Typr._bin,n=t._data;if(t.loca[e]==t.loca[e+1])return null;var i=Typr._tabOffset(n,"glyf",t._offset)+t.loca[e],a={};if(a.noc=r.readShort(n,i),i+=2,a.xMin=r.readShort(n,i),i+=2,a.yMin=r.readShort(n,i),i+=2,a.xMax=r.readShort(n,i),i+=2,a.yMax=r.readShort(n,i),i+=2,a.xMin>=a.xMax||a.yMin>=a.yMax)return null;if(a.noc>0){a.endPts=[];for(var s=0;s<a.noc;s++)a.endPts.push(r.readUshort(n,i)),i+=2;var o=r.readUshort(n,i);if(i+=2,n.length-i<o)return null;a.instructions=r.readBytes(n,i,o),i+=o;var u=a.endPts[a.noc-1]+1;a.flags=[];for(s=0;s<u;s++){var h=n[i];if(i++,a.flags.push(h),0!=(8&h)){var l=n[i];i++;for(var f=0;f<l;f++)a.flags.push(h),s++}}a.xs=[];for(s=0;s<u;s++){var c=0!=(2&a.flags[s]),d=0!=(16&a.flags[s]);c?(a.xs.push(d?n[i]:-n[i]),i++):d?a.xs.push(0):(a.xs.push(r.readShort(n,i)),i+=2)}a.ys=[];for(s=0;s<u;s++){c=0!=(4&a.flags[s]),d=0!=(32&a.flags[s]);c?(a.ys.push(d?n[i]:-n[i]),i++):d?a.ys.push(0):(a.ys.push(r.readShort(n,i)),i+=2)}var p=0,v=0;for(s=0;s<u;s++)p+=a.xs[s],v+=a.ys[s],a.xs[s]=p,a.ys[s]=v}else{var _;a.parts=[];do{_=r.readUshort(n,i),i+=2;var g={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(a.parts.push(g),g.glyphIndex=r.readUshort(n,i),i+=2,1&_){var m=r.readShort(n,i);i+=2;var y=r.readShort(n,i);i+=2}else{m=r.readInt8(n,i);i++;y=r.readInt8(n,i);i++}2&_?(g.m.tx=m,g.m.ty=y):(g.p1=m,g.p2=y),8&_?(g.m.a=g.m.d=r.readF2dot14(n,i),i+=2):64&_?(g.m.a=r.readF2dot14(n,i),i+=2,g.m.d=r.readF2dot14(n,i),i+=2):128&_&&(g.m.a=r.readF2dot14(n,i),i+=2,g.m.b=r.readF2dot14(n,i),i+=2,g.m.c=r.readF2dot14(n,i),i+=2,g.m.d=r.readF2dot14(n,i),i+=2)}while(32&_);if(256&_){var b=r.readUshort(n,i);i+=2,a.instr=[];for(s=0;s<b;s++)a.instr.push(n[i]),i++}}return a},Typr.GPOS={},Typr.GPOS.parse=function(t,e,r,n){return Typr._lctf.parse(t,e,r,n,Typr.GPOS.subt)},Typr.GPOS.subt=function(t,e,r){var n=Typr._bin,i=r,a={},s=null;if(a.fmt=n.readUshort(t,r),r+=2,1==e||2==e||3==e||4==e||6==e||7==e||8==e&&a.fmt<=2){var o=n.readUshort(t,r);r+=2,a.coverage=Typr._lctf.readCoverage(t,o+i)}if(1==e&&1==a.fmt){var u=n.readUshort(t,r);r+=2;var h=Typr._lctf.numOfOnes(u);0!=u&&(a.pos=Typr.GPOS.readValueRecord(t,r,u))}else if(2==e){u=n.readUshort(t,r);r+=2;var l=n.readUshort(t,r);r+=2;h=Typr._lctf.numOfOnes(u);var f=Typr._lctf.numOfOnes(l);if(1==a.fmt){a.pairsets=[];var c=n.readUshort(t,r);r+=2;for(var d=0;d<c;d++){var p=i+n.readUshort(t,r);r+=2;var v=n.readUshort(t,p);p+=2;for(var _=[],g=0;g<v;g++){var m=n.readUshort(t,p);p+=2,0!=u&&(D=Typr.GPOS.readValueRecord(t,p,u),p+=2*h),0!=l&&(S=Typr.GPOS.readValueRecord(t,p,l),p+=2*f),_.push({gid2:m,val1:D,val2:S})}a.pairsets.push(_)}}if(2==a.fmt){var y=n.readUshort(t,r);r+=2;var b=n.readUshort(t,r);r+=2;var w=n.readUshort(t,r);r+=2;var E=n.readUshort(t,r);r+=2,a.classDef1=Typr._lctf.readClassDef(t,i+y),a.classDef2=Typr._lctf.readClassDef(t,i+b),a.matrix=[];for(d=0;d<w;d++){var C=[];a.matrix.push(C);for(g=0;g<E;g++){var D=null,S=null;0!=u&&(D=Typr.GPOS.readValueRecord(t,r,u),r+=2*h),0!=l&&(S=Typr.GPOS.readValueRecord(t,r,l),r+=2*f),C.push({val1:D,val2:S})}}}}else if(4==e||6==e){o=n.readUshort(t,r);r+=2,a.baseCoverage=Typr._lctf.readCoverage(t,o+i),a.markClassCount=n.readUshort(t,r),r+=2;var T=n.readUshort(t,r);r+=2,a.MarkArray=Typr.GPOS.readMarkArray(t,i+T);var x=n.readUshort(t,r);r+=2,a.BaseArray=Typr.GPOS.readBaseArray(t,i+x,a.markClassCount)}else if(9==e){s=n.readUshort(t,r),r+=2;var F=n.readUint(t,r);r+=4,a=Typr.GPOS.subt(t,s,i+F)[0]}return[a,s]},Typr.GPOS.readBaseArray=function(t,e,r){var n=Typr._bin,i=e,a=[],s=n.readUshort(t,e);e+=2;for(var o=0;o<s;o++){var u=[];a.push(u);for(var h=0;h<r;h++){var l=i+n.readUshort(t,e);e+=2,u.push(Typr.GPOS.readAnchor(t,l))}}return a},Typr.GPOS.readMarkArray=function(t,e){var r=Typr._bin,n=e,i=[],a=r.readUshort(t,e);e+=2;for(var s=0;s<a;s++){var o={};i.push(o),o.mclass=r.readUshort(t,e),e+=2;var u=r.readUshort(t,e);e+=2,o.anchor=Typr.GPOS.readAnchor(t,n+u)}return i},Typr.GPOS.readAnchor=function(t,e){var r=Typr._bin,n=r.readUshort(t,e);if(e+=2,1==n)return{x:r.readShort(t,e),y:r.readShort(t,e+2)}},Typr.GPOS.readValueRecord=function(t,e,r){var n=Typr._bin,i=[];return i.push(1&r?n.readShort(t,e):0),e+=1&r?2:0,i.push(2&r?n.readShort(t,e):0),e+=2&r?2:0,i.push(4&r?n.readShort(t,e):0),e+=4&r?2:0,i.push(8&r?n.readShort(t,e):0),e+=8&r?2:0,i},Typr.GSUB={},Typr.GSUB.parse=function(t,e,r,n){return Typr._lctf.parse(t,e,r,n,Typr.GSUB.subt)},Typr.GSUB.subt=function(t,e,r){var n=Typr._bin,i=r,a={};if(a.fmt=n.readUshort(t,r),r+=2,1!=e&&4!=e&&5!=e&&6!=e)return null;if(1==e||4==e||5==e&&a.fmt<=2||6==e&&a.fmt<=2){var s=n.readUshort(t,r);r+=2,a.coverage=Typr._lctf.readCoverage(t,i+s)}if(1==e){if(1==a.fmt)a.delta=n.readShort(t,r),r+=2;else if(2==a.fmt){var o=n.readUshort(t,r);r+=2,a.newg=n.readUshorts(t,r,o),r+=2*a.newg.length}}else if(4==e){a.vals=[];o=n.readUshort(t,r);r+=2;for(var u=0;u<o;u++){var h=n.readUshort(t,r);r+=2,a.vals.push(Typr.GSUB.readLigatureSet(t,i+h))}}else if(5==e){if(2==a.fmt){var l=n.readUshort(t,r);r+=2,a.cDef=Typr._lctf.readClassDef(t,i+l),a.scset=[];var f=n.readUshort(t,r);r+=2;for(u=0;u<f;u++){var c=n.readUshort(t,r);r+=2,a.scset.push(0==c?null:Typr.GSUB.readSubClassSet(t,i+c))}}}else if(6==e&&3==a.fmt){for(u=0;u<3;u++){o=n.readUshort(t,r);r+=2;for(var d=[],p=0;p<o;p++)d.push(Typr._lctf.readCoverage(t,i+n.readUshort(t,r+2*p)));r+=2*o,0==u&&(a.backCvg=d),1==u&&(a.inptCvg=d),2==u&&(a.ahedCvg=d)}o=n.readUshort(t,r);r+=2,a.lookupRec=Typr.GSUB.readSubstLookupRecords(t,r,o)}return[a,null]},Typr.GSUB.readSubClassSet=function(t,e){var r=Typr._bin.readUshort,n=e,i=[],a=r(t,e);e+=2;for(var s=0;s<a;s++){var o=r(t,e);e+=2,i.push(Typr.GSUB.readSubClassRule(t,n+o))}return i},Typr.GSUB.readSubClassRule=function(t,e){var r=Typr._bin.readUshort,n={},i=r(t,e),a=r(t,e+=2);e+=2,n.input=[];for(var s=0;s<i-1;s++)n.input.push(r(t,e)),e+=2;return n.substLookupRecords=Typr.GSUB.readSubstLookupRecords(t,e,a),n},Typr.GSUB.readSubstLookupRecords=function(t,e,r){for(var n=Typr._bin.readUshort,i=[],a=0;a<r;a++)i.push(n(t,e),n(t,e+2)),e+=4;return i},Typr.GSUB.readChainSubClassSet=function(t,e){var r=Typr._bin,n=e,i=[],a=r.readUshort(t,e);e+=2;for(var s=0;s<a;s++){var o=r.readUshort(t,e);e+=2,i.push(Typr.GSUB.readChainSubClassRule(t,n+o))}return i},Typr.GSUB.readChainSubClassRule=function(t,e){for(var r=Typr._bin,n={},i=["backtrack","input","lookahead"],a=0;a<i.length;a++){var s=r.readUshort(t,e);e+=2,1==a&&s--,n[i[a]]=r.readUshorts(t,e,s),e+=2*n[i[a]].length}s=r.readUshort(t,e);return e+=2,n.subst=r.readUshorts(t,e,2*s),e+=2*n.subst.length,n},Typr.GSUB.readLigatureSet=function(t,e){var r=Typr._bin,n=e,i=[],a=r.readUshort(t,e);e+=2;for(var s=0;s<a;s++){var o=r.readUshort(t,e);e+=2,i.push(Typr.GSUB.readLigature(t,n+o))}return i},Typr.GSUB.readLigature=function(t,e){var r=Typr._bin,n={chain:[]};n.nglyph=r.readUshort(t,e),e+=2;var i=r.readUshort(t,e);e+=2;for(var a=0;a<i-1;a++)n.chain.push(r.readUshort(t,e)),e+=2;return n},Typr.head={},Typr.head.parse=function(t,e,r){var n=Typr._bin,i={};n.readFixed(t,e);e+=4,i.fontRevision=n.readFixed(t,e),e+=4;n.readUint(t,e);e+=4;n.readUint(t,e);return e+=4,i.flags=n.readUshort(t,e),e+=2,i.unitsPerEm=n.readUshort(t,e),e+=2,i.created=n.readUint64(t,e),e+=8,i.modified=n.readUint64(t,e),e+=8,i.xMin=n.readShort(t,e),e+=2,i.yMin=n.readShort(t,e),e+=2,i.xMax=n.readShort(t,e),e+=2,i.yMax=n.readShort(t,e),e+=2,i.macStyle=n.readUshort(t,e),e+=2,i.lowestRecPPEM=n.readUshort(t,e),e+=2,i.fontDirectionHint=n.readShort(t,e),e+=2,i.indexToLocFormat=n.readShort(t,e),e+=2,i.glyphDataFormat=n.readShort(t,e),e+=2,i},Typr.hhea={},Typr.hhea.parse=function(t,e,r){var n=Typr._bin,i={};n.readFixed(t,e);return e+=4,i.ascender=n.readShort(t,e),e+=2,i.descender=n.readShort(t,e),e+=2,i.lineGap=n.readShort(t,e),e+=2,i.advanceWidthMax=n.readUshort(t,e),e+=2,i.minLeftSideBearing=n.readShort(t,e),e+=2,i.minRightSideBearing=n.readShort(t,e),e+=2,i.xMaxExtent=n.readShort(t,e),e+=2,i.caretSlopeRise=n.readShort(t,e),e+=2,i.caretSlopeRun=n.readShort(t,e),e+=2,i.caretOffset=n.readShort(t,e),e+=2,e+=8,i.metricDataFormat=n.readShort(t,e),e+=2,i.numberOfHMetrics=n.readUshort(t,e),e+=2,i},Typr.hmtx={},Typr.hmtx.parse=function(t,e,r,n){for(var i=Typr._bin,a={aWidth:[],lsBearing:[]},s=0,o=0,u=0;u<n.maxp.numGlyphs;u++)u<n.hhea.numberOfHMetrics&&(s=i.readUshort(t,e),e+=2,o=i.readShort(t,e),e+=2),a.aWidth.push(s),a.lsBearing.push(o);return a},Typr.kern={},Typr.kern.parse=function(t,e,r,n){var i=Typr._bin,a=i.readUshort(t,e);if(e+=2,1==a)return Typr.kern.parseV1(t,e-2,r,n);var s=i.readUshort(t,e);e+=2;for(var o={glyph1:[],rval:[]},u=0;u<s;u++){e+=2;r=i.readUshort(t,e);e+=2;var h=i.readUshort(t,e);e+=2;var l=h>>>8;if(0!=(l&=15))throw"unknown kern table format: "+l;e=Typr.kern.readFormat0(t,e,o)}return o},Typr.kern.parseV1=function(t,e,r,n){var i=Typr._bin;i.readFixed(t,e);e+=4;var a=i.readUint(t,e);e+=4;for(var s={glyph1:[],rval:[]},o=0;o<a;o++){i.readUint(t,e);e+=4;var u=i.readUshort(t,e);e+=2;i.readUshort(t,e);e+=2;var h=u>>>8;if(0!=(h&=15))throw"unknown kern table format: "+h;e=Typr.kern.readFormat0(t,e,s)}return s},Typr.kern.readFormat0=function(t,e,r){var n=Typr._bin,i=-1,a=n.readUshort(t,e);e+=2;n.readUshort(t,e);e+=2;n.readUshort(t,e);e+=2;n.readUshort(t,e);e+=2;for(var s=0;s<a;s++){var o=n.readUshort(t,e);e+=2;var u=n.readUshort(t,e);e+=2;var h=n.readShort(t,e);e+=2,o!=i&&(r.glyph1.push(o),r.rval.push({glyph2:[],vals:[]}));var l=r.rval[r.rval.length-1];l.glyph2.push(u),l.vals.push(h),i=o}return e},Typr.loca={},Typr.loca.parse=function(t,e,r,n){var i=Typr._bin,a=[],s=n.head.indexToLocFormat,o=n.maxp.numGlyphs+1;if(0==s)for(var u=0;u<o;u++)a.push(i.readUshort(t,e+(u<<1))<<1);if(1==s)for(u=0;u<o;u++)a.push(i.readUint(t,e+(u<<2)));return a},Typr.maxp={},Typr.maxp.parse=function(t,e,r){var n=Typr._bin,i={},a=n.readUint(t,e);return e+=4,i.numGlyphs=n.readUshort(t,e),e+=2,65536==a&&(i.maxPoints=n.readUshort(t,e),e+=2,i.maxContours=n.readUshort(t,e),e+=2,i.maxCompositePoints=n.readUshort(t,e),e+=2,i.maxCompositeContours=n.readUshort(t,e),e+=2,i.maxZones=n.readUshort(t,e),e+=2,i.maxTwilightPoints=n.readUshort(t,e),e+=2,i.maxStorage=n.readUshort(t,e),e+=2,i.maxFunctionDefs=n.readUshort(t,e),e+=2,i.maxInstructionDefs=n.readUshort(t,e),e+=2,i.maxStackElements=n.readUshort(t,e),e+=2,i.maxSizeOfInstructions=n.readUshort(t,e),e+=2,i.maxComponentElements=n.readUshort(t,e),e+=2,i.maxComponentDepth=n.readUshort(t,e),e+=2),i},Typr.name={},Typr.name.parse=function(t,e,r){var n=Typr._bin,i={};n.readUshort(t,e);e+=2;var a=n.readUshort(t,e);e+=2;n.readUshort(t,e);for(var s,o=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],u=e+=2,h=0;h<a;h++){var l=n.readUshort(t,e);e+=2;var f=n.readUshort(t,e);e+=2;var c=n.readUshort(t,e);e+=2;var d=n.readUshort(t,e);e+=2;var p=n.readUshort(t,e);e+=2;var v=n.readUshort(t,e);e+=2;var _,g=o[d],m=u+12*a+v;if(0==l)_=n.readUnicode(t,m,p/2);else if(3==l&&0==f)_=n.readUnicode(t,m,p/2);else if(0==f)_=n.readASCII(t,m,p);else if(1==f)_=n.readUnicode(t,m,p/2);else if(3==f)_=n.readUnicode(t,m,p/2);else{if(1!=l)throw"unknown encoding "+f+", platformID: "+l;_=n.readASCII(t,m,p),console.log("reading unknown MAC encoding "+f+" as ASCII")}var y="p"+l+","+c.toString(16);null==i[y]&&(i[y]={}),i[y][g]=_,i[y]._lang=c}for(var b in i)if(null!=i[b].postScriptName&&1033==i[b]._lang)return i[b];for(var b in i)if(null!=i[b].postScriptName&&0==i[b]._lang)return i[b];for(var b in i)if(null!=i[b].postScriptName&&3084==i[b]._lang)return i[b];for(var b in i)if(null!=i[b].postScriptName)return i[b];for(var b in i){s=b;break}return console.log("returning name table with languageID "+i[s]._lang),i[s]},Typr["OS/2"]={},Typr["OS/2"].parse=function(t,e,r){var n=Typr._bin.readUshort(t,e);e+=2;var i={};if(0==n)Typr["OS/2"].version0(t,e,i);else if(1==n)Typr["OS/2"].version1(t,e,i);else if(2==n||3==n||4==n)Typr["OS/2"].version2(t,e,i);else{if(5!=n)throw"unknown OS/2 table version: "+n;Typr["OS/2"].version5(t,e,i)}return i},Typr["OS/2"].version0=function(t,e,r){var n=Typr._bin;return r.xAvgCharWidth=n.readShort(t,e),e+=2,r.usWeightClass=n.readUshort(t,e),e+=2,r.usWidthClass=n.readUshort(t,e),e+=2,r.fsType=n.readUshort(t,e),e+=2,r.ySubscriptXSize=n.readShort(t,e),e+=2,r.ySubscriptYSize=n.readShort(t,e),e+=2,r.ySubscriptXOffset=n.readShort(t,e),e+=2,r.ySubscriptYOffset=n.readShort(t,e),e+=2,r.ySuperscriptXSize=n.readShort(t,e),e+=2,r.ySuperscriptYSize=n.readShort(t,e),e+=2,r.ySuperscriptXOffset=n.readShort(t,e),e+=2,r.ySuperscriptYOffset=n.readShort(t,e),e+=2,r.yStrikeoutSize=n.readShort(t,e),e+=2,r.yStrikeoutPosition=n.readShort(t,e),e+=2,r.sFamilyClass=n.readShort(t,e),e+=2,r.panose=n.readBytes(t,e,10),e+=10,r.ulUnicodeRange1=n.readUint(t,e),e+=4,r.ulUnicodeRange2=n.readUint(t,e),e+=4,r.ulUnicodeRange3=n.readUint(t,e),e+=4,r.ulUnicodeRange4=n.readUint(t,e),e+=4,r.achVendID=n.readASCII(t,e,4),e+=4,r.fsSelection=n.readUshort(t,e),e+=2,r.usFirstCharIndex=n.readUshort(t,e),e+=2,r.usLastCharIndex=n.readUshort(t,e),e+=2,r.sTypoAscender=n.readShort(t,e),e+=2,r.sTypoDescender=n.readShort(t,e),e+=2,r.sTypoLineGap=n.readShort(t,e),e+=2,r.usWinAscent=n.readUshort(t,e),e+=2,r.usWinDescent=n.readUshort(t,e),e+=2},Typr["OS/2"].version1=function(t,e,r){var n=Typr._bin;return e=Typr["OS/2"].version0(t,e,r),r.ulCodePageRange1=n.readUint(t,e),e+=4,r.ulCodePageRange2=n.readUint(t,e),e+=4},Typr["OS/2"].version2=function(t,e,r){var n=Typr._bin;return e=Typr["OS/2"].version1(t,e,r),r.sxHeight=n.readShort(t,e),e+=2,r.sCapHeight=n.readShort(t,e),e+=2,r.usDefault=n.readUshort(t,e),e+=2,r.usBreak=n.readUshort(t,e),e+=2,r.usMaxContext=n.readUshort(t,e),e+=2},Typr["OS/2"].version5=function(t,e,r){var n=Typr._bin;return e=Typr["OS/2"].version2(t,e,r),r.usLowerOpticalPointSize=n.readUshort(t,e),e+=2,r.usUpperOpticalPointSize=n.readUshort(t,e),e+=2},Typr.post={},Typr.post.parse=function(t,e,r){var n=Typr._bin,i={};return i.version=n.readFixed(t,e),e+=4,i.italicAngle=n.readFixed(t,e),e+=4,i.underlinePosition=n.readShort(t,e),e+=2,i.underlineThickness=n.readShort(t,e),e+=2,i},Typr.SVG={},Typr.SVG.parse=function(t,e,r){var n=Typr._bin,i={entries:[]},a=e;n.readUshort(t,e);e+=2;var s=n.readUint(t,e);e+=4;n.readUint(t,e);e+=4,e=s+a;var o=n.readUshort(t,e);e+=2;for(var u=0;u<o;u++){var h=n.readUshort(t,e);e+=2;var l=n.readUshort(t,e);e+=2;var f=n.readUint(t,e);e+=4;var c=n.readUint(t,e);e+=4;for(var d=new Uint8Array(t.buffer,a+f+s,c),p=n.readUTF8(d,0,d.length),v=h;v<=l;v++)i.entries[v]=p}return i},null==Typr&&(Typr={}),null==Typr.U&&(Typr.U={}),Typr.U.codeToGlyph=function(t,e){var r=t.cmap,n=-1;if(null!=r.p0e4?n=r.p0e4:null!=r.p3e1?n=r.p3e1:null!=r.p1e0?n=r.p1e0:null!=r.p0e3&&(n=r.p0e3),-1==n)throw"no familiar platform and encoding!";var i=r.tables[n],a=-1;if(0==i.format)a=e>=i.map.length?0:i.map[e];else if(4==i.format){for(var s=-1,o=0;o<i.endCount.length;o++)if(e<=i.endCount[o]){s=o;break}if(-1==s)a=0;else if(i.startCount[s]>e)a=0;else{a=65535&(0!=i.idRangeOffset[s]?i.glyphIdArray[e-i.startCount[s]+(i.idRangeOffset[s]>>1)-(i.idRangeOffset.length-s)]:e+i.idDelta[s])}}else{if(12!=i.format)throw"unknown cmap table format "+i.format;if(e>i.groups[i.groups.length-1][1])a=0;else{for(o=0;o<i.groups.length;o++){var u=i.groups[o];u[0]<=e&&e<=u[1]&&(a=u[2]+(e-u[0]))}-1==a&&(a=0)}}return 0==a||null!=t.SVG&&null!=t.SVG.entries[a]||null!=t.CFF||t.loca[a]!=t.loca[a+1]||-1!=[9,10,11,12,13,32,133,160,5760,8232,8233,8239,12288,6158,8203,8204,8205,8288,65279].indexOf(e)||8192<=e&&e<=8202||(a=0),a},Typr.U.glyphToPath=function(t,e){var r={cmds:[],crds:[]};if(t.SVG&&t.SVG.entries[e]){var n=t.SVG.entries[e];return null==n?r:("string"==typeof n&&(n=Typr.U.SVG.toPath(n),t.SVG.entries[e]=n),n)}if(t.CFF){var i={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:t.CFF.Private?t.CFF.Private.defaultWidthX:0,open:!1},a=t.CFF,s=t.CFF.Private;if(a.ROS){for(var o=0;a.FDSelect[o+2]<=e;)o+=2;s=a.FDArray[a.FDSelect[o+1]].Private}Typr.U._drawCFF(t.CFF.CharStrings[e],i,a,s,r)}else t.glyf&&Typr.U._drawGlyf(e,t,r);return r},Typr.U._drawGlyf=function(t,e,r){var n=e.glyf[t];null==n&&(n=e.glyf[t]=Typr.glyf._parseGlyf(e,t)),null!=n&&(n.noc>-1?Typr.U._simpleGlyph(n,r):Typr.U._compoGlyph(n,e,r))},Typr.U._simpleGlyph=function(t,e){for(var r=0;r<t.noc;r++){for(var n=0==r?0:t.endPts[r-1]+1,i=t.endPts[r],a=n;a<=i;a++){var s=a==n?i:a-1,o=a==i?n:a+1,u=1&t.flags[a],h=1&t.flags[s],l=1&t.flags[o],f=t.xs[a],c=t.ys[a];if(a==n)if(u){if(!h){Typr.U.P.moveTo(e,f,c);continue}Typr.U.P.moveTo(e,t.xs[s],t.ys[s])}else h?Typr.U.P.moveTo(e,t.xs[s],t.ys[s]):Typr.U.P.moveTo(e,Math.floor(.5*(t.xs[s]+f)),Math.floor(.5*(t.ys[s]+c)));u?h&&Typr.U.P.lineTo(e,f,c):l?Typr.U.P.qcurveTo(e,f,c,t.xs[o],t.ys[o]):Typr.U.P.qcurveTo(e,f,c,Math.floor(.5*(f+t.xs[o])),Math.floor(.5*(c+t.ys[o])))}Typr.U.P.closePath(e)}},Typr.U._compoGlyph=function(t,e,r){for(var n=0;n<t.parts.length;n++){var i={cmds:[],crds:[]},a=t.parts[n];Typr.U._drawGlyf(a.glyphIndex,e,i);for(var s=a.m,o=0;o<i.crds.length;o+=2){var u=i.crds[o],h=i.crds[o+1];r.crds.push(u*s.a+h*s.b+s.tx),r.crds.push(u*s.c+h*s.d+s.ty)}for(o=0;o<i.cmds.length;o++)r.cmds.push(i.cmds[o])}},Typr.U._getGlyphClass=function(t,e){var r=Typr._lctf.getInterval(e,t);return-1==r?0:e[r+2]},Typr.U.getPairAdjustment=function(t,e,r){if(t.GPOS)for(var n=t.GPOS,i=n.lookupList,a=n.featureList,s=[],o=0;o<a.length;o++){var u=a[o];if("kern"==u.tag||"mark"==u.tag||"mkmk"==u.tag)for(var h=0;h<u.tab.length;h++)if(!s[u.tab[h]]){s[u.tab[h]]=!0;for(var l=i[u.tab[h]],f=0;f<l.tabs.length;f++){var c,d,p=l.tabs[f];if((!p.coverage||-1!=(c=Typr._lctf.coverageIndex(p.coverage,e)))&&(!p.baseCoverage||-1!=(d=Typr._lctf.coverageIndex(p.baseCoverage,-1)))){if(1==l.ltype)return p.pos[2];if(2==l.ltype){var v;if(1==p.fmt){var _=p.pairsets[c];for(o=0;o<_.length;o++)_[o].gid2==r&&(v=_[o])}else if(2==p.fmt){var g=Typr.U._getGlyphClass(e,p.classDef1),m=Typr.U._getGlyphClass(r,p.classDef2);v=p.matrix[g][m]}if(v&&v.val1)return v.val1[2]}else if(4==l.ltype||6==l.ltype){var y=p.MarkArray[c];p.BaseArray[d][y.mclass]}}}}}if(t.kern){var b=t.kern.glyph1.indexOf(e);if(-1!=b){var w=t.kern.rval[b].glyph2.indexOf(r);if(-1!=w)return t.kern.rval[b].vals[w]}}return 0},Typr.U.stringToGlyphs=function(t,e){for(var r=[],n=[],i=0;i<e.length;i++){var a=e.codePointAt(i);if(a>65535&&i++,2367==a&&n.push(i,-1),6081<=a&&a<=6085)for(var s=i-1;s>=0&&i-s<5;s--){var o=e.codePointAt(s);if(6016<=o&&o<=6031||6048==o){n.push(i,s-i),s=-1;break}}6098==a&&6042==e.charCodeAt(i+1)&&n.push(i,-1,i+1,-1),r.push(Typr.U.codeToGlyph(t,a))}for(i=0;i<n.length;i+=2){var u=n[i],h=n[i+1],l=r[u];for(s=0;s>h;s--)r[u+s]=r[u+s-1];r[u+h]=l}var f=t.GSUB;if(null==f)return r;for(var c=f.lookupList,d=f.featureList,p=["rlig","liga","mset","isol","init","fina","medi","half","pres","blws","blwf","pstf","pref","ccmp"],v=[],_=0;_<d.length;_++){var g=d[_];if(-1!=p.indexOf(g.tag))for(var m=0;m<g.tab.length;m++)if(!v[g.tab[m]]){v[g.tab[m]]=!0;for(var y=c[g.tab[m]],b=0;b<r.length;b++){var w=Typr.U._getWPfeature(e,b);-1!="isol,init,fina,medi".indexOf(g.tag)&&g.tag!=w||Typr.U._applySubs(r,b,y,c)}}}return r},Typr.U._getWPfeature=function(t,e){var r='\n\t" ,.:;!?()  ',n="",i=0==e||-1!=r.indexOf(t[e-1]),a=e==t.length-1||-1!=r.indexOf(t[e+1]);i||-1==n.indexOf(t[e-1])||(i=!0),a||-1==n.indexOf(t[e])||(a=!0),a||-1=="".indexOf(t[e+1])||(a=!0),i||-1=="".indexOf(t[e])||(i=!0);return i?a?"isol":"init":a?"fina":"medi"},Typr.U._applySubs=function(t,e,r,n){for(var i=Math.min(3,t.length-e-1),a=0;a<r.tabs.length;a++)if(null!=r.tabs[a]){var s,o=r.tabs[a];if(!o.coverage||-1!=(s=Typr._lctf.coverageIndex(o.coverage,t[e])))if(1==r.ltype){t[e];1==o.fmt?t[e]=t[e]+o.delta:t[e]=o.newg[s]}else if(4==r.ltype)for(var u=o.vals[s],h=0;h<u.length;h++){var l=u[h],f=l.chain.length;if(!(f>i)){for(var c=!0,d=0,p=0;p<f;p++){for(;-1==t[e+d+(1+p)];)d++;l.chain[p]!=t[e+d+(1+p)]&&(c=!1)}if(c){t[e]=l.nglyph;for(p=0;p<f+d;p++)t[e+p+1]=-1;break}}}else if(6==r.ltype&&3==o.fmt){if(!Typr.U._glsCovered(t,o.backCvg,e-o.backCvg.length))continue;if(!Typr.U._glsCovered(t,o.inptCvg,e))continue;if(!Typr.U._glsCovered(t,o.ahedCvg,e+o.inptCvg.length))continue;for(var v=o.lookupRec,_=0;_<v.length;_+=2){var g=v[_],m=n[v[_+1]];Typr.U._applySubs(t,e+g,m,n)}}}},Typr.U._glsCovered=function(t,e,r){for(var n=0;n<e.length;n++){if(-1==Typr._lctf.coverageIndex(e[n],t[r+n]))return!1}return!0},Typr.U.glyphsToPath=function(t,e,r){for(var n={cmds:[],crds:[]},i=0,a=0;a<e.length;a++){var s=e[a];if(-1!=s){for(var o=a<e.length-1&&-1!=e[a+1]?e[a+1]:0,u=(0==a||e[a-1],Typr.U.glyphToPath(t,s)),h=0;h<u.crds.length;h+=2)n.crds.push(u.crds[h]+i),n.crds.push(u.crds[h+1]+0);r&&n.cmds.push(r);for(h=0;h<u.cmds.length;h++)n.cmds.push(u.cmds[h]);r&&(0==u.cmds.length?n.cmds.pop():n.cmds.push("X")),i+=t.hmtx.aWidth[s],i+=Typr.U.getPairAdjustment(t,s,o)}}return n},Typr.U.pathToSVG=function(t,e){null==e&&(e=5);for(var r=[],n=0,i={M:2,L:2,Q:4,C:6},a=0;a<t.cmds.length;a++){var s=t.cmds[a],o=n+(i[s]?i[s]:0);for(r.push(s);n<o;){var u=t.crds[n++];r.push(parseFloat(u.toFixed(e))+(n==o?"":" "))}}return r.join("")},Typr.U.SVGToPath=function(t){var e={cmds:[],crds:[]},r=Typr.U.SVG._tokens(t);return Typr.U.SVG._toksToPath(r,e),e},Typr.U.pathToContext=function(t,e){for(var r=0,n=t.crds,i=0;i<t.cmds.length;i++){var a=t.cmds[i];"M"==a?(e.moveTo(n[r],n[r+1]),r+=2):"L"==a?(e.lineTo(n[r],n[r+1]),r+=2):"C"==a?(e.bezierCurveTo(n[r],n[r+1],n[r+2],n[r+3],n[r+4],n[r+5]),r+=6):"Q"==a?(e.quadraticCurveTo(n[r],n[r+1],n[r+2],n[r+3]),r+=4):"#"==a.charAt(0)?(e.beginPath(),e.fillStyle=a):"Z"==a?e.closePath():"X"==a&&e.fill()}},Typr.U.P={},Typr.U.P.moveTo=function(t,e,r){t.cmds.push("M"),t.crds.push(e,r)},Typr.U.P.lineTo=function(t,e,r){t.cmds.push("L"),t.crds.push(e,r)},Typr.U.P.curveTo=function(t,e,r,n,i,a,s){t.cmds.push("C"),t.crds.push(e,r,n,i,a,s)},Typr.U.P.qcurveTo=function(t,e,r,n,i){t.cmds.push("Q"),t.crds.push(e,r,n,i)},Typr.U.P.closePath=function(t){t.cmds.push("Z")},Typr.U._drawCFF=function(t,e,r,n,i){for(var a=e.stack,s=e.nStems,o=e.haveWidth,u=e.width,h=e.open,l=0,f=e.x,c=e.y,d=0,p=0,v=0,_=0,g=0,m=0,y=0,b=0,w=0,E=0,C={val:0,size:0};l<t.length;){Typr.CFF.getCharString(t,l,C);var D=C.val;if(l+=C.size,"o1"==D||"o18"==D)a.length%2!=0&&!o&&(u=a.shift()+n.nominalWidthX),s+=a.length>>1,a.length=0,o=!0;else if("o3"==D||"o23"==D){a.length%2!=0&&!o&&(u=a.shift()+n.nominalWidthX),s+=a.length>>1,a.length=0,o=!0}else if("o4"==D)a.length>1&&!o&&(u=a.shift()+n.nominalWidthX,o=!0),h&&Typr.U.P.closePath(i),c+=a.pop(),Typr.U.P.moveTo(i,f,c),h=!0;else if("o5"==D)for(;a.length>0;)f+=a.shift(),c+=a.shift(),Typr.U.P.lineTo(i,f,c);else if("o6"==D||"o7"==D)for(var S=a.length,T="o6"==D,x=0;x<S;x++){var F=a.shift();T?f+=F:c+=F,T=!T,Typr.U.P.lineTo(i,f,c)}else if("o8"==D||"o24"==D){S=a.length;for(var A=0;A+6<=S;)d=f+a.shift(),p=c+a.shift(),v=d+a.shift(),_=p+a.shift(),f=v+a.shift(),c=_+a.shift(),Typr.U.P.curveTo(i,d,p,v,_,f,c),A+=6;"o24"==D&&(f+=a.shift(),c+=a.shift(),Typr.U.P.lineTo(i,f,c))}else{if("o11"==D)break;if("o1234"==D||"o1235"==D||"o1236"==D||"o1237"==D)"o1234"==D&&(p=c,v=(d=f+a.shift())+a.shift(),E=_=p+a.shift(),m=_,b=c,f=(y=(g=(w=v+a.shift())+a.shift())+a.shift())+a.shift(),Typr.U.P.curveTo(i,d,p,v,_,w,E),Typr.U.P.curveTo(i,g,m,y,b,f,c)),"o1235"==D&&(d=f+a.shift(),p=c+a.shift(),v=d+a.shift(),_=p+a.shift(),w=v+a.shift(),E=_+a.shift(),g=w+a.shift(),m=E+a.shift(),y=g+a.shift(),b=m+a.shift(),f=y+a.shift(),c=b+a.shift(),a.shift(),Typr.U.P.curveTo(i,d,p,v,_,w,E),Typr.U.P.curveTo(i,g,m,y,b,f,c)),"o1236"==D&&(d=f+a.shift(),p=c+a.shift(),v=d+a.shift(),E=_=p+a.shift(),m=_,y=(g=(w=v+a.shift())+a.shift())+a.shift(),b=m+a.shift(),f=y+a.shift(),Typr.U.P.curveTo(i,d,p,v,_,w,E),Typr.U.P.curveTo(i,g,m,y,b,f,c)),"o1237"==D&&(d=f+a.shift(),p=c+a.shift(),v=d+a.shift(),_=p+a.shift(),w=v+a.shift(),E=_+a.shift(),g=w+a.shift(),m=E+a.shift(),y=g+a.shift(),b=m+a.shift(),Math.abs(y-f)>Math.abs(b-c)?f=y+a.shift():c=b+a.shift(),Typr.U.P.curveTo(i,d,p,v,_,w,E),Typr.U.P.curveTo(i,g,m,y,b,f,c));else if("o14"==D){if(a.length>0&&!o&&(u=a.shift()+r.nominalWidthX,o=!0),4==a.length){var P=a.shift(),M=a.shift(),I=a.shift(),k=a.shift(),U=Typr.CFF.glyphBySE(r,I),O=Typr.CFF.glyphBySE(r,k);Typr.U._drawCFF(r.CharStrings[U],e,r,n,i),e.x=P,e.y=M,Typr.U._drawCFF(r.CharStrings[O],e,r,n,i)}h&&(Typr.U.P.closePath(i),h=!1)}else if("o19"==D||"o20"==D){a.length%2!=0&&!o&&(u=a.shift()+n.nominalWidthX),s+=a.length>>1,a.length=0,o=!0,l+=s+7>>3}else if("o21"==D)a.length>2&&!o&&(u=a.shift()+n.nominalWidthX,o=!0),c+=a.pop(),f+=a.pop(),h&&Typr.U.P.closePath(i),Typr.U.P.moveTo(i,f,c),h=!0;else if("o22"==D)a.length>1&&!o&&(u=a.shift()+n.nominalWidthX,o=!0),f+=a.pop(),h&&Typr.U.P.closePath(i),Typr.U.P.moveTo(i,f,c),h=!0;else if("o25"==D){for(;a.length>6;)f+=a.shift(),c+=a.shift(),Typr.U.P.lineTo(i,f,c);d=f+a.shift(),p=c+a.shift(),v=d+a.shift(),_=p+a.shift(),f=v+a.shift(),c=_+a.shift(),Typr.U.P.curveTo(i,d,p,v,_,f,c)}else if("o26"==D)for(a.length%2&&(f+=a.shift());a.length>0;)d=f,p=c+a.shift(),f=v=d+a.shift(),c=(_=p+a.shift())+a.shift(),Typr.U.P.curveTo(i,d,p,v,_,f,c);else if("o27"==D)for(a.length%2&&(c+=a.shift());a.length>0;)p=c,v=(d=f+a.shift())+a.shift(),_=p+a.shift(),f=v+a.shift(),c=_,Typr.U.P.curveTo(i,d,p,v,_,f,c);else if("o10"==D||"o29"==D){var B="o10"==D?n:r;if(0==a.length)console.log("error: empty stack");else{var R=a.pop(),L=B.Subrs[R+B.Bias];e.x=f,e.y=c,e.nStems=s,e.haveWidth=o,e.width=u,e.open=h,Typr.U._drawCFF(L,e,r,n,i),f=e.x,c=e.y,s=e.nStems,o=e.haveWidth,u=e.width,h=e.open}}else if("o30"==D||"o31"==D){var N=a.length,z=(A=0,"o31"==D);for(A+=N-(S=-3&N);A<S;)z?(p=c,v=(d=f+a.shift())+a.shift(),c=(_=p+a.shift())+a.shift(),S-A==5?(f=v+a.shift(),A++):f=v,z=!1):(d=f,p=c+a.shift(),v=d+a.shift(),_=p+a.shift(),f=v+a.shift(),S-A==5?(c=_+a.shift(),A++):c=_,z=!0),Typr.U.P.curveTo(i,d,p,v,_,f,c),A+=4}else{if("o"==(D+"").charAt(0))throw console.log("Unknown operation: "+D,t),D;a.push(D)}}}e.x=f,e.y=c,e.nStems=s,e.haveWidth=o,e.width=u,e.open=h},Typr.U.SVG={},Typr.U.SVG.toPath=function(t){var e={cmds:[],crds:[]};if(null==t)return e;for(var r=(new DOMParser).parseFromString(t,"image/svg+xml").firstChild;"svg"!=r.tagName;)r=r.nextSibling;var n=r.getAttribute("viewBox");n=n?n.trim().split(" ").map(parseFloat):[0,0,1e3,1e3],Typr.U.SVG._toPath(r.children,e);for(var i=0;i<e.crds.length;i+=2){var a=e.crds[i],s=e.crds[i+1];a-=n[0],s=-(s-=n[1]),e.crds[i]=a,e.crds[i+1]=s}return e},Typr.U.SVG._toPath=function(t,e,r){for(var n=0;n<t.length;n++){var i=t[n],a=i.tagName,s=i.getAttribute("fill");if(null==s&&(s=r),"g"==a)Typr.U.SVG._toPath(i.children,e,s);else if("path"==a){e.cmds.push(s||"#000000");var o=i.getAttribute("d"),u=Typr.U.SVG._tokens(o);Typr.U.SVG._toksToPath(u,e),e.cmds.push("X")}else"defs"==a||console.log(a,i)}},Typr.U.SVG._tokens=function(t){for(var e=[],r=0,n=!1,i="",a="";r<t.length;){var s=t.charCodeAt(r),o=t.charAt(r);r++;var u=48<=s&&s<=57||"."==o||"-"==o||"e"==o;n?"-"==o&&"e"!=a||"."==o&&-1!=i.indexOf(".")?(e.push(parseFloat(i)),i=o):u?i+=o:(e.push(parseFloat(i)),","!=o&&" "!=o&&e.push(o),n=!1):u?(i=o,n=!0):","!=o&&" "!=o&&e.push(o),a=o}return n&&e.push(parseFloat(i)),e},Typr.U.SVG._toksToPath=function(t,e){for(var r=0,n=0,i=0,a=0,s=0,o={M:2,L:2,H:1,V:1,S:4,A:7,Q:4,C:6},u=e.cmds,h=e.crds;r<t.length;){var l=t[r];r++;var f=l.toUpperCase();if("Z"==f)u.push("Z"),n=a,i=s;else for(var c=o[f],d=Typr.U.SVG._reps(t,r,c),p=0;p<d;p++){1==p&&"M"==f&&(l=l==f?"L":"l",f="L");var v=0,_=0;if(l!=f&&(v=n,_=i),"M"==f)n=v+t[r++],i=_+t[r++],u.push("M"),h.push(n,i),a=n,s=i;else if("L"==f)n=v+t[r++],i=_+t[r++],u.push("L"),h.push(n,i);else if("H"==f)n=v+t[r++],u.push("L"),h.push(n,i);else if("V"==f)i=_+t[r++],u.push("L"),h.push(n,i);else if("Q"==f){var g=v+t[r++],m=_+t[r++],y=v+t[r++],b=_+t[r++];u.push("Q"),h.push(g,m,y,b),n=y,i=b}else if("C"==f){g=v+t[r++],m=_+t[r++],y=v+t[r++],b=_+t[r++];var w=v+t[r++],E=_+t[r++];u.push("C"),h.push(g,m,y,b,w,E),n=w,i=E}else if("S"==f){var C=Math.max(h.length-4,0);g=n+n-h[C],m=i+i-h[C+1],y=v+t[r++],b=_+t[r++],w=v+t[r++],E=_+t[r++];u.push("C"),h.push(g,m,y,b,w,E),n=w,i=E}else if("A"==f){g=n,m=i;var D=t[r++],S=t[r++],T=t[r++]*(Math.PI/180),x=t[r++],F=t[r++],A=(g-(y=v+t[r++]))/2,P=(m-(b=_+t[r++]))/2,M=Math.cos(T),I=Math.sin(T),k=M*A+I*P,U=-I*A+M*P,O=D*D,B=S*S,R=k*k,L=U*U,N=(O*B-O*L-B*R)/(O*L+B*R),z=(x!=F?1:-1)*Math.sqrt(Math.max(N,0)),G=z*(D*U)/S,j=S*k*-z/D,q=M*G-I*j+(g+y)/2,H=I*G+M*j+(m+b)/2,X=function(t,e,r,n){var i=(t*r+e*n)/(Math.sqrt(t*t+e*e)*Math.sqrt(r*r+n*n));return(t*n-e*r>=0?1:-1)*Math.acos(Math.max(-1,Math.min(1,i)))},W=(k-G)/D,V=(U-j)/S,Z=X(1,0,W,V),Y=X(W,V,(-k-G)/D,(-U-j)/S);!function(t,e,r,n,i,a,s){var o=function(t,e){var r=Math.sin(e),n=Math.cos(e),i=(e=t[0],t[1]),a=t[2],s=t[3];t[0]=e*n+i*r,t[1]=-e*r+i*n,t[2]=a*n+s*r,t[3]=-a*r+s*n},u=function(t,e){for(var r=0;r<e.length;r+=2){var n=e[r],i=e[r+1];e[r]=t[0]*n+t[2]*i+t[4],e[r+1]=t[1]*n+t[3]*i+t[5]}},h=function(t,e){for(var r=0;r<e.length;r++)t.push(e[r])};if(s)for(;a>i;)a-=2*Math.PI;else for(;a<i;)a+=2*Math.PI;var l=(a-i)/4,f=Math.cos(l/2),c=-Math.sin(l/2),d=(4-f)/3,p=0==c?c:(1-f)*(3-f)/(3*c),v=[d,p,d,-p,f,-c],_={cmds:["C","C","C","C"],crds:v.slice(0)},g=[1,0,0,1,0,0];o(g,-l);for(var m=0;m<3;m++)u(g,v),h(_.crds,v);o(g,l/2-i),g[0]*=n,g[1]*=n,g[2]*=n,g[3]*=n,g[4]=e,g[5]=r,u(g,_.crds),u(t.ctm,_.crds),function(t,e){h(t.cmds,e.cmds),h(t.crds,e.crds)}(t.pth,_)}({pth:e,ctm:[D*M,D*I,-S*I,S*M,q,H]},0,0,1,Z,Z+(Y%=2*Math.PI),0==F),n=y,i=b}else console.log("Unknown SVG command "+l)}}},Typr.U.SVG._reps=function(t,e,r){for(var n=e;n<t.length&&"string"!=typeof t[n];)n+=r;return(n-e)/r};var UZIP={parse:function(t,e){for(var r=UZIP.bin.readUshort,n=UZIP.bin.readUint,i=0,a={},s=new Uint8Array(t),o=s.length-4;101010256!=n(s,o);)o--;i=o;i+=4;var u=r(s,i+=4),h=(r(s,i+=2),n(s,i+=2)),l=n(s,i+=4);i+=4,i=l;for(var f=0;f<u;f++){n(s,i);i+=4,i+=4,i+=4;n(s,i+=4),h=n(s,i+=4);var c=n(s,i+=4),d=r(s,i+=4),p=r(s,i+2),v=r(s,i+4);i+=6;var _=n(s,i+=8);i+=4,i+=d+p+v,UZIP._readLocal(s,_,a,h,c,e)}return a},_readLocal:function(t,e,r,n,i,a){var s=UZIP.bin.readUshort,o=UZIP.bin.readUint,u=(o(t,e),s(t,e+=4),s(t,e+=2),s(t,e+=2));o(t,e+=2),o(t,e+=4);e+=4;var h=s(t,e+=8),l=s(t,e+=2);e+=2;var f=UZIP.bin.readUTF8(t,e,h);if(e+=h,e+=l,a)r[f]={size:i,csize:n};else{var c=new Uint8Array(t.buffer,e);if(0==u)r[f]=new Uint8Array(c.buffer.slice(e,e+n));else{if(8!=u)throw"unknown compression method: "+u;var d=new Uint8Array(i);UZIP.inflateRaw(c,d),r[f]=d}}},inflateRaw:function(t,e){return UZIP.F.inflate(t,e)},inflate:function(t,e){t[0],t[1];return UZIP.inflateRaw(new Uint8Array(t.buffer,t.byteOffset+2,t.length-6),e)},deflate:function(t,e){null==e&&(e={level:6});var r=0,n=new Uint8Array(50+Math.floor(1.1*t.length));n[r]=120,n[r+1]=156,r+=2,r=UZIP.F.deflateRaw(t,n,r,e.level);var i=UZIP.adler(t,0,t.length);return n[r+0]=i>>>24&255,n[r+1]=i>>>16&255,n[r+2]=i>>>8&255,n[r+3]=i>>>0&255,new Uint8Array(n.buffer,0,r+4)},deflateRaw:function(t,e){null==e&&(e={level:6});var r=new Uint8Array(50+Math.floor(1.1*t.length)),n=UZIP.F.deflateRaw(t,r,n,e.level);return new Uint8Array(r.buffer,0,n)},encode:function(t){var e=0,r=UZIP.bin.writeUint,n=UZIP.bin.writeUshort,i={};for(var a in t){var s=!UZIP._noNeed(a),o=t[a],u=UZIP.crc.crc(o,0,o.length);i[a]={cpr:s,usize:o.length,crc:u,file:s?UZIP.deflateRaw(o):o}}for(var a in i)e+=i[a].file.length+30+46+2*UZIP.bin.sizeUTF8(a);e+=22;var h=new Uint8Array(e),l=0,f=[];for(var a in i){var c=i[a];f.push(l),l=UZIP._writeHeader(h,l,a,c,0)}var d=0,p=l;for(var a in i){c=i[a];f.push(l),l=UZIP._writeHeader(h,l,a,c,1,f[d++])}var v=l-p;return r(h,l,101010256),l+=4,n(h,l+=4,d),n(h,l+=2,d),r(h,l+=2,v),r(h,l+=4,p),l+=4,l+=2,h.buffer},_noNeed:function(t){var e=t.split(".").pop().toLowerCase();return-1!="png,jpg,jpeg,zip".indexOf(e)},_writeHeader:function(t,e,r,n,i,a){var s=UZIP.bin.writeUint,o=UZIP.bin.writeUshort,u=n.file;return s(t,e,0==i?67324752:33639248),e+=4,1==i&&(e+=2),o(t,e,20),o(t,e+=2,0),o(t,e+=2,n.cpr?8:0),s(t,e+=2,0),s(t,e+=4,n.crc),s(t,e+=4,u.length),s(t,e+=4,n.usize),o(t,e+=4,UZIP.bin.sizeUTF8(r)),o(t,e+=2,0),e+=2,1==i&&(e+=2,e+=2,s(t,e+=6,a),e+=4),e+=UZIP.bin.writeUTF8(t,e,r),0==i&&(t.set(u,e),e+=u.length),e}};UZIP.crc={table:function(){for(var t=new Uint32Array(256),e=0;e<256;e++){for(var r=e,n=0;n<8;n++)1&r?r=3988292384^r>>>1:r>>>=1;t[e]=r}return t}(),update:function(t,e,r,n){for(var i=0;i<n;i++)t=UZIP.crc.table[255&(t^e[r+i])]^t>>>8;return t},crc:function(t,e,r){return 4294967295^UZIP.crc.update(4294967295,t,e,r)}},UZIP.adler=function(t,e,r){for(var n=1,i=0,a=e,s=e+r;a<s;){for(var o=Math.min(a+5552,s);a<o;)i+=n+=t[a++];n%=65521,i%=65521}return i<<16|n},UZIP.bin={readUshort:function(t,e){return t[e]|t[e+1]<<8},writeUshort:function(t,e,r){t[e]=255&r,t[e+1]=r>>8&255},readUint:function(t,e){return 16777216*t[e+3]+(t[e+2]<<16|t[e+1]<<8|t[e])},writeUint:function(t,e,r){t[e]=255&r,t[e+1]=r>>8&255,t[e+2]=r>>16&255,t[e+3]=r>>24&255},readASCII:function(t,e,r){for(var n="",i=0;i<r;i++)n+=String.fromCharCode(t[e+i]);return n},writeASCII:function(t,e,r){for(var n=0;n<r.length;n++)t[e+n]=r.charCodeAt(n)},pad:function(t){return t.length<2?"0"+t:t},readUTF8:function(t,e,r){for(var n,i="",a=0;a<r;a++)i+="%"+UZIP.bin.pad(t[e+a].toString(16));try{n=decodeURIComponent(i)}catch(n){return UZIP.bin.readASCII(t,e,r)}return n},writeUTF8:function(t,e,r){for(var n=r.length,i=0,a=0;a<n;a++){var s=r.charCodeAt(a);if(0==(4294967168&s))t[e+i]=s,i++;else if(0==(4294965248&s))t[e+i]=192|s>>6,t[e+i+1]=128|s>>0&63,i+=2;else if(0==(4294901760&s))t[e+i]=224|s>>12,t[e+i+1]=128|s>>6&63,t[e+i+2]=128|s>>0&63,i+=3;else{if(0!=(4292870144&s))throw"e";t[e+i]=240|s>>18,t[e+i+1]=128|s>>12&63,t[e+i+2]=128|s>>6&63,t[e+i+3]=128|s>>0&63,i+=4}}return i},sizeUTF8:function(t){for(var e=t.length,r=0,n=0;n<e;n++){var i=t.charCodeAt(n);if(0==(4294967168&i))r++;else if(0==(4294965248&i))r+=2;else if(0==(4294901760&i))r+=3;else{if(0!=(4292870144&i))throw"e";r+=4}}return r}},UZIP.F={},UZIP.F.deflateRaw=function(t,e,r,n){var i=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][n],a=UZIP.F.U,s=UZIP.F._goodIndex,o=(UZIP.F._hash,UZIP.F._putsE),u=0,h=r<<3,l=0,f=t.length;if(0==n){for(;u<f;){o(e,h,u+(C=Math.min(65535,f-u))==f?1:0),h=UZIP.F._copyExact(t,u,C,e,h+8),u+=C}return h>>>3}var c=a.lits,d=a.strt,p=a.prev,v=0,_=0,g=0,m=0,y=0,b=0;f>2&&(d[b=UZIP.F._hash(t,0)]=0);for(u=0;u<f;u++){if(y=b,u+1<f-2){b=UZIP.F._hash(t,u+1);var w=u+1&32767;p[w]=d[b],d[b]=w}if(l<=u){(v>14e3||_>26697)&&(l<u&&(c[v]=u-l,v+=2,l=u),h=UZIP.F._writeBlock(u==f-1||l==f?1:0,c,v,m,t,g,u-g,e,h),v=_=m=0,g=u);var E=0;u<f-2&&(E=UZIP.F._bestMatch(t,u,p,y,Math.min(i[2],f-u),i[3]));var C=E>>>16,D=65535&E;if(0!=E){D=65535&E;var S=s(C=E>>>16,a.of0);a.lhst[257+S]++;var T=s(D,a.df0);a.dhst[T]++,m+=a.exb[S]+a.dxb[T],c[v]=C<<23|u-l,c[v+1]=D<<16|S<<8|T,v+=2,l=u+C}else a.lhst[t[u]]++;_++}}for(g==u&&0!=t.length||(l<u&&(c[v]=u-l,v+=2,l=u),h=UZIP.F._writeBlock(1,c,v,m,t,g,u-g,e,h),v=0,_=0,v=_=m=0,g=u);0!=(7&h);)h++;return h>>>3},UZIP.F._bestMatch=function(t,e,r,n,i,a){var s=32767&e,o=r[s],u=s-o+32768&32767;if(o==s||n!=UZIP.F._hash(t,e-u))return 0;for(var h=0,l=0,f=Math.min(32767,e);u<=f&&0!=--a&&o!=s;){if(0==h||t[e+h]==t[e+h-u]){var c=UZIP.F._howLong(t,e,u);if(c>h){if(l=u,(h=c)>=i)break;u+2<c&&(c=u+2);for(var d=0,p=0;p<c-2;p++){var v=e-u+p+32768&32767,_=v-r[v]+32768&32767;_>d&&(d=_,o=v)}}}u+=(s=o)-(o=r[s])+32768&32767}return h<<16|l},UZIP.F._howLong=function(t,e,r){if(t[e]!=t[e-r]||t[e+1]!=t[e+1-r]||t[e+2]!=t[e+2-r])return 0;var n=e,i=Math.min(t.length,e+258);for(e+=3;e<i&&t[e]==t[e-r];)e++;return e-n},UZIP.F._hash=function(t,e){return(t[e]<<8|t[e+1])+(t[e+2]<<4)&65535},UZIP.saved=0,UZIP.F._writeBlock=function(t,e,r,n,i,a,s,o,u){var h,l,f,c,d,p,v,_,g,m=UZIP.F.U,y=UZIP.F._putsF,b=UZIP.F._putsE;m.lhst[256]++,l=(h=UZIP.F.getTrees())[0],f=h[1],c=h[2],d=h[3],p=h[4],v=h[5],_=h[6],g=h[7];var w=32+(0==(u+3&7)?0:8-(u+3&7))+(s<<3),E=n+UZIP.F.contSize(m.fltree,m.lhst)+UZIP.F.contSize(m.fdtree,m.dhst),C=n+UZIP.F.contSize(m.ltree,m.lhst)+UZIP.F.contSize(m.dtree,m.dhst);C+=14+3*v+UZIP.F.contSize(m.itree,m.ihst)+(2*m.ihst[16]+3*m.ihst[17]+7*m.ihst[18]);for(var D=0;D<286;D++)m.lhst[D]=0;for(D=0;D<30;D++)m.dhst[D]=0;for(D=0;D<19;D++)m.ihst[D]=0;var S=w<E&&w<C?0:E<C?1:2;y(o,u,t),y(o,u+1,S);u+=3;if(0==S){for(;0!=(7&u);)u++;u=UZIP.F._copyExact(i,a,s,o,u)}else{var T,x;if(1==S&&(T=m.fltree,x=m.fdtree),2==S){UZIP.F.makeCodes(m.ltree,l),UZIP.F.revCodes(m.ltree,l),UZIP.F.makeCodes(m.dtree,f),UZIP.F.revCodes(m.dtree,f),UZIP.F.makeCodes(m.itree,c),UZIP.F.revCodes(m.itree,c),T=m.ltree,x=m.dtree,b(o,u,d-257),b(o,u+=5,p-1),b(o,u+=5,v-4),u+=4;for(var F=0;F<v;F++)b(o,u+3*F,m.itree[1+(m.ordr[F]<<1)]);u+=3*v,u=UZIP.F._codeTiny(_,m.itree,o,u),u=UZIP.F._codeTiny(g,m.itree,o,u)}for(var A=a,P=0;P<r;P+=2){for(var M=e[P],I=M>>>23,k=A+(8388607&M);A<k;)u=UZIP.F._writeLit(i[A++],T,o,u);if(0!=I){var U=e[P+1],O=U>>16,B=U>>8&255,R=255&U;b(o,u=UZIP.F._writeLit(257+B,T,o,u),I-m.of0[B]),u+=m.exb[B],y(o,u=UZIP.F._writeLit(R,x,o,u),O-m.df0[R]),u+=m.dxb[R],A+=I}}u=UZIP.F._writeLit(256,T,o,u)}return u},UZIP.F._copyExact=function(t,e,r,n,i){var a=i>>>3;return n[a]=r,n[a+1]=r>>>8,n[a+2]=255-n[a],n[a+3]=255-n[a+1],a+=4,n.set(new Uint8Array(t.buffer,e,r),a),i+(r+4<<3)},UZIP.F.getTrees=function(){for(var t=UZIP.F.U,e=UZIP.F._hufTree(t.lhst,t.ltree,15),r=UZIP.F._hufTree(t.dhst,t.dtree,15),n=[],i=UZIP.F._lenCodes(t.ltree,n),a=[],s=UZIP.F._lenCodes(t.dtree,a),o=0;o<n.length;o+=2)t.ihst[n[o]]++;for(o=0;o<a.length;o+=2)t.ihst[a[o]]++;for(var u=UZIP.F._hufTree(t.ihst,t.itree,7),h=19;h>4&&0==t.itree[1+(t.ordr[h-1]<<1)];)h--;return[e,r,u,i,s,h,n,a]},UZIP.F.getSecond=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(t[r+1]);return e},UZIP.F.nonZero=function(t){for(var e="",r=0;r<t.length;r+=2)0!=t[r+1]&&(e+=(r>>1)+",");return e},UZIP.F.contSize=function(t,e){for(var r=0,n=0;n<e.length;n++)r+=e[n]*t[1+(n<<1)];return r},UZIP.F._codeTiny=function(t,e,r,n){for(var i=0;i<t.length;i+=2){var a=t[i],s=t[i+1];n=UZIP.F._writeLit(a,e,r,n);var o=16==a?2:17==a?3:7;a>15&&(UZIP.F._putsE(r,n,s,o),n+=o)}return n},UZIP.F._lenCodes=function(t,e){for(var r=t.length;2!=r&&0==t[r-1];)r-=2;for(var n=0;n<r;n+=2){var i=t[n+1],a=n+3<r?t[n+3]:-1,s=n+5<r?t[n+5]:-1,o=0==n?-1:t[n-1];if(0==i&&a==i&&s==i){for(var u=n+5;u+2<r&&t[u+2]==i;)u+=2;(h=Math.min(u+1-n>>>1,138))<11?e.push(17,h-3):e.push(18,h-11),n+=2*h-2}else if(i==o&&a==i&&s==i){for(u=n+5;u+2<r&&t[u+2]==i;)u+=2;var h=Math.min(u+1-n>>>1,6);e.push(16,h-3),n+=2*h-2}else e.push(i,0)}return r>>>1},UZIP.F._hufTree=function(t,e,r){var n=[],i=t.length,a=e.length,s=0;for(s=0;s<a;s+=2)e[s]=0,e[s+1]=0;for(s=0;s<i;s++)0!=t[s]&&n.push({lit:s,f:t[s]});var o=n.length,u=n.slice(0);if(0==o)return 0;if(1==o){var h=n[0].lit;u=0==h?1:0;return e[1+(h<<1)]=1,e[1+(u<<1)]=1,1}n.sort((function(t,e){return t.f-e.f}));var l=n[0],f=n[1],c=0,d=1,p=2;for(n[0]={lit:-1,f:l.f+f.f,l:l,r:f,d:0};d!=o-1;)l=c!=d&&(p==o||n[c].f<n[p].f)?n[c++]:n[p++],f=c!=d&&(p==o||n[c].f<n[p].f)?n[c++]:n[p++],n[d++]={lit:-1,f:l.f+f.f,l:l,r:f};var v=UZIP.F.setDepth(n[d-1],0);for(v>r&&(UZIP.F.restrictDepth(u,r,v),v=r),s=0;s<o;s++)e[1+(u[s].lit<<1)]=u[s].d;return v},UZIP.F.setDepth=function(t,e){return-1!=t.lit?(t.d=e,e):Math.max(UZIP.F.setDepth(t.l,e+1),UZIP.F.setDepth(t.r,e+1))},UZIP.F.restrictDepth=function(t,e,r){var n=0,i=1<<r-e,a=0;for(t.sort((function(t,e){return e.d==t.d?t.f-e.f:e.d-t.d})),n=0;n<t.length&&t[n].d>e;n++){var s=t[n].d;t[n].d=e,a+=i-(1<<r-s)}for(a>>>=r-e;a>0;){(s=t[n].d)<e?(t[n].d++,a-=1<<e-s-1):n++}for(;n>=0;n--)t[n].d==e&&a<0&&(t[n].d--,a++);0!=a&&console.log("debt left")},UZIP.F._goodIndex=function(t,e){var r=0;return e[16|r]<=t&&(r|=16),e[8|r]<=t&&(r|=8),e[4|r]<=t&&(r|=4),e[2|r]<=t&&(r|=2),e[1|r]<=t&&(r|=1),r},UZIP.F._writeLit=function(t,e,r,n){return UZIP.F._putsF(r,n,e[t<<1]),n+e[1+(t<<1)]},UZIP.F.inflate=function(t,e){var r=Uint8Array;if(3==t[0]&&0==t[1])return e||new r(0);var n=UZIP.F,i=n._bitsF,a=n._bitsE,s=n._decodeTiny,o=n.makeCodes,u=n.codes2map,h=n._get17,l=n.U,f=null==e;f&&(e=new r(t.length>>>2<<3));for(var c,d,p=0,v=0,_=0,g=0,m=0,y=0,b=0,w=0,E=0;0==p;)if(p=i(t,E,1),v=i(t,E+1,2),E+=3,0!=v){if(f&&(e=UZIP.F._check(e,w+(1<<17))),1==v&&(c=l.flmap,d=l.fdmap,y=511,b=31),2==v){_=a(t,E,5)+257,g=a(t,E+5,5)+1,m=a(t,E+10,4)+4;E+=14;for(var C=0;C<38;C+=2)l.itree[C]=0,l.itree[C+1]=0;var D=1;for(C=0;C<m;C++){var S=a(t,E+3*C,3);l.itree[1+(l.ordr[C]<<1)]=S,S>D&&(D=S)}E+=3*m,o(l.itree,D),u(l.itree,D,l.imap),c=l.lmap,d=l.dmap,E=s(l.imap,(1<<D)-1,_+g,t,E,l.ttree);var T=n._copyOut(l.ttree,0,_,l.ltree);y=(1<<T)-1;var x=n._copyOut(l.ttree,_,g,l.dtree);b=(1<<x)-1,o(l.ltree,T),u(l.ltree,T,c),o(l.dtree,x),u(l.dtree,x,d)}for(;;){var F=c[h(t,E)&y];E+=15&F;var A=F>>>4;if(A>>>8==0)e[w++]=A;else{if(256==A)break;var P=w+A-254;if(A>264){var M=l.ldef[A-257];P=w+(M>>>3)+a(t,E,7&M),E+=7&M}var I=d[h(t,E)&b];E+=15&I;var k=I>>>4,U=l.ddef[k],O=(U>>>4)+i(t,E,15&U);for(E+=15&U;w<P;)e[w]=e[w++-O],e[w]=e[w++-O],e[w]=e[w++-O],e[w]=e[w++-O];w=P}}}else{0!=(7&E)&&(E+=8-(7&E));var B=4+(E>>>3),R=t[B-4]|t[B-3]<<8;f&&(e=UZIP.F._check(e,w+R)),e.set(new r(t.buffer,t.byteOffset+B,R),w),E=B+R<<3,w+=R}return e.length==w?e:e.slice(0,w)},UZIP.F._check=function(t,e){var r=t.length;if(e<=r)return t;var n=new Uint8Array(Math.max(r<<1,e));return n.set(t,0),n},UZIP.F._decodeTiny=function(t,e,r,n,i,a){for(var s=UZIP.F._bitsE,o=UZIP.F._get17,u=0;u<r;){var h=t[o(n,i)&e];i+=15&h;var l=h>>>4;if(l<=15)a[u]=l,u++;else{var f=0,c=0;16==l?(c=3+s(n,i,2),i+=2,f=a[u-1]):17==l?(c=3+s(n,i,3),i+=3):18==l&&(c=11+s(n,i,7),i+=7);for(var d=u+c;u<d;)a[u]=f,u++}}return i},UZIP.F._copyOut=function(t,e,r,n){for(var i=0,a=0,s=n.length>>>1;a<r;){var o=t[a+e];n[a<<1]=0,n[1+(a<<1)]=o,o>i&&(i=o),a++}for(;a<s;)n[a<<1]=0,n[1+(a<<1)]=0,a++;return i},UZIP.F.makeCodes=function(t,e){for(var r,n,i,a,s=UZIP.F.U,o=t.length,u=s.bl_count,h=0;h<=e;h++)u[h]=0;for(h=1;h<o;h+=2)u[t[h]]++;var l=s.next_code;for(r=0,u[0]=0,n=1;n<=e;n++)r=r+u[n-1]<<1,l[n]=r;for(i=0;i<o;i+=2)0!=(a=t[i+1])&&(t[i]=l[a],l[a]++)},UZIP.F.codes2map=function(t,e,r){for(var n=t.length,i=UZIP.F.U.rev15,a=0;a<n;a+=2)if(0!=t[a+1])for(var s=a>>1,o=t[a+1],u=s<<4|o,h=e-o,l=t[a]<<h,f=l+(1<<h);l!=f;){r[i[l]>>>15-e]=u,l++}},UZIP.F.revCodes=function(t,e){for(var r=UZIP.F.U.rev15,n=15-e,i=0;i<t.length;i+=2){var a=t[i]<<e-t[i+1];t[i]=r[a]>>>n}},UZIP.F._putsE=function(t,e,r){r<<=7&e;var n=e>>>3;t[n]|=r,t[n+1]|=r>>>8},UZIP.F._putsF=function(t,e,r){r<<=7&e;var n=e>>>3;t[n]|=r,t[n+1]|=r>>>8,t[n+2]|=r>>>16},UZIP.F._bitsE=function(t,e,r){return(t[e>>>3]|t[1+(e>>>3)]<<8)>>>(7&e)&(1<<r)-1},UZIP.F._bitsF=function(t,e,r){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)&(1<<r)-1},UZIP.F._get17=function(t,e){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)},UZIP.F._get25=function(t,e){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16|t[3+(e>>>3)]<<24)>>>(7&e)},UZIP.F.U=function(){var t=Uint16Array,e=Uint32Array;return{next_code:new t(16),bl_count:new t(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new t(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new e(32),flmap:new t(512),fltree:[],fdmap:new t(32),fdtree:[],lmap:new t(32768),ltree:[],ttree:[],dmap:new t(32768),dtree:[],imap:new t(512),itree:[],rev15:new t(32768),lhst:new e(286),dhst:new e(30),ihst:new e(19),lits:new e(15e3),strt:new t(65536),prev:new t(32768)}}(),function(){for(var t=UZIP.F.U,e=0;e<32768;e++){var r=e;r=(4278255360&(r=(4042322160&(r=(3435973836&(r=(2863311530&r)>>>1|(1431655765&r)<<1))>>>2|(858993459&r)<<2))>>>4|(252645135&r)<<4))>>>8|(16711935&r)<<8,t.rev15[e]=(r>>>16|r<<16)>>>17}function n(t,e,r){for(;0!=e--;)t.push(0,r)}for(e=0;e<32;e++)t.ldef[e]=t.of0[e]<<3|t.exb[e],t.ddef[e]=t.df0[e]<<4|t.dxb[e];n(t.fltree,144,8),n(t.fltree,112,9),n(t.fltree,24,7),n(t.fltree,8,8),UZIP.F.makeCodes(t.fltree,9),UZIP.F.codes2map(t.fltree,9,t.flmap),UZIP.F.revCodes(t.fltree,9),n(t.fdtree,32,5),UZIP.F.makeCodes(t.fdtree,5),UZIP.F.codes2map(t.fdtree,5,t.fdmap),UZIP.F.revCodes(t.fdtree,5),n(t.itree,19,0),n(t.ltree,286,0),n(t.dtree,30,0),n(t.ttree,320,0)}();var paper=function(t,e){var r=(t=t||require("./node/self.js")).window,n=t.document,i=new function(){function t(t,e,i,a,s){function h(n,h){"string"==typeof(h=h||(h=o(e,n))&&(h.get?h:h.value))&&"#"===h[0]&&(h=t[h.substring(1)]||h);var f,c="function"==typeof h,d=h,p=s||c&&!h.base?h&&h.get?n in t:t[n]:null;s&&p||(c&&p&&(h.base=p),c&&!1!==a&&(f=n.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(l[f[3].toLowerCase()+f[4]]=f[2]),d&&!c&&d.get&&"function"==typeof d.get&&r.isPlainObject(d)||(d={value:d,writable:!0}),(o(t,n)||{configurable:!0}).configurable&&(d.configurable=!0,d.enumerable=null!=i?i:!f),u(t,n,d))}var l={};if(e){for(var f in e)e.hasOwnProperty(f)&&!n.test(f)&&h(f);for(var f in l){var c=l[f],d=t["set"+c],p=t["get"+c]||d&&t["is"+c];!p||!0!==a&&0!==p.length||h(f,{get:p,set:d})}}return t}function r(){for(var t=0,e=arguments.length;t<e;t++){var r=arguments[t];r&&f(this,r)}return this}var n=/^(statics|enumerable|beans|preserve)$/,i=[],a=i.slice,s=Object.create,o=Object.getOwnPropertyDescriptor,u=Object.defineProperty,h=i.forEach||function(t,e){for(var r=0,n=this.length;r<n;r++)t.call(e,this[r],r,this)},l=function(t,e){for(var r in this)this.hasOwnProperty(r)&&t.call(e,this[r],r,this)},f=Object.assign||function(t){for(var e=1,r=arguments.length;e<r;e++){var n=arguments[e];for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])}return t},c=function(t,e,r){if(t){var n=o(t,"length");(n&&"number"==typeof n.value?h:l).call(t,e,r=r||t)}return r};return t(r,{inject:function(e){if(e){var r=!0===e.statics?e:e.statics,n=e.beans,i=e.preserve;r!==e&&t(this.prototype,e,e.enumerable,n,i),t(this,r,null,n,i)}for(var a=1,s=arguments.length;a<s;a++)this.inject(arguments[a]);return this},extend:function(){for(var e,r,n,i=this,a=0,o=arguments.length;a<o&&(!e||!r);a++)n=arguments[a],e=e||n.initialize,r=r||n.prototype;return r=(e=e||function(){i.apply(this,arguments)}).prototype=r||s(this.prototype),u(r,"constructor",{value:e,writable:!0,configurable:!0}),t(e,this),arguments.length&&this.inject.apply(e,arguments),e.base=i,e}}).inject({enumerable:!1,initialize:r,set:r,inject:function(){for(var e=0,r=arguments.length;e<r;e++){var n=arguments[e];n&&t(this,n,n.enumerable,n.beans,n.preserve)}return this},extend:function(){var t=s(this);return t.inject.apply(t,arguments)},each:function(t,e){return c(this,t,e)},clone:function(){return new this.constructor(this)},statics:{set:f,each:c,create:s,define:u,describe:o,clone:function(t){return f(new t.constructor,t)},isPlainObject:function(t){var e=null!=t&&t.constructor;return e&&(e===Object||e===r||"Object"===e.name)},pick:function(t,r){return t!==e?t:r},slice:function(t,e,r){return a.call(t,e,r)}}})};"undefined"!=typeof module&&(module.exports=i),i.inject({enumerable:!1,toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+i.each(this,(function(t,e){if(!/^_/.test(e)){var r=typeof t;this.push(e+": "+("number"===r?u.instance.number(t):"string"===r?"'"+t+"'":t))}}),[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(t){return i.importJSON(t,this)},exportJSON:function(t){return i.exportJSON(this,t)},toJSON:function(){return i.serialize(this)},set:function(t,e){return t&&i.filter(this,t,e,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function t(){var e=t.base.apply(this,arguments),r=e.prototype._class;return r&&!i.exports[r]&&(i.exports[r]=e),e},equals:function(t,e){if(t===e)return!0;if(t&&t.equals)return t.equals(e);if(e&&e.equals)return e.equals(t);if(t&&e&&"object"==typeof t&&"object"==typeof e){if(Array.isArray(t)&&Array.isArray(e)){if((n=t.length)!==e.length)return!1;for(;n--;)if(!i.equals(t[n],e[n]))return!1}else{var r=Object.keys(t),n=r.length;if(n!==Object.keys(e).length)return!1;for(;n--;){var a=r[n];if(!e.hasOwnProperty(a)||!i.equals(t[a],e[a]))return!1}}return!0}return!1},read:function(t,r,n,a){if(this===i){var s=this.peek(t,r);return t.__index++,s}var o=this.prototype,u=o._readIndex,h=r||u&&t.__index||0,l=t.length,f=t[h];if(a=a||l-h,f instanceof this||n&&n.readNull&&null==f&&a<=1)return u&&(t.__index=h+1),f&&n&&n.clone?f.clone():f;if(f=i.create(o),u&&(f.__read=!0),f=f.initialize.apply(f,h>0||h+a<l?i.slice(t,h,h+a):t)||f,u){t.__index=h+f.__read;var c=f.__filtered;c&&(t.__filtered=c,f.__filtered=e),f.__read=e}return f},peek:function(t,e){return t[t.__index=e||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readList:function(t,e,r,n){for(var i,a=[],s=e||0,o=n?s+n:t.length,u=s;u<o;u++)a.push(Array.isArray(i=t[u])?this.read(i,0,r):this.read(t,u,r,1));return a},readNamed:function(t,r,n,a,s){var o=this.getNamed(t,r),u=o!==e;if(u){var h=t.__filtered;h||((h=t.__filtered=i.create(t[0])).__unfiltered=t[0]),h[r]=e}var l=u?[o]:t;return this.read(l,n,a,s)},getNamed:function(t,r){var n=t[0];if(t._hasObject===e&&(t._hasObject=1===t.length&&i.isPlainObject(n)),t._hasObject)return r?n[r]:t.__filtered||n},hasNamed:function(t,e){return!!this.getNamed(t,e)},filter:function(t,r,n,i){function a(i){if(!(n&&i in n||s&&i in s)){var a=r[i];a!==e&&(t[i]=a)}}var s;if(i){for(var o,u={},h=0,l=i.length;h<l;h++)(o=i[h])in r&&(a(o),u[o]=!0);s=u}return Object.keys(r.__unfiltered||r).forEach(a),t},isPlainValue:function(t,e){return i.isPlainObject(t)||Array.isArray(t)||e&&"string"==typeof t},serialize:function(t,e,r,n){e=e||{};var a,s=!n;if(s&&(e.formatter=new u(e.precision),n={length:0,definitions:{},references:{},add:function(t,e){var r="#"+t._id,n=this.references[r];if(!n){this.length++;var i=e.call(t),a=t._class;a&&i[0]!==a&&i.unshift(a),this.definitions[r]=i,n=this.references[r]=[r]}return n}}),t&&t._serialize){a=t._serialize(e,n);var o=t._class;!o||t._compactSerialize||!s&&r||a[0]===o||a.unshift(o)}else if(Array.isArray(t)){a=[];for(var h=0,l=t.length;h<l;h++)a[h]=i.serialize(t[h],e,r,n)}else if(i.isPlainObject(t)){a={};var f=Object.keys(t);for(h=0,l=f.length;h<l;h++){var c=f[h];a[c]=i.serialize(t[c],e,r,n)}}else a="number"==typeof t?e.formatter.number(t,e.precision):t;return s&&n.length>0?[["dictionary",n.definitions],a]:a},deserialize:function(t,e,r,n,a){var s=t,o=!r,u=o&&t&&t.length&&"dictionary"===t[0][0];if(r=r||{},Array.isArray(t)){var h=t[0],l="dictionary"===h;if(1==t.length&&/^#/.test(h))return r.dictionary[h];s=[];for(var f=(h=i.exports[h])?1:0,c=t.length;f<c;f++)s.push(i.deserialize(t[f],e,r,l,u));if(h){var d=s;e?s=e(h,d,o||a):(s=i.create(h.prototype),h.apply(s,d))}}else if(i.isPlainObject(t))for(var p in s={},n&&(r.dictionary=s),t)s[p]=i.deserialize(t[p],e,r);return u?s[1]:s},exportJSON:function(t,e){var r=i.serialize(t,e);return e&&0==e.asString?r:JSON.stringify(r)},importJSON:function(t,e){return i.deserialize("string"==typeof t?JSON.parse(t):t,(function(t,r,n){var a=n&&e&&e.constructor===t,s=a?e:i.create(t.prototype);if(1===r.length&&s instanceof b&&(a||!(s instanceof E))){var o=r[0];i.isPlainObject(o)&&(o.insert=!1)}return(a?s.set:t).apply(s,r),a&&(e=null),s}))},splice:function(t,r,n,i){var a=r&&r.length,s=n===e;for((n=s?t.length:n)>t.length&&(n=t.length),h=0;h<a;h++)r[h]._index=n+h;if(s)return t.push.apply(t,r),[];var o=[n,i];r&&o.push.apply(o,r);for(var u=t.splice.apply(t,o),h=0,l=u.length;h<l;h++)u[h]._index=e;for(h=n+a,l=t.length;h<l;h++)t[h]._index=h;return u},capitalize:function(t){return t.replace(/\b[a-z]/g,(function(t){return t.toUpperCase()}))},camelize:function(t){return t.replace(/-(.)/g,(function(t,e){return e.toUpperCase()}))},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var a={on:function(t,e){if("string"!=typeof t)i.each(t,(function(t,e){this.on(e,t)}),this);else{var r=this._eventTypes,n=r&&r[t],a=this._callbacks=this._callbacks||{};-1===(a=a[t]=a[t]||[]).indexOf(e)&&(a.push(e),n&&n.install&&1===a.length&&n.install.call(this,t))}return this},off:function(t,e){if("string"==typeof t){var r,n=this._eventTypes,a=n&&n[t],s=this._callbacks&&this._callbacks[t];return s&&(!e||-1!==(r=s.indexOf(e))&&1===s.length?(a&&a.uninstall&&a.uninstall.call(this,t),delete this._callbacks[t]):-1!==r&&s.splice(r,1)),this}i.each(t,(function(t,e){this.off(e,t)}),this)},once:function(t,e){return this.on(t,(function(){e.apply(this,arguments),this.off(t,e)}))},emit:function(t,e){var r=this._callbacks&&this._callbacks[t];if(!r)return!1;var n=i.slice(arguments,1),a=e&&e.target&&!e.currentTarget;r=r.slice(),a&&(e.currentTarget=this);for(var s=0,o=r.length;s<o;s++)if(0==r[s].apply(this,n)){e&&e.stop&&e.stop();break}return a&&delete e.currentTarget,!0},responds:function(t){return!(!this._callbacks||!this._callbacks[t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var e=this._eventTypes,r=this._callbacks,n=t?"install":"uninstall";if(e)for(var i in r)if(r[i].length>0){var a=e[i],s=a&&a[n];s&&s.call(this,i)}},statics:{inject:function t(e){var r=e._events;if(r){var n={};i.each(r,(function(t,r){var a="string"==typeof t,s=a?t:r,o=i.capitalize(s),u=s.substring(2).toLowerCase();n[u]=a?{}:t,s="_"+s,e["get"+o]=function(){return this[s]},e["set"+o]=function(t){var e=this[s];e&&this.off(u,e),t&&this.on(u,t),this[s]=t}})),e._eventTypes=n}return t.base.apply(this,arguments)}}},s=i.extend({_class:"PaperScope",initialize:function e(){paper=this,this.settings=new i({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=e._id++,e._scopes[this._id]=this;var r=e.prototype;if(!this.support){var n=$.getContext(1,1)||{};r.support={nativeDash:"setLineDash"in n||"mozDash"in n,nativeBlendModes:tt.nativeModes},$.release(n)}if(!this.agent){var a=t.navigator.userAgent.toLowerCase(),s=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(a)||[])[0],o="darwin"===s?"mac":s,u=r.agent=r.browser={platform:o};o&&(u[o]=!0),a.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,(function(t,e,r,n,i){if(!u.chrome){var a="opera"===e?n:/^(node|trident)$/.test(e)?i:r;u.version=a,u.versionNumber=parseFloat(a),e="trident"===e?"msie":e,u.name=e,u[e]=!0}})),u.chrome&&delete u.webkit,u.atom&&delete u.chrome}},version:"0.11.5",getView:function(){var t=this.project;return t&&t._view},getPaper:function(){return this},execute:function(t,e){paper.PaperScript.execute(t,this,e),X.updateFocus()},install:function(t){var e=this;for(var r in i.each(["project","view","tool"],(function(r){i.define(t,r,{configurable:!0,get:function(){return e[r]}})})),this)!/^_/.test(r)&&this[r]&&(t[r]=this[r])},setup:function(t){return paper=this,this.project=new y(t),this},createCanvas:function(t,e){return $.getCanvas(t,e)},activate:function(){paper=this},clear:function(){for(var t=this.projects,e=this.tools,r=t.length-1;r>=0;r--)t[r].remove();for(r=e.length-1;r>=0;r--)e[r].remove()},remove:function(){this.clear(),delete s._scopes[this._id]},statics:new function(){function t(t){return t+="Attribute",function(e,r){return e[t](r)||e[t]("data-paper-"+r)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),o=i.extend(a,{initialize:function(t){this._scope=paper,this._index=this._scope[this._list].push(this)-1,!t&&this._scope[this._reference]||this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(i.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),u=i.extend({initialize:function(t){this.precision=i.pick(t,5),this.multiplier=Math.pow(10,this.precision)},number:function(t){return this.precision<16?Math.round(t*this.multiplier)/this.multiplier:t},pair:function(t,e,r){return this.number(t)+(r||",")+this.number(e)},point:function(t,e){return this.number(t.x)+(e||",")+this.number(t.y)},size:function(t,e){return this.number(t.width)+(e||",")+this.number(t.height)},rectangle:function(t,e){return this.point(t,e)+(e||",")+this.size(t,e)}});u.instance=new u;var h=new function(){function t(t,e,r){return t<e?e:t>r?r:t}function e(t,e,r){function n(t){var e=134217729*t,r=t-e+e;return[r,t-r]}var i=e*e-t*r,s=e*e+t*r;if(3*a(i)<s){var o=n(t),u=n(e),h=n(r),l=e*e,f=t*r;i=l-f+(u[0]*u[0]-l+2*u[0]*u[1]+u[1]*u[1]-(o[0]*h[0]-f+o[0]*h[1]+o[1]*h[0]+o[1]*h[1]))}return i}function r(){var t=Math.max.apply(Math,arguments);return t&&(t<1e-8||t>1e8)?o(2,-Math.round(u(t))):0}var n=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],i=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],a=Math.abs,s=Math.sqrt,o=Math.pow,u=Math.log2||function(t){return Math.log(t)*Math.LOG2E};return{EPSILON:1e-12,MACHINE_EPSILON:112e-18,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,KAPPA:4*(s(2)-1)/3,isZero:function(t){return t>=-1e-12&&t<=1e-12},clamp:t,integrate:function(t,e,r,a){for(var s=n[a-2],o=i[a-2],u=.5*(r-e),h=u+e,l=0,f=a+1>>1,c=1&a?o[l++]*t(h):0;l<f;){var d=u*s[l];c+=o[l++]*(t(h+d)+t(h-d))}return u*c},findRoot:function(e,r,n,i,s,o,u){for(var h=0;h<o;h++){var l=e(n),f=l/r(n),c=n-f;if(a(f)<u){n=c;break}l>0?(s=n,n=c<=i?.5*(i+s):c):(i=n,n=c>=s?.5*(i+s):c)}return t(n,i,s)},solveQuadratic:function(n,i,o,u,h,l){var f,c=1/0;if(a(n)<1e-12){if(a(i)<1e-12)return a(o)<1e-12?-1:0;f=-o/i}else{var d=e(n,i*=-.5,o);if(d&&a(d)<112e-18){var p=r(a(n),a(i),a(o));p&&(d=e(n*=p,i*=p,o*=p))}if(d>=-112e-18){var v=d<0?0:s(d),_=i+(i<0?-v:v);0===_?c=-(f=o/n):(f=_/n,c=o/_)}}var g=0,m=null==h,y=h-1e-12,b=l+1e-12;return isFinite(f)&&(m||f>y&&f<b)&&(u[g++]=m?f:t(f,h,l)),c!==f&&isFinite(c)&&(m||c>y&&c<b)&&(u[g++]=m?c:t(c,h,l)),g},solveCubic:function(e,n,i,u,l,f,c){function d(t){var r=e*(p=t);g=(r+(v=r+n))*p+(_=v*p+i),m=_*p+u}var p,v,_,g,m,y=r(a(e),a(n),a(i),a(u));if(y&&(e*=y,n*=y,i*=y,u*=y),a(e)<1e-12)e=n,v=i,_=u,p=1/0;else if(a(u)<1e-12)v=n,_=i,p=0;else{d(-n/e/3);var b=m/e,w=o(a(b),1/3),E=b<0?-1:1,C=-g/e,D=C>0?1.324717957244746*Math.max(w,s(C)):w,S=p-E*D;if(S!==p){do{d(S),S=0===g?p:p-m/g/(1+112e-18)}while(E*S>E*p);a(e)*p*p>a(u/p)&&(v=((_=-u/p)-i)/p)}}var T=h.solveQuadratic(e,v,_,l,f,c),x=null==f;return isFinite(p)&&(0===T||T>0&&p!==l[0]&&p!==l[1])&&(x||p>f-1e-12&&p<c+1e-12)&&(l[T++]=x?p:t(p,f,c)),T}}},l={_id:1,_pools:{},get:function(t){if(t){var e=this._pools[t];return e||(e=this._pools[t]={_id:1}),e._id++}return this._id++}},f=i.extend({_class:"Point",_readIndex:!0,initialize:function(t,e){var r=typeof t,n=this.__read,i=0;if("number"===r){var a="number"==typeof e;this._set(t,a?e:t),n&&(i=a?2:1)}else if("undefined"===r||null===t)this._set(0,0),n&&(i=null===t?1:0);else{var s="string"===r?t.split(/[\s,]+/)||[]:t;i=1,Array.isArray(s)?this._set(+s[0],+(s.length>1?s[1]:s[0])):"x"in s?this._set(s.x||0,s.y||0):"width"in s?this._set(s.width||0,s.height||0):"angle"in s?(this._set(s.length||0,0),this.setAngle(s.angle||0)):(this._set(0,0),i=0)}return n&&(this.__read=i),this},set:"#initialize",_set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new f(this.x,this.y)},toString:function(){var t=u.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){if(this.isZero()){var e=this._angle||0;this._set(Math.cos(e)*t,Math.sin(e)*t)}else{var r=t/this.getLength();h.isZero(r)&&this.getAngle(),this._set(this.x*r,this.y*r)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var t=f.read(arguments),e=this.getLength()*t.getLength();if(h.isZero(e))return NaN;var r=this.dot(t)/e;return Math.acos(r<-1?-1:r>1?1:r)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(t){if(this._angle=t,!this.isZero()){var e=this.getLength();this._set(Math.cos(t)*e,Math.sin(t)*e)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var t=f.read(arguments);return 180*Math.atan2(this.cross(t),this.dot(t))/Math.PI},getDistance:function(){var t=f.read(arguments),e=t.x-this.x,r=t.y-this.y,n=e*e+r*r;return i.read(arguments)?n:Math.sqrt(n)},normalize:function(t){t===e&&(t=1);var r=this.getLength(),n=0!==r?t/r:0,i=new f(this.x*n,this.y*n);return n>=0&&(i._angle=this._angle),i},rotate:function(t,e){if(0===t)return this.clone();t=t*Math.PI/180;var r=e?this.subtract(e):this,n=Math.sin(t),i=Math.cos(t);return r=new f(r.x*i-r.y*n,r.x*n+r.y*i),e?r.add(e):r},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=f.read(arguments);return new f(this.x+t.x,this.y+t.y)},subtract:function(){var t=f.read(arguments);return new f(this.x-t.x,this.y-t.y)},multiply:function(){var t=f.read(arguments);return new f(this.x*t.x,this.y*t.y)},divide:function(){var t=f.read(arguments);return new f(this.x/t.x,this.y/t.y)},modulo:function(){var t=f.read(arguments);return new f(this.x%t.x,this.y%t.y)},negate:function(){return new f(-this.x,-this.y)},isInside:function(){return v.read(arguments).contains(this)},isClose:function(){var t=f.read(arguments),e=i.read(arguments);return this.getDistance(t)<=e},isCollinear:function(){var t=f.read(arguments);return f.isCollinear(this.x,this.y,t.x,t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var t=f.read(arguments);return f.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){var t=h.isZero;return t(this.x)&&t(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(t){return this.x*(t>1&&t<4?-1:1)>=0&&this.y*(t>2?-1:1)>=0},dot:function(){var t=f.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=f.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=f.read(arguments),e=t.isZero()?0:this.dot(t)/t.dot(t);return new f(t.x*e,t.y*e)},statics:{min:function(){var t=f.read(arguments),e=f.read(arguments);return new f(Math.min(t.x,e.x),Math.min(t.y,e.y))},max:function(){var t=f.read(arguments),e=f.read(arguments);return new f(Math.max(t.x,e.x),Math.max(t.y,e.y))},random:function(){return new f(Math.random(),Math.random())},isCollinear:function(t,e,r,n){return Math.abs(t*n-e*r)<=1e-8*Math.sqrt((t*t+e*e)*(r*r+n*n))},isOrthogonal:function(t,e,r,n){return Math.abs(t*r+e*n)<=1e-8*Math.sqrt((t*t+e*e)*(r*r+n*n))}}},i.each(["round","ceil","floor","abs"],(function(t){var e=Math[t];this[t]=function(){return new f(e(this.x),e(this.y))}}),{})),c=f.extend({initialize:function(t,e,r,n){this._x=t,this._y=e,this._owner=r,this._setter=n},_set:function(t,e,r){return this._x=t,this._y=e,r||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),d=i.extend({_class:"Size",_readIndex:!0,initialize:function(t,e){var r=typeof t,n=this.__read,i=0;if("number"===r){var a="number"==typeof e;this._set(t,a?e:t),n&&(i=a?2:1)}else if("undefined"===r||null===t)this._set(0,0),n&&(i=null===t?1:0);else{var s="string"===r?t.split(/[\s,]+/)||[]:t;i=1,Array.isArray(s)?this._set(+s[0],+(s.length>1?s[1]:s[0])):"width"in s?this._set(s.width||0,s.height||0):"x"in s?this._set(s.x||0,s.y||0):(this._set(0,0),i=0)}return n&&(this.__read=i),this},set:"#initialize",_set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new d(this.width,this.height)},toString:function(){var t=u.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.width),e.number(this.height)]},add:function(){var t=d.read(arguments);return new d(this.width+t.width,this.height+t.height)},subtract:function(){var t=d.read(arguments);return new d(this.width-t.width,this.height-t.height)},multiply:function(){var t=d.read(arguments);return new d(this.width*t.width,this.height*t.height)},divide:function(){var t=d.read(arguments);return new d(this.width/t.width,this.height/t.height)},modulo:function(){var t=d.read(arguments);return new d(this.width%t.width,this.height%t.height)},negate:function(){return new d(-this.width,-this.height)},isZero:function(){var t=h.isZero;return t(this.width)&&t(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(t,e){return new d(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return new d(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return new d(Math.random(),Math.random())}}},i.each(["round","ceil","floor","abs"],(function(t){var e=Math[t];this[t]=function(){return new d(e(this.width),e(this.height))}}),{})),p=d.extend({initialize:function(t,e,r,n){this._width=t,this._height=e,this._owner=r,this._setter=n},_set:function(t,e,r){return this._width=t,this._height=e,r||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),v=i.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,r,n,a){var s,o=typeof t;if("number"===o?(this._set(t,r,n,a),s=4):"undefined"===o||null===t?(this._set(0,0,0,0),s=null===t?1:0):1===arguments.length&&(Array.isArray(t)?(this._set.apply(this,t),s=1):t.x!==e||t.width!==e?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),s=1):t.from===e&&t.to===e&&(this._set(0,0,0,0),i.filter(this,t),s=1)),s===e){var u,h,l=f.readNamed(arguments,"from"),c=i.peek(arguments),p=l.x,v=l.y;if(c&&c.x!==e||i.hasNamed(arguments,"to")){var _=f.readNamed(arguments,"to");u=_.x-p,h=_.y-v,u<0&&(p=_.x,u=-u),h<0&&(v=_.y,h=-h)}else{var g=d.read(arguments);u=g.width,h=g.height}this._set(p,v,u,h),s=arguments.__index;var m=arguments.__filtered;m&&(this.__filtered=m)}return this.__read&&(this.__read=s),this},set:"#initialize",_set:function(t,e,r,n){return this.x=t,this.y=e,this.width=r,this.height=n,this},clone:function(){return new v(this.x,this.y,this.width,this.height)},equals:function(t){var e=i.isPlainValue(t)?v.read(arguments):t;return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height||!1},toString:function(){var t=u.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y),e.number(this.width),e.number(this.height)]},getPoint:function(t){return new(t?f:c)(this.x,this.y,this,"setPoint")},setPoint:function(){var t=f.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){return new(t?d:p)(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var t=d.read(arguments),e=this._sx,r=this._sy,n=t.width,i=t.height;e&&(this.x+=(this.width-n)*e),r&&(this.y+=(this.height-i)*r),this.width=n,this.height=i,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(t){if(!this._fw){var e=t-this.x;this.width-=.5===this._sx?2*e:e}this.x=t,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(t){if(!this._fh){var e=t-this.y;this.height-=.5===this._sy?2*e:e}this.y=t,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(t){if(!this._fw){var e=t-this.x;this.width=.5===this._sx?2*e:e}this.x=t-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(t){if(!this._fh){var e=t-this.y;this.height=.5===this._sy?2*e:e}this.y=t-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(t){this._fw||.5===this._sx?this.x=t-this.width/2:(this._sx&&(this.x+=2*(t-this.x)*this._sx),this.width=2*(t-this.x)),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(t){this._fh||.5===this._sy?this.y=t-this.height/2:(this._sy&&(this.y+=2*(t-this.y)*this._sy),this.height=2*(t-this.y)),this._sy=.5,this._fh=0},getCenter:function(t){return new(t?f:c)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var t=f.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(t){return t&&t.width!==e||4===(Array.isArray(t)?t:arguments).length?this._containsRectangle(v.read(arguments)):this._containsPoint(f.read(arguments))},_containsPoint:function(t){var e=t.x,r=t.y;return e>=this.x&&r>=this.y&&e<=this.x+this.width&&r<=this.y+this.height},_containsRectangle:function(t){var e=t.x,r=t.y;return e>=this.x&&r>=this.y&&e+t.width<=this.x+this.width&&r+t.height<=this.y+this.height},intersects:function(){var t=v.read(arguments),e=i.read(arguments)||0;return t.x+t.width>this.x-e&&t.y+t.height>this.y-e&&t.x<this.x+this.width+e&&t.y<this.y+this.height+e},intersect:function(){var t=v.read(arguments),e=Math.max(this.x,t.x),r=Math.max(this.y,t.y),n=Math.min(this.x+this.width,t.x+t.width),i=Math.min(this.y+this.height,t.y+t.height);return new v(e,r,n-e,i-r)},unite:function(){var t=v.read(arguments),e=Math.min(this.x,t.x),r=Math.min(this.y,t.y),n=Math.max(this.x+this.width,t.x+t.width),i=Math.max(this.y+this.height,t.y+t.height);return new v(e,r,n-e,i-r)},include:function(){var t=f.read(arguments),e=Math.min(this.x,t.x),r=Math.min(this.y,t.y),n=Math.max(this.x+this.width,t.x),i=Math.max(this.y+this.height,t.y);return new v(e,r,n-e,i-r)},expand:function(){var t=d.read(arguments),e=t.width,r=t.height;return new v(this.x-e/2,this.y-r/2,this.width+e,this.height+r)},scale:function(t,r){return this.expand(this.width*t-this.width,this.height*(r===e?t:r)-this.height)}},i.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],(function(t,e){var r=t.join(""),n=/^[RL]/.test(r);e>=4&&(t[1]+=n?"Y":"X");var i=t[n?0:1],a=t[n?1:0],s="get"+i,o="get"+a,u="set"+i,h="set"+a,l="set"+r;this["get"+r]=function(t){return new(t?f:c)(this[s](),this[o](),this,l)},this[l]=function(){var t=f.read(arguments);this[u](t.x),this[h](t.y)}}),{beans:!0})),_=v.extend({initialize:function(t,e,r,n,i,a){this._set(t,e,r,n,!0),this._owner=i,this._setter=a},_set:function(t,e,r,n,i){return this._x=t,this._y=e,this._width=r,this._height=n,i||this._owner[this._setter](this),this}},new function(){var t=v.prototype;return i.each(["x","y","width","height"],(function(t){var e=i.capitalize(t),r="_"+t;this["get"+e]=function(){return this[r]},this["set"+e]=function(t){this[r]=t,this._dontNotify||this._owner[this._setter](this)}}),i.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],(function(e){var r="set"+e;this[r]=function(){this._dontNotify=!0,t[r].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}}),{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(t){var e=this._owner;e._changeSelection&&e._changeSelection(2,t)}}))}),g=i.extend({_class:"Matrix",initialize:function t(e,r){var n=arguments.length,i=!0;if(n>=6?this._set.apply(this,arguments):1===n||2===n?e instanceof t?this._set(e._a,e._b,e._c,e._d,e._tx,e._ty,r):Array.isArray(e)?this._set.apply(this,r?e.concat([r]):e):i=!1:n?i=!1:this.reset(),!i)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(t,e,r,n,i,a,s){return this._a=t,this._b=e,this._c=r,this._d=n,this._tx=i,this._ty=a,s||this._changed(),this},_serialize:function(t,e){return i.serialize(this.getValues(),t,!0,e)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(9))},clone:function(){return new g(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty},toString:function(){var t=u.instance;return"[["+[t.number(this._a),t.number(this._c),t.number(this._tx)].join(", ")+"], ["+[t.number(this._b),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,e){var r=this._owner;return!!r&&(r.transform(null,!0,i.pick(t,!0),e),this.isIdentity())},translate:function(){var t=f.read(arguments),e=t.x,r=t.y;return this._tx+=e*this._a+r*this._c,this._ty+=e*this._b+r*this._d,this._changed(),this},scale:function(){var t=f.read(arguments),e=f.read(arguments,0,{readNull:!0});return e&&this.translate(e),this._a*=t.x,this._b*=t.x,this._c*=t.y,this._d*=t.y,e&&this.translate(e.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var e=f.read(arguments,1),r=e.x,n=e.y,i=Math.cos(t),a=Math.sin(t),s=r-r*i+n*a,o=n-r*a-n*i,u=this._a,h=this._b,l=this._c,c=this._d;return this._a=i*u+a*l,this._b=i*h+a*c,this._c=-a*u+i*l,this._d=-a*h+i*c,this._tx+=s*u+o*l,this._ty+=s*h+o*c,this._changed(),this},shear:function(){var t=f.read(arguments),e=f.read(arguments,0,{readNull:!0});e&&this.translate(e);var r=this._a,n=this._b;return this._a+=t.y*this._c,this._b+=t.y*this._d,this._c+=t.x*r,this._d+=t.x*n,e&&this.translate(e.negate()),this._changed(),this},skew:function(){var t=f.read(arguments),e=f.read(arguments,0,{readNull:!0}),r=Math.PI/180,n=new f(Math.tan(t.x*r),Math.tan(t.y*r));return this.shear(n,e)},append:function(t,e){if(t){var r=this._a,n=this._b,i=this._c,a=this._d,s=t._a,o=t._c,u=t._b,h=t._d,l=t._tx,f=t._ty;this._a=s*r+u*i,this._c=o*r+h*i,this._b=s*n+u*a,this._d=o*n+h*a,this._tx+=l*r+f*i,this._ty+=l*n+f*a,e||this._changed()}return this},prepend:function(t,e){if(t){var r=this._a,n=this._b,i=this._c,a=this._d,s=this._tx,o=this._ty,u=t._a,h=t._c,l=t._b,f=t._d,c=t._tx,d=t._ty;this._a=u*r+h*n,this._c=u*i+h*a,this._b=l*r+f*n,this._d=l*i+f*a,this._tx=u*s+h*o+c,this._ty=l*s+f*o+d,e||this._changed()}return this},appended:function(t){return this.clone().append(t)},prepended:function(t){return this.clone().prepend(t)},invert:function(){var t=this._a,e=this._b,r=this._c,n=this._d,i=this._tx,a=this._ty,s=t*n-e*r,o=null;return s&&!isNaN(s)&&isFinite(i)&&isFinite(a)&&(this._a=n/s,this._b=-e/s,this._c=-r/s,this._d=t/s,this._tx=(r*a-n*i)/s,this._ty=(e*i-t*a)/s,o=this),o},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new g(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var t=this._a*this._d-this._c*this._b;return t&&!isNaN(t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(t,e,r){return arguments.length<3?this._transformPoint(f.read(arguments)):this._transformCoordinates(t,e,r)},_transformPoint:function(t,e,r){var n=t.x,i=t.y;return e||(e=new f),e._set(n*this._a+i*this._c+this._tx,n*this._b+i*this._d+this._ty,r)},_transformCoordinates:function(t,e,r){for(var n=0,i=2*r;n<i;n+=2){var a=t[n],s=t[n+1];e[n]=a*this._a+s*this._c+this._tx,e[n+1]=a*this._b+s*this._d+this._ty}return e},_transformCorners:function(t){var e=t.x,r=t.y,n=e+t.width,i=r+t.height,a=[e,r,n,r,n,i,e,i];return this._transformCoordinates(a,a,4)},_transformBounds:function(t,e,r){for(var n=this._transformCorners(t),i=n.slice(0,2),a=i.slice(),s=2;s<8;s++){var o=n[s],u=1&s;o<i[u]?i[u]=o:o>a[u]&&(a[u]=o)}return e||(e=new v),e._set(i[0],i[1],a[0]-i[0],a[1]-i[1],r)},inverseTransform:function(){return this._inverseTransform(f.read(arguments))},_inverseTransform:function(t,e,r){var n=this._a,i=this._b,a=this._c,s=this._d,o=this._tx,u=this._ty,h=n*s-i*a,l=null;if(h&&!isNaN(h)&&isFinite(o)&&isFinite(u)){var c=t.x-this._tx,d=t.y-this._ty;e||(e=new f),l=e._set((c*s-d*a)/h,(d*n-c*i)/h,r)}return l},decompose:function(){var t,e,r,n=this._a,i=this._b,a=this._c,s=this._d,o=n*s-i*a,u=Math.sqrt,h=Math.atan2,l=180/Math.PI;if(0!==n||0!==i){var c=u(n*n+i*i);t=Math.acos(n/c)*(i>0?1:-1),e=[c,o/c],r=[h(n*a+i*s,c*c),0]}else if(0!==a||0!==s){var d=u(a*a+s*s);t=Math.asin(a/d)*(s>0?1:-1),e=[o/d,d],r=[0,h(n*a+i*s,d*d)]}else t=0,r=e=[0,0];return{translation:this.getTranslation(),rotation:t*l,scaling:new f(e),skewing:new f(r[0]*l,r[1]*l)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new f(this._tx,this._ty)},getScaling:function(){return(this.decompose()||{}).scaling},getRotation:function(){return(this.decompose()||{}).rotation},applyToContext:function(t){this.isIdentity()||t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},i.each(["a","b","c","d","tx","ty"],(function(t){var e=i.capitalize(t),r="_"+t;this["get"+e]=function(){return this[r]},this["set"+e]=function(t){this[r]=t,this._changed()}}),{})),m=i.extend({_class:"Line",initialize:function(t,e,r,n,i){var a=!1;arguments.length>=4?(this._px=t,this._py=e,this._vx=r,this._vy=n,a=i):(this._px=t.x,this._py=t.y,this._vx=e.x,this._vy=e.y,a=r),a||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new f(this._px,this._py)},getVector:function(){return new f(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,e){return m.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,e)},getSide:function(t,e){return m.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,e)},getDistance:function(t){return Math.abs(this.getSignedDistance(t))},getSignedDistance:function(t){return m.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0)},isCollinear:function(t){return f.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return f.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,e,r,n,i,a,s,o,u,l){u||(r-=t,n-=e,s-=i,o-=a);var c=r*o-n*s;if(!h.isZero(c)){var d=t-i,p=e-a,v=(s*p-o*d)/c,_=(r*p-n*d)/c;if(l||-1e-12<v&&v<1+1e-12&&-1e-12<_&&_<1+1e-12)return l||(v=v<=0?0:v>=1?1:v),new f(t+v*r,e+v*n)}},getSide:function(t,e,r,n,i,a,s,o){s||(r-=t,n-=e);var u=i-t,l=u*n-(a-e)*r;return!o&&h.isZero(l)&&(l=(u*r+u*r)/(r*r+n*n))>=0&&l<=1&&(l=0),l<0?-1:l>0?1:0},getSignedDistance:function(t,e,r,n,i,a,s){return s||(r-=t,n-=e),0===r?n>0?i-t:t-i:0===n?r<0?a-e:e-a:((i-t)*n-(a-e)*r)/Math.sqrt(r*r+n*n)},getDistance:function(t,e,r,n,i,a,s){return Math.abs(m.getSignedDistance(t,e,r,n,i,a,s))}}}),y=o.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){o.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new j(null,null,this),this._view=X.create(this,t||$.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(t,e){return i.serialize(this._children,t,!0,e)},_changed:function(t,e){if(1&t){var r=this._view;r&&(r._needsUpdate=!0,!r._requested&&r._autoUpdate&&r.requestUpdate())}var n=this._changes;if(n&&e){var i=this._changesById,a=e._id,s=i[a];s?s.flags|=t:n.push(i[a]={item:e,flags:t})}},clear:function(){for(var t=this._children,e=t.length-1;e>=0;e--)t[e].remove()},isEmpty:function(){return!this._children.length},remove:function t(){return!!t.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.set(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new E({project:this,insert:!0})},getSymbolDefinitions:function(){var t=[],e={};return this.getItems({class:S,match:function(r){var n=r._definition,i=n._id;return e[i]||(e[i]=!0,t.push(n)),!1}}),t},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var t=this._selectionItems,e=[];for(var r in t){var n=t[r],i=n._selection;1&i&&n.isInserted()?e.push(n):i||this._updateSelection(n)}return e},_updateSelection:function(t){var e=t._id,r=this._selectionItems;t._selection?r[e]!==t&&(this._selectionCount++,r[e]=t):r[e]===t&&(this._selectionCount--,delete r[e])},selectAll:function(){for(var t=this._children,e=0,r=t.length;e<r;e++)t[e].setFullySelected(!0)},deselectAll:function(){var t=this._selectionItems;for(var e in t)t[e].setFullySelected(!1)},addLayer:function(t){return this.insertLayer(e,t)},insertLayer:function(t,e){if(e instanceof E){e._remove(!1,!0),i.splice(this._children,[e],t,0),e._setProject(this,!0);var r=e._name;r&&e.setName(r),this._changes&&e._changed(5),this._activeLayer||(this._activeLayer=e)}else e=null;return e},_insertItem:function(t,r,n){return r=this.insertLayer(t,r)||(this._activeLayer||this._insertItem(e,new E(b.NO_INSERT),!0)).insertChild(t,r),n&&r.activate&&r.activate(),r},getItems:function(t){return b._getItems(this,t)},getItem:function(t){return b._getItems(this,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var e=this._activeLayer;return i.importJSON(t,e&&e.isEmpty()&&e)},removeOn:function(t){var e=this._removeSets;if(e){"mouseup"===t&&(e.mousedrag=null);var r=e[t];if(r){for(var n in r){var i=r[n];for(var a in e){var s=e[a];s&&s!=r&&delete s[i._id]}i.remove()}e[t]=null}}},draw:function(t,e,r){this._updateVersion++,t.save(),e.applyToContext(t);for(var n=this._children,a=new i({offset:new f(0,0),pixelRatio:r,viewMatrix:e.isIdentity()?null:e,matrices:[new g],updateMatrix:!0}),s=0,o=n.length;s<o;s++)n[s].draw(t,a);if(t.restore(),this._selectionCount>0){t.save(),t.strokeWidth=1;var u=this._selectionItems,h=this._scope.settings.handleSize,l=this._updateVersion;for(var c in u)u[c]._drawSelection(t,e,h,u,l);t.restore()}}}),b=i.extend(a,{statics:{extend:function t(e){return e._serializeFields&&(e._serializeFields=i.set({},this.prototype._serializeFields,e._serializeFields)),t.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new g,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var t=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return i.each(t,(function(t){this._events[t]={install:function(t){this.getView()._countItemEvent(t,1)},uninstall:function(t){this.getView()._countItemEvent(t,-1)}}}),{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:t}})},{initialize:function(){},_initialize:function(t,r){var n=t&&i.isPlainObject(t),a=n&&!0===t.internal,s=this._matrix=new g,o=n&&t.project||paper.project,u=paper.settings;return this._id=a?null:l.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&u.applyMatrix,r&&s.translate(r),s._owner=this,this._style=new j(o._currentStyle,this,o),a||n&&0==t.insert||!u.insertItems&&(!n||!0!==t.insert)?this._setProject(o):(n&&t.parent||o)._insertItem(e,this,!0),n&&t!==b.NO_INSERT&&this.set(t,{internal:!0,insert:!0,project:!0,parent:!0}),n},_serialize:function(t,e){function r(r){for(var s in r){var o=a[s];i.equals(o,"leading"===s?1.2*r.fontSize:r[s])||(n[s]=i.serialize(o,t,"data"!==s,e))}}var n={},a=this;return r(this._serializeFields),this instanceof w||r(this._style._defaults),[this._class,n]},_changed:function(t){var r=this._symbol,n=this._parent||r,i=this._project;8&t&&(this._bounds=this._position=this._decomposed=this._globalMatrix=e),n&&40&t&&b._clearBoundsCache(n),2&t&&b._clearBoundsCache(this),i&&i._changed(t,this),r&&r._changed(t)},getId:function(){return this._id},getName:function(){return this._name},setName:function(t){if(this._name&&this._removeNamed(),t===+t+"")throw new Error("Names consisting only of numbers are not supported.");var r=this._getOwner();if(t&&r){var n=r._children,i=r._namedChildren;(i[t]=i[t]||[]).push(this),t in n||(n[t]=this)}this._name=t||e,this._changed(128)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},i.each(["locked","visible","blendMode","opacity","guide"],(function(t){var e=i.capitalize(t),r="_"+t,n={locked:128,visible:137};this["get"+e]=function(){return this[r]},this["set"+e]=function(e){e!=this[r]&&(this[r]=e,this._changed(n[t]||129))}}),{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(t){if(t!==this._selection){this._selection=t;var e=this._project;e&&(e._updateSelection(this),this._changed(129))}},_changeSelection:function(t,e){var r=this._selection;this.setSelection(e?r|t:r&~t)},isSelected:function(){if(this._selectChildren)for(var t=this._children,e=0,r=t.length;e<r;e++)if(t[e].isSelected())return!0;return!!(1&this._selection)},setSelected:function(t){if(this._selectChildren)for(var e=this._children,r=0,n=e.length;r<n;r++)e[r].setSelected(t);this._changeSelection(1,t)},isFullySelected:function(){var t=this._children,e=!!(1&this._selection);if(t&&e){for(var r=0,n=t.length;r<n;r++)if(!t[r].isFullySelected())return!1;return!0}return e},setFullySelected:function(t){var e=this._children;if(e)for(var r=0,n=e.length;r<n;r++)e[r].setFullySelected(t);this._changeSelection(1,t)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(129),this._parent&&this._parent._changed(1024))},getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){var e=this._position,r=t?f:c;if(!e){var n=this._pivot;e=this._position=n?this._matrix._transformPoint(n):this.getBounds().getCenter(!0)}return new r(e.x,e.y,this,"setPosition")},setPosition:function(){this.translate(f.read(arguments).subtract(this.getPosition(!0)))},getPivot:function(){var t=this._pivot;return t?new c(t.x,t.y,this,"setPivot"):null},setPivot:function(){this._pivot=f.read(arguments,0,{clone:!0,readNull:!0}),this._position=e}},i.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},(function(t,e){this[e]=function(e){return this.getBounds(e,t)}}),{beans:!0,getBounds:function(t,e){var r=e||t instanceof g,n=i.set({},r?e:t,this._boundsOptions);n.stroke&&!this.getStrokeScaling()||(n.cacheItem=this);var a=this._getCachedBounds(r&&t,n).rect;return arguments.length?a:new _(a.x,a.y,a.width,a.height,this,"setBounds")},setBounds:function(){var t=v.read(arguments),e=this.getBounds(),r=this._matrix,n=new g,i=t.getCenter();n.translate(i),t.width==e.width&&t.height==e.height||(r.isInvertible()||(r.set(r._backup||(new g).translate(r.getTranslation())),e=this.getBounds()),n.scale(0!==e.width?t.width/e.width:0,0!==e.height?t.height/e.height:0)),i=e.getCenter(),n.translate(-i.x,-i.y),this.transform(n)},_getBounds:function(t,e){var r=this._children;return r&&r.length?(b._updateBoundsCache(this,e.cacheItem),b._getBounds(r,t,e)):new v},_getBoundsCacheKey:function(t,e){return[t.stroke?1:0,t.handle?1:0,e?1:0].join("")},_getCachedBounds:function(t,e,r){t=t&&t._orNullIfIdentity();var n=e.internal&&!r,i=e.cacheItem,a=n?null:this._matrix._orNullIfIdentity(),s=i&&(!t||t.equals(a))&&this._getBoundsCacheKey(e,n),o=this._bounds;if(b._updateBoundsCache(this._parent||this._symbol,i),s&&o&&s in o)return{rect:(c=o[s]).rect.clone(),nonscaling:c.nonscaling};var u=this._getBounds(t||a,e),h=u.rect||u,l=this._style,f=u.nonscaling||l.hasStroke()&&!l.getStrokeScaling();if(s){o||(this._bounds=o={});var c=o[s]={rect:h.clone(),nonscaling:f,internal:n}}return{rect:h,nonscaling:f}},_getStrokeMatrix:function(t,e){var r=this.getStrokeScaling()?null:e&&e.internal?this:this._parent||this._symbol&&this._symbol._item,n=r?r.getViewMatrix().invert():t;return n&&n._shiftless()},statics:{_updateBoundsCache:function(t,e){if(t&&e){var r=e._id,n=t._boundsCache=t._boundsCache||{ids:{},list:[]};n.ids[r]||(n.list.push(e),n.ids[r]=e)}},_clearBoundsCache:function(t){var r=t._boundsCache;if(r){t._bounds=t._position=t._boundsCache=e;for(var n=0,i=r.list,a=i.length;n<a;n++){var s=i[n];s!==t&&(s._bounds=s._position=e,s._boundsCache&&b._clearBoundsCache(s))}}},_getBounds:function(t,e,r){var n=1/0,i=-n,a=n,s=i,o=!1;r=r||{};for(var u=0,h=t.length;u<h;u++){var l=t[u];if(l._visible&&!l.isEmpty()){var f=l._getCachedBounds(e&&e.appended(l._matrix),r,!0),c=f.rect;n=Math.min(c.x,n),a=Math.min(c.y,a),i=Math.max(c.x+c.width,i),s=Math.max(c.y+c.height,s),f.nonscaling&&(o=!0)}}return{rect:isFinite(n)?new v(n,a,i-n,s-a):new v,nonscaling:o}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var t=this._decompose();return t?t.rotation:0},setRotation:function(t){var e=this.getRotation();if(null!=e&&null!=t){var r=this._decomposed;this.rotate(t-e),r&&(r.rotation=t,this._decomposed=r)}},getScaling:function(){var t=this._decompose(),e=t&&t.scaling;return new c(e?e.x:1,e?e.y:1,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=f.read(arguments,0,{clone:!0,readNull:!0});if(t&&e&&!t.equals(e)){var r=this.getRotation(),n=this._decomposed,i=new g,a=this.getPosition(!0);i.translate(a),r&&i.rotate(r),i.scale(e.x/t.x,e.y/t.y),r&&i.rotate(-r),i.translate(a.negate()),this.transform(i),n&&(n.scaling=e,this._decomposed=n)}},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},getGlobalMatrix:function(t){var e=this._globalMatrix,r=this._project._updateVersion;if(e&&e._updateVersion!==r&&(e=null),!e){e=this._globalMatrix=this._matrix.clone();var n=this._parent;n&&e.prepend(n.getGlobalMatrix(!0)),e._updateVersion=r}return t?e:e.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(t,e){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var r=this._children,n=0,i=r&&r.length;n<i;n++)r[n]._setProject(t);e=!0}e&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function t(e){t.base.call(this,e);for(var r=this._children,n=0,i=r&&r.length;n<i;n++)r[n]._installEvents(e)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof E)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var t=this._getOwner();return t&&t._children[this._index+1]||null},getPreviousSibling:function(){var t=this._getOwner();return t&&t._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return i.equals(this._children,t._children)},clone:function(t){var r=new this.constructor(b.NO_INSERT),n=this._children,a=i.pick(t?t.insert:e,t===e||!0===t),s=i.pick(t?t.deep:e,!0);n&&r.copyAttributes(this),n&&!s||r.copyContent(this),n||r.copyAttributes(this),a&&r.insertAbove(this);var o=this._name,u=this._parent;if(o&&u){n=u._children;for(var h=o,l=1;n[o];)o=h+" "+l++;o!==h&&r.setName(o)}return r},copyContent:function(t){for(var e=t._children,r=0,n=e&&e.length;r<n;r++)this.addChild(e[r].clone(!1),!0)},copyAttributes:function(t,e){this.setStyle(t._style);for(var r=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],n=0,a=r.length;n<a;n++){var s=r[n];t.hasOwnProperty(s)&&(this[s]=t[s])}e||this._matrix.set(t._matrix,!0),this.setApplyMatrix(t._applyMatrix),this.setPivot(t._pivot),this.setSelection(t._selection);var o=t._data,u=t._name;this._data=o?i.clone(o):null,u&&this.setName(u)},rasterize:function(t,r){var n=this.getStrokeBounds(),a=(t||this.getView().getResolution())/72,s=n.getTopLeft().floor(),o=n.getBottomRight().ceil(),u=new d(o.subtract(s)),h=new D(b.NO_INSERT);if(!u.isZero()){var l=$.getCanvas(u.multiply(a)),f=l.getContext("2d"),c=(new g).scale(a).translate(s.negate());f.save(),c.applyToContext(f),this.draw(f,new i({matrices:[c]})),f.restore(),h.setCanvas(l)}return h.transform((new g).translate(s.add(u.divide(2))).scale(1/a)),(r===e||r)&&h.insertAbove(this),h},contains:function(){return!!this._contains(this._matrix._inverseTransform(f.read(arguments)))},_contains:function(t){var e=this._children;if(e){for(var r=e.length-1;r>=0;r--)if(e[r].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return v.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new k.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,e){return t instanceof b&&this._asPathItem().getIntersections(t._asPathItem(),null,e,!0).length>0}},new function(){function t(){return this._hitTest(f.read(arguments),x.getOptions(arguments))}function e(){var t=f.read(arguments),e=x.getOptions(arguments),r=[];return this._hitTest(t,i.set({all:r},e)),r}function r(t,e,r,n){var i=this._children;if(i)for(var a=i.length-1;a>=0;a--){var s=i[a],o=s!==n&&s._hitTest(t,e,r);if(o&&!e.all)return o}return null}return y.inject({hitTest:t,hitTestAll:e,_hitTest:r}),{hitTest:t,hitTestAll:e,_hitTestChildren:r}},{_hitTest:function(t,e,r){function n(t){return t&&p&&!p(t)&&(t=null),t&&e.all&&e.all.push(t),t}function a(e,r){var n=r?l["get"+r]():v.getPosition();if(t.subtract(n).divide(h).length<=1)return new x(e,v,{name:r?i.hyphenate(r):e,point:n})}if(this._locked||!this._visible||this._guide&&!e.guides||this.isEmpty())return null;var s=this._matrix,o=r?r.appended(s):this.getGlobalMatrix().prepend(this.getView()._matrix),u=Math.max(e.tolerance,1e-12),h=e._tolerancePadding=new d(k._getStrokePadding(u,s._shiftless().invert()));if(!(t=s._inverseTransform(t))||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(h.multiply(2))._containsPoint(t))return null;var l,f,c=!(e.guides&&!this._guide||e.selected&&!this.isSelected()||e.type&&e.type!==i.hyphenate(this._class)||e.class&&!(this instanceof e.class)),p=e.match,v=this,_=e.position,g=e.center,m=e.bounds;if(c&&this._parent&&(_||g||m)){if((g||m)&&(l=this.getInternalBounds()),!(f=_&&a("position")||g&&a("center","Center"))&&m)for(var y=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],b=0;b<8&&!f;b++)f=a("bounds",y[b]);f=n(f)}return f||(f=this._hitTestChildren(t,e,o)||c&&n(this._hitTestSelf(t,e,o,this.getStrokeScaling()?null:o._shiftless().invert()))||null),f&&f.point&&(f.point=s.transform(f.point)),f},_hitTestSelf:function(t,e){if(e.fill&&this.hasFill()&&this._contains(t))return new x("fill",this)},matches:function(t,e){var r=typeof t;if("object"===r){for(var n in t)if(t.hasOwnProperty(n)&&!this.matches(n,t[n]))return!1;return!0}if("function"===r)return t(this);if("match"===t)return e(this);var a=/^(empty|editable)$/.test(t)?this["is"+i.capitalize(t)]():"type"===t?i.hyphenate(this._class):this[t];if("class"===t){if("function"==typeof e)return this instanceof e;a=this._class}if("function"==typeof e)return!!e(a);if(e){if(e.test)return e.test(a);if(i.isPlainObject(e))return function t(e,r){for(var n in e)if(e.hasOwnProperty(n)){var a=e[n],s=r[n];if(i.isPlainObject(a)&&i.isPlainObject(s)){if(!t(a,s))return!1}else if(!i.equals(a,s))return!1}return!0}(e,a)}return i.equals(a,e)},getItems:function(t){return b._getItems(this,t,this._matrix)},getItem:function(t){return b._getItems(this,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function t(e,r,n,a,s){if(!a){var o="object"==typeof r&&r,u=o&&o.overlapping,h=o&&o.inside,l=(b=u||h)&&v.read([b]);a={items:[],recursive:o&&!1!==o.recursive,inside:!!h,overlapping:!!u,rect:l,path:u&&new k.Rectangle({rectangle:l,insert:!1})},o&&(r=i.filter({},r,{recursive:!0,inside:!0,overlapping:!0}))}var f=e._children,c=a.items;n=(l=a.rect)&&(n||new g);for(var d=0,p=f&&f.length;d<p;d++){var _=f[d],m=n&&n.appended(_._matrix),y=!0;if(l){var b=_.getBounds(m);if(!l.intersects(b))continue;l.contains(b)||a.overlapping&&(b.contains(l)||a.path.intersects(_,m))||(y=!1)}if(y&&_.matches(r)&&(c.push(_),s))break;if(!1!==a.recursive&&t(_,r,m,a,s),s&&c.length>0)break}return c}}},{importJSON:function(t){var e=i.importJSON(t,this);return e!==this?this.addChild(e):e},addChild:function(t){return this.insertChild(e,t)},insertChild:function(t,e){var r=e?this.insertChildren(t,[e]):null;return r&&r[0]},addChildren:function(t){return this.insertChildren(this._children.length,t)},insertChildren:function(t,e){var r=this._children;if(r&&e&&e.length>0){for(var n={},a=(e=i.slice(e)).length-1;a>=0;a--){var s=(l=e[a])&&l._id;!l||n[s]?e.splice(a,1):(l._remove(!1,!0),n[s]=!0)}i.splice(r,e,t,0);for(var o=this._project,u=o._changes,h=(a=0,e.length);a<h;a++){var l=e[a],f=l._name;l._parent=this,l._setProject(o,!0),f&&l.setName(f),u&&l._changed(5)}this._changed(11)}else e=null;return e},_insertItem:"#insertChild",_insertAt:function(t,e){var r=t&&t._getOwner(),n=t!==this&&r?this:null;return n&&(n._remove(!1,!0),r._insertItem(t._index+e,n)),n},insertAbove:function(t){return this._insertAt(t,1)},insertBelow:function(t){return this._insertAt(t,0)},sendToBack:function(){var t=this._getOwner();return t?t._insertItem(0,this):null},bringToFront:function(){var t=this._getOwner();return t?t._insertItem(e,this):null},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(t){return t._insertItem(e,this)},copyTo:function(t){return this.clone(!1).addTo(t)},reduce:function(t){var e=this._children;if(e&&1===e.length){var r=e[0].reduce(t);return this._parent?(r.insertAbove(this),this.remove()):r.remove(),r}return this},_removeNamed:function(){var t=this._getOwner();if(t){var e=t._children,r=t._namedChildren,n=this._name,i=r[n],a=i?i.indexOf(this):-1;-1!==a&&(e[n]==this&&delete e[n],i.splice(a,1),i.length?e[n]=i[0]:delete r[n])}},_remove:function(t,e){var r=this._getOwner(),n=this._project,a=this._index;return!!r&&(this._name&&this._removeNamed(),null!=a&&(n._activeLayer===this&&(n._activeLayer=this.getNextSibling()||this.getPreviousSibling()),i.splice(r._children,null,a,1)),this._installEvents(!1),t&&n._changes&&this._changed(5),e&&r._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){var e=t&&t.insertBelow(this);return e&&this.remove(),e},removeChildren:function(t,e){if(!this._children)return null;t=t||0,e=i.pick(e,this._children.length);for(var r=i.splice(this._children,null,t,e-t),n=r.length-1;n>=0;n--)r[n]._remove(!0,!1);return r.length>0&&this._changed(11),r},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;t<e;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(){var t=this._children;return!t||!t.length},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function e(t){var e=[];do{e.unshift(t)}while(t=t._parent);return e}for(var r=e(this),n=e(t),i=0,a=Math.min(r.length,n.length);i<a;i++)if(r[i]!=n[i])return r[i]._index<n[i]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(t){return-1===this._getOrder(t)},isBelow:function(t){return 1===this._getOrder(t)},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var e=this;e=e._parent;)if(e===t)return!0;return!1},isAncestor:function(t){return!!t&&t.isDescendant(this)},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&/^(Group|Layer|CompoundPath)$/.test(e._class)&&t.isDescendant(e))return!0;e=e._parent}return!1}},i.each(["rotate","scale","shear","skew"],(function(t){var e="rotate"===t;this[t]=function(){var r=(e?i:f).read(arguments),n=f.read(arguments,0,{readNull:!0});return this.transform((new g)[t](r,n||this.getPosition(!0)))}}),{translate:function(){var t=new g;return this.transform(t.translate.apply(t,arguments))},transform:function(t,e,r,n){var i=this._matrix,a=t&&!t.isIdentity(),s=(e||this._applyMatrix)&&(!i.isIdentity()||a||e&&r&&this._children);if(!a&&!s)return this;if(a){!t.isInvertible()&&i.isInvertible()&&(i._backup=i.getValues()),i.prepend(t,!0);var o=this._style,u=o.getFillColor(!0),h=o.getStrokeColor(!0);u&&u.transform(t),h&&h.transform(t)}if(s&&(s=this._transformContent(i,r,n))){var l=this._pivot;l&&i._transformPoint(l,l,!0),i.reset(!0),n&&this._canApplyMatrix&&(this._applyMatrix=!0)}var f=this._bounds,c=this._position;(a||s)&&this._changed(9);var d=a&&f&&t.decompose();if(d&&d.skewing.isZero()&&d.rotation%90==0){for(var p in f){var v=f[p];if(v.nonscaling)delete f[p];else if(s||!v.internal){var _=v.rect;t._transformBounds(_,_)}}this._bounds=f;var g=f[this._getBoundsCacheKey(this._boundsOptions||{})];g&&(this._position=g.rect.getCenter(!0))}else a&&c&&this._pivot&&(this._position=t._transformPoint(c,c));return this},_transformContent:function(t,e,r){var n=this._children;if(n){for(var i=0,a=n.length;i<a;i++)n[i].transform(t,!0,e,r);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(f.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(f.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(f.read(arguments))},localToParent:function(){return this._matrix._transformPoint(f.read(arguments))},fitBounds:function(t,e){t=v.read(arguments);var r=this.getBounds(),n=r.height/r.width,i=t.height/t.width,a=(e?n>i:n<i)?t.width/r.width:t.height/r.height,s=new v(new f,new d(r.width*a,r.height*a));s.setCenter(t.getCenter()),this.setBounds(s)}}),{_setStyles:function(t,e,r){var n=this._style,i=this._matrix;if(n.hasFill()&&(t.fillStyle=n.getFillColor().toCanvasStyle(t,i)),n.hasStroke()){t.strokeStyle=n.getStrokeColor().toCanvasStyle(t,i),t.lineWidth=n.getStrokeWidth();var a=n.getStrokeJoin(),s=n.getStrokeCap(),o=n.getMiterLimit();if(a&&(t.lineJoin=a),s&&(t.lineCap=s),o&&(t.miterLimit=o),paper.support.nativeDash){var u=n.getDashArray(),h=n.getDashOffset();u&&u.length&&("setLineDash"in t?(t.setLineDash(u),t.lineDashOffset=h):(t.mozDash=u,t.mozDashOffset=h))}}if(n.hasShadow()){var l=e.pixelRatio||1,c=r._shiftless().prepend((new g).scale(l,l)),d=c.transform(new f(n.getShadowBlur(),0)),p=c.transform(this.getShadowOffset());t.shadowColor=n.getShadowColor().toCanvasStyle(t),t.shadowBlur=d.getLength(),t.shadowOffsetX=p.x,t.shadowOffsetY=p.y}},draw:function(t,e,r){var n=this._updateVersion=this._project._updateVersion;if(this._visible&&0!==this._opacity){var i=e.matrices,a=e.viewMatrix,s=this._matrix,o=i[i.length-1].appended(s);if(o.isInvertible()){a=a?a.appended(o):o,i.push(o),e.updateMatrix&&(o._updateVersion=n,this._globalMatrix=o);var u,h,l,f=this._blendMode,c=this._opacity,d="normal"===f,p=tt.nativeModes[f],v=d&&1===c||e.dontStart||e.clip||(p||d&&c<1)&&this._canComposite(),_=e.pixelRatio||1;if(!v){var g=this.getStrokeBounds(a);if(!g.width||!g.height)return;l=e.offset,h=e.offset=g.getTopLeft().floor(),u=t,t=$.getContext(g.getSize().ceil().add(1).multiply(_)),1!==_&&t.scale(_,_)}t.save();var m=r?r.appended(s):this._canScaleStroke&&!this.getStrokeScaling(!0)&&a,y=!v&&e.clipItem,b=!m||y;if(v?(t.globalAlpha=c,p&&(t.globalCompositeOperation=f)):b&&t.translate(-h.x,-h.y),b&&(v?s:a).applyToContext(t),y&&e.clipItem.draw(t,e.extend({clip:!0})),m){t.setTransform(_,0,0,_,0,0);var w=e.offset;w&&t.translate(-w.x,-w.y)}this._draw(t,e,a,m),t.restore(),i.pop(),e.clip&&!e.dontFinish&&t.clip(),v||(tt.process(f,t,u,c,h.subtract(l).multiply(_)),$.release(t),e.offset=l)}}},_isUpdated:function(t){var e=this._parent;if(e instanceof U)return e._isUpdated(t);var r=this._updateVersion===t;return!r&&e&&e._visible&&e._isUpdated(t)&&(this._updateVersion=t,r=!0),r},_drawSelection:function(t,e,r,n,i){var a=this._selection,s=1&a,o=2&a||s&&this._selectBounds,u=4&a;if(this._drawSelected||(s=!1),(s||o||u)&&this._isUpdated(i)){var h,l=this.getSelectedColor(!0)||(h=this.getLayer())&&h.getSelectedColor(!0),f=e.appended(this.getGlobalMatrix(!0)),c=r/2;if(t.strokeStyle=t.fillStyle=l?l.toCanvasStyle(t):"#009dec",s&&this._drawSelected(t,f,n),u){var d=this.getPosition(!0),p=d.x,v=d.y;t.beginPath(),t.arc(p,v,c,0,2*Math.PI,!0),t.stroke();for(var _=[[0,-1],[1,0],[0,1],[-1,0]],g=c,m=r+1,y=0;y<4;y++){var b=_[y],w=b[0],E=b[1];t.moveTo(p+w*g,v+E*g),t.lineTo(p+w*m,v+E*m),t.stroke()}}if(o){var C=f._transformCorners(this.getInternalBounds());for(t.beginPath(),y=0;y<8;y++)t[y?"lineTo":"moveTo"](C[y],C[++y]);for(t.closePath(),t.stroke(),y=0;y<8;y++)t.fillRect(C[y]-c,C[++y]-c,r,r)}}},_canComposite:function(){return!1}},i.each(["down","drag","up","move"],(function(t){this["removeOn"+i.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e)}}),{removeOn:function(t){for(var e in t)if(t[e]){var r="mouse"+e,n=this._project,i=n._removeSets=n._removeSets||{};i[r]=i[r]||{},i[r][this._id]=this}return this}})),w=b.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function t(r){t.base.call(this,r),1026&r&&(this._clipItem=e)},_getClipItem:function(){var t=this._clipItem;if(t===e){t=null;for(var r=this._children,n=0,i=r.length;n<i;n++)if(r[n]._clipMask){t=r[n];break}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},_getBounds:function t(e,r){var n=this._getClipItem();return n?n._getCachedBounds(e&&e.appended(n._matrix),i.set({},r,{stroke:!1})):t.base.call(this,e,r)},_hitTestChildren:function t(e,r,n){var i=this._getClipItem();return(!i||i.contains(e))&&t.base.call(this,e,r,n,i)},_draw:function(t,e){var r=e.clip,n=!r&&this._getClipItem();e=e.extend({clipItem:n,clip:!1}),r?(t.beginPath(),e.dontStart=e.dontFinish=!0):n&&n.draw(t,e.extend({clip:!0}));for(var i=this._children,a=0,s=i.length;a<s;a++){var o=i[a];o!==n&&o.draw(t,e)}}}),E=w.extend({_class:"Layer",initialize:function(){w.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function t(){return this._parent?t.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),C=b.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t,e){this._initialize(t,e)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&i.equals(this._radius,t._radius)},copyContent:function(t){this.setType(t._type),this.setSize(t._size),this.setRadius(t._radius)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){var t=this._size;return new p(t.width,t.height,this,"setSize")},setSize:function(){var t=d.read(arguments);if(this._size){if(!this._size.equals(t)){var e=this._type,r=t.width,n=t.height;"rectangle"===e?this._radius.set(d.min(this._radius,t.divide(2))):"circle"===e?(r=n=(r+n)/2,this._radius=r/2):"ellipse"===e&&this._radius._set(r/2,n/2),this._size._set(r,n),this._changed(9)}}else this._size=t.clone()},getRadius:function(){var t=this._radius;return"circle"===this._type?t:new p(t.width,t.height,this,"setRadius")},setRadius:function(t){var e=this._type;if("circle"===e){if(t===this._radius)return;r=2*t,this._radius=t,this._size._set(r,r)}else if(t=d.read(arguments),this._radius){if(this._radius.equals(t))return;if(this._radius.set(t),"rectangle"===e){var r=d.max(this._size,t.multiply(2));this._size.set(r)}else"ellipse"===e&&this._size._set(2*t.width,2*t.height)}else this._radius=t.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var r=new(k[i.capitalize(this._type)])({center:new f,size:this._size,radius:this._radius,insert:!1});return r.copyAttributes(this),paper.settings.applyMatrix&&r.setApplyMatrix(!0),(t===e||t)&&r.insertAbove(this),r},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(t,e,r,n){var i=this._style,a=i.hasFill(),s=i.hasStroke(),o=e.dontFinish||e.clip,u=!n;if(a||s||o){var h=this._type,l=this._radius,f="circle"===h;if(e.dontStart||t.beginPath(),u&&f)t.arc(0,0,l,0,2*Math.PI,!0);else{var c=f?l:l.width,d=f?l:l.height,p=this._size,v=p.width,_=p.height;if(u&&"rectangle"===h&&0===c&&0===d)t.rect(-v/2,-_/2,v,_);else{var g=v/2,m=_/2,y=.44771525016920644,b=c*y,w=d*y,E=[-g,-m+d,-g,-m+w,-g+b,-m,-g+c,-m,g-c,-m,g-b,-m,g,-m+w,g,-m+d,g,m-d,g,m-w,g-b,m,g-c,m,-g+c,m,-g+b,m,-g,m-w,-g,m-d];n&&n.transform(E,E,32),t.moveTo(E[0],E[1]),t.bezierCurveTo(E[2],E[3],E[4],E[5],E[6],E[7]),g!==c&&t.lineTo(E[8],E[9]),t.bezierCurveTo(E[10],E[11],E[12],E[13],E[14],E[15]),m!==d&&t.lineTo(E[16],E[17]),t.bezierCurveTo(E[18],E[19],E[20],E[21],E[22],E[23]),g!==c&&t.lineTo(E[24],E[25]),t.bezierCurveTo(E[26],E[27],E[28],E[29],E[30],E[31])}}t.closePath()}o||!a&&!s||(this._setStyles(t,e,r),a&&(t.fill(i.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),s&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,e){var r=new v(this._size).setCenter(0,0),n=this._style,i=e.stroke&&n.hasStroke()&&n.getStrokeWidth();return t&&(r=t._transformBounds(r)),i?r.expand(k._getStrokePadding(i,this._getStrokeMatrix(t,e))):r}},new function(){function t(t,e,r){var n=t._radius;if(!n.isZero())for(var i=t._size.divide(2),a=1;a<=4;a++){var s=new f(a>1&&a<4?-1:1,a>2?-1:1),o=s.multiply(i),u=o.subtract(s.multiply(n));if(new v(r?o.add(s.multiply(r)):o,u).contains(e))return{point:u,quadrant:a}}}function e(t,e,r,n){var i=t.divide(e);return(!n||i.isInQuadrant(n))&&i.subtract(i.normalize()).multiply(e).divide(r).length<=1}return{_contains:function e(r){if("rectangle"===this._type){var n=t(this,r);return n?r.subtract(n.point).divide(this._radius).getLength()<=1:e.base.call(this,r)}return r.divide(this.size).getLength()<=.5},_hitTestSelf:function r(n,i,a,s){var o=!1,u=this._style,h=i.stroke&&u.hasStroke(),l=i.fill&&u.hasFill();if(h||l){var f=this._type,c=this._radius,d=h?u.getStrokeWidth()/2:0,p=i._tolerancePadding.add(k._getStrokePadding(d,!u.getStrokeScaling()&&s));if("rectangle"===f){var _=p.multiply(2),g=t(this,n,_);if(g)o=e(n.subtract(g.point),c,p,g.quadrant);else{var m=new v(this._size).setCenter(0,0),y=m.expand(_),b=m.expand(_.negate());o=y._containsPoint(n)&&!b._containsPoint(n)}}else o=e(n,c,p)}return o?new x(h?"stroke":"fill",this):r.base.apply(this,arguments)}}},{statics:new function(){function t(t,e,r,n,a){var s=new C(i.getNamed(a),e);return s._type=t,s._size=r,s._radius=n,s}return{Circle:function(){var e=f.readNamed(arguments,"center"),r=i.readNamed(arguments,"radius");return t("circle",e,new d(2*r),r,arguments)},Rectangle:function(){var e=v.readNamed(arguments,"rectangle"),r=d.min(d.readNamed(arguments,"radius"),e.getSize(!0).divide(2));return t("rectangle",e.getCenter(!0),e.getSize(!0),r,arguments)},Ellipse:function(){var e=C._readEllipse(arguments),r=e.radius;return t("ellipse",e.center,r.multiply(2),r,arguments)},_readEllipse:function(t){var e,r;if(i.hasNamed(t,"radius"))e=f.readNamed(t,"center"),r=d.readNamed(t,"radius");else{var n=v.readNamed(t,"rectangle");e=n.getCenter(!0),r=n.getSize(!0).divide(2)}return{center:e,radius:r}}}}}),D=b.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],initialize:function(t,r){if(!this._initialize(t,r!==e&&f.read(arguments,1))){var i="string"==typeof t?n.getElementById(t):t;i?this.setImage(i):this.setSource(t)}this._size||(this._size=new d,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},copyContent:function(t){var e=t._image,r=t._canvas;if(e)this._setImage(e);else if(r){var n=$.getCanvas(t._size);n.getContext("2d").drawImage(r,0,0),this._setImage(n)}this._crossOrigin=t._crossOrigin},getSize:function(){var t=this._size;return new p(t?t.width:0,t?t.height:0,this,"setSize")},setSize:function(){var t=d.read(arguments);if(!t.equals(this._size))if(t.width>0&&t.height>0){var e=this.getElement();this._setImage($.getCanvas(t)),e&&this.getContext(!0).drawImage(e,0,0,t.width,t.height)}else this._canvas&&$.release(this._canvas),this._size=t.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},getLoaded:function(){return this._loaded},isEmpty:function(){var t=this._size;return!t||0===t.width&&0===t.height},getResolution:function(){var t=this._matrix,e=new f(0,0).transform(t),r=new f(1,0).transform(t).subtract(e),n=new f(0,1).transform(t).subtract(e);return new d(72/r.getLength(),72/n.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(t){function e(t){var e=r.getView(),n=t&&t.type||"load";e&&r.responds(n)&&(paper=e._scope,r.emit(n,new V(t)))}var r=this;this._setImage(t),this._loaded?setTimeout(e,0):t&&H.add(t,{load:function(n){r._setImage(t),e(n)},error:e})},_setImage:function(t){this._canvas&&$.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=!!(t&&t.src&&t.complete)),this._size=new d(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(521)},getCanvas:function(){if(!this._canvas){var t=$.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch(e){$.release(t)}}return this._canvas},setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),t&&(this._image=null,this._changed(513)),this._context},setContext:function(t){this._context=t},getSource:function(){var t=this._image;return t&&t.src||this.toDataURL()},setSource:function(e){var r=new t.Image,n=this._crossOrigin;n&&(r.crossOrigin=n),r.src=e,this.setImage(r)},getCrossOrigin:function(){var t=this._image;return t&&t.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(t){this._crossOrigin=t;var e=this._image;e&&(e.crossOrigin=t)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=v.read(arguments),e=$.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},getSubRaster:function(){var t=v.read(arguments),e=new D(b.NO_INSERT);return e._setImage(this.getSubCanvas(t)),e.translate(t.getCenter().subtract(this.getSize().divide(2))),e._matrix.prepend(this._matrix),e.insertAbove(this),e},toDataURL:function(){var t=this._image,e=t&&t.src;if(/^data:/.test(e))return e;var r=this.getCanvas();return r?r.toDataURL.apply(r,arguments):null},drawImage:function(t){var e=f.read(arguments,1);this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){var e,r;if(t?t instanceof I?(r=t,e=t.getBounds()):"object"==typeof t&&("width"in t?e=new v(t):"x"in t&&(e=new v(t.x-.5,t.y-.5,1,1))):e=this.getBounds(),!e)return null;var n=Math.min(e.width,32),a=Math.min(e.height,32),s=D._sampleContext;s?s.clearRect(0,0,33,33):s=D._sampleContext=$.getContext(new d(32)),s.save();var o=(new g).scale(n/e.width,a/e.height).translate(-e.x,-e.y);o.applyToContext(s),r&&r.draw(s,new i({clip:!0,matrices:[o]})),this._matrix.applyToContext(s);var u=this.getElement(),h=this._size;u&&s.drawImage(u,-h.width/2,-h.height/2),s.restore();for(var l=s.getImageData(.5,.5,Math.ceil(n),Math.ceil(a)).data,f=[0,0,0],c=0,p=0,_=l.length;p<_;p+=4){var m=l[p+3];c+=m,m/=255,f[0]+=l[p]*m,f[1]+=l[p+1]*m,f[2]+=l[p+2]*m}for(p=0;p<3;p++)f[p]/=c;return c?N.read(f):null},getPixel:function(){var t=f.read(arguments),e=this.getContext().getImageData(t.x,t.y,1,1).data;return new N("rgb",[e[0]/255,e[1]/255,e[2]/255],e[3]/255)},setPixel:function(){var t=f.read(arguments),e=N.read(arguments),r=e._convert("rgb"),n=e._alpha,i=this.getContext(!0),a=i.createImageData(1,1),s=a.data;s[0]=255*r[0],s[1]=255*r[1],s[2]=255*r[2],s[3]=null!=n?255*n:255,i.putImageData(a,t.x,t.y)},createImageData:function(){var t=d.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=v.read(arguments);return t.isEmpty()&&(t=new v(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},setImageData:function(t){var e=f.read(arguments,1);this.getContext(!0).putImageData(t,e.x,e.y)},_getBounds:function(t,e){var r=new v(this._size).setCenter(0,0);return t?t._transformBounds(r):r},_hitTestSelf:function(t){if(this._contains(t)){var e=this;return new x("pixel",e,{offset:t.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(t){var e=this.getElement();e&&(t.globalAlpha=this._opacity,t.drawImage(e,-this._size.width/2,-this._size.height/2))},_canComposite:function(){return!0}}),S=b.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,r){this._initialize(t,r!==e&&f.read(arguments,1))||this.setDefinition(t instanceof T?t:new T(t))},_equals:function(t){return this._definition===t._definition},copyContent:function(t){this.setDefinition(t._definition)},getDefinition:function(){return this._definition},setDefinition:function(t){this._definition=t,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(t,e){var r=this._definition._item;return r._getCachedBounds(r._matrix.prepended(t),e)},_hitTestSelf:function(t,e,r){var n=this._definition._item._hitTest(t,e,r);return n&&(n.item=this),n},_draw:function(t,e){this._definition._item.draw(t,e)}}),T=i.extend({_class:"SymbolDefinition",initialize:function(t,e){this._id=l.get(),this.project=paper.project,t&&this.setItem(t,e)},_serialize:function(t,e){return e.add(this,(function(){return i.serialize([this._class,this._item],t,!1,e)}))},_changed:function(t){8&t&&b._clearBoundsCache(this),1&t&&this.project._changed(t)},getItem:function(){return this._item},setItem:function(t,e){t._symbol&&(t=t.clone()),this._item&&(this._item._symbol=null),this._item=t,t.remove(),t.setSelected(!1),e||t.setPosition(new f),t._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(t){return new S(this,t)},clone:function(){return new T(this._item.clone(!1))},equals:function(t){return t===this||t&&this._item.equals(t._item)||!1}}),x=i.extend({_class:"HitResult",initialize:function(t,e,r){this.type=t,this.item=e,r&&this.inject(r)},statics:{getOptions:function(t){var e=t&&i.read(t);return i.set({type:null,tolerance:paper.settings.hitTolerance,fill:!e,stroke:!e,segments:!e,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},e)}}}),F=i.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,r,n,i,a,s){var o,u,h,l,f=arguments.length;f>0&&(null==t||"object"==typeof t?1===f&&t&&"point"in t?(o=t.point,u=t.handleIn,h=t.handleOut,l=t.selection):(o=t,u=r,h=n,l=i):(o=[t,r],u=n!==e?[n,i]:null,h=a!==e?[a,s]:null)),new A(o,this,"_point"),new A(u,this,"_handleIn"),new A(h,this,"_handleOut"),l&&this.setSelection(l)},_serialize:function(t,e){var r=this._point,n=this._selection,a=n||this.hasHandles()?[r,this._handleIn,this._handleOut]:r;return n&&a.push(n),i.serialize(a,t,!0,e)},_changed:function(t){var e=this._path;if(e){var r,n=e._curves,i=this._index;n&&(t&&t!==this._point&&t!==this._handleIn||!(r=i>0?n[i-1]:e._closed?n[n.length-1]:null)||r._changed(),t&&t!==this._point&&t!==this._handleOut||!(r=n[i])||r._changed()),e._changed(25)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(f.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(f.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(f.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var t=this._handleIn,e=this._handleOut;return!t.isZero()&&!e.isZero()&&t.isCollinear(e)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(t){var e=this._selection,r=this._path;this._selection=t=t||0,r&&t!==e&&(r._updateSelection(this,e,t),r._changed(129))},_changeSelection:function(t,e){var r=this._selection;this.setSelection(e?r|t:r&~t)},isSelected:function(){return!!(7&this._selection)},setSelected:function(t){this._changeSelection(7,t)},getIndex:function(){return this._index!==e?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,e=this._index;return t?(e>0&&!t._closed&&e===t._segments.length-1&&e--,t.getCurves()[e]||null):null},getLocation:function(){var t=this.getCurve();return t?new M(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},smooth:function(t,r,n){var i=t||{},a=i.type,s=i.factor,o=this.getPrevious(),u=this.getNext(),h=(o||this)._point,l=this._point,c=(u||this)._point,d=h.getDistance(l),p=l.getDistance(c);if(a&&"catmull-rom"!==a){if("geometric"!==a)throw new Error("Smoothing method '"+a+"' not supported.");if(o&&u){var v=h.subtract(c),_=s===e?.4:s,g=_*d/(d+p);r||this.setHandleIn(v.multiply(g)),n||this.setHandleOut(v.multiply(g-_))}}else{var m=s===e?.5:s,y=Math.pow(d,m),b=y*y,w=Math.pow(p,m),E=w*w;if(!r&&o){var C=2*E+3*w*y+b,D=3*w*(w+y);this.setHandleIn(0!==D?new f((E*h._x+C*l._x-b*c._x)/D-l._x,(E*h._y+C*l._y-b*c._y)/D-l._y):new f)}if(!n&&u){C=2*b+3*y*w+E,D=3*y*(y+w);this.setHandleOut(0!==D?new f((b*c._x+C*l._x-E*h._x)/D-l._x,(b*c._y+C*l._y-E*h._y)/D-l._y):new f)}}},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,e=this._handleOut,r=t.clone();t.set(e),e.set(r)},reversed:function(){return new F(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new F(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},interpolate:function(t,e,r){var n=1-r,i=r,a=t._point,s=e._point,o=t._handleIn,u=e._handleIn,h=e._handleOut,l=t._handleOut;this._point._set(n*a._x+i*s._x,n*a._y+i*s._y,!0),this._handleIn._set(n*o._x+i*u._x,n*o._y+i*u._y,!0),this._handleOut._set(n*l._x+i*h._x,n*l._y+i*h._y,!0),this._changed()},_transformCoordinates:function(t,e,r){var n=this._point,i=r&&this._handleIn.isZero()?null:this._handleIn,a=r&&this._handleOut.isZero()?null:this._handleOut,s=n._x,o=n._y,u=2;return e[0]=s,e[1]=o,i&&(e[u++]=i._x+s,e[u++]=i._y+o),a&&(e[u++]=a._x+s,e[u++]=a._y+o),t&&(t._transformCoordinates(e,e,u/2),s=e[0],o=e[1],r?(n._x=s,n._y=o,u=2,i&&(i._x=e[u++]-s,i._y=e[u++]-o),a&&(a._x=e[u++]-s,a._y=e[u++]-o)):(i||(e[u++]=s,e[u++]=o),a||(e[u++]=s,e[u++]=o))),e}}),A=f.extend({initialize:function(t,r,n){var i,a,s;if(t)if((i=t[0])!==e)a=t[1];else{var o=t;(i=o.x)===e&&(i=(o=f.read(arguments)).x),a=o.y,s=o.selected}else i=a=0;this._x=i,this._y=a,this._owner=r,r[n]=this,s&&this.setSelected(!0)},_set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){var t=h.isZero;return t(this._x)&&t(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){var t=this._owner;return this===t._point?1:this===t._handleIn?2:this===t._handleOut?4:0}}),P=i.extend({_class:"Curve",beans:!0,initialize:function(t,e,r,n,i,a,s,o){var u,h,l,f,c,d,p=arguments.length;3===p?(this._path=t,u=e,h=r):p?1===p?"segment1"in t?(u=new F(t.segment1),h=new F(t.segment2)):"point1"in t?(l=t.point1,c=t.handle1,d=t.handle2,f=t.point2):Array.isArray(t)&&(l=[t[0],t[1]],f=[t[6],t[7]],c=[t[2]-t[0],t[3]-t[1]],d=[t[4]-t[6],t[5]-t[7]]):2===p?(u=new F(t),h=new F(e)):4===p?(l=t,c=e,d=r,f=n):8===p&&(l=[t,e],f=[s,o],c=[r-t,n-e],d=[i-s,a-o]):(u=new F,h=new F),this._segment1=u||new F(l,null,c),this._segment2=h||new F(f,d,null)},_serialize:function(t,e){return i.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0,e)},_changed:function(){this._length=this._bounds=e},clone:function(){return new P(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},classify:function(){return P.classify(this.getValues())},remove:function(){var t=!1;if(this._path){var e=this._segment2,r=e._handleOut;(t=e.remove())&&this._segment1._handleOut.set(r)}return t},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(f.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(f.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(f.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(f.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return P.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),e=[],r=0;r<8;r+=2)e.push(new f(t[r],t[r+1]));return e}},{getLength:function(){return null==this._length&&(this._length=P.getLength(this.getValues(),0,1)),this._length},getArea:function(){return P.getArea(this.getValues())},getLine:function(){return new m(this._segment1._point,this._segment2._point)},getPart:function(t,e){return new P(P.getPart(this.getValues(),t,e))},getPartLength:function(t,e){return P.getLength(this.getValues(),t,e)},divideAt:function(t){return this.divideAtTime(t&&t.curve===this?t.time:this.getTimeAt(t))},divideAtTime:function(t,e){var r=null;if(t>=1e-8&&t<=1-1e-8){var n=P.subdivide(this.getValues(),t),i=n[0],a=n[1],s=e||this.hasHandles(),o=this._segment1,u=this._segment2,h=this._path;s&&(o._handleOut._set(i[2]-i[0],i[3]-i[1]),u._handleIn._set(a[4]-a[6],a[5]-a[7]));var l=i[6],c=i[7],d=new F(new f(l,c),s&&new f(i[4]-l,i[5]-c),s&&new f(a[2]-l,a[3]-c));h?(h.insert(o._index+1,d),r=this.getNext()):(this._segment2=d,this._changed(),r=new P(d,u))}return r},splitAt:function(t){var e=this._path;return e?e.splitAt(t):null},splitAtTime:function(t){return this.splitAt(this.getLocationAtTime(t))},divide:function(t,r){return this.divideAtTime(t===e?.5:r?t:this.getTimeAt(t))},split:function(t,r){return this.splitAtTime(t===e?.5:r?t:this.getTimeAt(t))},reversed:function(){return new P(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(t,e,r,n){var i=t._point,a=t._handleOut,s=e._handleIn,o=e._point,u=i.x,h=i.y,l=o.x,f=o.y,c=n?[u,h,u,h,l,f,l,f]:[u,h,u+a._x,h+a._y,l+s._x,f+s._y,l,f];return r&&r._transformCoordinates(c,c,4),c},subdivide:function(t,r){var n=t[0],i=t[1],a=t[2],s=t[3],o=t[4],u=t[5],h=t[6],l=t[7];r===e&&(r=.5);var f=1-r,c=f*n+r*a,d=f*i+r*s,p=f*a+r*o,v=f*s+r*u,_=f*o+r*h,g=f*u+r*l,m=f*c+r*p,y=f*d+r*v,b=f*p+r*_,w=f*v+r*g,E=f*m+r*b,C=f*y+r*w;return[[n,i,c,d,m,y,E,C],[E,C,b,w,_,g,h,l]]},getMonoCurves:function(t,e){var r=[],n=e?0:1,i=t[n+0],a=t[n+2],s=t[n+4],o=t[n+6];if(i>=a==a>=s&&a>=s==s>=o||P.isStraight(t))r.push(t);else{var u=3*(a-s)-i+o,l=2*(i+s)-4*a,f=a-i,c=[],d=h.solveQuadratic(u,l,f,c,1e-8,1-1e-8);if(d){c.sort();var p=c[0],v=P.subdivide(t,p);r.push(v[0]),d>1&&(p=(c[1]-p)/(1-p),v=P.subdivide(v[1],p),r.push(v[0])),r.push(v[1])}else r.push(t)}return r},solveCubic:function(t,e,r,n,i,a){var s=t[e],o=t[e+2],u=t[e+4],l=t[e+6],f=0;if(!(s<r&&l<r&&o<r&&u<r||s>r&&l>r&&o>r&&u>r)){var c=3*(o-s),d=3*(u-o)-c,p=l-s-c-d;f=h.solveCubic(p,d,c,s-r,n,i,a)}return f},getTimeOf:function(t,e){var r=new f(t[0],t[1]),n=new f(t[6],t[7]);if(null===(e.isClose(r,1e-12)?0:e.isClose(n,1e-12)?1:null))for(var i=[e.x,e.y],a=[],s=0;s<2;s++)for(var o=P.solveCubic(t,s,i[s],a,0,1),u=0;u<o;u++){var h=a[u];if(e.isClose(P.getPoint(t,h),1e-7))return h}return e.isClose(r,1e-7)?0:e.isClose(n,1e-7)?1:null},getNearestTime:function(t,e){function r(r){if(r>=0&&r<=1){var n=e.getDistance(P.getPoint(t,r),!0);if(n<h)return h=n,l=r,!0}}if(P.isStraight(t)){var n=t[0],i=t[1],a=t[6]-n,s=t[7]-i,o=a*a+s*s;if(0===o)return 0;var u=((e.x-n)*a+(e.y-i)*s)/o;return u<1e-12?0:u>.999999999999?1:P.getTimeOf(t,new f(n+u*a,i+u*s))}for(var h=1/0,l=0,c=0;c<=100;c++)r(c/100);for(var d=.005;d>1e-8;)r(l-d)||r(l+d)||(d/=2);return l},getPart:function(t,e,r){var n=e>r;if(n){var i=e;e=r,r=i}return e>0&&(t=P.subdivide(t,e)[1]),r<1&&(t=P.subdivide(t,(r-e)/(1-e))[0]),n?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},isFlatEnough:function(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],s=t[4],o=t[5],u=t[6],h=t[7],l=3*i-2*r-u,f=3*a-2*n-h,c=3*s-2*u-r,d=3*o-2*h-n;return Math.max(l*l,c*c)+Math.max(f*f,d*d)<=16*e*e},getArea:function(t){var e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],s=t[5],o=t[6],u=t[7];return 3*((u-r)*(n+a)-(o-e)*(i+s)+i*(e-a)-n*(r-s)+u*(a+e/3)-o*(s+r/3))/20},getBounds:function(t){for(var e=t.slice(0,2),r=e.slice(),n=[0,0],i=0;i<2;i++)P._addBounds(t[i],t[i+2],t[i+4],t[i+6],i,0,e,r,n);return new v(e[0],e[1],r[0]-e[0],r[1]-e[1])},_addBounds:function(t,e,r,n,i,a,s,o,u){function l(t,e){var r=t-e,n=t+e;r<s[i]&&(s[i]=r),n>o[i]&&(o[i]=n)}a/=2;var f=s[i]-a,c=o[i]+a;if(t<f||e<f||r<f||n<f||t>c||e>c||r>c||n>c)if(e<t!=e<n&&r<t!=r<n)l(t,a),l(n,a);else{var d=3*(e-r)-t+n,p=2*(t+r)-4*e,v=e-t,_=h.solveQuadratic(d,p,v,u);l(n,0);for(var g=0;g<_;g++){var m=u[g],y=1-m;1e-8<=m&&m<=1-1e-8&&l(y*y*y*t+3*y*y*m*e+3*y*m*m*r+m*m*m*n,a)}}}}},i.each(["getBounds","getStrokeBounds","getHandleBounds"],(function(t){this[t]=function(){this._bounds||(this._bounds={});var e=this._bounds[t];return e||(e=this._bounds[t]=k[t]([this._segment1,this._segment2],!1,this._path)),e.clone()}}),{}),i.each({isStraight:function(t,e,r,n){if(e.isZero()&&r.isZero())return!0;var i=n.subtract(t);if(i.isZero())return!1;if(i.isCollinear(e)&&i.isCollinear(r)){var a=new m(t,n);if(a.getDistance(t.add(e))<1e-7&&a.getDistance(n.add(r))<1e-7){var s=i.dot(i),o=i.dot(e)/s,u=i.dot(r)/s;return o>=0&&o<=1&&u<=0&&u>=-1}}return!1},isLinear:function(t,e,r,n){var i=n.subtract(t).divide(3);return e.equals(i)&&r.negate().equals(i)}},(function(t,e){this[e]=function(e){var r=this._segment1,n=this._segment2;return t(r._point,r._handleOut,n._handleIn,n._point,e)},this.statics[e]=function(e,r){var n=e[0],i=e[1],a=e[6],s=e[7];return t(new f(n,i),new f(e[2]-n,e[3]-i),new f(e[4]-a,e[5]-s),new f(a,s),r)}}),{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(t){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(t||0)},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(t,e){return this.getLocationAtTime(e?t:this.getTimeAt(t))},getLocationAtTime:function(t){return null!=t&&t>=0&&t<=1?new M(this,t):null},getTimeAt:function(t,e){return P.getTimeAt(this.getValues(),t,e)},getParameterAt:"#getTimeAt",getOffsetAtTime:function(t){return this.getPartLength(0,t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(f.read(arguments)))},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getTimeOf:function(){return P.getTimeOf(this.getValues(),f.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var t=f.read(arguments),e=this.getValues(),r=P.getNearestTime(e,t),n=P.getPoint(e,r);return new M(this,r,n,null,t.getDistance(n))},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return i.each(t,(function(t){this[t+"At"]=function(e,r){var n=this.getValues();return P[t](n,r?e:P.getTimeAt(n,e))},this[t+"AtTime"]=function(e){return P[t](this.getValues(),e)}}),{statics:{_evaluateMethods:t}})},new function(){function t(t){var e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],s=t[5],o=9*(n-a)+3*(t[6]-e),u=6*(e+a)-12*n,h=3*(n-e),l=9*(i-s)+3*(t[7]-r),f=6*(r+s)-12*i,c=3*(i-r);return function(t){var e=(o*t+u)*t+h,r=(l*t+f)*t+c;return Math.sqrt(e*e+r*r)}}function r(t,e){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(e-t))))}function n(t,e,r,n){if(null==e||e<0||e>1)return null;var i=t[0],a=t[1],s=t[2],o=t[3],u=t[4],l=t[5],c=t[6],d=t[7],p=h.isZero;p(s-i)&&p(o-a)&&(s=i,o=a),p(u-c)&&p(l-d)&&(u=c,l=d);var v,_,g=3*(s-i),m=3*(u-s)-g,y=c-i-g-m,b=3*(o-a),w=3*(l-o)-b,E=d-a-b-w;if(0===r)v=0===e?i:1===e?c:((y*e+m)*e+g)*e+i,_=0===e?a:1===e?d:((E*e+w)*e+b)*e+a;else{if(e<1e-8?(v=g,_=b):e>1-1e-8?(v=3*(c-u),_=3*(d-l)):(v=(3*y*e+2*m)*e+g,_=(3*E*e+2*w)*e+b),n){0===v&&0===_&&(e<1e-8||e>1-1e-8)&&(v=u-s,_=l-o);var C=Math.sqrt(v*v+_*_);C&&(v/=C,_/=C)}if(3===r){u=6*y*e+2*m,l=6*E*e+2*w;var D=Math.pow(v*v+_*_,1.5);v=0!==D?(v*l-_*u)/D:0,_=0}}return 2===r?new f(_,-v):new f(v,_)}return{statics:{classify:function(t){function r(t,r,n){var i=r!==e,a=i&&r>0&&r<1,s=i&&n>0&&n<1;return!i||(a||s)&&("loop"!==t||a&&s)||(t="arch",a=s=!1),{type:t,roots:a||s?a&&s?r<n?[r,n]:[n,r]:[a?r:n]:null}}var n=t[0],i=t[1],a=t[2],s=t[3],o=t[4],u=t[5],l=t[6],f=t[7],c=a*(i-f)+s*(l-n)+n*f-i*l,d=3*(o*(s-i)+u*(n-a)+a*i-s*n),p=d-c,v=p-c+(n*(f-u)+i*(o-l)+l*u-f*o),_=Math.sqrt(v*v+p*p+d*d),g=0!==_?1/_:0,m=h.isZero;if(p*=g,d*=g,m(v*=g))return m(p)?r(m(d)?"line":"quadratic"):r("serpentine",d/(3*p));var y=3*p*p-4*v*d;if(m(y))return r("cusp",p/(2*v));var b=y>0?Math.sqrt(y/3):Math.sqrt(-y),w=2*v;return r(y>0?"serpentine":"loop",(p+b)/w,(p-b)/w)},getLength:function(n,i,a,s){if(i===e&&(i=0),a===e&&(a=1),P.isStraight(n)){var o=n;a<1&&(o=P.subdivide(o,a)[0],i/=a),i>0&&(o=P.subdivide(o,i)[1]);var u=o[6]-o[0],l=o[7]-o[1];return Math.sqrt(u*u+l*l)}return h.integrate(s||t(n),i,a,r(i,a))},getTimeAt:function(n,i,a){if(a===e&&(a=i<0?1:0),0===i)return a;var s=Math.abs,o=i>0,u=o?a:0,l=o?1:a,f=t(n),c=P.getLength(n,u,l,f),d=s(i)-c;if(s(d)<1e-12)return o?l:u;if(d>1e-12)return null;var p=i/c,v=0;return h.findRoot((function(t){return v+=h.integrate(f,a,t,r(a,t)),a=t,v-i}),f,a+p,u,l,32,1e-12)},getPoint:function(t,e){return n(t,e,0,!1)},getTangent:function(t,e){return n(t,e,1,!0)},getWeightedTangent:function(t,e){return n(t,e,1,!1)},getNormal:function(t,e){return n(t,e,2,!0)},getWeightedNormal:function(t,e){return n(t,e,2,!1)},getCurvature:function(t,e){return n(t,e,3,!1).x},getPeaks:function(t){var e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],s=t[5],o=3*n-e-3*a+t[6],u=3*e-6*n+3*a,l=-3*e+3*n,f=3*i-r-3*s+t[7],c=3*r-6*i+3*s,d=-3*r+3*i,p=[];return h.solveCubic(9*(o*o+f*f),9*(o*u+c*f),2*(u*u+c*c)+3*(l*o+d*f),l*u+c*d,p,1e-8,1-1e-8),p.sort()}}}},new function(){function t(t,e,r,n,i,a,s){var o=!s&&r.getPrevious()===i,u=!s&&r!==i&&r.getNext()===i;if(null!==n&&n>=(o?1e-8:0)&&n<=(u?1-1e-8:1)&&null!==a&&a>=(u?1e-8:0)&&a<=(o?1-1e-8:1)){var h=new M(r,n,null,s),l=new M(i,a,null,s);h._intersection=l,l._intersection=h,e&&!e(h)||M.insert(t,h,!0)}}function e(n,i,a,s,o,u,h,l,f,c,d,p,v){if(++f>=4096||++l>=40)return f;var _,g,y=i[0],b=i[1],w=i[6],E=i[7],C=m.getSignedDistance,D=C(y,b,w,E,i[2],i[3]),S=C(y,b,w,E,i[4],i[5]),T=D*S>0?.75:4/9,x=T*Math.min(0,D,S),F=T*Math.max(0,D,S),A=C(y,b,w,E,n[0],n[1]),M=C(y,b,w,E,n[2],n[3]),I=C(y,b,w,E,n[4],n[5]),k=C(y,b,w,E,n[6],n[7]),U=function(t,e,r,n){var i,a=[0,t],s=[1/3,e],o=[2/3,r],u=[1,n],h=e-(2*t+n)/3,l=r-(t+2*n)/3;if(h*l<0)i=[[a,s,u],[a,o,u]];else{var f=h/l;i=[f>=2?[a,s,u]:f<=.5?[a,o,u]:[a,s,o,u],[a,u]]}return(h||l)<0?i.reverse():i}(A,M,I,k),O=U[0],B=U[1];if(0===D&&0===S&&0===A&&0===M&&0===I&&0===k||null==(_=r(O,B,x,F))||null==(g=r(O.reverse(),B.reverse(),x,F)))return f;var R=c+(d-c)*_,L=c+(d-c)*g;if(Math.max(v-p,L-R)<1e-9){var N=(R+L)/2,z=(p+v)/2;t(o,u,h?s:a,h?z:N,h?a:s,h?N:z)}else if(n=P.getPart(n,_,g),g-_>.8)if(L-R>v-p)N=(R+L)/2,f=e(i,(G=P.subdivide(n,.5))[0],s,a,o,u,!h,l,f,p,v,R,N),f=e(i,G[1],s,a,o,u,!h,l,f,p,v,N,L);else{var G=P.subdivide(i,.5);z=(p+v)/2;f=e(G[0],n,s,a,o,u,!h,l,f,p,z,R,L),f=e(G[1],n,s,a,o,u,!h,l,f,z,v,R,L)}else f=v-p>=1e-9?e(i,n,s,a,o,u,!h,l,f,p,v,R,L):e(n,i,a,s,o,u,h,l,f,R,L,p,v);return f}function r(t,e,r,i){return t[0][1]<r?n(t,!0,r):e[0][1]>i?n(e,!1,i):t[0][0]}function n(t,e,r){for(var n=t[0][0],i=t[0][1],a=1,s=t.length;a<s;a++){var o=t[a][0],u=t[a][1];if(e?u>=r:u<=r)return u===r?o:n+(r-i)*(o-n)/(u-i);n=o,i=u}return null}function i(t,e,r,n,i){var a=h.isZero;if(a(n)&&a(i)){var s=P.getTimeOf(t,new f(e,r));return null===s?[]:[s]}for(var o=Math.atan2(-i,n),u=Math.sin(o),l=Math.cos(o),c=[],d=[],p=0;p<8;p+=2){var v=t[p]-e,_=t[p+1]-r;c.push(v*l-_*u,v*u+_*l)}return P.solveCubic(c,1,0,d,0,1),d}function a(e,r,n,a,s,o,u){for(var h=r[0],l=r[1],f=i(e,h,l,r[6]-h,r[7]-l),c=0,d=f.length;c<d;c++){var p=f[c],v=P.getPoint(e,p),_=P.getTimeOf(r,v);null!==_&&t(s,o,u?a:n,u?_:p,u?n:a,u?p:_)}}function s(e,r,n,i,a,s){var o=m.intersect(e[0],e[1],e[6],e[7],r[0],r[1],r[6],r[7]);o&&t(a,s,n,P.getTimeOf(e,o),i,P.getTimeOf(r,o))}function o(r,n,i,o,u,h){var c=Math.min,d=Math.max;if(d(r[0],r[2],r[4],r[6])+1e-12>c(n[0],n[2],n[4],n[6])&&c(r[0],r[2],r[4],r[6])-1e-12<d(n[0],n[2],n[4],n[6])&&d(r[1],r[3],r[5],r[7])+1e-12>c(n[1],n[3],n[5],n[7])&&c(r[1],r[3],r[5],r[7])-1e-12<d(n[1],n[3],n[5],n[7])){var p=l(r,n);if(p)for(w=0;w<2;w++){var v=p[w];t(u,h,i,v[0],o,v[1],!0)}else{var _=P.isStraight(r),g=P.isStraight(n),m=_&&g,y=_&&!g,b=u.length;if((m?s:_||g?a:e)(y?n:r,y?r:n,y?o:i,y?i:o,u,h,y,0,0,0,1,0,1),!m||u.length===b)for(var w=0;w<4;w++){var E=w>>1,C=1&w,D=6*E,S=6*C,T=new f(r[D],r[D+1]),x=new f(n[S],n[S+1]);T.isClose(x,1e-12)&&t(u,h,i,E,o,C)}}}return u}function u(e,r,n,i){var a=P.classify(e);if("loop"===a.type){var s=a.roots;t(n,i,r,s[0],r,s[1])}return n}function l(t,e){function r(t){var e=t[6]-t[0],r=t[7]-t[1];return e*e+r*r}var n=Math.abs,i=m.getDistance,a=P.isStraight(t),s=P.isStraight(e),o=a&&s,u=r(t)<r(e),h=u?e:t,l=u?t:e,c=h[0],d=h[1],p=h[6]-c,v=h[7]-d;if(i(c,d,p,v,l[0],l[1],!0)<1e-7&&i(c,d,p,v,l[6],l[7],!0)<1e-7)!o&&i(c,d,p,v,h[2],h[3],!0)<1e-7&&i(c,d,p,v,h[4],h[5],!0)<1e-7&&i(c,d,p,v,l[2],l[3],!0)<1e-7&&i(c,d,p,v,l[4],l[5],!0)<1e-7&&(a=s=o=!0);else if(o)return null;if(a^s)return null;for(var _=[t,e],g=[],y=0;y<4&&g.length<2;y++){var b=1&y,w=1^b,E=y>>1,C=P.getTimeOf(_[b],new f(_[w][E?6:0],_[w][E?7:1]));if(null!=C){var D=b?[E,C]:[C,E];(!g.length||n(D[0]-g[0][0])>1e-8&&n(D[1]-g[0][1])>1e-8)&&g.push(D)}if(y>2&&!g.length)break}if(2!==g.length)g=null;else if(!o){var S=P.getPart(t,g[0][0],g[1][0]),T=P.getPart(e,g[0][1],g[1][1]);(n(T[2]-S[2])>1e-7||n(T[3]-S[3])>1e-7||n(T[4]-S[4])>1e-7||n(T[5]-S[5])>1e-7)&&(g=null)}return g}return{getIntersections:function(t){var e=this.getValues(),r=t&&t!==this&&t.getValues();return r?o(e,r,this,t,[]):u(e,this,[])},statics:{getOverlaps:l,getIntersections:function(t,e,r,n,i,a){var s=!e;s&&(e=t);for(var h,l,f=t.length,c=e.length,d=[],p=[],v=0;v<c;v++)d[v]=e[v].getValues(i);for(v=0;v<f;v++){var _=t[v],g=s?d[v]:_.getValues(n),m=_.getPath();m!==l&&(l=m,h=[],p.push(h)),s&&u(g,_,h,r);for(var y=s?v+1:0;y<c;y++){if(a&&h.length)return h;o(g,d[y],_,e[y],h,r)}}h=[];v=0;for(var b=p.length;v<b;v++)h.push.apply(h,p[v]);return h},getCurveLineIntersections:i}}}),M=i.extend({_class:"CurveLocation",initialize:function(t,e,r,n,i){if(e>=.99999999){var a=t.getNext();a&&(e=0,t=a)}this._setCurve(t),this._time=e,this._point=r||t.getPointAtTime(e),this._overlap=n,this._distance=i,this._intersection=this._next=this._previous=null},_setCurve:function(t){var e=t._path;this._path=e,this._version=e?e._version:0,this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){this._setCurve(t.getCurve()),this._segment=t,this._time=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t=this._segment;if(!t){var e=this.getCurve(),r=this.getTime();0===r?t=e._segment1:1===r?t=e._segment2:null!=r&&(t=e.getPartLength(0,r)<e.getPartLength(r,1)?e._segment1:e._segment2),this._segment=t}return t},getCurve:function(){function t(t){var e=t&&t.getCurve();if(e&&null!=(r._time=e.getTimeOf(r._point)))return r._setCurve(e),e}var e=this._path,r=this;return e&&e._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||t(this._segment)||t(this._segment1)||t(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getTime:function(){var t=this.getCurve(),e=this._time;return t&&null==e?this._time=t.getTimeOf(this._point):e},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var t=this._offset;if(null==t){t=0;var e=this.getPath(),r=this.getIndex();if(e&&null!=r)for(var n=e.getCurves(),i=0;i<r;i++)t+=n[i].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t=this._curveOffset;if(null==t){var e=this.getCurve(),r=this.getTime();this._curveOffset=t=null!=r&&e&&e.getPartLength(0,r)}return t},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(),e=t&&t.divideAtTime(this.getTime());return e&&this._setSegment(e._segment1),e},split:function(){var t=this.getCurve(),e=t._path,r=t&&t.splitAtTime(this.getTime());return r&&this._setSegment(e.getLastSegment()),r},equals:function(t,e){var r=this===t;if(!r&&t instanceof M){var n=this.getCurve(),i=t.getCurve(),a=n._path;if(a===i._path){var s=Math.abs,o=s(this.getOffset()-t.getOffset()),u=!e&&this._intersection,h=!e&&t._intersection;r=(o<1e-7||a&&s(a.getLength()-o)<1e-7)&&(!u&&!h||u&&h&&u.equals(h,!0))}}return r},toString:function(){var t=[],e=this.getPoint(),r=u.instance;e&&t.push("point: "+e);var n=this.getIndex();null!=n&&t.push("index: "+n);var i=this.getTime();return null!=i&&t.push("time: "+r.number(i)),null!=this._distance&&t.push("distance: "+r.number(this._distance)),"{ "+t.join(", ")+" }"},isTouching:function(){var t=this._intersection;if(t&&this.getTangent().isCollinear(t.getTangent())){var e=this.getCurve(),r=t.getCurve();return!(e.isStraight()&&r.isStraight()&&e.getLine().intersect(r.getLine()))}return!1},isCrossing:function(){function t(t,e){var r=t.getValues(),n=P.classify(r).roots||P.getPeaks(r),i=n.length,a=e&&i>1?n[i-1]:i>0?n[0]:.5;f.push(P.getLength(r,e?a:0,e?1:a)/2)}function e(t,e,r){return e<r?t>e&&t<r:t>e||t<r}var r=this._intersection;if(!r)return!1;var n=this.getTime(),i=r.getTime(),a=n>=1e-8&&n<=1-1e-8,s=i>=1e-8&&i<=1-1e-8;if(a&&s)return!this.isTouching();var o=this.getCurve(),u=n<1e-8?o.getPrevious():o,h=r.getCurve(),l=i<1e-8?h.getPrevious():h;if(n>1-1e-8&&(o=o.getNext()),i>1-1e-8&&(h=h.getNext()),!(u&&o&&l&&h))return!1;var f=[];a||(t(u,!0),t(o,!1)),s||(t(l,!0),t(h,!1));var c=this.getPoint(),d=Math.min.apply(Math,f),p=a?o.getTangentAtTime(n):o.getPointAt(d).subtract(c),v=a?p.negate():u.getPointAt(-d).subtract(c),_=s?h.getTangentAtTime(i):h.getPointAt(d).subtract(c),g=s?_.negate():l.getPointAt(-d).subtract(c),m=v.getAngle(),y=p.getAngle(),b=g.getAngle(),w=_.getAngle();return!!(a?e(m,b,w)^e(y,b,w)&&e(m,w,b)^e(y,w,b):e(b,m,y)^e(w,m,y)&&e(b,y,m)^e(w,y,m))},hasOverlap:function(){return!!this._overlap}},i.each(P._evaluateMethods,(function(t){var e=t+"At";this[t]=function(){var t=this.getCurve(),r=this.getTime();return null!=r&&t&&t[e](r,!0)}}),{preserve:!0}),new function(){function t(t,e,r){function n(r,n){for(var a=r+n;a>=-1&&a<=i;a+=n){var s=t[(a%i+i)%i];if(!e.getPoint().isClose(s.getPoint(),1e-7))break;if(e.equals(s))return s}return null}for(var i=t.length,a=0,s=i-1;a<=s;){var o,u=a+s>>>1,h=t[u];if(r&&(o=e.equals(h)?h:n(u,-1)||n(u,1)))return e._overlap&&(o._overlap=o._intersection._overlap=!0),o;var l=e.getPath(),f=h.getPath();(l!==f?l._id-f._id:e.getIndex()+e.getTime()-(h.getIndex()+h.getTime()))<0?s=u-1:a=u+1}return t.splice(a,0,e),e}return{statics:{insert:t,expand:function(e){for(var r=e.slice(),n=e.length-1;n>=0;n--)t(r,e[n]._intersection,!1);return r}}}}),I=b.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(t){var e,r,n;if(i.isPlainObject(t)?(r=t.segments,e=t.pathData):Array.isArray(t)?r=t:"string"==typeof t&&(e=t),r){var a=r[0];n=a&&Array.isArray(a[0])}else e&&(n=(e.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(e));return new(n?U:k)(t)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse()},setPathData:function(t){function e(t,e){var r=+n[t];return o&&(r+=u[e]),r}function r(t){return new f(e(t,"x"),e(t+1,"y"))}var n,i,a,s=t&&t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),o=!1,u=new f,h=new f;this.clear();for(var l=0,c=s&&s.length;l<c;l++){var p=s[l],v=p[0],_=v.toLowerCase(),g=(n=p.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g))&&n.length;switch(o=v===_,"z"!==i||/[mz]/.test(_)||this.moveTo(u),_){case"m":case"l":for(var m="m"===_,y=0;y<g;y+=2)this[m?"moveTo":"lineTo"](u=r(y)),m&&(h=u,m=!1);a=u;break;case"h":case"v":var b="h"===_?"x":"y";for(u=u.clone(),y=0;y<g;y++)u[b]=e(y,b),this.lineTo(u);a=u;break;case"c":for(y=0;y<g;y+=6)this.cubicCurveTo(r(y),a=r(y+2),u=r(y+4));break;case"s":for(y=0;y<g;y+=4)this.cubicCurveTo(/[cs]/.test(i)?u.multiply(2).subtract(a):u,a=r(y),u=r(y+2)),i=_;break;case"q":for(y=0;y<g;y+=4)this.quadraticCurveTo(a=r(y),u=r(y+2));break;case"t":for(y=0;y<g;y+=2)this.quadraticCurveTo(a=/[qt]/.test(i)?u.multiply(2).subtract(a):u,u=r(y)),i=_;break;case"a":for(y=0;y<g;y+=7)this.arcTo(u=r(y+5),new d(+n[y],+n[y+1]),+n[y+2],+n[y+4],+n[y+3]);break;case"z":this.closePath(1e-12),u=h}i=_}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){var e=t.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(t):{};return e.onPath||!!("evenodd"===this.getFillRule()?1&e.windingL||1&e.windingR:e.winding)},getIntersections:function(t,e,r,n){var i=this===t||!t,a=this._matrix._orNullIfIdentity(),s=i?a:(r||t._matrix)._orNullIfIdentity();return i||this.getBounds(a).intersects(t.getBounds(s),1e-12)?P.getIntersections(this.getCurves(),!i&&t.getCurves(),e,a,s,n):[]},getCrossings:function(t){return this.getIntersections(t,(function(t){return t.hasOverlap()||t.isCrossing()}))},getNearestLocation:function(){for(var t=f.read(arguments),e=this.getCurves(),r=1/0,n=null,i=0,a=e.length;i<a;i++){var s=e[i].getNearestLocation(t);s._distance<r&&(r=s._distance,n=s)}return n},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t},interpolate:function(t,e,r){var n=!this._children,i=n?"_segments":"_children",a=t[i],s=e[i],o=this[i];if(!a||!s||a.length!==s.length)throw new Error("Invalid operands in interpolate() call: "+t+", "+e);var u=o.length,h=s.length;if(u<h)for(var l=n?F:k,f=u;f<h;f++)this.add(new l);else u>h&&this[n?"removeSegments":"removeChildren"](h,u);for(f=0;f<h;f++)o[f].interpolate(a[f],s[f],r);n&&(this.setClosed(t._closed),this._changed(9))},compare:function(t){var e=!1;if(t){var r=this._children||[this],n=t._children?t._children.slice():[t],i=r.length,a=n.length,s=[],o=0;e=!0;for(var u=i-1;u>=0&&e;u--){var h=r[u];e=!1;for(var l=a-1;l>=0&&!e;l--)h.compare(n[l])&&(s[l]||(s[l]=!0,o++),e=!0)}e=e&&o===a}return e}}),k=I.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var r=Array.isArray(t)?"object"==typeof t[0]?t:arguments:!t||t.size!==e||t.x===e&&t.point===e?null:arguments;r&&r.length>0?this.setSegments(r):(this._curves=e,this._segmentSelection=0,r||"string"!=typeof t||(this.setPathData(t),t=null)),this._initialize(!r&&t)},_equals:function(t){return this._closed===t._closed&&i.equals(this._segments,t._segments)},copyContent:function(t){this.setSegments(t._segments),this._closed=t._closed},_changed:function t(r){if(t.base.call(this,r),8&r){if(this._length=this._area=e,16&r)this._version++;else if(this._curves)for(var n=0,i=this._curves.length;n<i;n++)this._curves[n]._changed()}else 32&r&&(this._bounds=e)},getStyle:function(){var t=this._parent;return(t instanceof U?t:this)._style},getSegments:function(){return this._segments},setSegments:function(t){var r=this.isFullySelected(),n=t&&t.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=e,n){var i=t[n-1];"boolean"==typeof i&&(this.setClosed(i),n--),this._add(F.readList(t,0,{},n))}r&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,e=this._segments;if(!t){var r=this._countCurves();t=this._curves=new Array(r);for(var n=0;n<r;n++)t[n]=new P(this,e[n],e[n+1]||e[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var e=this._curves.length=this._countCurves();t&&(this._curves[e-1]=new P(this,this._segments[e-1],this._segments[0]))}this._changed(25)}}},{beans:!0,getPathData:function(t,e){function r(e,r){if(e._transformCoordinates(t,v),n=v[0],i=v[1],_)g.push("M"+p.pair(n,i)),_=!1;else if(o=v[2],h=v[3],o===n&&h===i&&l===a&&f===s){if(!r){var u=n-a,c=i-s;g.push(0===u?"v"+p.number(c):0===c?"h"+p.number(u):"l"+p.pair(u,c))}}else g.push("c"+p.pair(l-a,f-s)+" "+p.pair(o-a,h-s)+" "+p.pair(n-a,i-s));a=n,s=i,l=v[4],f=v[5]}var n,i,a,s,o,h,l,f,c=this._segments,d=c.length,p=new u(e),v=new Array(6),_=!0,g=[];if(!d)return"";for(var m=0;m<d;m++)r(c[m]);return this._closed&&d>0&&(r(c[0],!0),g.push("z")),g.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(t){for(var e=this._segments,r=new Array(6),n=0,i=e.length;n<i;n++)e[n]._transformCoordinates(t,r,!0);return!0},_add:function(t,e){for(var r=this._segments,n=this._curves,i=t.length,a=null==e,s=(e=a?r.length:e,0);s<i;s++){var o=t[s];o._path&&(o=t[s]=o.clone()),o._path=this,o._index=e+s,o._selection&&this._updateSelection(o,0,o._selection)}if(a)r.push.apply(r,t);else{r.splice.apply(r,[e,0].concat(t));s=e+i;for(var u=r.length;s<u;s++)r[s]._index=s}if(n){var h=this._countCurves(),l=e>0&&e+i-1===h?e-1:e,f=l,c=Math.min(l+i,h);for(t._curves&&(n.splice.apply(n,[l,0].concat(t._curves)),f+=t._curves.length),s=f;s<c;s++)n.splice(s,0,new P(this,null,null));this._adjustCurves(l,c)}return this._changed(25),t},_adjustCurves:function(t,e){for(var r,n=this._segments,i=this._curves,a=t;a<e;a++)(r=i[a])._path=this,r._segment1=n[a],r._segment2=n[a+1]||n[0],r._changed();(r=i[this._closed&&!t?n.length-1:t-1])&&(r._segment2=n[t]||n[0],r._changed()),(r=i[e])&&(r._segment1=n[e],r._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){return arguments.length>1&&"number"!=typeof t?this._add(F.readList(arguments)):this._add([F.read(arguments)])[0]},insert:function(t,e){return arguments.length>2&&"number"!=typeof e?this._add(F.readList(arguments,1),t):this._add([F.read(arguments,1)],t)[0]},addSegment:function(){return this._add([F.read(arguments)])[0]},insertSegment:function(t){return this._add([F.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(F.readList(t))},insertSegments:function(t,e){return this._add(F.readList(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,e,r){t=t||0,e=i.pick(e,this._segments.length);var n=this._segments,a=this._curves,s=n.length,o=n.splice(t,e-t),u=o.length;if(!u)return o;for(l=0;l<u;l++){var h=o[l];h._selection&&this._updateSelection(h,h._selection,0),h._index=h._path=null}for(var l=t,f=n.length;l<f;l++)n[l]._index=l;if(a){var c=t>0&&e===s+(this._closed?1:0)?t-1:t;for(l=(a=a.splice(c,u)).length-1;l>=0;l--)a[l]._path=null;r&&(o._curves=a.slice(1)),this._adjustCurves(c,c)}return this._changed(25),o},clear:"#removeSegments",hasHandles:function(){for(var t=this._segments,e=0,r=t.length;e<r;e++)if(t[e].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,e=0,r=t.length;e<r;e++)t[e].clearHandles()},getLength:function(){if(null==this._length){for(var t=this.getCurves(),e=0,r=0,n=t.length;r<n;r++)e+=t[r].getLength();this._length=e}return this._length},getArea:function(){var t=this._area;if(null==t){var e=this._segments,r=this._closed;t=0;for(var n=0,i=e.length;n<i;n++){var a=n+1===i;t+=P.getArea(P.getValues(e[n],e[a?0:n+1],null,a&&!r))}this._area=t}return t},isFullySelected:function(){var t=this._segments.length;return this.isSelected()&&t>0&&this._segmentSelection===7*t},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelection:function t(e){1&e||this._selectSegments(!1),t.base.call(this,e)},_selectSegments:function(t){var e=this._segments,r=e.length,n=t?7:0;this._segmentSelection=n*r;for(var i=0;i<r;i++)e[i]._selection=n},_updateSelection:function(t,e,r){t._selection=r,(this._segmentSelection+=r-e)>0&&this.setSelected(!0)},divideAt:function(t){var e,r=this.getLocationAt(t);return r&&(e=r.getCurve().divideAt(r.getCurveOffset()))?e._segment1:null},splitAt:function(t){var e=this.getLocationAt(t),r=e&&e.index,n=e&&e.time;n>1-1e-8&&(r++,n=0);var i=this.getCurves();if(r>=0&&r<i.length){n>=1e-8&&i[r++].divideAtTime(n);var a,s=this.removeSegments(r,this._segments.length,!0);return this._closed?(this.setClosed(!1),a=this):((a=new k(b.NO_INSERT)).insertAbove(this),a.copyAttributes(this)),a._add(s,0),this.addSegment(s[0]),a}return null},split:function(t,r){var n,i=r===e?t:(n=this.getCurves()[t])&&n.getLocationAtTime(r);return null!=i?this.splitAt(i):null},join:function(t,e){var r=e||0;if(t&&t!==this){var n=t._segments,i=this.getLastSegment(),a=t.getLastSegment();if(!a)return this;i&&i._point.isClose(a._point,r)&&t.reverse();var s=t.getFirstSegment();if(i&&i._point.isClose(s._point,r))i.setHandleOut(s._handleOut),this._add(n.slice(1));else{var o=this.getFirstSegment();o&&o._point.isClose(s._point,r)&&t.reverse(),a=t.getLastSegment(),o&&o._point.isClose(a._point,r)?(o.setHandleIn(a._handleIn),this._add(n.slice(0,n.length-1),0)):this._add(n.slice())}t._closed&&this._add([n[0]]),t.remove()}var u=this.getFirstSegment(),h=this.getLastSegment();return u!==h&&u._point.isClose(h._point,r)&&(u.setHandleIn(h._handleIn),h.remove(),this.setClosed(!0)),this},reduce:function(t){for(var e=this.getCurves(),r=t&&t.simplify,n=r?1e-7:0,i=e.length-1;i>=0;i--){var a=e[i];!a.hasHandles()&&(!a.hasLength(n)||r&&a.isCollinear(a.getNext()))&&a.remove()}return this},reverse:function(){this._segments.reverse();for(var t=0,e=this._segments.length;t<e;t++){var r=this._segments[t],n=r._handleIn;r._handleIn=r._handleOut,r._handleOut=n,r._index=t}this._curves=null,this._changed(9)},flatten:function(t){for(var e=new O(this,t||.25,256,!0).parts,r=e.length,n=[],i=0;i<r;i++)n.push(new F(e[i].curve.slice(0,2)));!this._closed&&r>0&&n.push(new F(e[r-1].curve.slice(6))),this.setSegments(n)},simplify:function(t){var e=new B(this).fit(t||2.5);return e&&this.setSegments(e),!!e},smooth:function(t){function r(t,e){var r=t&&t.index;if(null!=r){var i=t.path;if(i&&i!==n)throw new Error(t._class+" "+r+" of "+i+" is not part of "+n);e&&t instanceof P&&r++}else r="number"==typeof t?t:e;return Math.min(r<0&&u?r%o:r<0?r+o:r,o-1)}var n=this,i=t||{},a=i.type||"asymmetric",s=this._segments,o=s.length,u=this._closed,h=u&&i.from===e&&i.to===e,l=r(i.from,0),f=r(i.to,o-1);if(l>f)if(u)l-=o;else{var c=l;l=f,f=c}if(/^(?:asymmetric|continuous)$/.test(a)){var d="asymmetric"===a,p=Math.min,v=f-l+1,_=v-1,g=h?p(v,4):1,m=g,y=g,b=[];if(u||(m=p(1,l),y=p(1,o-f-1)),(_+=m+y)<=1)return;for(var w=0,E=l-m;w<=_;w++,E++)b[w]=s[(E<0?E+o:E)%o]._point;var C=b[0]._x+2*b[1]._x,D=b[0]._y+2*b[1]._y,S=2,T=_-1,x=[C],F=[D],A=[S],M=[],I=[];for(w=1;w<_;w++){var k=w<T,U=k?4:d?2:7,O=k?4:d?3:8,B=k?2:d?0:1,R=(k||d?1:2)/S;S=A[w]=U-R,C=x[w]=O*b[w]._x+B*b[w+1]._x-R*C,D=F[w]=O*b[w]._y+B*b[w+1]._y-R*D}for(M[T]=x[T]/A[T],I[T]=F[T]/A[T],w=_-2;w>=0;w--)M[w]=(x[w]-M[w+1])/A[w],I[w]=(F[w]-I[w+1])/A[w];M[_]=(3*b[_]._x-M[T])/2,I[_]=(3*b[_]._y-I[T])/2;w=m;var L=_-y;for(E=l;w<=L;w++,E++){var N=s[E<0?E+o:E],z=N._point,G=M[w]-z._x,j=I[w]-z._y;(h||w<L)&&N.setHandleOut(G,j),(h||w>m)&&N.setHandleIn(-G,-j)}}else for(w=l;w<=f;w++)s[w<0?w+o:w].smooth(i,!h&&w===l,!h&&w===f)},toShape:function(t){function r(t,e){var r=l[t],n=r.getNext(),i=l[e],a=i.getNext();return r._handleOut.isZero()&&n._handleIn.isZero()&&i._handleOut.isZero()&&a._handleIn.isZero()&&n._point.subtract(r._point).isCollinear(a._point.subtract(i._point))}function n(t){var e=l[t],r=e.getNext(),n=e._handleOut,i=r._handleIn;if(n.isOrthogonal(i)){var a=e._point,s=r._point,o=new m(a,n,!0).intersect(new m(s,i,!0),!0);return o&&h.isZero(n.getLength()/o.subtract(a).getLength()-.5522847498307936)&&h.isZero(i.getLength()/o.subtract(s).getLength()-.5522847498307936)}return!1}function i(t,e){return l[t]._point.getDistance(l[e]._point)}if(!this._closed)return null;var a,s,o,u,l=this._segments;if(!this.hasHandles()&&4===l.length&&r(0,2)&&r(1,3)&&function(t){var e=l[1],r=e.getPrevious(),n=e.getNext();return r._handleOut.isZero()&&e._handleIn.isZero()&&e._handleOut.isZero()&&n._handleIn.isZero()&&e._point.subtract(r._point).isOrthogonal(n._point.subtract(e._point))}()?(a=C.Rectangle,s=new d(i(0,3),i(0,1)),u=l[1]._point.add(l[2]._point).divide(2)):8===l.length&&n(0)&&n(2)&&n(4)&&n(6)&&r(1,5)&&r(3,7)?(a=C.Rectangle,o=(s=new d(i(1,6),i(0,3))).subtract(new d(i(0,7),i(1,2))).divide(2),u=l[3]._point.add(l[4]._point).divide(2)):4===l.length&&n(0)&&n(1)&&n(2)&&n(3)&&(h.isZero(i(0,2)-i(1,3))?(a=C.Circle,o=i(0,2)/2):(a=C.Ellipse,o=new d(i(2,0)/2,i(3,1)/2)),u=l[1]._point),a){var f=this.getPosition(!0),c=new a({center:f,size:s,radius:o,insert:!1});return c.copyAttributes(this,!0),c._matrix.prepend(this._matrix),c.rotate(u.subtract(f).getAngle()+90),(t===e||t)&&c.insertAbove(this),c}return null},toPath:"#clone",compare:function t(e){if(!e||e instanceof U)return t.base.call(this,e);var r=this.getCurves(),n=e.getCurves(),i=r.length,a=n.length;if(!i||!a)return i==a;for(var s,o,u=r[0].getValues(),h=[],l=0,f=0,c=0;c<a;c++)if(v=n[c].getValues(),h.push(v),_=P.getOverlaps(u,v)){s=!c&&_[0][0]>0?a-1:c,o=_[0][1];break}for(var d,p=Math.abs,v=h[s];u&&v;){var _=P.getOverlaps(u,v);if(_&&p(_[0][0]-f)<1e-8){1===(f=_[1][0])&&(u=++l<i?r[l].getValues():null,f=0);var g=_[0][1];if(p(g-o)<1e-8){if(d||(d=[s,g]),1===(o=_[1][1])&&(++s>=a&&(s=0),v=h[s]||n[s].getValues(),o=0),!u)return d[0]===s&&d[1]===o;continue}}break}return!1},_hitTestSelf:function(t,e,r,n){function i(e,r){return t.subtract(e).divide(r).length<=1}function a(t,r,n){if(!e.selected||r.isSelected()){var a=t._point;if(r!==a&&(r=r.add(a)),i(r,w))return new x(n,v,{segment:t,point:r})}}function s(t,r){return(r||e.segments)&&a(t,t._point,"segment")||!r&&e.handles&&(a(t,t._handleIn,"handle-in")||a(t,t._handleOut,"handle-out"))}function o(t){c.add(t)}function u(e){var r,a=y||e._index>0&&e._index<m-1;return"round"===(a?h:l)?i(e._point,w):(c=new k({internal:!0,closed:!0}),a?e.isSmooth()||k._addBevelJoin(e,h,S,f,null,n,o,!0):"square"===l&&k._addSquareCap(e,l,S,null,n,o,!0),c.isEmpty()?void 0:c.contains(t)||(r=c.getNearestLocation(t))&&i(r.getPoint(),b))}var h,l,f,c,d,p,v=this,_=this.getStyle(),g=this._segments,m=g.length,y=this._closed,b=e._tolerancePadding,w=b,E=e.stroke&&_.hasStroke(),C=e.fill&&_.hasFill(),D=e.curves,S=E?_.getStrokeWidth()/2:C&&e.tolerance>0||D?0:null;if(null!==S&&(S>0?(h=_.getStrokeJoin(),l=_.getStrokeCap(),f=_.getMiterLimit(),w=w.add(k._getStrokePadding(S,n))):h=l="round"),!e.ends||e.segments||y){if(e.segments||e.handles)for(F=0;F<m;F++)if(p=s(g[F]))return p}else if(p=s(g[0],!0)||s(g[m-1],!0))return p;if(null!==S){if(d=this.getNearestLocation(t)){var T=d.getTime();0===T||1===T&&m>1?u(d.getSegment())||(d=null):i(d.getPoint(),w)||(d=null)}if(!d&&"miter"===h&&m>1)for(var F=0;F<m;F++){var A=g[F];if(t.getDistance(A._point)<=f*S&&u(A)){d=A.getLocation();break}}}return!d&&C&&this._contains(t)||d&&!E&&!D?new x("fill",this):d?new x(E?"stroke":"curve",this,{location:d,point:d.getPoint()}):null}},i.each(P._evaluateMethods,(function(t){this[t+"At"]=function(e){var r=this.getLocationAt(e);return r&&r[t]()}}),{beans:!1,getLocationOf:function(){for(var t=f.read(arguments),e=this.getCurves(),r=0,n=e.length;r<n;r++){var i=e[r].getLocationOf(t);if(i)return i}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t){if("number"==typeof t){for(var e=this.getCurves(),r=0,n=0,i=e.length;n<i;n++){var a=r,s=e[n];if((r+=s.getLength())>t)return s.getLocationAt(t-a)}if(e.length>0&&t<=this.getLength())return new M(e[e.length-1],1)}else if(t&&t.getPath&&t.getPath()===this)return t;return null}}),new function(){function t(t,e,r){function n(e){if(r)e._transformCoordinates(r,p),i=p[0],a=p[1];else{var n=e._point;i=n._x,a=n._y}if(v?(t.moveTo(i,a),v=!1):(r?(u=p[2],h=p[3]):(c=e._handleIn,u=i+c._x,h=a+c._y),u===i&&h===a&&l===s&&f===o?t.lineTo(i,a):t.bezierCurveTo(l,f,u,h,i,a)),s=i,o=a,r)l=p[4],f=p[5];else{var c=e._handleOut;l=s+c._x,f=o+c._y}}for(var i,a,s,o,u,h,l,f,c=e._segments,d=c.length,p=new Array(6),v=!0,_=0;_<d;_++)n(c[_]);e._closed&&d>0&&n(c[0])}return{_draw:function(e,r,n,i){function a(t){return f[(t%c+c)%c]}var s=r.dontStart,o=r.dontFinish||r.clip,u=this.getStyle(),h=u.hasFill(),l=u.hasStroke(),f=u.getDashArray(),c=!paper.support.nativeDash&&l&&f&&f.length;if(s||e.beginPath(),(h||l&&!c||o)&&(t(e,this,i),this._closed&&e.closePath()),!o&&(h||l)&&(this._setStyles(e,r,n),h&&(e.fill(u.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),l)){if(c){s||e.beginPath();var d,p=new O(this,.25,32,!1,i),v=p.length,_=-u.getDashOffset(),g=0;for(_%=v;_>0;)_-=a(g--)+a(g--);for(;_<v;)d=_+a(g++),(_>0||d>0)&&p.drawPart(e,Math.max(_,0),Math.max(d,0)),_=d+a(g++)}e.stroke()}},_drawSelected:function(e,r){e.beginPath(),t(e,this,r),e.stroke(),function(t,e,r,n){function i(e){var r=u[e],n=u[e+1];a==r&&s==n||(t.beginPath(),t.moveTo(a,s),t.lineTo(r,n),t.stroke(),t.beginPath(),t.arc(r,n,o,0,2*Math.PI,!0),t.fill())}for(var a,s,o=n/2,u=new Array(6),h=0,l=e.length;h<l;h++){var f=e[h],c=f._selection;if(f._transformCoordinates(r,u),a=u[0],s=u[1],2&c&&i(2),4&c&&i(4),t.fillRect(a-o,s-o,n,n),!(1&c)){var d=t.fillStyle;t.fillStyle="#ffffff",t.fillRect(a-o+1,s-o+1,n-2,n-2),t.fillStyle=d}}}(e,this._segments,r,paper.settings.handleSize)}}},new function(){function t(t){var e=t._segments;if(!e.length)throw new Error("Use a moveTo() command first");return e[e.length-1]}return{moveTo:function(){var t=this._segments;1===t.length&&this.removeSegment(0),t.length||this._add([new F(f.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new F(f.read(arguments))])},cubicCurveTo:function(){var e=f.read(arguments),r=f.read(arguments),n=f.read(arguments),i=t(this);i.setHandleOut(e.subtract(i._point)),this._add([new F(n,r.subtract(n))])},quadraticCurveTo:function(){var e=f.read(arguments),r=f.read(arguments),n=t(this)._point;this.cubicCurveTo(e.add(n.subtract(e).multiply(1/3)),e.add(r.subtract(e).multiply(1/3)),r)},curveTo:function(){var e=f.read(arguments),r=f.read(arguments),n=i.pick(i.read(arguments),.5),a=1-n,s=t(this)._point,o=e.subtract(s.multiply(a*a)).subtract(r.multiply(n*n)).divide(2*n*a);if(o.isNaN())throw new Error("Cannot put a curve through points with parameter = "+n);this.quadraticCurveTo(o,r)},arcTo:function(){var e,r,n,a,s=Math.abs,o=Math.sqrt,u=t(this),l=u._point,c=f.read(arguments),p=i.peek(arguments);if("boolean"==typeof(w=i.pick(p,!0)))var v=(C=l.add(c).divide(2)).add(C.subtract(l).rotate(w?-90:90));else if(i.remain(arguments)<=2)v=c,c=f.read(arguments);else{var _=d.read(arguments),y=h.isZero;if(y(_.width)||y(_.height))return this.lineTo(c);var b=i.read(arguments),w=!!i.read(arguments),E=!!i.read(arguments),C=l.add(c).divide(2),D=(W=l.subtract(C).rotate(-b)).x,S=W.y,T=s(_.width),x=s(_.height),A=T*T,P=x*x,M=D*D,I=S*S,k=o(M/A+I/P);if(k>1&&(A=(T*=k)*T,P=(x*=k)*x),s(k=(A*P-A*I-P*M)/(A*I+P*M))<1e-12&&(k=0),k<0)throw new Error("Cannot create an arc with the given arguments");e=new f(T*S/x,-x*D/T).multiply((E===w?-1:1)*o(k)).rotate(b).add(C),r=(n=(a=(new g).translate(e).rotate(b).scale(T,x))._inverseTransform(l)).getDirectedAngle(a._inverseTransform(c)),!w&&r>0?r-=360:w&&r<0&&(r+=360)}if(v){var U=new m(l.add(v).divide(2),v.subtract(l).rotate(90),!0),O=new m(v.add(c).divide(2),c.subtract(v).rotate(90),!0),B=new m(l,c),R=B.getSide(v);if(!(e=U.intersect(O,!0))){if(!R)return this.lineTo(c);throw new Error("Cannot create an arc with the given arguments")}r=(n=l.subtract(e)).getDirectedAngle(c.subtract(e));var L=B.getSide(e);0===L?r=R*s(r):R===L&&(r+=r<0?360:-360)}for(var N=s(r),z=N>=360?4:Math.ceil((N-1e-7)/90),G=r/z,j=G*Math.PI/360,q=4/3*Math.sin(j)/(1+Math.cos(j)),H=[],X=0;X<=z;X++){var W=c,V=null;if(X<z&&(V=n.rotate(90).multiply(q),a?(W=a._transformPoint(n),V=a._transformPoint(n.add(V)).subtract(W)):W=e.add(n)),X){var Z=n.rotate(-90).multiply(q);a&&(Z=a._transformPoint(n.add(Z)).subtract(W)),H.push(new F(W,Z,V))}else u.setHandleOut(V);n=n.rotate(G)}this._add(H)},lineBy:function(){var e=f.read(arguments),r=t(this)._point;this.lineTo(r.add(e))},curveBy:function(){var e=f.read(arguments),r=f.read(arguments),n=i.read(arguments),a=t(this)._point;this.curveTo(a.add(e),a.add(r),n)},cubicCurveBy:function(){var e=f.read(arguments),r=f.read(arguments),n=f.read(arguments),i=t(this)._point;this.cubicCurveTo(i.add(e),i.add(r),i.add(n))},quadraticCurveBy:function(){var e=f.read(arguments),r=f.read(arguments),n=t(this)._point;this.quadraticCurveTo(n.add(e),n.add(r))},arcBy:function(){var e=t(this)._point,r=e.add(f.read(arguments)),n=i.pick(i.peek(arguments),!0);"boolean"==typeof n?this.arcTo(r,n):this.arcTo(r,e.add(f.read(arguments)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(t,e){var r=e.handle?"getHandleBounds":e.stroke?"getStrokeBounds":"getBounds";return k[r](this._segments,this._closed,this,t,e)},statics:{getBounds:function(t,e,r,n,i,a){function s(t){t._transformCoordinates(n,u);for(var e=0;e<2;e++)P._addBounds(h[e],h[e+4],u[e+2],u[e],e,a?a[e]:0,l,f,c);var r=h;h=u,u=r}var o=t[0];if(!o)return new v;for(var u=new Array(6),h=o._transformCoordinates(n,new Array(6)),l=h.slice(0,2),f=l.slice(),c=new Array(2),d=1,p=t.length;d<p;d++)s(t[d]);return e&&s(o),new v(l[0],l[1],f[0]-l[0],f[1]-l[1])},getStrokeBounds:function(t,e,r,n,i){function a(t){_=_.include(t)}function s(t){_=_.unite(w.setCenter(t._point.transform(n)))}function o(t,e){"round"===e||t.isSmooth()?s(t):k._addBevelJoin(t,e,g,b,n,c,a)}function u(t,e){"round"===e?s(t):k._addSquareCap(t,e,g,n,c,a)}var h=r.getStyle(),l=h.hasStroke(),f=h.getStrokeWidth(),c=l&&r._getStrokeMatrix(n,i),p=l&&k._getStrokePadding(f,c),_=k.getBounds(t,e,r,n,i,p);if(!l)return _;for(var g=f/2,m=h.getStrokeJoin(),y=h.getStrokeCap(),b=h.getMiterLimit(),w=new v(new d(p)),E=t.length-(e?0:1),C=1;C<E;C++)o(t[C],m);return e?o(t[0],m):E>0&&(u(t[0],y),u(t[t.length-1],y)),_},_getStrokePadding:function(t,e){if(!e)return[t,t];var r=new f(t,0).transform(e),n=new f(0,t).transform(e),i=r.getAngleInRadians(),a=r.getLength(),s=n.getLength(),o=Math.sin(i),u=Math.cos(i),h=Math.tan(i),l=Math.atan2(s*h,a),c=Math.atan2(s,h*a);return[Math.abs(a*Math.cos(l)*u+s*Math.sin(l)*o),Math.abs(s*Math.sin(c)*u+a*Math.cos(c)*o)]},_addBevelJoin:function(t,e,r,n,i,a,s,o){var u=t.getCurve(),h=u.getPrevious(),l=u.getPoint1().transform(i),c=h.getNormalAtTime(1).multiply(r).transform(a),d=u.getNormalAtTime(0).multiply(r).transform(a);if(c.getDirectedAngle(d)<0&&(c=c.negate(),d=d.negate()),o&&s(l),s(l.add(c)),"miter"===e){var p=new m(l.add(c),new f(-c.y,c.x),!0).intersect(new m(l.add(d),new f(-d.y,d.x),!0),!0);p&&l.getDistance(p)<=n*r&&s(p)}s(l.add(d))},_addSquareCap:function(t,e,r,n,i,a,s){var o=t._point.transform(n),u=t.getLocation(),h=u.getNormal().multiply(0===u.getTime()?r:-r).transform(i);"square"===e&&(s&&(a(o.subtract(h)),a(o.add(h))),o=o.add(h.rotate(-90))),a(o.add(h)),a(o.subtract(h))},getHandleBounds:function(t,e,r,n,i){var a,s,o=r.getStyle();if(i.stroke&&o.hasStroke()){var u=r._getStrokeMatrix(n,i),h=o.getStrokeWidth()/2,l=h;"miter"===o.getStrokeJoin()&&(l=h*o.getMiterLimit()),"square"===o.getStrokeCap()&&(l=Math.max(l,h*Math.SQRT2)),a=k._getStrokePadding(h,u),s=k._getStrokePadding(l,u)}for(var f=new Array(6),c=1/0,d=-c,p=c,_=d,g=0,m=t.length;g<m;g++){t[g]._transformCoordinates(n,f);for(var y=0;y<6;y+=2){var b=y?a:s,w=b?b[0]:0,E=b?b[1]:0,C=f[y],D=f[y+1],S=C-w,T=C+w,x=D-E,F=D+E;S<c&&(c=S),T>d&&(d=T),x<p&&(p=x),F>_&&(_=F)}}return new v(c,p,d-c,_-p)}}});k.inject({statics:new function(){function t(t,e,r){var n=i.getNamed(r),a=new k(n&&0==n.insert&&b.NO_INSERT);return a._add(t),a._closed=e,a.set(n,{insert:!0})}function e(e,r,i){for(var a=new Array(4),s=0;s<4;s++){var o=n[s];a[s]=new F(o._point.multiply(r).add(e),o._handleIn.multiply(r),o._handleOut.multiply(r))}return t(a,!0,i)}var r=.5522847498307936,n=[new F([-1,0],[0,r],[0,-r]),new F([0,-1],[-r,0],[r,0]),new F([1,0],[0,-r],[0,r]),new F([0,1],[r,0],[-r,0])];return{Line:function(){return t([new F(f.readNamed(arguments,"from")),new F(f.readNamed(arguments,"to"))],!1,arguments)},Circle:function(){var t=f.readNamed(arguments,"center"),r=i.readNamed(arguments,"radius");return e(t,new d(r),arguments)},Rectangle:function(){var e,n=v.readNamed(arguments,"rectangle"),i=d.readNamed(arguments,"radius",0,{readNull:!0}),a=n.getBottomLeft(!0),s=n.getTopLeft(!0),o=n.getTopRight(!0),u=n.getBottomRight(!0);if(!i||i.isZero())e=[new F(a),new F(s),new F(o),new F(u)];else{var h=(i=d.min(i,n.getSize(!0).divide(2))).width,l=i.height,f=h*r,c=l*r;e=[new F(a.add(h,0),null,[-f,0]),new F(a.subtract(0,l),[0,c]),new F(s.add(0,l),null,[0,-c]),new F(s.add(h,0),[-f,0],null),new F(o.subtract(h,0),null,[f,0]),new F(o.add(0,l),[0,-c],null),new F(u.subtract(0,l),null,[0,c]),new F(u.subtract(h,0),[f,0])]}return t(e,!0,arguments)},RoundRectangle:"#Rectangle",Ellipse:function(){var t=C._readEllipse(arguments);return e(t.center,t.radius,arguments)},Oval:"#Ellipse",Arc:function(){var t=f.readNamed(arguments,"from"),e=f.readNamed(arguments,"through"),r=f.readNamed(arguments,"to"),n=i.getNamed(arguments),a=new k(n&&0==n.insert&&b.NO_INSERT);return a.moveTo(t),a.arcTo(e,r),a.set(n)},RegularPolygon:function(){for(var e=f.readNamed(arguments,"center"),r=i.readNamed(arguments,"sides"),n=i.readNamed(arguments,"radius"),a=360/r,s=r%3==0,o=new f(0,s?-n:n),u=s?-1:.5,h=new Array(r),l=0;l<r;l++)h[l]=new F(e.add(o.rotate((l+u)*a)));return t(h,!0,arguments)},Star:function(){for(var e=f.readNamed(arguments,"center"),r=2*i.readNamed(arguments,"points"),n=i.readNamed(arguments,"radius1"),a=i.readNamed(arguments,"radius2"),s=360/r,o=new f(0,-1),u=new Array(r),h=0;h<r;h++)u[h]=new F(e.add(o.rotate(s*h).multiply(h%2?a:n)));return t(u,!0,arguments)}}}});var U=I.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||("string"==typeof t?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function t(e,r){var n=r,a=n[0];a&&"number"==typeof a[0]&&(n=[n]);for(var s=r.length-1;s>=0;s--){var o=n[s];n!==r||o instanceof k||(n=i.slice(n)),Array.isArray(o)?n[s]=new k({segments:o,insert:!1}):o instanceof U&&(n.splice.apply(n,[s,1].concat(o.removeChildren())),o.remove())}return t.base.call(this,e,n)},reduce:function t(e){for(var r=this._children,n=r.length-1;n>=0;n--)(i=r[n].reduce(e)).isEmpty()&&i.remove();if(!r.length){var i=new k(b.NO_INSERT);return i.copyAttributes(this),i.insertAbove(this),this.remove(),i}return t.base.call(this)},isClosed:function(){for(var t=this._children,e=0,r=t.length;e<r;e++)if(!t[e]._closed)return!1;return!0},setClosed:function(t){for(var e=this._children,r=0,n=e.length;r<n;r++)e[r].setClosed(t)},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],r=0,n=t.length;r<n;r++)e.push.apply(e,t[r].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getLastCurve()},getArea:function(){for(var t=this._children,e=0,r=0,n=t.length;r<n;r++)e+=t[r].getArea();return e},getLength:function(){for(var t=this._children,e=0,r=0,n=t.length;r<n;r++)e+=t[r].getLength();return e},getPathData:function(t,e){for(var r=this._children,n=[],i=0,a=r.length;i<a;i++){var s=r[i],o=s._matrix;n.push(s.getPathData(t&&!o.isIdentity()?t.appended(o):t,e))}return n.join("")},_hitTestChildren:function t(e,r,n){return t.base.call(this,e,r.class===k||"path"===r.type?r:i.set({},r,{fill:!1}),n)},_draw:function(t,e,r,n){var i=this._children;if(i.length){e=e.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var a=0,s=i.length;a<s;a++)i[a].draw(t,e,n);if(!e.clip){this._setStyles(t,e,r);var o=this._style;o.hasFill()&&(t.fill(o.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),o.hasStroke()&&t.stroke()}}},_drawSelected:function(t,e,r){for(var n=this._children,i=0,a=n.length;i<a;i++){var s=n[i],o=s._matrix;r[s._id]||s._drawSelected(t,o.isIdentity()?e:e.appended(o))}}},new function(){function t(t,e){var r=t._children;if(e&&!r.length)throw new Error("Use a moveTo() command first");return r[r.length-1]}return i.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],(function(e){this[e]=function(){var r=t(this,!0);r[e].apply(r,arguments)}}),{moveTo:function(){var e=t(this),r=e&&e.isEmpty()?e:new k(b.NO_INSERT);r!==e&&this.addChild(r),r.moveTo.apply(r,arguments)},moveBy:function(){var e=t(this,!0),r=e&&e.getLastSegment(),n=f.read(arguments);this.moveTo(r?n.add(r._point):n)},closePath:function(e){t(this,!0).closePath(e)}})},i.each(["reverse","flatten","simplify","smooth"],(function(t){this[t]=function(e){for(var r,n=this._children,i=0,a=n.length;i<a;i++)r=n[i][t](e)||r;return r}}),{}));I.inject(new function(){function t(t,e){var r=t.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);return e?r.resolveCrossings().reorient("nonzero"===r.getFillRule(),!0):r}function r(t,e,r,n,i){var a=new U(b.NO_INSERT);return a.addChildren(t,!0),a=a.reduce({simplify:e}),i&&0==i.insert||a.insertAbove(n&&r.isSibling(n)&&r.getIndex()<n.getIndex()?n:r),a.copyAttributes(r,!0),a}function n(e,n,i,s){function o(t){for(var e=0,r=t.length;e<r;e++){var n=t[e];b.push.apply(b,n._segments),w.push.apply(w,n.getCurves()),n._overlapsOnly=!0}}if(s&&(0==s.trace||s.stroke)&&/^(subtract|intersect)$/.test(i))return a(e,n,i);var h=t(e,!0),f=n&&e!==n&&t(n,!0),p=g[i];p[i]=!0,f&&(p.subtract||p.exclude)^f.isClockwise()^h.isClockwise()&&f.reverse();var v,_=l(M.expand(h.getCrossings(f))),m=h._children||[h],y=f&&(f._children||[f]),b=[],w=[];if(_.length){o(m),y&&o(y);for(var E=0,C=_.length;E<C;E++)c(_[E]._segment,h,f,w,p);for(E=0,C=b.length;E<C;E++){var D=b[E],S=D._intersection;D._winding||c(D,h,f,w,p),S&&S._overlap||(D._path._overlapsOnly=!1)}v=d(b,p)}else v=u(y?m.concat(y):m.slice(),(function(t){return!!p[t]}));return r(v,!0,e,n,s)}function a(e,n,i){function a(t){if(!f[t._id]&&(l||o.contains(t.getPointAt(t.getLength()/2))^h))return c.unshift(t),f[t._id]=!0}for(var s=t(e),o=t(n),u=s.getCrossings(o),h="subtract"===i,l="divide"===i,f={},c=[],d=u.length-1;d>=0;d--){var p=u[d].split();p&&(a(p)&&p.getFirstSegment().setHandleIn(0,0),s.getLastSegment().setHandleOut(0,0))}return a(s),r(c,!1,e,n)}function s(t,e){for(var r=t;r;){if(r===e)return;r=r._previous}for(;t._next&&t._next!==e;)t=t._next;if(!t._next){for(;e._previous;)e=e._previous;t._next=e,e._previous=t}}function o(t){for(var e=t.length-1;e>=0;e--)t[e].clearHandles()}function u(t,e,r){var n=t&&t.length;if(n){var a=i.each(t,(function(t,e){this[t._id]={container:null,winding:t.isClockwise()?1:-1,index:e}}),{}),s=t.slice().sort((function(t,e){return _(e.getArea())-_(t.getArea())})),o=s[0];null==r&&(r=o.isClockwise());for(var u=0;u<n;u++){for(var h=s[u],l=a[h._id],f=h.getInteriorPoint(),c=0,d=u-1;d>=0;d--){var p=s[d];if(p.contains(f)){var v=a[p._id];c=v.winding,l.winding+=c,l.container=v.exclude?v.container:p;break}}if(e(l.winding)===e(c))l.exclude=!0,t[l.index]=null;else{var g=l.container;h.setClockwise(g?!g.isClockwise():r)}}}return t}function l(t,e,r){function n(t){return t._path._id+"."+t._segment1._index}for(var i,a,u,h=e&&[],l=!1,f=r||[],c=r&&{},d=(r&&r.length)-1;d>=0;d--)(y=r[d])._path&&(c[n(y)]=!0);for(d=t.length-1;d>=0;d--){var p,v=t[d],_=v._time,g=_,m=e&&!e(v),y=v._curve;if(y&&(y!==a?(l=!y.hasHandles()||c&&c[n(y)],i=[],u=null,a=y):u>=1e-8&&(_/=u)),m)i&&i.push(v);else{if(e&&h.unshift(v),u=g,_<1e-8)p=y._segment1;else if(_>1-1e-8)p=y._segment2;else{var b=y.divideAtTime(_,!0);l&&f.push(y,b),p=b._segment1;for(var w=i.length-1;w>=0;w--){var E=i[w];E._time=(E._time-_)/(1-_)}}v._setSegment(p);var C=p._intersection,D=v._intersection;if(C){s(C,D);for(var S=C;S;)s(S._intersection,C),S=S._next}else p._intersection=D}}return r||o(f),h||t}function f(t,e,r,n,i){function a(a){var s=a[l+0],u=a[l+6];if(!(g<p(s,u)||g>v(s,u))){var c=a[h+0],_=a[h+2],w=a[h+4],E=a[h+6];if(s!==u){var T=g===s?0:g===u||y>v(c,_,w,E)||b<p(c,_,w,E)?1:P.solveCubic(a,l,g,F,0,1)>0?F[0]:1,A=0===T?c:1===T?E:P.getPoint(a,T)[r?"y":"x"],M=s>u?1:-1,I=o[l]>o[l+6]?1:-1,k=o[h+6];return g!==s?(A<y?C+=M:A>b?D+=M:S=!0,A>d-m&&A<d+m&&(x/=2)):(M!==I?c<y?C+=M:c>b&&(D+=M):c!=k&&(k<b&&A>b?(D+=M,S=!0):k>y&&A<y&&(C+=M,S=!0)),x=0),o=a,!i&&A>y&&A<b&&0===P.getTangent(a,T)[r?"x":"y"]&&f(t,e,!r,n,!0)}(c<b&&E>y||E<b&&c>y)&&(S=!0)}}function s(t){var e=t[l+0],n=t[l+2],i=t[l+4],s=t[l+6];if(g<=v(e,n,i,s)&&g>=p(e,n,i,s))for(var o,u=t[h+0],f=t[h+2],c=t[h+4],d=t[h+6],_=y>v(u,f,c,d)||b<p(u,f,c,d)?[t]:P.getMonoCurves(t,r),m=0,w=_.length;m<w;m++)if(o=a(_[m]))return o}for(var o,u,h=r?1:0,l=1^h,c=[t.x,t.y],d=c[h],g=c[l],m=1e-6,y=d-1e-9,b=d+1e-9,w=0,E=0,C=0,D=0,S=!1,T=!1,x=1,F=[],A=0,M=e.length;A<M;A++){var I,k=e[A],U=k._path,O=k.getValues();if(!(A&&e[A-1]._path===U||(o=null,U._closed||(u=P.getValues(U.getLastCurve().getSegment2(),k.getSegment1(),null,!n))[l]!==u[l+6]&&(o=u),o))){o=O;for(var B=U.getLastCurve();B&&B!==k;){var R=B.getValues();if(R[l]!==R[l+6]){o=R;break}B=B.getPrevious()}}if(I=s(O))return I;if(A+1===M||e[A+1]._path!==U){if(u&&(I=s(u)))return I;!S||C||D||(C=D=U.isClockwise(n)^r?1:-1),w+=C,E+=D,C=D=0,S&&(T=!0,S=!1),u=null}}return w=_(w),E=_(E),{winding:v(w,E),windingL:w,windingR:E,quality:x,onPath:T}}function c(t,e,r,n,i){var a=[],s=t,o=0;do{d=(y=t.getCurve()).getLength(),a.push({segment:t,curve:y,length:d}),o+=d,t=t.getNext()}while(t&&!t._intersection&&t!==s);for(var u=[.5,.25,.75],l={winding:0,quality:-1},c=0;c<u.length&&l.quality<.5;c++)for(var d=o*u[c],p=0,v=a.length;p<v;p++){var g=a[p],m=g.length;if(d<=m){var y=g.curve,b=y._path,w=b._parent,E=w instanceof U?w:b,C=h.clamp(y.getTimeAt(d),1e-8,1-1e-8),D=y.getPointAtTime(C),S=_(y.getTangentAtTime(C).y)<Math.SQRT1_2,T=i.subtract&&r&&(E===e&&r._getWinding(D,S,!0).winding||E===r&&!e._getWinding(D,S,!0).winding)?{winding:0,quality:1}:f(D,n,S,!0);T.quality>l.quality&&(l=T);break}d-=m}for(p=a.length-1;p>=0;p--)a[p].segment._winding=l}function d(t,e){function r(t){var r;return!(!t||t._visited||e&&(!e[(r=t._winding||{}).winding]||e.unite&&2===r.winding&&r.windingL&&r.windingR))}function n(t){if(t)for(var e=0,r=a.length;e<r;e++)if(t===a[e])return!0;return!1}function i(t){for(var e=t._segments,r=0,n=e.length;r<n;r++)e[r]._visited=!0}var a,s=[];t.sort((function(t,e){var r=t._intersection,n=e._intersection,i=!(!r||!r._overlap),a=!(!n||!n._overlap),s=t._path,o=e._path;return i^a?i?1:-1:!r^!n?r?1:-1:s!==o?s._id-o._id:t._index-e._index}));for(var o=0,u=t.length;o<u;o++){var h,l,f,c=t[o],d=r(c),p=null,v=!1,_=!0,g=[];if(d&&c._path._overlapsOnly){var m=c._path,y=c._intersection._segment._path;m.compare(y)&&(m.getArea()&&s.push(m.clone(!1)),i(m),i(y),d=!1)}for(;d;){var w=!p,E=function(t,e){function i(i,s){for(;i&&i!==s;){var o=i._segment,h=o&&o._path;if(h){var l=o.getNext()||h.getFirstSegment(),f=l._intersection;o!==t&&(n(o)||n(l)||l&&r(o)&&(r(l)||f&&r(f._segment)))&&u.push(o),e&&a.push(o)}i=i._next}}var s=t._intersection,o=s,u=[];if(e&&(a=[t]),s){for(i(s);s&&s._prev;)s=s._prev;i(s,o)}return u}(c,w),C=E.shift(),D=!(v=!w&&(n(c)||n(C)))&&C;if(w&&(p=new k(b.NO_INSERT),h=null),v){(c.isFirst()||c.isLast())&&(_=c._path._closed),c._visited=!0;break}if(D&&h&&(g.push(h),h=null),h||(D&&E.push(c),h={start:p._segments.length,crossings:E,visited:l=[],handleIn:f}),D&&(c=C),!r(c)){p.removeSegments(h.start);for(var S=0,T=l.length;S<T;S++)l[S]._visited=!1;l.length=0;do{(c=h&&h.crossings.shift())&&c._path||(c=null,(h=g.pop())&&(l=h.visited,f=h.handleIn))}while(h&&!r(c));if(!c)break}var x=c.getNext();p.add(new F(c._point,f,x&&c._handleOut)),c._visited=!0,l.push(c),c=x||c._path.getFirstSegment(),f=x&&x._handleIn}v&&(_&&(p.getFirstSegment().setHandleIn(f),p.setClosed(_)),0!==p.getArea()&&s.push(p))}return s}var p=Math.min,v=Math.max,_=Math.abs,g={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};return{_getWinding:function(t,e,r){return f(t,this.getCurves(),e,r)},unite:function(t,e){return n(this,t,"unite",e)},intersect:function(t,e){return n(this,t,"intersect",e)},subtract:function(t,e){return n(this,t,"subtract",e)},exclude:function(t,e){return n(this,t,"exclude",e)},divide:function(t,e){return e&&(0==e.trace||e.stroke)?a(this,t,"divide"):r([this.subtract(t,e),this.intersect(t,e)],!0,this,t,e)},resolveCrossings:function(){function t(t,e){var r=t&&t._intersection;return r&&r._overlap&&r._path===e}var e=this._children,r=e||[this],n=!1,a=!1,s=this.getIntersections(null,(function(t){return t.hasOverlap()&&(n=!0)||t.isCrossing()&&(a=!0)})),u=n&&a&&[];if(s=M.expand(s),n)for(var h=l(s,(function(t){return t.hasOverlap()}),u),f=h.length-1;f>=0;f--){var c=h[f],p=c._path,v=c._segment,_=v.getPrevious(),g=v.getNext();t(_,p)&&t(g,p)&&(v.remove(),_._handleOut._set(0,0),g._handleIn._set(0,0),_===v||_.getCurve().hasLength()||(g._handleIn.set(_._handleIn),_.remove()))}a&&(l(s,n&&function(t){var e=t.getCurve(),r=t.getSegment(),n=t._intersection,i=n._curve,a=n._segment;if(e&&i&&e._path&&i._path)return!0;r&&(r._intersection=null),a&&(a._intersection=null)},u),u&&o(u),r=d(i.each(r,(function(t){this.push.apply(this,t._segments)}),[])));var m,y=r.length;return y>1&&e?(r!==e&&this.setChildren(r),m=this):1!==y||e||(r[0]!==this&&this.setSegments(r[0].removeSegments()),m=this),m||((m=new U(b.NO_INSERT)).addChildren(r),(m=m.reduce()).copyAttributes(this),this.replaceWith(m)),m},reorient:function(t,r){var n=this._children;return n&&n.length?this.setChildren(u(this.removeChildren(),(function(e){return!!(t?e:1&e)}),r)):r!==e&&this.setClockwise(r),this},getInteriorPoint:function(){var t=this.getBounds().getCenter(!0);if(!this.contains(t)){for(var e=this.getCurves(),r=t.y,n=[],i=[],a=0,s=e.length;a<s;a++){var o=e[a].getValues(),u=o[1],h=o[3],l=o[5],f=o[7];if(r>=p(u,h,l,f)&&r<=v(u,h,l,f))for(var c=P.getMonoCurves(o),d=0,_=c.length;d<_;d++){var g=c[d],m=g[1],y=g[7];if(m!==y&&(r>=m&&r<=y||r>=y&&r<=m)){var b=r===m?g[0]:r===y?g[6]:1===P.solveCubic(g,1,r,i,0,1)?P.getPoint(g,i[0]).x:(g[0]+g[6])/2;n.push(b)}}}n.length>1&&(n.sort((function(t,e){return t-e})),t.x=(n[0]+n[1])/2)}return t}}});var O=i.extend({_class:"PathFlattener",initialize:function(t,e,r,n,i){function a(t,e){var r=P.getValues(t,e,i);u.push(r),s(r,t._index,0,1)}function s(t,r,i,a){if(!(a-i>f)||n&&P.isStraight(t)||P.isFlatEnough(t,e||.25)){var o=t[6]-t[0],u=t[7]-t[1],c=Math.sqrt(o*o+u*u);c>0&&(l+=c,h.push({offset:l,curve:t,index:r,time:a}))}else{var d=P.subdivide(t,.5),p=(i+a)/2;s(d[0],r,i,p),s(d[1],r,p,a)}}for(var o,u=[],h=[],l=0,f=1/(r||32),c=t._segments,d=c[0],p=1,v=c.length;p<v;p++)a(d,o=c[p]),d=o;t._closed&&a(o,c[0]),this.curves=u,this.parts=h,this.length=l,this.index=0},_get:function(t){for(var e,r=this.parts,n=r.length,i=this.index;e=i,i&&!(r[--i].offset<t););for(;e<n;e++){var a=r[e];if(a.offset>=t){this.index=e;var s=r[e-1],o=s&&s.index===a.index?s.time:0,u=s?s.offset:0;return{index:a.index,time:o+(a.time-o)*(t-u)/(a.offset-u)}}}return{index:r[n-1].index,time:1}},drawPart:function(t,e,r){for(var n=this._get(e),i=this._get(r),a=n.index,s=i.index;a<=s;a++){var o=P.getPart(this.curves[a],a===n.index?n.time:0,a===i.index?i.time:1);a===n.index&&t.moveTo(o[0],o[1]),t.bezierCurveTo.apply(t,o.slice(2))}}},i.each(P._evaluateMethods,(function(t){this[t+"At"]=function(e){var r=this._get(e);return P[t](this.curves[r.index],r.time)}}),{})),B=i.extend({initialize:function(t){for(var e,r=this.points=[],n=t._segments,i=t._closed,a=0,s=n.length;a<s;a++){var o=n[a].point;e&&e.equals(o)||r.push(e=o.clone())}i&&(r.unshift(r[r.length-1]),r.push(r[1])),this.closed=i},fit:function(t){var e=this.points,r=e.length,n=null;return r>0&&(n=[new F(e[0])],r>1&&(this.fitCubic(n,t,0,r-1,e[1].subtract(e[0]),e[r-2].subtract(e[r-1])),this.closed&&(n.shift(),n.pop()))),n},fitCubic:function(t,e,r,n,i,a){var s=this.points;if(n-r!=1){for(var o,u=this.chordLengthParameterize(r,n),h=Math.max(e,e*e),l=!0,f=0;f<=4;f++){var c=this.generateBezier(r,n,u,i,a),d=this.findMaxError(r,n,c,u);if(d.error<e&&l)return void this.addCurve(t,c);if(o=d.index,d.error>=h)break;l=this.reparameterize(r,n,u,c),h=d.error}var p=s[o-1].subtract(s[o+1]);this.fitCubic(t,e,r,o,i,p),this.fitCubic(t,e,o,n,p.negate(),a)}else{var v=s[r],_=s[n],g=v.getDistance(_)/3;this.addCurve(t,[v,v.add(i.normalize(g)),_.add(a.normalize(g)),_])}},addCurve:function(t,e){t[t.length-1].setHandleOut(e[1].subtract(e[0])),t.push(new F(e[3],e[2].subtract(e[3])))},generateBezier:function(t,e,r,n,i){for(var a=Math.abs,s=this.points,o=s[t],u=s[e],h=[[0,0],[0,0]],l=[0,0],f=0,c=e-t+1;f<c;f++){var d=r[f],p=1-d,v=3*d*p,_=p*p*p,g=v*p,m=v*d,y=d*d*d,b=n.normalize(g),w=i.normalize(m),E=s[t+f].subtract(o.multiply(_+g)).subtract(u.multiply(m+y));h[0][0]+=b.dot(b),h[0][1]+=b.dot(w),h[1][0]=h[0][1],h[1][1]+=w.dot(w),l[0]+=b.dot(E),l[1]+=w.dot(E)}var C,D,S=h[0][0]*h[1][1]-h[1][0]*h[0][1];if(a(S)>1e-12){var T=h[0][0]*l[1]-h[1][0]*l[0];C=(l[0]*h[1][1]-l[1]*h[0][1])/S,D=T/S}else{var x=h[0][0]+h[0][1],F=h[1][0]+h[1][1];C=D=a(x)>1e-12?l[0]/x:a(F)>1e-12?l[1]/F:0}var A,P,M=u.getDistance(o),I=1e-12*M;if(C<I||D<I)C=D=M/3;else{var k=u.subtract(o);A=n.normalize(C),P=i.normalize(D),A.dot(k)-P.dot(k)>M*M&&(C=D=M/3,A=P=null)}return[o,o.add(A||n.normalize(C)),u.add(P||i.normalize(D)),u]},reparameterize:function(t,e,r,n){for(i=t;i<=e;i++)r[i-t]=this.findRoot(n,this.points[i],r[i-t]);for(var i=1,a=r.length;i<a;i++)if(r[i]<=r[i-1])return!1;return!0},findRoot:function(t,e,r){for(var n=[],i=[],a=0;a<=2;a++)n[a]=t[a+1].subtract(t[a]).multiply(3);for(a=0;a<=1;a++)i[a]=n[a+1].subtract(n[a]).multiply(2);var s=this.evaluate(3,t,r),o=this.evaluate(2,n,r),u=this.evaluate(1,i,r),l=s.subtract(e),f=o.dot(o)+l.dot(u);return h.isZero(f)?r:r-l.dot(o)/f},evaluate:function(t,e,r){for(var n=e.slice(),i=1;i<=t;i++)for(var a=0;a<=t-i;a++)n[a]=n[a].multiply(1-r).add(n[a+1].multiply(r));return n[0]},chordLengthParameterize:function(t,e){for(var r=[0],n=t+1;n<=e;n++)r[n-t]=r[n-t-1]+this.points[n].getDistance(this.points[n-1]);n=1;for(var i=e-t;n<=i;n++)r[n]/=r[i];return r},findMaxError:function(t,e,r,n){for(var i=Math.floor((e-t+1)/2),a=0,s=t+1;s<e;s++){var o=this.evaluate(3,r,n[s-t]).subtract(this.points[s]),u=o.x*o.x+o.y*o.y;u>=a&&(a=u,i=s)}return{error:a,index:i}}}),R=b.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var r=t&&i.isPlainObject(t)&&t.x===e&&t.y===e;this._initialize(r&&t,!r&&f.read(arguments))},_equals:function(t){return this._content===t._content},copyContent:function(t){this.setContent(t._content)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(265)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),L=R.extend({_class:"PointText",initialize:function(){R.apply(this,arguments)},getPoint:function(){var t=this._matrix.getTranslation();return new c(t.x,t.y,this,"setPoint")},setPoint:function(){var t=f.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t,e,r){if(this._content){this._setStyles(t,e,r);var n=this._lines,i=this._style,a=i.hasFill(),s=i.hasStroke(),o=i.getLeading(),u=t.shadowColor;t.font=i.getFontStyle(),t.textAlign=i.getJustification();for(var h=0,l=n.length;h<l;h++){t.shadowColor=u;var f=n[h];a&&(t.fillText(f,0,0),t.shadowColor="rgba(0,0,0,0)"),s&&t.strokeText(f,0,0),t.translate(0,o)}}},_getBounds:function(t,e){var r=this._style,n=this._lines,i=n.length,a=r.getJustification(),s=r.getLeading(),o=this.getView().getTextWidth(r.getFontStyle(),n),u=0;"left"!==a&&(u-=o/("center"===a?2:1));var h=new v(u,i?-.75*s:0,o,i*s);return t?t._transformBounds(h,h):h}}),N=i.extend(new function(){function t(t){var n,i=t.match(/^#(\w{1,2})(\w{1,2})(\w{1,2})$/);if(i)for(n=[0,0,0],a=0;a<3;a++)u=i[a+1],n[a]=parseInt(1==u.length?u+u:u,16)/255;else if(i=t.match(/^rgba?\((.*)\)$/))for(var a=0,o=(n=i[1].split(",")).length;a<o;a++){var u=+n[a];n[a]=a<3?u/255:u}else if(r){var h=s[t];if(!h){e||((e=$.getContext(1,1)).globalCompositeOperation="copy"),e.fillStyle="rgba(0,0,0,0)",e.fillStyle=t,e.fillRect(0,0,1,1);var l=e.getImageData(0,0,1,1).data;h=s[t]=[l[0]/255,l[1]/255,l[2]/255]}n=h.slice()}else n=[0,0,0];return n}var e,n={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},a={},s={},o=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],h={"rgb-hsb":function(t,e,r){var n=Math.max(t,e,r),i=n-Math.min(t,e,r);return[0===i?0:60*(n==t?(e-r)/i+(e<r?6:0):n==e?(r-t)/i+2:(t-e)/i+4),0===n?0:i/n,n]},"hsb-rgb":function(t,e,r){t=(t/60%6+6)%6;var n=Math.floor(t),i=t-n,a=[r,r*(1-e),r*(1-e*i),r*(1-e*(1-i))];return[a[(n=o[n])[0]],a[n[1]],a[n[2]]]},"rgb-hsl":function(t,e,r){var n=Math.max(t,e,r),i=Math.min(t,e,r),a=n-i,s=0===a,o=(n+i)/2;return[s?0:60*(n==t?(e-r)/a+(e<r?6:0):n==e?(r-t)/a+2:(t-e)/a+4),s?0:o<.5?a/(n+i):a/(2-n-i),o]},"hsl-rgb":function(t,e,r){if(0===e)return[r,r,r];for(var n=[(t=(t/360%1+1)%1)+1/3,t,t-1/3],i=r<.5?r*(1+e):r+e-r*e,a=2*r-i,s=[],o=0;o<3;o++){var u=n[o];u<0&&(u+=1),u>1&&(u-=1),s[o]=6*u<1?a+6*(i-a)*u:2*u<1?i:3*u<2?a+(i-a)*(2/3-u)*6:a}return s},"rgb-gray":function(t,e,r){return[.2989*t+.587*e+.114*r]},"gray-rgb":function(t){return[t,t,t]},"gray-hsb":function(t){return[0,0,t]},"gray-hsl":function(t){return[0,0,t]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return i.each(n,(function(t,e){a[e]=[],i.each(t,(function(t,r){var s=i.capitalize(t),o=/^(hue|saturation)$/.test(t),u=a[e][r]="gradient"===t?function(t){var e=this._components[0];return e!==(t=z.read(Array.isArray(t)?t:arguments,0,{readNull:!0}))&&(e&&e._removeOwner(this),t&&t._addOwner(this)),t}:"gradient"===e?function(){return f.read(arguments,0,{readNull:"highlight"===t,clone:!0})}:function(t){return null==t||isNaN(t)?0:t};this["get"+s]=function(){return this._type===e||o&&/^hs[bl]$/.test(this._type)?this._components[r]:this._convert(e)[r]},this["set"+s]=function(t){this._type===e||o&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(e),this._properties=n[e],this._type=e),this._components[r]=u.call(this,t),this._changed()}}),this)}),{_class:"Color",_readIndex:!0,initialize:function e(r){var s,o,u,h,l=arguments,f=this.__read,c=0;Array.isArray(r)&&(r=(l=r)[0]);var d=null!=r&&typeof r;if("string"===d&&r in n&&(s=r,r=l[1],Array.isArray(r)?(o=r,u=l[2]):(f&&(c=1),l=i.slice(l,1),d=typeof r)),!o){if(h="number"===d?l:"object"===d&&null!=r.length?r:null){s||(s=h.length>=3?"rgb":"gray");var p=n[s].length;u=h[p],f&&(c+=h===arguments?p+(null!=u?1:0):1),h.length>p&&(h=i.slice(h,0,p))}else if("string"===d)s="rgb",4===(o=t(r)).length&&(u=o[3],o.length--);else if("object"===d)if(r.constructor===e){if(s=r._type,o=r._components.slice(),u=r._alpha,"gradient"===s)for(var v=1,_=o.length;v<_;v++){var g=o[v];g&&(o[v]=g.clone())}}else if(r.constructor===z)s="gradient",h=l;else{var m=n[s="hue"in r?"lightness"in r?"hsl":"hsb":"gradient"in r||"stops"in r||"radial"in r?"gradient":"gray"in r?"gray":"rgb"],y=a[s];this._components=o=[];for(v=0,_=m.length;v<_;v++)null==(b=r[m[v]])&&!v&&"gradient"===s&&"stops"in r&&(b={stops:r.stops,radial:r.radial}),null!=(b=y[v].call(this,b))&&(o[v]=b);u=r.alpha}f&&s&&(c=1)}if(this._type=s||"rgb",!o){this._components=o=[];for(v=0,_=(y=a[this._type]).length;v<_;v++){var b=y[v].call(this,h&&h[v]);null!=b&&(o[v]=b)}}return this._components=o,this._properties=n[this._type],this._alpha=u,f&&(this.__read=c),this},set:"#initialize",_serialize:function(t,e){var r=this.getComponents();return i.serialize(/^(gray|rgb)$/.test(this._type)?r:[this._type].concat(r),t,!0,e)},_changed:function(){this._canvasStyle=null,this._owner&&this._owner._changed(65)},_convert:function(t){var e;return this._type===t?this._components.slice():(e=h[this._type+"-"+t])?e.apply(this,this._components):h["rgb-"+t].apply(this,h[this._type+"-rgb"].apply(this,this._components))},convert:function(t){return new N(t,this._convert(t),this._alpha)},getType:function(){return this._type},setType:function(t){this._components=this._convert(t),this._properties=n[t],this._type=t},getComponents:function(){var t=this._components.slice();return null!=this._alpha&&t.push(this._alpha),t},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(t){this._alpha=null==t?null:Math.min(Math.max(t,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(t){var e=i.isPlainValue(t,!0)?N.read(arguments):t;return e===this||e&&this._class===e._class&&this._type===e._type&&this.getAlpha()===e.getAlpha()&&i.equals(this._components,e._components)||!1},toString:function(){for(var t=this._properties,e=[],r="gradient"===this._type,n=u.instance,i=0,a=t.length;i<a;i++){var s=this._components[i];null!=s&&e.push(t[i]+": "+(r?s:n.number(s)))}return null!=this._alpha&&e.push("alpha: "+n.number(this._alpha)),"{ "+e.join(", ")+" }"},toCSS:function(t){function e(t){return Math.round(255*(t<0?0:t>1?1:t))}var r=this._convert("rgb"),n=t||null==this._alpha?1:this._alpha;return r=[e(r[0]),e(r[1]),e(r[2])],n<1&&r.push(n<0?0:n),t?"#"+((1<<24)+(r[0]<<16)+(r[1]<<8)+r[2]).toString(16).slice(1):(4==r.length?"rgba(":"rgb(")+r.join(",")+")"},toCanvasStyle:function(t,e){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var r,n=this._components,i=n[0],a=i._stops,s=n[1],o=n[2],u=n[3],h=e&&e.inverted();if(h&&(s=h._transformPoint(s),o=h._transformPoint(o),u&&(u=h._transformPoint(u))),i._radial){var l=o.getDistance(s);if(u){var f=u.subtract(s);f.getLength()>l&&(u=s.add(f.normalize(l-.1)))}var c=u||s;r=t.createRadialGradient(c.x,c.y,0,s.x,s.y,l)}else r=t.createLinearGradient(s.x,s.y,o.x,o.y);for(var d=0,p=a.length;d<p;d++){var v=a[d],_=v._offset;r.addColorStop(null==_?d/(p-1):_,v._color.toCanvasStyle())}return this._canvasStyle=r},transform:function(t){if("gradient"===this._type){for(var e=this._components,r=1,n=e.length;r<n;r++){var i=e[r];t._transformPoint(i,i,!0)}this._changed()}},statics:{_types:n,random:function(){var t=Math.random;return new N(t(),t(),t())}}})},new function(){return i.each({add:function(t,e){return t+e},subtract:function(t,e){return t-e},multiply:function(t,e){return t*e},divide:function(t,e){return t/e}},(function(t,e){this[e]=function(e){e=N.read(arguments);for(var r=this._type,n=this._components,i=e._convert(r),a=0,s=n.length;a<s;a++)i[a]=t(n[a],i[a]);return new N(r,i,null!=this._alpha?t(this._alpha,e.getAlpha()):null)}}),{})}),z=i.extend({_class:"Gradient",initialize:function(t,e){this._id=l.get(),t&&i.isPlainObject(t)&&(this.set(t),t=e=null),null==this._stops&&this.setStops(t||["white","black"]),null==this._radial&&this.setRadial("string"==typeof e&&"radial"===e||e||!1)},_serialize:function(t,e){return e.add(this,(function(){return i.serialize([this._stops,this._radial],t,!0,e)}))},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;t<e;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var r=this._owners?this._owners.indexOf(t):-1;-1!=r&&(this._owners.splice(r,1),this._owners.length||(this._owners=e))},clone:function(){for(var t=[],e=0,r=this._stops.length;e<r;e++)t[e]=this._stops[e].clone();return new z(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var r=this._stops;if(r)for(var n=0,i=r.length;n<i;n++)r[n]._owner=e;for(n=0,i=(r=this._stops=G.readList(t,0,{clone:!0})).length;n<i;n++)r[n]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class){var e=this._stops,r=t._stops,n=e.length;if(n===r.length){for(var i=0;i<n;i++)if(!e[i].equals(r[i]))return!1;return!0}}return!1}}),G=i.extend({_class:"GradientStop",initialize:function(t,r){var n=t,i=r;"object"==typeof t&&r===e&&(Array.isArray(t)&&"number"!=typeof t[0]?(n=t[0],i=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(n=t.color,i=t.offset||t.rampPoint||0)),this.setColor(n),this.setOffset(i)},clone:function(){return new G(this._color.clone(),this._offset)},_serialize:function(t,e){var r=this._color,n=this._offset;return i.serialize(null==n?[r]:[r,n],t,!0,e)},_changed:function(){this._owner&&this._owner._changed(65)},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){var t=N.read(arguments,0,{clone:!0});t&&(t._owner=this),this._color=t,this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._offset==t._offset||!1}}),j=i.extend(new function(){var t={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new f,selectedColor:null},r=i.set({},t,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),n=i.set({},r,{fillColor:new N}),a={strokeWidth:97,strokeCap:97,strokeJoin:97,strokeScaling:105,miterLimit:97,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},s={beans:!0},o={_class:"Style",beans:!0,initialize:function(e,i,a){this._values={},this._owner=i,this._project=i&&i._project||a||paper.project,this._defaults=!i||i instanceof w?r:i instanceof R?n:t,e&&this.set(e)}};return i.each(r,(function(t,r){var n=/Color$/.test(r),u="shadowOffset"===r,h=i.capitalize(r),l=a[r],c="set"+h,d="get"+h;o[c]=function(t){var i=this._owner,a=i&&i._children;if(a&&a.length>0&&!(i instanceof U))for(var s=0,o=a.length;s<o;s++)a[s]._style[c](t);else if(r in this._defaults){var u=this._values[r];u!==t&&(n&&(u&&u._owner!==e&&(u._owner=e),t&&t.constructor===N&&(t._owner&&(t=t.clone()),t._owner=i)),this._values[r]=t,i&&i._changed(l||65))}},o[d]=function(t){var a,s=this._owner,o=s&&s._children;if(r in this._defaults&&(!o||!o.length||t||s instanceof U))if((a=this._values[r])===e)(a=this._defaults[r])&&a.clone&&(a=a.clone());else{var h=n?N:u?f:null;!h||a&&a.constructor===h||(this._values[r]=a=h.read([a],0,{readNull:!0,clone:!0}),a&&n&&(a._owner=s))}else if(o)for(var l=0,c=o.length;l<c;l++){var p=o[l]._style[d]();if(l){if(!i.equals(a,p))return e}else a=p}return a},s[d]=function(t){return this._style[d](t)},s[c]=function(t){this._style[c](t)}})),i.each({Font:"FontFamily",WindingRule:"FillRule"},(function(t,e){var r="get"+e,n="set"+e;o[r]=s[r]="#get"+t,o[n]=s[n]="#set"+t})),b.inject(s),o},{set:function(t){var e=t instanceof j,r=e?t._values:t;if(r)for(var n in r)if(n in this._defaults){var i=r[n];this[n]=i&&e&&i.clone?i.clone():i}},equals:function(t){function r(t,r,n){var a=t._values,s=r._values,o=r._defaults;for(var u in a){var h=a[u],l=s[u];if(!(n&&u in s||i.equals(h,l===e?o[u]:l)))return!1}return!0}return t===this||t&&this._class===t._class&&r(this,t)&&r(t,this,!0)||!1},hasFill:function(){var t=this.getFillColor();return!!t&&t.alpha>0},hasStroke:function(){var t=this.getStrokeColor();return!!t&&t.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var t=this.getShadowColor();return!!t&&t.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function t(){var e=t.base.call(this),r=this.getFontSize();return/pt|em|%|px/.test(r)&&(r=this.getView().getPixelSize(r)),null!=e?e:1.2*r}}),q=new function(){function t(t,e,r,n){for(var i=["","webkit","moz","Moz","ms","o"],a=e[0].toUpperCase()+e.substring(1),s=0;s<6;s++){var o=i[s],u=o?o+a:e;if(u in t){if(!r)return t[u];t[u]=n;break}}}return{getStyles:function(t){var e=t&&9!==t.nodeType?t.ownerDocument:t,r=e&&e.defaultView;return r&&r.getComputedStyle(t,"")},getBounds:function(t,e){var r,n=t.ownerDocument,i=n.body,a=n.documentElement;try{r=t.getBoundingClientRect()}catch(t){r={left:0,top:0,width:0,height:0}}var s=r.left-(a.clientLeft||i.clientLeft||0),o=r.top-(a.clientTop||i.clientTop||0);if(!e){var u=n.defaultView;s+=u.pageXOffset||a.scrollLeft||i.scrollLeft,o+=u.pageYOffset||a.scrollTop||i.scrollTop}return new v(s,o,r.width,r.height)},getViewportBounds:function(t){var e=t.ownerDocument,r=e.defaultView,n=e.documentElement;return new v(0,0,r.innerWidth||n.clientWidth,r.innerHeight||n.clientHeight)},getOffset:function(t,e){return q.getBounds(t,e).getPoint()},getSize:function(t){return q.getBounds(t,!0).getSize()},isInvisible:function(t){return q.getSize(t).equals(new d(0,0))},isInView:function(t){return!q.isInvisible(t)&&q.getViewportBounds(t).intersects(q.getBounds(t,!0))},isInserted:function(t){return n.body.contains(t)},getPrefixed:function(e,r){return e&&t(e,r)},setPrefixed:function(e,r,n){if("object"==typeof r)for(var i in r)t(e,i,!0,r[i]);else t(e,r,!0,n)}}},H={add:function(t,e){if(t)for(var r in e)for(var n=e[r],i=r.split(/[\s,]+/g),a=0,s=i.length;a<s;a++)t.addEventListener(i[a],n,!1)},remove:function(t,e){if(t)for(var r in e)for(var n=e[r],i=r.split(/[\s,]+/g),a=0,s=i.length;a<s;a++)t.removeEventListener(i[a],n,!1)},getPoint:function(t){var e=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return new f(e.pageX||e.clientX+n.documentElement.scrollLeft,e.pageY||e.clientY+n.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,e){return H.getPoint(t).subtract(q.getOffset(e||H.getTarget(t)))}};H.requestAnimationFrame=new function(){function t(){var e=a;a=[];for(var r=0,s=e.length;r<s;r++)e[r]();(i=n&&a.length)&&n(t)}var e,n=q.getPrefixed(r,"requestAnimationFrame"),i=!1,a=[];return function(r){a.push(r),n?i||(n(t),i=!0):e||(e=setInterval(t,1e3/60))}};var X=i.extend(a,{_class:"View",initialize:function t(e,i){function a(t){return i[t]||parseInt(i.getAttribute(t),10)}function o(){var t=q.getSize(i);return t.isNaN()||t.isZero()?new d(a("width"),a("height")):t}var u;if(r&&i){if(this._id=i.getAttribute("id"),null==this._id&&i.setAttribute("id",this._id="view-"+t._id++),H.add(i,this._viewEvents),q.setPrefixed(i.style,{userDrag:"none",userSelect:"none",touchCallout:"none",contentZooming:"none",tapHighlightColor:"rgba(0,0,0,0)"}),s.hasAttribute(i,"resize")){var h=this;H.add(r,this._windowEvents={resize:function(){h.setViewSize(o())}})}if(u=o(),s.hasAttribute(i,"stats")&&"undefined"!=typeof Stats){this._stats=new Stats;var l=this._stats.domElement,f=l.style,c=q.getOffset(i);f.position="absolute",f.left=c.x+"px",f.top=c.y+"px",n.body.appendChild(l)}}else u=new d(i),i=null;this._project=e,this._scope=e._scope,this._element=i,this._pixelRatio||(this._pixelRatio=r&&r.devicePixelRatio||1),this._setElementSize(u.width,u.height),this._viewSize=u,t._views.push(this),t._viewsById[this._id]=this,(this._matrix=new g)._owner=this,t._focused||(t._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!paper.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;X._focused===this&&(X._focused=null),X._views.splice(X._views.indexOf(this),1),delete X._viewsById[this._id];var t=this._project;return t._view===this&&(t._view=null),H.remove(this._element,this._viewEvents),H.remove(r,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:i.each(b._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),(function(t){this[t]={}}),{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(t){this._autoUpdate=t,t&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var t=this;H.requestAnimationFrame((function(){if(t._requested=!1,t._animate){t.requestUpdate();var e=t._element;q.getPrefixed(n,"hidden")&&"true"!==s.getAttribute(e,"keepalive")||!q.isInView(e)||t._handleFrame()}t._autoUpdate&&t.update()})),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){paper=this._scope;var t=Date.now()/1e3,e=this._last?t-this._last:0;this._last=t,this.emit("frame",new i({delta:e,time:this._time+=e,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(t,e){var r=this._frameItems;e?(r[t._id]={item:t,time:0,count:0},1==++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete r[t._id],0==--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var e in this._frameItems){var r=this._frameItems[e];r.item.emit("frame",new i(t,{time:r.time+=t.delta,count:r.count++}))}},_changed:function(){this._project._changed(2049),this._bounds=this._decomposed=e},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var t=this._viewSize;return new p(t.width,t.height,this,"setViewSize")},setViewSize:function(){var t=d.read(arguments),e=t.subtract(this._viewSize);e.isZero()||(this._setElementSize(t.width,t.height),this._viewSize.set(t),this._changed(),this.emit("resize",{size:t,delta:e}),this._autoUpdate&&this.update())},_setElementSize:function(t,e){var r=this._element;r&&(r.width!==t&&(r.width=t),r.height!==e&&(r.height=e))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new v(new f,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return q.isInView(this._element)},isInserted:function(){return q.isInserted(this._element)},getPixelSize:function(t){var e,r=this._element;if(r){var i=r.parentNode,a=n.createElement("div");a.style.fontSize=t,i.appendChild(a),e=parseFloat(q.getStyles(a).fontSize),i.removeChild(a)}else e=parseFloat(e);return e},getTextWidth:function(t,e){return 0}},i.each(["rotate","scale","shear","skew"],(function(t){var e="rotate"===t;this[t]=function(){var r=(e?i:f).read(arguments),n=f.read(arguments,0,{readNull:!0});return this.transform((new g)[t](r,n||this.getCenter(!0)))}}),{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var t=new g;return this.transform(t.translate.apply(t,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=f.read(arguments);this.translate(this.getCenter().subtract(t))},getZoom:function(){var t=this._decompose(),e=t&&t.scaling;return e?(e.x+e.y)/2:0},setZoom:function(t){this.transform((new g).scale(t/this.getZoom(),this.getCenter()))},getRotation:function(){var t=this._decompose();return t&&t.rotation},setRotation:function(t){var e=this.getRotation();null!=e&&null!=t&&this.rotate(t-e)},getScaling:function(){var t=this._decompose(),r=t&&t.scaling;return r?new c(r.x,r.y,this,"setScaling"):e},setScaling:function(){var t=this.getScaling(),e=f.read(arguments,0,{clone:!0,readNull:!0});t&&e&&this.scale(e.x/t.x,e.y/t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},transform:function(t){this._matrix.append(t)},scrollBy:function(){this.translate(f.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(f.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(f.read(arguments))},getEventPoint:function(t){return this.viewToProject(H.getOffset(t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,e){return n&&"string"==typeof e&&(e=n.getElementById(e)),new(r?W:X)(t,e)}}},new function(){function t(t){var e=H.getTarget(t);return e.getAttribute&&X._viewsById[e.getAttribute("id")]}function e(){var t=X._focused;if(!t||!t.isVisible())for(var e=0,r=X._views.length;e<r;e++)if((t=X._views[e]).isVisible()){X._focused=u=t;break}}function i(t,e,r){t._handleMouseEvent("mousemove",e,r)}function a(t,e,r,n,i,a,s){function o(t,r){if(t.responds(r)){if(u||(u=new J(r,n,i,e||t,a?i.subtract(a):null)),t.emit(r,u)&&(S=!0,u.prevented&&(T=!0),u.stopped))return h=!0}else{var s=x[r];if(s)return o(t,s)}}for(var u,h=!1;t&&t!==s&&!o(t,r);)t=t._parent;return h}function s(t,e,r,n,i,s){return t._project.removeOn(r),T=S=!1,w&&a(w,null,r,n,i,s)||e&&e!==w&&!e.isDescendant(w)&&a(e,null,r,n,i,s,w)||a(t,w||e||t,r,n,i,s)}if(r){var o,u,h,l,f,c=!1,d=!1,p=r.navigator;p.pointerEnabled||p.msPointerEnabled?(h="pointerdown MSPointerDown",l="pointermove MSPointerMove",f="pointerup pointercancel MSPointerUp MSPointerCancel"):(h="touchstart",l="touchmove",f="touchend touchcancel","ontouchstart"in r&&p.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(h+=" mousedown",l+=" mousemove",f+=" mouseup"));var v={},_={mouseout:function(t){var e=X._focused,r=H.getRelatedTarget(t);if(e&&(!r||"HTML"===r.nodeName)){var n=H.getOffset(t,e._element),a=n.x,s=Math.abs,o=s(a),u=o-(1<<25);n.x=s(u)<o?u*(a<0?-1:1):a,i(e,t,e.viewToProject(n))}},scroll:e};v[h]=function(e){var r=X._focused=t(e);c||(c=!0,r._handleMouseEvent("mousedown",e))},_[l]=function(r){var n=X._focused;if(!d){var a=t(r);a?n!==a&&(n&&i(n,r),o||(o=n),n=X._focused=u=a):u&&u===n&&(o&&!o.isInserted()&&(o=null),n=X._focused=o,o=null,e())}n&&i(n,r)},_[h]=function(){d=!0},_[f]=function(t){var e=X._focused;e&&c&&e._handleMouseEvent("mouseup",t),d=c=!1},H.add(n,_),H.add(r,{load:e});var g,m,y,b,w,E,C,D,S=!1,T=!1,x={doubleclick:"click",mousedrag:"mousemove"},F=!1,A={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:v,_handleMouseEvent:function(t,e,r){function n(t){return i.virtual[t]||l.responds(t)||h&&h.responds(t)}var i=this._itemEvents,o=i.native[t],u="mousemove"===t,h=this._scope.tool,l=this;u&&c&&n("mousedrag")&&(t="mousedrag"),r||(r=this.getEventPoint(e));var f=this.getBounds().contains(r),d=o&&f&&l._project.hitTest(r,{tolerance:0,fill:!0,stroke:!0}),p=d&&d.item||null,v=!1,_={};if(_[t.substr(5)]=!0,o&&p!==b&&(b&&a(b,null,"mouseleave",e,r),p&&a(p,null,"mouseenter",e,r),b=p),F^f&&(a(this,null,f?"mouseenter":"mouseleave",e,r),f?this:null,v=!0),!f&&!_.drag||r.equals(m)||(s(this,p,u?t:"mousemove",e,r,m),v=!0),F=f,_.down&&f||_.up&&g){if(s(this,p,t,e,r,g),_.down){if(D=p===E&&Date.now()-C<300,y=E=p,!T&&p){for(var x=p;x&&!x.responds("mousedrag");)x=x._parent;x&&(w=p)}g=r}else _.up&&(T||p!==y||(C=Date.now(),s(this,p,D?"doubleclick":"click",e,r,g),D=!1),y=w=null);F=!1,v=!0}m=r,v&&h&&(S=h._handleMouseEvent(t,e,r,_)||S),(S&&!_.move||_.down&&n("mouseup"))&&e.preventDefault()},_handleKeyEvent:function(t,e,r,n){function i(i){i.responds(t)&&(paper=s,i.emit(t,a=a||new Z(t,e,r,n)))}var a,s=this._scope,o=s.tool;this.isVisible()&&(i(this),o&&o.responds(t)&&i(o))},_countItemEvent:function(t,e){var r=this._itemEvents,n=r.native,i=r.virtual;for(var a in A)n[a]=(n[a]||0)+(A[a][t]||0)*e;i[t]=(i[t]||0)+e},statics:{updateFocus:e}}}}),W=X.extend({_class:"CanvasView",initialize:function(t,e){if(!(e instanceof r.HTMLCanvasElement)){var n=d.read(arguments,1);if(n.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+i.slice(arguments,1));e=$.getCanvas(n)}var a=this._context=e.getContext("2d");if(a.save(),this._pixelRatio=1,!/^off|false$/.test(s.getAttribute(e,"hidpi"))){var o=r.devicePixelRatio||1,u=q.getPrefixed(a,"backingStorePixelRatio")||1;this._pixelRatio=o/u}X.call(this,t,e),this._needsUpdate=!0},remove:function t(){return this._context.restore(),t.base.call(this)},_setElementSize:function t(e,r){var n=this._pixelRatio;if(t.base.call(this,e*n,r*n),1!==n){var i=this._element,a=this._context;if(!s.hasAttribute(i,"resize")){var o=i.style;o.width=e+"px",o.height=r+"px"}a.restore(),a.save(),a.scale(n,n)}},getPixelSize:function t(e){var r,n=paper.agent;if(n&&n.firefox)r=t.base.call(this,e);else{var i=this._context,a=i.font;i.font=e+" serif",r=parseFloat(i.font),i.font=a}return r},getTextWidth:function(t,e){var r=this._context,n=r.font,i=0;r.font=t;for(var a=0,s=e.length;a<s;a++)i=Math.max(i,r.measureText(e[a]).width);return r.font=n,i},update:function(){if(!this._needsUpdate)return!1;var t=this._project,e=this._context,r=this._viewSize;return e.clearRect(0,0,r.width+1,r.height+1),t&&t.draw(e,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),V=i.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return Y.modifiers}}),Z=V.extend({_class:"KeyEvent",initialize:function(t,e,r,n){this.type=t,this.event=e,this.key=r,this.character=n},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),Y=new function(){function t(t){var r=t.key||t.keyIdentifier;return r=/^U\+/.test(r)?String.fromCharCode(parseInt(r.substr(2),16)):/^Arrow[A-Z]/.test(r)?r.substr(5):"Unidentified"===r||r===e?String.fromCharCode(t.keyCode):r,u[r]||(r.length>1?i.hyphenate(r):r.toLowerCase())}function a(t,e,r,n){var o,u=X._focused;if(l[e]=t,t?f[e]=r:delete f[e],e.length>1&&(o=i.camelize(e))in c){c[o]=t;var h=paper&&paper.agent;if("meta"===o&&h&&h.mac)if(t)s={};else{for(var d in s)d in f&&a(!1,d,s[d],n);s=null}}else t&&s&&(s[e]=r);u&&u._handleKeyEvent(t?"keydown":"keyup",n,e,r)}var s,o,u={"\t":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},h={tab:"\t",space:" ",enter:"\r"},l={},f={},c=new i({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var t=paper&&paper.agent;return t&&t.mac?this.meta:this.control}}});return H.add(n,{keydown:function(e){var r=t(e),n=paper&&paper.agent;r.length>1||n&&n.chrome&&(e.altKey||n.mac&&e.metaKey||!n.mac&&e.ctrlKey)?a(!0,r,h[r]||(r.length>1?"":r),e):o=r},keypress:function(e){if(o){var r=t(e),n=e.charCode,i=n>=32?String.fromCharCode(n):r.length>1?"":r;r!==o&&(r=i.toLowerCase()),a(!0,r,i,e),o=null}},keyup:function(e){var r=t(e);r in f&&a(!1,r,f[r],e)}}),H.add(r,{blur:function(t){for(var e in f)a(!1,e,f[e],t)}}),{modifiers:c,isDown:function(t){return!!l[t]}}},J=V.extend({_class:"MouseEvent",initialize:function(t,e,r,n,i){this.type=t,this.event=e,this.point=r,this.target=n,this.delta=i},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),K=V.extend({_class:"ToolEvent",_item:null,initialize:function(t,e,r){this.tool=t,this.type=e,this.event=r},_choosePoint:function(t,e){return t||(e?e.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,r=e._parent;/^(Group|CompoundPath)$/.test(r._class);)e=r,r=r._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),Q=(o.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){o.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,null!=t&&null!=this._maxDistance&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,null!=this._minDistance&&null!=t&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_handleMouseEvent:function(t,e,r,n){function i(t,e){var i=r,a=s?f._point:f._downPoint||i;if(s){if(f._moveCount&&i.equals(a))return!1;if(a&&(null!=t||null!=e)){var o=i.subtract(a),u=o.getLength();if(u<(t||0))return!1;e&&(i=a.add(o.normalize(Math.min(u,e))))}f._moveCount++}return f._point=i,f._lastPoint=a||i,n.down&&(f._moveCount=-1,f._downPoint=i,f._downCount++),!0}function a(){o&&(l=f.emit(t,new K(f,t,e))||l)}paper=this._scope,n.drag&&!this.responds(t)&&(t="mousemove");var s=n.move||n.drag,o=this.responds(t),u=this.minDistance,h=this.maxDistance,l=!1,f=this;if(n.down)i(),a();else if(n.up)i(null,h),a();else if(o)for(;i(u,h);)a();return l}}),{request:function(e){var r=new t.XMLHttpRequest;return r.open((e.method||"get").toUpperCase(),e.url,i.pick(e.async,!0)),e.mimeType&&r.overrideMimeType(e.mimeType),r.onload=function(){var t=r.status;0===t||200===t?e.onLoad&&e.onLoad.call(r,r.responseText):r.onerror()},r.onerror=function(){var t=r.status,n='Could not load "'+e.url+'" (Status: '+t+")";if(!e.onError)throw new Error(n);e.onError(n,t)},r.send(null)}}),$={canvases:[],getCanvas:function(t,e){if(!r)return null;var i,a=!0;"object"==typeof t&&(e=t.height,t=t.width),this.canvases.length?i=this.canvases.pop():(i=n.createElement("canvas"),a=!1);var s=i.getContext("2d");if(!s)throw new Error("Canvas "+i+" is unable to provide a 2D context.");return i.width===t&&i.height===e?a&&s.clearRect(0,0,t+1,e+1):(i.width=t,i.height=e),s.save(),i},getContext:function(t,e){var r=this.getCanvas(t,e);return r?r.getContext("2d"):null},release:function(t){var e=t&&t.canvas?t.canvas:t;e&&e.getContext&&(e.getContext("2d").restore(),this.canvases.push(e))}},tt=new function(){function t(t,e,r){return.2989*t+.587*e+.114*r}function e(e,r,n,i){var a=i-t(e,r,n),s=(i=t(d=e+a,p=r+a,v=n+a),_(d,p,v)),o=g(d,p,v);if(s<0){var u=i-s;d=i+(d-i)*i/u,p=i+(p-i)*i/u,v=i+(v-i)*i/u}if(o>255){var h=255-i,l=o-i;d=i+(d-i)*h/l,p=i+(p-i)*h/l,v=i+(v-i)*h/l}}function r(t,e,r){return g(t,e,r)-_(t,e,r)}function n(t,e,r,n){var i,a=[t,e,r],s=g(t,e,r),o=_(t,e,r);i=0===_(o=o===t?0:o===e?1:2,s=s===t?0:s===e?1:2)?1===g(o,s)?2:1:0,a[s]>a[o]?(a[i]=(a[i]-a[o])*n/(a[s]-a[o]),a[s]=n):a[i]=a[s]=0,a[o]=0,d=a[0],p=a[1],v=a[2]}var a,s,o,u,h,l,f,c,d,p,v,_=Math.min,g=Math.max,m=Math.abs,y={multiply:function(){d=h*a/255,p=l*s/255,v=f*o/255},screen:function(){d=h+a-h*a/255,p=l+s-l*s/255,v=f+o-f*o/255},overlay:function(){d=h<128?2*h*a/255:255-2*(255-h)*(255-a)/255,p=l<128?2*l*s/255:255-2*(255-l)*(255-s)/255,v=f<128?2*f*o/255:255-2*(255-f)*(255-o)/255},"soft-light":function(){var t=a*h/255;d=t+h*(255-(255-h)*(255-a)/255-t)/255,p=(t=s*l/255)+l*(255-(255-l)*(255-s)/255-t)/255,v=(t=o*f/255)+f*(255-(255-f)*(255-o)/255-t)/255},"hard-light":function(){d=a<128?2*a*h/255:255-2*(255-a)*(255-h)/255,p=s<128?2*s*l/255:255-2*(255-s)*(255-l)/255,v=o<128?2*o*f/255:255-2*(255-o)*(255-f)/255},"color-dodge":function(){d=0===h?0:255===a?255:_(255,255*h/(255-a)),p=0===l?0:255===s?255:_(255,255*l/(255-s)),v=0===f?0:255===o?255:_(255,255*f/(255-o))},"color-burn":function(){d=255===h?255:0===a?0:g(0,255-255*(255-h)/a),p=255===l?255:0===s?0:g(0,255-255*(255-l)/s),v=255===f?255:0===o?0:g(0,255-255*(255-f)/o)},darken:function(){d=h<a?h:a,p=l<s?l:s,v=f<o?f:o},lighten:function(){d=h>a?h:a,p=l>s?l:s,v=f>o?f:o},difference:function(){(d=h-a)<0&&(d=-d),(p=l-s)<0&&(p=-p),(v=f-o)<0&&(v=-v)},exclusion:function(){d=h+a*(255-h-h)/255,p=l+s*(255-l-l)/255,v=f+o*(255-f-f)/255},hue:function(){n(a,s,o,r(h,l,f)),e(d,p,v,t(h,l,f))},saturation:function(){n(h,l,f,r(a,s,o)),e(d,p,v,t(h,l,f))},luminosity:function(){e(h,l,f,t(a,s,o))},color:function(){e(a,s,o,t(h,l,f))},add:function(){d=_(h+a,255),p=_(l+s,255),v=_(f+o,255)},subtract:function(){d=g(h-a,0),p=g(l-s,0),v=g(f-o,0)},average:function(){d=(h+a)/2,p=(l+s)/2,v=(f+o)/2},negation:function(){d=255-m(255-a-h),p=255-m(255-s-l),v=255-m(255-o-f)}},b=this.nativeModes=i.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],(function(t){this[t]=!0}),{}),w=$.getContext(1,1);w&&(i.each(y,(function(t,e){var r="darken"===e,n=!1;w.save();try{w.fillStyle=r?"#300":"#a00",w.fillRect(0,0,1,1),w.globalCompositeOperation=e,w.globalCompositeOperation===e&&(w.fillStyle=r?"#a00":"#300",w.fillRect(0,0,1,1),n=w.getImageData(0,0,1,1).data[0]!==r?170:51)}catch(t){}w.restore(),b[e]=n})),$.release(w)),this.process=function(t,e,r,n,i){var _=e.canvas,g="normal"===t;if(g||b[t])r.save(),r.setTransform(1,0,0,1,0,0),r.globalAlpha=n,g||(r.globalCompositeOperation=t),r.drawImage(_,i.x,i.y),r.restore();else{var m=y[t];if(!m)return;for(var w=r.getImageData(i.x,i.y,_.width,_.height),E=w.data,C=e.getImageData(0,0,_.width,_.height).data,D=0,S=E.length;D<S;D+=4){a=C[D],h=E[D],s=C[D+1],l=E[D+1],o=C[D+2],f=E[D+2],u=C[D+3],c=E[D+3],m();var T=u*n/255,x=1-T;E[D]=T*d+x*h,E[D+1]=T*p+x*l,E[D+2]=T*v+x*f,E[D+3]=u*n+x*c}r.putImageData(w,i.x,i.y)}}},et=new function(){function t(t,e,r){for(var n in e){var i=e[n],s=a[n];"number"==typeof i&&r&&(i=r.number(i)),s?t.setAttributeNS(s,n,i):t.setAttribute(n,i)}return t}var e="http://www.w3.org/2000/svg",r="http://www.w3.org/2000/xmlns",i="http://www.w3.org/1999/xlink",a={href:i,xlink:r,xmlns:r+"/","xmlns:xlink":r+"/"};return{svg:e,xmlns:r,xlink:i,create:function(r,i,a){return t(n.createElementNS(e,r),i,a)},get:function(t,e){var r=a[e],n=r?t.getAttributeNS(r,e):t.getAttribute(e);return"null"===n?null:n},set:t}},rt=i.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(t,e){return!e&&(t instanceof I||t instanceof C||t instanceof R)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},(function(t,e){var r=i.capitalize(e),n=t[2];this[e]={type:t[1],property:e,attribute:t[0],toSVG:n,fromSVG:n&&i.each(n,(function(t,e){this[t]=e}),{}),exportFilter:t[3],get:"get"+r,set:"set"+r}}),{});return new function(){function e(t,e,r){var n=new i,a=t.getTranslation();if(e){var s=(t=t._shiftless())._inverseTransform(a);n[r?"cx":"x"]=s.x,n[r?"cy":"y"]=s.y,a=null}if(!t.isIdentity()){var o=t.decompose();if(o){var u=[],l=o.rotation,f=o.scaling,c=o.skewing;a&&!a.isZero()&&u.push("translate("+_.point(a)+")"),l&&u.push("rotate("+_.number(l)+")"),h.isZero(f.x-1)&&h.isZero(f.y-1)||u.push("scale("+_.point(f)+")"),c.x&&u.push("skewX("+_.number(c.x)+")"),c.y&&u.push("skewY("+_.number(c.y)+")"),n.transform=u.join(" ")}else n.transform="matrix("+t.getValues().join(",")+")"}return n}function r(t,r){for(var n=e(t._matrix),i=t._children,a=et.create("g",n,_),s=0,o=i.length;s<o;s++){var u=i[s],h=d(u,r);if(h)if(u.isClipMask()){var l=et.create("clipPath");l.appendChild(h),f(u,l,"clip"),et.set(a,{"clip-path":"url(#"+l.id+")"})}else a.appendChild(h)}return a}function n(t){var r=t._type,n=t._radius,i=e(t._matrix,!0,"rectangle"!==r);if("rectangle"===r){r="rect";var a=t._size,s=a.width,o=a.height;i.x-=s/2,i.y-=o/2,i.width=s,i.height=o,n.isZero()&&(n=null)}return n&&("circle"===r?i.r=n:(i.rx=n.width,i.ry=n.height)),et.create(r,i,_)}function a(t){var e=o(t,"color");if(!e){var r,n=t.getGradient(),i=n._radial,a=t.getOrigin(),s=t.getDestination();if(i){r={cx:a.x,cy:a.y,r:a.getDistance(s)};var u=t.getHighlight();u&&(r.fx=u.x,r.fy=u.y)}else r={x1:a.x,y1:a.y,x2:s.x,y2:s.y};r.gradientUnits="userSpaceOnUse",e=et.create((i?"radial":"linear")+"Gradient",r,_);for(var h=n._stops,l=0,c=h.length;l<c;l++){var d=h[l],p=d._color,v=p.getAlpha(),g=d._offset;r={offset:null==g?l/(c-1):g},p&&(r["stop-color"]=p.toCSS(!0)),v<1&&(r["stop-opacity"]=v),e.appendChild(et.create("stop",r,_))}f(t,e,"color")}return"url(#"+e.id+")"}function s(t,e,r){var n={},s=!r&&t.getParent(),o=[];return null!=t._name&&(n.id=t._name),i.each(rt,(function(e){var r=e.get,u=e.type,h=t[r]();if(e.exportFilter?e.exportFilter(t,h):!s||!i.equals(s[r](),h)){if("color"===u&&null!=h){var l=h.getAlpha();l<1&&(n[e.attribute+"-opacity"]=l)}"style"===u?o.push(e.attribute+": "+h):n[e.attribute]=null==h?"none":"color"===u?h.gradient?a(h):h.toCSS(!0):"array"===u?h.join(","):"lookup"===u?e.toSVG[h]:h}})),o.length&&(n.style=o.join(";")),1===n.opacity&&delete n.opacity,t._visible||(n.visibility="hidden"),et.set(e,n,_)}function o(t,e){return m||(m={ids:{},svgs:{}}),t&&m.svgs[e+"-"+(t._id||t.__id||(t.__id=l.get("svg")))]}function f(t,e,r){m||o();var n=m.ids[r]=(m.ids[r]||0)+1;e.id=r+"-"+n,m.svgs[r+"-"+(t._id||t.__id)]=e}function c(e,r){var n=e,i=null;if(m){for(var a in n="svg"===e.nodeName.toLowerCase()&&e,m.svgs)i||(n||(n=et.create("svg")).appendChild(e),i=n.insertBefore(et.create("defs"),n.firstChild)),i.appendChild(m.svgs[a]);m=null}return r.asString?(new t.XMLSerializer).serializeToString(n):n}function d(t,e,r){var n=w[t._class],i=n&&n(t,e);if(i){var a=e.onExport;a&&(i=a(t,i,e)||i);var o=JSON.stringify(t._data);o&&"{}"!==o&&"null"!==o&&i.setAttribute("data-paper-data",o)}return i&&s(t,i,r)}function p(t){return t||(t={}),_=new u(t.precision),t}var _,m,w={Group:r,Layer:r,Raster:function(t,r){var n=e(t._matrix,!0),i=t.getSize(),a=t.getImage();return n.x-=i.width/2,n.y-=i.height/2,n.width=i.width,n.height=i.height,n.href=0==r.embedImages&&a&&a.src||t.toDataURL(),et.create("image",n,_)},Path:function(t,r){var i=r.matchShapes;if(i){var a=t.toShape(!1);if(a)return n(a)}var s,o=t._segments,u=o.length,h=e(t._matrix);if(i&&u>=2&&!t.hasHandles())if(u>2){s=t._closed?"polygon":"polyline";for(var l=[],f=0;f<u;f++)l.push(_.point(o[f]._point));h.points=l.join(" ")}else{s="line";var c=o[0]._point,d=o[1]._point;h.set({x1:c.x,y1:c.y,x2:d.x,y2:d.y})}else s="path",h.d=t.getPathData(null,r.precision);return et.create(s,h,_)},Shape:n,CompoundPath:function(t,r){var n=e(t._matrix),i=t.getPathData(null,r.precision);return i&&(n.d=i),et.create("path",n,_)},SymbolItem:function(t,r){var n=e(t._matrix,!0),i=t._definition,a=o(i,"symbol"),s=i._item,u=s.getBounds();return a||((a=et.create("symbol",{viewBox:_.rectangle(u)})).appendChild(d(s,r)),f(i,a,"symbol")),n.href="#"+a.id,n.x+=u.x,n.y+=u.y,n.width=u.width,n.height=u.height,n.overflow="visible",et.create("use",n,_)},PointText:function(t){var r=et.create("text",e(t._matrix,!0),_);return r.textContent=t._content,r}};b.inject({exportSVG:function(t){return c(d(this,t=p(t),!0),t)}}),y.inject({exportSVG:function(t){t=p(t);var r=this._children,n=this.getView(),a=i.pick(t.bounds,"view"),s=t.matrix||"view"===a&&n._matrix,o=s&&g.read([s]),u="view"===a?new v([0,0],n.getViewSize()):"content"===a?b._getBounds(r,o,{stroke:!0}).rect:v.read([a],0,{readNull:!0}),h={version:"1.1",xmlns:et.svg,"xmlns:xlink":et.xlink};u&&(h.width=u.width,h.height=u.height,(u.x||u.y)&&(h.viewBox=_.rectangle(u)));var l=et.create("svg",h,_),f=l;o&&!o.isIdentity()&&(f=l.appendChild(et.create("g",e(o),_)));for(var m=0,y=r.length;m<y;m++)f.appendChild(d(r[m],t,!0));return c(l,t)}})},new function(){function a(t,e,r,n,i){var a=et.get(t,e),s=null==a?n?null:r?"":0:r?a:parseFloat(a);return/%\s*$/.test(a)?s/100*(i?1:A[/x|^width/.test(e)?"width":"height"]):s}function s(t,e,r,n,i){return e=a(t,e||"x",!1,n,i),r=a(t,r||"y",!1,n,i),!n||null!=e&&null!=r?new f(e,r):null}function o(t,e,r,n,i){return e=a(t,e||"width",!1,n,i),r=a(t,r||"height",!1,n,i),!n||null!=e&&null!=r?new d(e,r):null}function u(t,e,r){return"none"===t?null:"number"===e?parseFloat(t):"array"===e?t?t.split(/[\s,]+/g).map(parseFloat):[]:"color"===e?S(t)||t:"lookup"===e?r[t]:t}function h(t,e,r,n){var i=t.childNodes,a="clippath"===e,s="defs"===e,o=new w,u=o._project,h=u._currentStyle,l=[];if(a||s||(o=E(o,t,n),u._currentStyle=o._style.clone()),n)for(var f=t.querySelectorAll("defs"),c=0,d=f.length;c<d;c++)x(f[c],r,!1);for(c=0,d=i.length;c<d;c++){var p,v=i[c];1!==v.nodeType||/^defs$/i.test(v.nodeName)||!(p=x(v,r,!1))||p instanceof T||l.push(p)}return o.addChildren(l),a&&(o=E(o.reduce(),t,n)),u._currentStyle=h,(a||s)&&(o.remove(),o=null),o}function l(t,e){for(var r=t.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),n=[],i=0,a=r.length;i<a;i+=2)n.push(new f(parseFloat(r[i]),parseFloat(r[i+1])));var s=new k(n);return"polygon"===e&&s.closePath(),s}function c(t,e){var r,n=(a(t,"href",!0)||"").substring(1),i="radialgradient"===e;if(n)(r=P[n].getGradient())._radial^i&&((r=r.clone())._radial=i);else{for(var o=t.childNodes,u=[],h=0,l=o.length;h<l;h++){var f=o[h];1===f.nodeType&&u.push(E(new G,f))}r=new z(u,i)}var c,d,p,v="userSpaceOnUse"!==a(t,"gradientUnits",!0);return i?(d=(c=s(t,"cx","cy",!1,v)).add(a(t,"r",!1,!1,v),0),p=s(t,"fx","fy",!0,v)):(c=s(t,"x1","y1",!1,v),d=s(t,"x2","y2",!1,v)),E(new N(r,c,d,p),t)._scaleToBounds=v,null}function p(t,e,r,n){if(t.transform){for(var i=(n.getAttribute(r)||"").split(/\)\s*/g),a=new g,s=0,o=i.length;s<o;s++){var u=i[s];if(!u)break;for(var h=u.split(/\(\s*/),l=h[0],f=h[1].split(/[\s,]+/g),c=0,d=f.length;c<d;c++)f[c]=parseFloat(f[c]);switch(l){case"matrix":a.append(new g(f[0],f[1],f[2],f[3],f[4],f[5]));break;case"rotate":a.rotate(f[0],f[1],f[2]);break;case"translate":a.translate(f[0],f[1]);break;case"scale":a.scale(f);break;case"skewX":a.skew(f[0],0);break;case"skewY":a.skew(0,f[0])}}t.transform(a)}}function _(t,e,r){var n="fill-opacity"===r?"getFillColor":"getStrokeColor",i=t[n]&&t[n]();i&&i.setAlpha(parseFloat(e))}function m(t,r,n){var a=t.attributes[r],s=a&&a.value;if(!s){var o=i.camelize(r);(s=t.style[o])||n.node[o]===n.parent[o]||(s=n.node[o])}return s?"none"===s?null:s:e}function E(t,r,n){if(r.style){var a=r.parentNode,s={node:q.getStyles(r)||{},parent:!n&&!/^defs$/i.test(a.tagName)&&q.getStyles(a)||{}};i.each(U,(function(n,i){var a=m(r,i,s);t=a!==e&&n(t,a,i,r,s)||t}))}return t}function S(t){var e=t&&t.match(/\((?:["'#]*)([^"')]+)/),n=e&&e[1],i=n&&P[r?n.replace(r.location.href.split("#")[0]+"#",""):n];return i&&i._scaleToBounds&&((i=i.clone())._scaleToBounds=!0),i}function x(t,e,r){var a,s,u,h=t.nodeName.toLowerCase(),l="#document"!==h,f=n.body;r&&l&&(A=paper.getView().getSize(),A=o(t,null,null,!0)||A,a=et.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),s=t.parentNode,u=t.nextSibling,a.appendChild(t),f.appendChild(a));var c=paper.settings,d=c.applyMatrix,p=c.insertItems;c.applyMatrix=!1,c.insertItems=!1;var v=M[h],_=v&&v(t,h,e,r)||null;if(c.insertItems=p,c.applyMatrix=d,_){!l||_ instanceof w||(_=E(_,t,r));var g=e.onImport,m=l&&t.getAttribute("data-paper-data");g&&(_=g(t,_,e)||_),e.expandShapes&&_ instanceof C&&(_.remove(),_=_.toPath()),m&&(_._data=JSON.parse(m))}return a&&(f.removeChild(a),s&&(u?s.insertBefore(t,u):s.appendChild(t))),r&&(P={},_&&i.pick(e.applyMatrix,d)&&_.matrix.apply(!0,!0)),_}function F(r,i,a){function s(n){try{var s="object"==typeof n?n:(new t.DOMParser).parseFromString(n,"image/svg+xml");if(!s.nodeName)throw s=null,new Error("Unsupported SVG source: "+r);paper=u,h=x(s,i,!0),i&&!1===i.insert||a._insertItem(e,h);var l=i.onLoad;l&&l(h,n)}catch(t){o(t)}}function o(t,e){var r=i.onError;if(!r)throw new Error(t);r(t,e)}if(!r)return null;i="function"==typeof i?{onLoad:i}:i||{};var u=paper,h=null;if("string"!=typeof r||/^.*</.test(r)){if("undefined"!=typeof File&&r instanceof File){var l=new FileReader;return l.onload=function(){s(l.result)},l.onerror=function(){o(l.error)},l.readAsText(r)}s(r)}else{var f=n.getElementById(r);f?s(f):Q.request({url:r,async:!0,onLoad:s,onError:o})}return h}var A,P={},M={"#document":function(t,e,r,n){for(var i=t.childNodes,a=0,s=i.length;a<s;a++){var o=i[a];if(1===o.nodeType)return x(o,r,n)}},g:h,svg:h,clippath:h,polygon:l,polyline:l,path:function(t){return I.create(t.getAttribute("d"))},lineargradient:c,radialgradient:c,image:function(t){var e=new D(a(t,"href",!0));return e.on("load",(function(){var e=o(t);this.setSize(e);var r=this._matrix._transformPoint(s(t).add(e.divide(2)));this.translate(r)})),e},symbol:function(t,e,r,n){return new T(h(t,e,r,n),!0)},defs:h,use:function(t){var e=(a(t,"href",!0)||"").substring(1),r=P[e],n=s(t);return r?r instanceof T?r.place(n):r.clone().translate(n):null},circle:function(t){return new C.Circle(s(t,"cx","cy"),a(t,"r"))},ellipse:function(t){return new C.Ellipse({center:s(t,"cx","cy"),radius:o(t,"rx","ry")})},rect:function(t){return new C.Rectangle(new v(s(t),o(t)),o(t,"rx","ry"))},line:function(t){return new k.Line(s(t,"x1","y1"),s(t,"x2","y2"))},text:function(t){var e=new L(s(t).add(s(t,"dx","dy")));return e.setContent(t.textContent.trim()||""),e}},U=i.set(i.each(rt,(function(t){this[t.attribute]=function(e,r){if(e[t.set]&&(e[t.set](u(r,t.type,t.fromSVG)),"color"===t.type)){var n=e[t.get]();if(n&&n._scaleToBounds){var i=e.getBounds();n.transform((new g).translate(i.getPoint()).scale(i.getSize()))}}}}),{}),{id:function(t,e){P[e]=t,t.setName&&t.setName(e)},"clip-path":function(t,e){var r=S(e);if(r){if((r=r.clone()).setClipMask(!0),!(t instanceof w))return new w(r,t);t.insertChild(0,r)}},gradientTransform:p,transform:p,"fill-opacity":_,"stroke-opacity":_,visibility:function(t,e){t.setVisible&&t.setVisible("visible"===e)},display:function(t,e){t.setVisible&&t.setVisible(null!==e)},"stop-color":function(t,e){t.setColor&&t.setColor(e)},"stop-opacity":function(t,e){t._color&&t._color.setAlpha(parseFloat(e))},offset:function(t,e){if(t.setOffset){var r=e.match(/(.*)%$/);t.setOffset(r?r[1]/100:parseFloat(e))}},viewBox:function(t,e,r,n,i){var a,s=new v(u(e,"array")),h=o(n,null,null,!0);if(t instanceof w){var l=h?h.divide(s.getSize()):1,f=(new g).scale(l).translate(s.getPoint().negate());a=t}else t instanceof T&&(h&&s.setSize(h),a=t._item);if(a){if("visible"!==m(n,"overflow",i)){var c=new C.Rectangle(s);c.setClipMask(!0),a.addChild(c)}f&&a.transform(f)}}});b.inject({importSVG:function(t,e){return F(t,e,this)}}),y.inject({importSVG:function(t,e){return this.activate(),F(t,e,this)}})},(paper=new(s.inject(i.exports,{Base:i,Numerical:h,Key:Y,DomEvent:H,DomElement:q,document:n,window:r,Symbol:T,PlacedSymbol:S}))).agent.node&&require("./node/extend.js")(paper),"function"==typeof define&&define.amd?define("paper",paper):"object"==typeof module&&module&&(module.exports=paper),paper}.call(this,"object"==typeof self?self:null);if(function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("UnicodeBidirectional",[],e):"object"==typeof exports?exports.UnicodeBidirectional=e():t.UnicodeBidirectional=e()}(this,(function(){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=13)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isNonFormatting=e.isX9ControlCharacter=e.isStrong=e.isPDI=e.isIsolateInitiator=e.isR=e.isNI=e.isET=e.MAX_DEPTH=e.oppositeBracket=e.isClosingBracket=e.isOpeningBracket=e.RIGHT_CURLY=e.LEFT_CURLY=e.RIGHT_SQUARE=e.LEFT_SQUARE=e.RIGHT_PAR=e.LEFT_PAR=e.WS1=e.BN1=e.EN1=e.AN1=e.ON1=e.R1=e.L1=e.S1=e.B1=e.G=e.F=e.E=e.D=e.C=e.B=e.A=e.RLO=e.RLM=e.RLI=e.RLE=e.PDI=e.PDF=e.LRO=e.LRM=e.LRI=e.LRE=e.FSI=e.ALM=void 0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(2)),i=function(t){return(0,n.default)([40,91,123,9001,12296],t)?"Open":(0,n.default)([41,93,125,9002,12297],t)?"Close":"None"};e.ALM=1564,e.FSI=8296,e.LRE=8234,e.LRI=8294,e.LRM=8206,e.LRO=8237,e.PDF=8236,e.PDI=8297,e.RLE=8235,e.RLI=8295,e.RLM=8207,e.RLO=8238,e.A=65,e.B=66,e.C=67,e.D=68,e.E=69,e.F=70,e.G=71,e.B1=8233,e.S1=9,e.L1=109,e.R1=1488,e.ON1=34,e.AN1=1633,e.EN1=50,e.BN1=0,e.WS1=32,e.LEFT_PAR=40,e.RIGHT_PAR=41,e.LEFT_SQUARE=91,e.RIGHT_SQUARE=93,e.LEFT_CURLY=123,e.RIGHT_CURLY=125,e.isOpeningBracket=function(t,e){return"Open"===i(t)&&"ON"===e},e.isClosingBracket=function(t,e){return"Close"===i(t)&&"ON"===e},e.oppositeBracket=function(t){return 40==t?41:41==t?40:91==t?93:93==t?91:123==t?125:125==t?123:9001==t?9002:9002==t?9001:12296==t?12297:12297==t?12296:"None"},e.MAX_DEPTH=125,e.isET=function(t){return"ET"===t},e.isNI=function(t){return(0,n.default)(["B","S","WS","ON","FSI","LRI","RLI","PDI"],t)},e.isR=function(t){return(0,n.default)(["R","AN","EN"],t)},e.isIsolateInitiator=function(t){return(0,n.default)(["LRI","RLI","FSI"],t)},e.isPDI=function(t){return 8297===t},e.isStrong=function(t){return(0,n.default)(["L","R","AL"],t)},e.isX9ControlCharacter=function(t){return(0,n.default)(["RLE","LRE","RLO","LRO","PDF","BN"],t)},e.isNonFormatting=function(t){return(0,n.default)(["B","BN","RLE","LRE","RLO","LRO","PDF","RLI","LRI","FSI","PDI"],t)}},function(t,e,r){t.exports=function(){"use strict";function t(t,e){e&&(t.prototype=Object.create(e.prototype)),t.prototype.constructor=t}function e(t){return a(t)?t:A(t)}function r(t){return s(t)?t:P(t)}function n(t){return o(t)?t:M(t)}function i(t){return a(t)&&!u(t)?t:I(t)}function a(t){return!(!t||!t[He])}function s(t){return!(!t||!t[Xe])}function o(t){return!(!t||!t[We])}function u(t){return s(t)||o(t)}function h(t){return!(!t||!t[Ve])}function l(t){return t.value=!1,t}function f(t){t&&(t.value=!0)}function c(){}function d(t,e){e=e||0;for(var r=Math.max(0,t.length-e),n=new Array(r),i=0;i<r;i++)n[i]=t[i+e];return n}function p(t){return void 0===t.size&&(t.size=t.__iterate(_)),t.size}function v(t,e){if("number"!=typeof e){var r=e>>>0;if(""+r!==e||4294967295===r)return NaN;e=r}return e<0?p(t)+e:e}function _(){return!0}function g(t,e,r){return(0===t||void 0!==r&&t<=-r)&&(void 0===e||void 0!==r&&e>=r)}function m(t,e){return b(t,e,0)}function y(t,e){return b(t,e,e)}function b(t,e,r){return void 0===t?r:t<0?Math.max(0,e+t):void 0===e?t:Math.min(e,t)}function w(t){this.next=t}function E(t,e,r,n){var i=0===t?e:1===t?r:[e,r];return n?n.value=i:n={value:i,done:!1},n}function C(){return{value:void 0,done:!0}}function D(t){return!!x(t)}function S(t){return t&&"function"==typeof t.next}function T(t){var e=x(t);return e&&e.call(t)}function x(t){var e=t&&(nr&&t[nr]||t[ir]);if("function"==typeof e)return e}function F(t){return t&&"number"==typeof t.length}function A(t){return null==t?L():a(t)?t.toSeq():function(t){var e=G(t)||"object"==typeof t&&new U(t);if(!e)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return e}(t)}function P(t){return null==t?L().toKeyedSeq():a(t)?s(t)?t.toSeq():t.fromEntrySeq():N(t)}function M(t){return null==t?L():a(t)?s(t)?t.entrySeq():t.toIndexedSeq():z(t)}function I(t){return(null==t?L():a(t)?s(t)?t.entrySeq():t:z(t)).toSetSeq()}function k(t){this._array=t,this.size=t.length}function U(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}function O(t){this._iterable=t,this.size=t.length||t.size}function B(t){this._iterator=t,this._iteratorCache=[]}function R(t){return!(!t||!t[hr])}function L(){return sr||(sr=new k([]))}function N(t){var e=Array.isArray(t)?new k(t).fromEntrySeq():S(t)?new B(t).fromEntrySeq():D(t)?new O(t).fromEntrySeq():"object"==typeof t?new U(t):void 0;if(!e)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return e}function z(t){var e=G(t);if(!e)throw new TypeError("Expected Array or iterable object of values: "+t);return e}function G(t){return F(t)?new k(t):S(t)?new B(t):D(t)?new O(t):void 0}function j(t,e,r,n){var i=t._cache;if(i){for(var a=i.length-1,s=0;s<=a;s++){var o=i[r?a-s:s];if(!1===e(o[1],n?o[0]:s,t))return s+1}return s}return t.__iterateUncached(e,r)}function q(t,e,r,n){var i=t._cache;if(i){var a=i.length-1,s=0;return new w((function(){var t=i[r?a-s:s];return s++>a?{value:void 0,done:!0}:E(e,n?t[0]:s-1,t[1])}))}return t.__iteratorUncached(e,r)}function H(t,e){return e?function t(e,r,n,i){return Array.isArray(r)?e.call(i,n,M(r).map((function(n,i){return t(e,n,i,r)}))):W(r)?e.call(i,n,P(r).map((function(n,i){return t(e,n,i,r)}))):r}(e,t,"",{"":t}):X(t)}function X(t){return Array.isArray(t)?M(t).map(X).toList():W(t)?P(t).map(X).toMap():t}function W(t){return t&&(t.constructor===Object||void 0===t.constructor)}function V(t,e){if(t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if((t=t.valueOf())===(e=e.valueOf())||t!=t&&e!=e)return!0;if(!t||!e)return!1}return!("function"!=typeof t.equals||"function"!=typeof e.equals||!t.equals(e))}function Z(t,e){if(t===e)return!0;if(!a(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||s(t)!==s(e)||o(t)!==o(e)||h(t)!==h(e))return!1;if(0===t.size&&0===e.size)return!0;var r=!u(t);if(h(t)){var n=t.entries();return e.every((function(t,e){var i=n.next().value;return i&&V(i[1],t)&&(r||V(i[0],e))}))&&n.next().done}var i=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{i=!0;var l=t;t=e,e=l}var f=!0,c=e.__iterate((function(e,n){if(r?!t.has(e):i?!V(e,t.get(n,Ke)):!V(t.get(n,Ke),e))return f=!1,!1}));return f&&t.size===c}function Y(t,e){if(!(this instanceof Y))return new Y(t,e);if(this._value=t,this.size=void 0===e?1/0:Math.max(0,e),0===this.size){if(or)return or;or=this}}function J(t,e){if(!t)throw new Error(e)}function K(t,e,r){if(!(this instanceof K))return new K(t,e,r);if(J(0!==r,"Cannot step a Range by 0"),t=t||0,void 0===e&&(e=1/0),r=void 0===r?1:Math.abs(r),e<t&&(r=-r),this._start=t,this._end=e,this._step=r,this.size=Math.max(0,Math.ceil((e-t)/r-1)+1),0===this.size){if(ur)return ur;ur=this}}function Q(){throw TypeError("Abstract")}function $(){}function tt(){}function et(){}function rt(t){return t>>>1&1073741824|3221225471&t}function nt(t){if(!1===t||null==t)return 0;if("function"==typeof t.valueOf&&(!1===(t=t.valueOf())||null==t))return 0;if(!0===t)return 1;var e=typeof t;if("number"===e){if(t!=t||t===1/0)return 0;var r=0|t;for(r!==t&&(r^=4294967295*t);t>4294967295;)r^=t/=4294967295;return rt(r)}if("string"===e)return t.length>gr?function(t){var e=br[t];return void 0===e&&(e=it(t),yr===mr&&(yr=0,br={}),yr++,br[t]=e),e}(t):it(t);if("function"==typeof t.hashCode)return t.hashCode();if("object"===e)return function(t){var e;if(pr&&void 0!==(e=lr.get(t)))return e;if(void 0!==(e=t[_r]))return e;if(!dr){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[_r]))return e;if(void 0!==(e=function(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}(t)))return e}if(e=++vr,1073741824&vr&&(vr=0),pr)lr.set(t,e);else{if(void 0!==cr&&!1===cr(t))throw new Error("Non-extensible objects are not allowed as keys.");if(dr)Object.defineProperty(t,_r,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[_r]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[_r]=e}}return e}(t);if("function"==typeof t.toString)return it(t.toString());throw new Error("Value type "+e+" cannot be hashed.")}function it(t){for(var e=0,r=0;r<t.length;r++)e=31*e+t.charCodeAt(r)|0;return rt(e)}function at(t){J(t!==1/0,"Cannot perform this action with an infinite size.")}function st(t){return null==t?gt():ot(t)&&!h(t)?t:gt().withMutations((function(e){var n=r(t);at(n.size),n.forEach((function(t,r){return e.set(r,t)}))}))}function ot(t){return!(!t||!t[wr])}function ut(t,e){this.ownerID=t,this.entries=e}function ht(t,e,r){this.ownerID=t,this.bitmap=e,this.nodes=r}function lt(t,e,r){this.ownerID=t,this.count=e,this.nodes=r}function ft(t,e,r){this.ownerID=t,this.keyHash=e,this.entries=r}function ct(t,e,r){this.ownerID=t,this.keyHash=e,this.entry=r}function dt(t,e,r){this._type=e,this._reverse=r,this._stack=t._root&&vt(t._root)}function pt(t,e){return E(t,e[0],e[1])}function vt(t,e){return{node:t,index:0,__prev:e}}function _t(t,e,r,n){var i=Object.create(Er);return i.size=t,i._root=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function gt(){return Cr||(Cr=_t(0))}function mt(t,e,r){var n,i;if(t._root){var a=l(Qe),s=l($e);if(n=yt(t._root,t.__ownerID,0,void 0,e,r,a,s),!s.value)return t;i=t.size+(a.value?r===Ke?-1:1:0)}else{if(r===Ke)return t;i=1,n=new ut(t.__ownerID,[[e,r]])}return t.__ownerID?(t.size=i,t._root=n,t.__hash=void 0,t.__altered=!0,t):n?_t(i,n):gt()}function yt(t,e,r,n,i,a,s,o){return t?t.update(e,r,n,i,a,s,o):a===Ke?t:(f(o),f(s),new ct(e,n,[i,a]))}function bt(t){return t.constructor===ct||t.constructor===ft}function wt(t,e,r,n,i){if(t.keyHash===n)return new ft(e,n,[t.entry,i]);var a,s=(0===r?t.keyHash:t.keyHash>>>r)&Je,o=(0===r?n:n>>>r)&Je;return new ht(e,1<<s|1<<o,s===o?[wt(t,e,r+Ze,n,i)]:(a=new ct(e,n,i),s<o?[t,a]:[a,t]))}function Et(t,e,r,n){t||(t=new c);for(var i=new ct(t,nt(r),[r,n]),a=0;a<e.length;a++){var s=e[a];i=i.update(t,0,void 0,s[0],s[1])}return i}function Ct(t,e,n){for(var i=[],s=0;s<n.length;s++){var o=n[s],u=r(o);a(o)||(u=u.map((function(t){return H(t)}))),i.push(u)}return Tt(t,e,i)}function Dt(t,e,r){return t&&t.mergeDeep&&a(e)?t.mergeDeep(e):V(t,e)?t:e}function St(t){return function(e,r,n){if(e&&e.mergeDeepWith&&a(r))return e.mergeDeepWith(t,r);var i=t(e,r,n);return V(e,i)?e:i}}function Tt(t,e,r){return 0===(r=r.filter((function(t){return 0!==t.size}))).length?t:0!==t.size||t.__ownerID||1!==r.length?t.withMutations((function(t){for(var n=e?function(r,n){t.update(n,Ke,(function(t){return t===Ke?r:e(t,r,n)}))}:function(e,r){t.set(r,e)},i=0;i<r.length;i++)r[i].forEach(n)})):t.constructor(r[0])}function xt(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,127&(t+=t>>8)+(t>>16)}function Ft(t,e,r,n){var i=n?t:d(t);return i[e]=r,i}function At(t){var e=Ut();if(null==t)return e;if(Pt(t))return t;var r=n(t),i=r.size;return 0===i?e:(at(i),i>0&&i<Ye?kt(0,i,Ze,null,new Mt(r.toArray())):e.withMutations((function(t){t.setSize(i),r.forEach((function(e,r){return t.set(r,e)}))})))}function Pt(t){return!(!t||!t[xr])}function Mt(t,e){this.array=t,this.ownerID=e}function It(t,e){function r(t,e,r){return 0===e?n(t,r):i(t,e,r)}function n(t,r){var n=r===o?u&&u.array:t&&t.array,i=r>a?0:a-r,h=s-r;return h>Ye&&(h=Ye),function(){if(i===h)return Mr;var t=e?--h:i++;return n&&n[t]}}function i(t,n,i){var o,u=t&&t.array,h=i>a?0:a-i>>n,l=1+(s-i>>n);return l>Ye&&(l=Ye),function(){for(;;){if(o){var t=o();if(t!==Mr)return t;o=null}if(h===l)return Mr;var a=e?--l:h++;o=r(u&&u[a],n-Ze,i+(a<<n))}}}var a=t._origin,s=t._capacity,o=zt(s),u=t._tail;return r(t._root,t._level,0)}function kt(t,e,r,n,i,a,s){var o=Object.create(Fr);return o.size=e-t,o._origin=t,o._capacity=e,o._level=r,o._root=n,o._tail=i,o.__ownerID=a,o.__hash=s,o.__altered=!1,o}function Ut(){return Ar||(Ar=kt(0,0,Ze))}function Ot(t,e,r,n,i,a){var s,o=n>>>r&Je,u=t&&o<t.array.length;if(!u&&void 0===i)return t;if(r>0){var h=t&&t.array[o],l=Ot(h,e,r-Ze,n,i,a);return l===h?t:((s=Bt(t,e)).array[o]=l,s)}return u&&t.array[o]===i?t:(f(a),s=Bt(t,e),void 0===i&&o===s.array.length-1?s.array.pop():s.array[o]=i,s)}function Bt(t,e){return e&&t&&e===t.ownerID?t:new Mt(t?t.array.slice():[],e)}function Rt(t,e){if(e>=zt(t._capacity))return t._tail;if(e<1<<t._level+Ze){for(var r=t._root,n=t._level;r&&n>0;)r=r.array[e>>>n&Je],n-=Ze;return r}}function Lt(t,e,r){void 0!==e&&(e|=0),void 0!==r&&(r|=0);var n=t.__ownerID||new c,i=t._origin,a=t._capacity,s=i+e,o=void 0===r?a:r<0?a+r:i+r;if(s===i&&o===a)return t;if(s>=o)return t.clear();for(var u=t._level,h=t._root,l=0;s+l<0;)h=new Mt(h&&h.array.length?[void 0,h]:[],n),l+=1<<(u+=Ze);l&&(s+=l,i+=l,o+=l,a+=l);for(var f=zt(a),d=zt(o);d>=1<<u+Ze;)h=new Mt(h&&h.array.length?[h]:[],n),u+=Ze;var p=t._tail,v=d<f?Rt(t,o-1):d>f?new Mt([],n):p;if(p&&d>f&&s<a&&p.array.length){for(var _=h=Bt(h,n),g=u;g>Ze;g-=Ze){var m=f>>>g&Je;_=_.array[m]=Bt(_.array[m],n)}_.array[f>>>Ze&Je]=p}if(o<a&&(v=v&&v.removeAfter(n,0,o)),s>=d)s-=d,o-=d,u=Ze,h=null,v=v&&v.removeBefore(n,0,s);else if(s>i||d<f){for(l=0;h;){var y=s>>>u&Je;if(y!==d>>>u&Je)break;y&&(l+=(1<<u)*y),u-=Ze,h=h.array[y]}h&&s>i&&(h=h.removeBefore(n,u,s-l)),h&&d<f&&(h=h.removeAfter(n,u,d-l)),l&&(s-=l,o-=l)}return t.__ownerID?(t.size=o-s,t._origin=s,t._capacity=o,t._level=u,t._root=h,t._tail=v,t.__hash=void 0,t.__altered=!0,t):kt(s,o,u,h,v)}function Nt(t,e,r){for(var i=[],s=0,o=0;o<r.length;o++){var u=r[o],h=n(u);h.size>s&&(s=h.size),a(u)||(h=h.map((function(t){return H(t)}))),i.push(h)}return s>t.size&&(t=t.setSize(s)),Tt(t,e,i)}function zt(t){return t<Ye?0:t-1>>>Ze<<Ze}function Gt(t){return null==t?Ht():jt(t)?t:Ht().withMutations((function(e){var n=r(t);at(n.size),n.forEach((function(t,r){return e.set(r,t)}))}))}function jt(t){return ot(t)&&h(t)}function qt(t,e,r,n){var i=Object.create(Gt.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=r,i.__hash=n,i}function Ht(){return Pr||(Pr=qt(gt(),Ut()))}function Xt(t,e,r){var n,i,a=t._map,s=t._list,o=a.get(e),u=void 0!==o;if(r===Ke){if(!u)return t;s.size>=Ye&&s.size>=2*a.size?(n=(i=s.filter((function(t,e){return void 0!==t&&o!==e}))).toKeyedSeq().map((function(t){return t[0]})).flip().toMap(),t.__ownerID&&(n.__ownerID=i.__ownerID=t.__ownerID)):(n=a.remove(e),i=o===s.size-1?s.pop():s.set(o,void 0))}else if(u){if(r===s.get(o)[1])return t;n=a,i=s.set(o,[e,r])}else n=a.set(e,s.size),i=s.set(s.size,[e,r]);return t.__ownerID?(t.size=n.size,t._map=n,t._list=i,t.__hash=void 0,t):qt(n,i)}function Wt(t,e){this._iter=t,this._useKeys=e,this.size=t.size}function Vt(t){this._iter=t,this.size=t.size}function Zt(t){this._iter=t,this.size=t.size}function Yt(t){this._iter=t,this.size=t.size}function Jt(t){var e=ce(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=de,e.__iterateUncached=function(e,r){var n=this;return t.__iterate((function(t,r){return!1!==e(r,t,n)}),r)},e.__iteratorUncached=function(e,r){if(e===rr){var n=t.__iterator(e,r);return new w((function(){var t=n.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t}))}return t.__iterator(e===er?tr:er,r)},e}function Kt(t,e,r){var n=ce(t);return n.size=t.size,n.has=function(e){return t.has(e)},n.get=function(n,i){var a=t.get(n,Ke);return a===Ke?i:e.call(r,a,n,t)},n.__iterateUncached=function(n,i){var a=this;return t.__iterate((function(t,i,s){return!1!==n(e.call(r,t,i,s),i,a)}),i)},n.__iteratorUncached=function(n,i){var a=t.__iterator(rr,i);return new w((function(){var i=a.next();if(i.done)return i;var s=i.value,o=s[0];return E(n,o,e.call(r,s[1],o,t),i)}))},n}function Qt(t,e){var r=ce(t);return r._iter=t,r.size=t.size,r.reverse=function(){return t},t.flip&&(r.flip=function(){var e=Jt(t);return e.reverse=function(){return t.flip()},e}),r.get=function(r,n){return t.get(e?r:-1-r,n)},r.has=function(r){return t.has(e?r:-1-r)},r.includes=function(e){return t.includes(e)},r.cacheResult=de,r.__iterate=function(e,r){var n=this;return t.__iterate((function(t,r){return e(t,r,n)}),!r)},r.__iterator=function(e,r){return t.__iterator(e,!r)},r}function $t(t,e,r,n){var i=ce(t);return n&&(i.has=function(n){var i=t.get(n,Ke);return i!==Ke&&!!e.call(r,i,n,t)},i.get=function(n,i){var a=t.get(n,Ke);return a!==Ke&&e.call(r,a,n,t)?a:i}),i.__iterateUncached=function(i,a){var s=this,o=0;return t.__iterate((function(t,a,u){if(e.call(r,t,a,u))return o++,i(t,n?a:o-1,s)}),a),o},i.__iteratorUncached=function(i,a){var s=t.__iterator(rr,a),o=0;return new w((function(){for(;;){var a=s.next();if(a.done)return a;var u=a.value,h=u[0],l=u[1];if(e.call(r,l,h,t))return E(i,n?h:o++,l,a)}}))},i}function te(t,e,r,n){var i=t.size;if(void 0!==e&&(e|=0),void 0!==r&&(r===1/0?r=i:r|=0),g(e,r,i))return t;var a=m(e,i),s=y(r,i);if(a!=a||s!=s)return te(t.toSeq().cacheResult(),e,r,n);var o,u=s-a;u==u&&(o=u<0?0:u);var h=ce(t);return h.size=0===o?o:t.size&&o||void 0,!n&&R(t)&&o>=0&&(h.get=function(e,r){return(e=v(this,e))>=0&&e<o?t.get(e+a,r):r}),h.__iterateUncached=function(e,r){var i=this;if(0===o)return 0;if(r)return this.cacheResult().__iterate(e,r);var s=0,u=!0,h=0;return t.__iterate((function(t,r){if(!u||!(u=s++<a))return h++,!1!==e(t,n?r:h-1,i)&&h!==o})),h},h.__iteratorUncached=function(e,r){if(0!==o&&r)return this.cacheResult().__iterator(e,r);var i=0!==o&&t.__iterator(e,r),s=0,u=0;return new w((function(){for(;s++<a;)i.next();if(++u>o)return{value:void 0,done:!0};var t=i.next();return n||e===er?t:E(e,u-1,e===tr?void 0:t.value[1],t)}))},h}function ee(t,e,r,n){var i=ce(t);return i.__iterateUncached=function(i,a){var s=this;if(a)return this.cacheResult().__iterate(i,a);var o=!0,u=0;return t.__iterate((function(t,a,h){if(!o||!(o=e.call(r,t,a,h)))return u++,i(t,n?a:u-1,s)})),u},i.__iteratorUncached=function(i,a){var s=this;if(a)return this.cacheResult().__iterator(i,a);var o=t.__iterator(rr,a),u=!0,h=0;return new w((function(){var t,a,l;do{if((t=o.next()).done)return n||i===er?t:E(i,h++,i===tr?void 0:t.value[1],t);var f=t.value;a=f[0],l=f[1],u&&(u=e.call(r,l,a,s))}while(u);return i===rr?t:E(i,a,l,t)}))},i}function re(t,e){var n=s(t),i=[t].concat(e).map((function(t){return a(t)?n&&(t=r(t)):t=n?N(t):z(Array.isArray(t)?t:[t]),t})).filter((function(t){return 0!==t.size}));if(0===i.length)return t;if(1===i.length){var u=i[0];if(u===t||n&&s(u)||o(t)&&o(u))return u}var h=new k(i);return n?h=h.toKeyedSeq():o(t)||(h=h.toSetSeq()),(h=h.flatten(!0)).size=i.reduce((function(t,e){if(void 0!==t){var r=e.size;if(void 0!==r)return t+r}}),0),h}function ne(t,e,r){var n=ce(t);return n.__iterateUncached=function(n,i){var s=0,o=!1;return function t(u,h){var l=this;u.__iterate((function(i,u){return(!e||h<e)&&a(i)?t(i,h+1):!1===n(i,r?u:s++,l)&&(o=!0),!o}),i)}(t,0),s},n.__iteratorUncached=function(n,i){var s=t.__iterator(n,i),o=[],u=0;return new w((function(){for(;s;){var t=s.next();if(!1===t.done){var h=t.value;if(n===rr&&(h=h[1]),e&&!(o.length<e)||!a(h))return r?t:E(n,u++,h,t);o.push(s),s=h.__iterator(n,i)}else s=o.pop()}return{value:void 0,done:!0}}))},n}function ie(t,e,r){e||(e=pe);var n=s(t),i=0,a=t.toSeq().map((function(e,n){return[n,e,i++,r?r(e,n,t):e]})).toArray();return a.sort((function(t,r){return e(t[3],r[3])||t[2]-r[2]})).forEach(n?function(t,e){a[e].length=2}:function(t,e){a[e]=t[1]}),n?P(a):o(t)?M(a):I(a)}function ae(t,e,r){if(e||(e=pe),r){var n=t.toSeq().map((function(e,n){return[e,r(e,n,t)]})).reduce((function(t,r){return se(e,t[1],r[1])?r:t}));return n&&n[0]}return t.reduce((function(t,r){return se(e,t,r)?r:t}))}function se(t,e,r){var n=t(r,e);return 0===n&&r!==e&&(null==r||r!=r)||n>0}function oe(t,r,n){var i=ce(t);return i.size=new k(n).map((function(t){return t.size})).min(),i.__iterate=function(t,e){for(var r,n=this.__iterator(er,e),i=0;!(r=n.next()).done&&!1!==t(r.value,i++,this););return i},i.__iteratorUncached=function(t,i){var a=n.map((function(t){return t=e(t),T(i?t.reverse():t)})),s=0,o=!1;return new w((function(){var e;return o||(e=a.map((function(t){return t.next()})),o=e.some((function(t){return t.done}))),o?{value:void 0,done:!0}:E(t,s++,r.apply(null,e.map((function(t){return t.value}))))}))},i}function ue(t,e){return R(t)?e:t.constructor(e)}function he(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function le(t){return at(t.size),p(t)}function fe(t){return s(t)?r:o(t)?n:i}function ce(t){return Object.create((s(t)?P:o(t)?M:I).prototype)}function de(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):A.prototype.cacheResult.call(this)}function pe(t,e){return t>e?1:t<e?-1:0}function ve(t){var r=T(t);if(!r){if(!F(t))throw new TypeError("Expected iterable or array-like: "+t);r=T(e(t))}return r}function _e(t,e){var r,n=function(a){if(a instanceof n)return a;if(!(this instanceof n))return new n(a);if(!r){r=!0;var s=Object.keys(t);(function(t,e){try{e.forEach(ye.bind(void 0,t))}catch(t){}})(i,s),i.size=s.length,i._name=e,i._keys=s,i._defaultValues=t}this._map=st(a)},i=n.prototype=Object.create(Ir);return i.constructor=n,n}function ge(t,e,r){var n=Object.create(Object.getPrototypeOf(t));return n._map=e,n.__ownerID=r,n}function me(t){return t._name||t.constructor.name||"Record"}function ye(t,e){Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){J(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}function be(t){return null==t?De():we(t)&&!h(t)?t:De().withMutations((function(e){var r=i(t);at(r.size),r.forEach((function(t){return e.add(t)}))}))}function we(t){return!(!t||!t[Ur])}function Ee(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function Ce(t,e){var r=Object.create(Or);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function De(){return kr||(kr=Ce(gt()))}function Se(t){return null==t?Fe():Te(t)?t:Fe().withMutations((function(e){var r=i(t);at(r.size),r.forEach((function(t){return e.add(t)}))}))}function Te(t){return we(t)&&h(t)}function xe(t,e){var r=Object.create(Rr);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function Fe(){return Br||(Br=xe(Ht()))}function Ae(t){return null==t?Ie():Pe(t)?t:Ie().unshiftAll(t)}function Pe(t){return!(!t||!t[Nr])}function Me(t,e,r,n){var i=Object.create(zr);return i.size=t,i._head=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function Ie(){return Lr||(Lr=Me(0))}function ke(t,e){var r=function(r){t.prototype[r]=e[r]};return Object.keys(e).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(r),t}function Ue(t,e){return e}function Oe(t,e){return[e,t]}function Be(t){return function(){return!t.apply(this,arguments)}}function Re(t){return function(){return-t.apply(this,arguments)}}function Le(t){return"string"==typeof t?JSON.stringify(t):String(t)}function Ne(){return d(arguments)}function ze(t,e){return t<e?1:t>e?-1:0}function Ge(t){if(t.size===1/0)return 0;var e=h(t),r=s(t),n=e?1:0;return function(t,e){return e=fr(e,3432918353),e=fr(e<<15|e>>>-15,461845907),e=fr(e<<13|e>>>-13,5),e=fr((e=(e+3864292196|0)^t)^e>>>16,2246822507),e=rt((e=fr(e^e>>>13,3266489909))^e>>>16)}(t.__iterate(r?e?function(t,e){n=31*n+je(nt(t),nt(e))|0}:function(t,e){n=n+je(nt(t),nt(e))|0}:e?function(t){n=31*n+nt(t)|0}:function(t){n=n+nt(t)|0}),n)}function je(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}var qe=Array.prototype.slice;t(r,e),t(n,e),t(i,e),e.isIterable=a,e.isKeyed=s,e.isIndexed=o,e.isAssociative=u,e.isOrdered=h,e.Keyed=r,e.Indexed=n,e.Set=i;var He="@@__IMMUTABLE_ITERABLE__@@",Xe="@@__IMMUTABLE_KEYED__@@",We="@@__IMMUTABLE_INDEXED__@@",Ve="@@__IMMUTABLE_ORDERED__@@",Ze=5,Ye=1<<Ze,Je=Ye-1,Ke={},Qe={value:!1},$e={value:!1},tr=0,er=1,rr=2,nr="function"==typeof Symbol&&Symbol.iterator,ir="@@iterator",ar=nr||ir;w.prototype.toString=function(){return"[Iterator]"},w.KEYS=tr,w.VALUES=er,w.ENTRIES=rr,w.prototype.inspect=w.prototype.toSource=function(){return this.toString()},w.prototype[ar]=function(){return this},t(A,e),A.of=function(){return A(arguments)},A.prototype.toSeq=function(){return this},A.prototype.toString=function(){return this.__toString("Seq {","}")},A.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},A.prototype.__iterate=function(t,e){return j(this,t,e,!0)},A.prototype.__iterator=function(t,e){return q(this,t,e,!0)},t(P,A),P.prototype.toKeyedSeq=function(){return this},t(M,A),M.of=function(){return M(arguments)},M.prototype.toIndexedSeq=function(){return this},M.prototype.toString=function(){return this.__toString("Seq [","]")},M.prototype.__iterate=function(t,e){return j(this,t,e,!1)},M.prototype.__iterator=function(t,e){return q(this,t,e,!1)},t(I,A),I.of=function(){return I(arguments)},I.prototype.toSetSeq=function(){return this},A.isSeq=R,A.Keyed=P,A.Set=I,A.Indexed=M;var sr,or,ur,hr="@@__IMMUTABLE_SEQ__@@";A.prototype[hr]=!0,t(k,M),k.prototype.get=function(t,e){return this.has(t)?this._array[v(this,t)]:e},k.prototype.__iterate=function(t,e){for(var r=this._array,n=r.length-1,i=0;i<=n;i++)if(!1===t(r[e?n-i:i],i,this))return i+1;return i},k.prototype.__iterator=function(t,e){var r=this._array,n=r.length-1,i=0;return new w((function(){return i>n?{value:void 0,done:!0}:E(t,i,r[e?n-i++:i++])}))},t(U,P),U.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},U.prototype.has=function(t){return this._object.hasOwnProperty(t)},U.prototype.__iterate=function(t,e){for(var r=this._object,n=this._keys,i=n.length-1,a=0;a<=i;a++){var s=n[e?i-a:a];if(!1===t(r[s],s,this))return a+1}return a},U.prototype.__iterator=function(t,e){var r=this._object,n=this._keys,i=n.length-1,a=0;return new w((function(){var s=n[e?i-a:a];return a++>i?{value:void 0,done:!0}:E(t,s,r[s])}))},U.prototype[Ve]=!0,t(O,M),O.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var r=T(this._iterable),n=0;if(S(r))for(var i;!(i=r.next()).done&&!1!==t(i.value,n++,this););return n},O.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var r=T(this._iterable);if(!S(r))return new w(C);var n=0;return new w((function(){var e=r.next();return e.done?e:E(t,n++,e.value)}))},t(B,M),B.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var r=this._iterator,n=this._iteratorCache,i=0;i<n.length;)if(!1===t(n[i],i++,this))return i;for(var a;!(a=r.next()).done;){var s=a.value;if(n[i]=s,!1===t(s,i++,this))break}return i},B.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var r=this._iterator,n=this._iteratorCache,i=0;return new w((function(){if(i>=n.length){var e=r.next();if(e.done)return e;n[i]=e.value}return E(t,i,n[i++])}))},t(Y,M),Y.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},Y.prototype.get=function(t,e){return this.has(t)?this._value:e},Y.prototype.includes=function(t){return V(this._value,t)},Y.prototype.slice=function(t,e){var r=this.size;return g(t,e,r)?this:new Y(this._value,y(e,r)-m(t,r))},Y.prototype.reverse=function(){return this},Y.prototype.indexOf=function(t){return V(this._value,t)?0:-1},Y.prototype.lastIndexOf=function(t){return V(this._value,t)?this.size:-1},Y.prototype.__iterate=function(t,e){for(var r=0;r<this.size;r++)if(!1===t(this._value,r,this))return r+1;return r},Y.prototype.__iterator=function(t,e){var r=this,n=0;return new w((function(){return n<r.size?E(t,n++,r._value):{value:void 0,done:!0}}))},Y.prototype.equals=function(t){return t instanceof Y?V(this._value,t._value):Z(t)},t(K,M),K.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},K.prototype.get=function(t,e){return this.has(t)?this._start+v(this,t)*this._step:e},K.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},K.prototype.slice=function(t,e){return g(t,e,this.size)?this:(t=m(t,this.size),(e=y(e,this.size))<=t?new K(0,0):new K(this.get(t,this._end),this.get(e,this._end),this._step))},K.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var r=e/this._step;if(r>=0&&r<this.size)return r}return-1},K.prototype.lastIndexOf=function(t){return this.indexOf(t)},K.prototype.__iterate=function(t,e){for(var r=this.size-1,n=this._step,i=e?this._start+r*n:this._start,a=0;a<=r;a++){if(!1===t(i,a,this))return a+1;i+=e?-n:n}return a},K.prototype.__iterator=function(t,e){var r=this.size-1,n=this._step,i=e?this._start+r*n:this._start,a=0;return new w((function(){var s=i;return i+=e?-n:n,a>r?{value:void 0,done:!0}:E(t,a++,s)}))},K.prototype.equals=function(t){return t instanceof K?this._start===t._start&&this._end===t._end&&this._step===t._step:Z(this,t)},t(Q,e),t($,Q),t(tt,Q),t(et,Q),Q.Keyed=$,Q.Indexed=tt,Q.Set=et;var lr,fr="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var r=65535&(t|=0),n=65535&(e|=0);return r*n+((t>>>16)*n+r*(e>>>16)<<16>>>0)|0},cr=Object.isExtensible,dr=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}(),pr="function"==typeof WeakMap;pr&&(lr=new WeakMap);var vr=0,_r="__immutablehash__";"function"==typeof Symbol&&(_r=Symbol(_r));var gr=16,mr=255,yr=0,br={};t(st,$),st.of=function(){var t=qe.call(arguments,0);return gt().withMutations((function(e){for(var r=0;r<t.length;r+=2){if(r+1>=t.length)throw new Error("Missing value for key: "+t[r]);e.set(t[r],t[r+1])}}))},st.prototype.toString=function(){return this.__toString("Map {","}")},st.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},st.prototype.set=function(t,e){return mt(this,t,e)},st.prototype.setIn=function(t,e){return this.updateIn(t,Ke,(function(){return e}))},st.prototype.remove=function(t){return mt(this,t,Ke)},st.prototype.deleteIn=function(t){return this.updateIn(t,(function(){return Ke}))},st.prototype.update=function(t,e,r){return 1===arguments.length?t(this):this.updateIn([t],e,r)},st.prototype.updateIn=function(t,e,r){r||(r=e,e=void 0);var n=function t(e,r,n,i){var a=e===Ke,s=r.next();if(s.done){var o=a?n:e,u=i(o);return u===o?e:u}J(a||e&&e.set,"invalid keyPath");var h=s.value,l=a?Ke:e.get(h,Ke),f=t(l,r,n,i);return f===l?e:f===Ke?e.remove(h):(a?gt():e).set(h,f)}(this,ve(t),e,r);return n===Ke?void 0:n},st.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):gt()},st.prototype.merge=function(){return Ct(this,void 0,arguments)},st.prototype.mergeWith=function(t){return Ct(this,t,qe.call(arguments,1))},st.prototype.mergeIn=function(t){var e=qe.call(arguments,1);return this.updateIn(t,gt(),(function(t){return"function"==typeof t.merge?t.merge.apply(t,e):e[e.length-1]}))},st.prototype.mergeDeep=function(){return Ct(this,Dt,arguments)},st.prototype.mergeDeepWith=function(t){var e=qe.call(arguments,1);return Ct(this,St(t),e)},st.prototype.mergeDeepIn=function(t){var e=qe.call(arguments,1);return this.updateIn(t,gt(),(function(t){return"function"==typeof t.mergeDeep?t.mergeDeep.apply(t,e):e[e.length-1]}))},st.prototype.sort=function(t){return Gt(ie(this,t))},st.prototype.sortBy=function(t,e){return Gt(ie(this,e,t))},st.prototype.withMutations=function(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this},st.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new c)},st.prototype.asImmutable=function(){return this.__ensureOwner()},st.prototype.wasAltered=function(){return this.__altered},st.prototype.__iterator=function(t,e){return new dt(this,t,e)},st.prototype.__iterate=function(t,e){var r=this,n=0;return this._root&&this._root.iterate((function(e){return n++,t(e[1],e[0],r)}),e),n},st.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?_t(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},st.isMap=ot;var wr="@@__IMMUTABLE_MAP__@@",Er=st.prototype;Er[wr]=!0,Er.delete=Er.remove,Er.removeIn=Er.deleteIn,ut.prototype.get=function(t,e,r,n){for(var i=this.entries,a=0,s=i.length;a<s;a++)if(V(r,i[a][0]))return i[a][1];return n},ut.prototype.update=function(t,e,r,n,i,a,s){for(var o=i===Ke,u=this.entries,h=0,l=u.length;h<l&&!V(n,u[h][0]);h++);var c=h<l;if(c?u[h][1]===i:o)return this;if(f(s),(o||!c)&&f(a),!o||1!==u.length){if(!c&&!o&&u.length>=Dr)return Et(t,u,n,i);var p=t&&t===this.ownerID,v=p?u:d(u);return c?o?h===l-1?v.pop():v[h]=v.pop():v[h]=[n,i]:v.push([n,i]),p?(this.entries=v,this):new ut(t,v)}},ht.prototype.get=function(t,e,r,n){void 0===e&&(e=nt(r));var i=1<<((0===t?e:e>>>t)&Je),a=this.bitmap;return 0==(a&i)?n:this.nodes[xt(a&i-1)].get(t+Ze,e,r,n)},ht.prototype.update=function(t,e,r,n,i,a,s){void 0===r&&(r=nt(n));var o=(0===e?r:r>>>e)&Je,u=1<<o,h=this.bitmap,l=0!=(h&u);if(!l&&i===Ke)return this;var f=xt(h&u-1),c=this.nodes,d=l?c[f]:void 0,p=yt(d,t,e+Ze,r,n,i,a,s);if(p===d)return this;if(!l&&p&&c.length>=Sr)return function(t,e,r,n,i){for(var a=0,s=new Array(Ye),o=0;0!==r;o++,r>>>=1)s[o]=1&r?e[a++]:void 0;return s[n]=i,new lt(t,a+1,s)}(t,c,h,o,p);if(l&&!p&&2===c.length&&bt(c[1^f]))return c[1^f];if(l&&p&&1===c.length&&bt(p))return p;var v=t&&t===this.ownerID,_=l?p?h:h^u:h|u,g=l?p?Ft(c,f,p,v):function(t,e,r){var n=t.length-1;if(r&&e===n)return t.pop(),t;for(var i=new Array(n),a=0,s=0;s<n;s++)s===e&&(a=1),i[s]=t[s+a];return i}(c,f,v):function(t,e,r,n){var i=t.length+1;if(n&&e+1===i)return t[e]=r,t;for(var a=new Array(i),s=0,o=0;o<i;o++)o===e?(a[o]=r,s=-1):a[o]=t[o+s];return a}(c,f,p,v);return v?(this.bitmap=_,this.nodes=g,this):new ht(t,_,g)},lt.prototype.get=function(t,e,r,n){void 0===e&&(e=nt(r));var i=(0===t?e:e>>>t)&Je,a=this.nodes[i];return a?a.get(t+Ze,e,r,n):n},lt.prototype.update=function(t,e,r,n,i,a,s){void 0===r&&(r=nt(n));var o=(0===e?r:r>>>e)&Je,u=i===Ke,h=this.nodes,l=h[o];if(u&&!l)return this;var f=yt(l,t,e+Ze,r,n,i,a,s);if(f===l)return this;var c=this.count;if(l){if(!f&&--c<Tr)return function(t,e,r,n){for(var i=0,a=0,s=new Array(r),o=0,u=1,h=e.length;o<h;o++,u<<=1){var l=e[o];void 0!==l&&o!==n&&(i|=u,s[a++]=l)}return new ht(t,i,s)}(t,h,c,o)}else c++;var d=t&&t===this.ownerID,p=Ft(h,o,f,d);return d?(this.count=c,this.nodes=p,this):new lt(t,c,p)},ft.prototype.get=function(t,e,r,n){for(var i=this.entries,a=0,s=i.length;a<s;a++)if(V(r,i[a][0]))return i[a][1];return n},ft.prototype.update=function(t,e,r,n,i,a,s){void 0===r&&(r=nt(n));var o=i===Ke;if(r!==this.keyHash)return o?this:(f(s),f(a),wt(this,t,e,r,[n,i]));for(var u=this.entries,h=0,l=u.length;h<l&&!V(n,u[h][0]);h++);var c=h<l;if(c?u[h][1]===i:o)return this;if(f(s),(o||!c)&&f(a),o&&2===l)return new ct(t,this.keyHash,u[1^h]);var p=t&&t===this.ownerID,v=p?u:d(u);return c?o?h===l-1?v.pop():v[h]=v.pop():v[h]=[n,i]:v.push([n,i]),p?(this.entries=v,this):new ft(t,this.keyHash,v)},ct.prototype.get=function(t,e,r,n){return V(r,this.entry[0])?this.entry[1]:n},ct.prototype.update=function(t,e,r,n,i,a,s){var o=i===Ke,u=V(n,this.entry[0]);return(u?i===this.entry[1]:o)?this:(f(s),o?void f(a):u?t&&t===this.ownerID?(this.entry[1]=i,this):new ct(t,this.keyHash,[n,i]):(f(a),wt(this,t,e,nt(n),[n,i])))},ut.prototype.iterate=ft.prototype.iterate=function(t,e){for(var r=this.entries,n=0,i=r.length-1;n<=i;n++)if(!1===t(r[e?i-n:n]))return!1},ht.prototype.iterate=lt.prototype.iterate=function(t,e){for(var r=this.nodes,n=0,i=r.length-1;n<=i;n++){var a=r[e?i-n:n];if(a&&!1===a.iterate(t,e))return!1}},ct.prototype.iterate=function(t,e){return t(this.entry)},t(dt,w),dt.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var r,n=e.node,i=e.index++;if(n.entry){if(0===i)return pt(t,n.entry)}else if(n.entries){if(i<=(r=n.entries.length-1))return pt(t,n.entries[this._reverse?r-i:i])}else if(i<=(r=n.nodes.length-1)){var a=n.nodes[this._reverse?r-i:i];if(a){if(a.entry)return pt(t,a.entry);e=this._stack=vt(a,e)}continue}e=this._stack=this._stack.__prev}return{value:void 0,done:!0}};var Cr,Dr=Ye/4,Sr=Ye/2,Tr=Ye/4;t(At,tt),At.of=function(){return this(arguments)},At.prototype.toString=function(){return this.__toString("List [","]")},At.prototype.get=function(t,e){if((t=v(this,t))>=0&&t<this.size){var r=Rt(this,t+=this._origin);return r&&r.array[t&Je]}return e},At.prototype.set=function(t,e){return function(t,e,r){if((e=v(t,e))!==e)return t;if(e>=t.size||e<0)return t.withMutations((function(t){e<0?Lt(t,e).set(0,r):Lt(t,0,e+1).set(e,r)}));e+=t._origin;var n=t._tail,i=t._root,a=l($e);return e>=zt(t._capacity)?n=Ot(n,t.__ownerID,0,e,r,a):i=Ot(i,t.__ownerID,t._level,e,r,a),a.value?t.__ownerID?(t._root=i,t._tail=n,t.__hash=void 0,t.__altered=!0,t):kt(t._origin,t._capacity,t._level,i,n):t}(this,t,e)},At.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},At.prototype.insert=function(t,e){return this.splice(t,0,e)},At.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=Ze,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Ut()},At.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations((function(r){Lt(r,0,e+t.length);for(var n=0;n<t.length;n++)r.set(e+n,t[n])}))},At.prototype.pop=function(){return Lt(this,0,-1)},At.prototype.unshift=function(){var t=arguments;return this.withMutations((function(e){Lt(e,-t.length);for(var r=0;r<t.length;r++)e.set(r,t[r])}))},At.prototype.shift=function(){return Lt(this,1)},At.prototype.merge=function(){return Nt(this,void 0,arguments)},At.prototype.mergeWith=function(t){return Nt(this,t,qe.call(arguments,1))},At.prototype.mergeDeep=function(){return Nt(this,Dt,arguments)},At.prototype.mergeDeepWith=function(t){var e=qe.call(arguments,1);return Nt(this,St(t),e)},At.prototype.setSize=function(t){return Lt(this,0,t)},At.prototype.slice=function(t,e){var r=this.size;return g(t,e,r)?this:Lt(this,m(t,r),y(e,r))},At.prototype.__iterator=function(t,e){var r=0,n=It(this,e);return new w((function(){var e=n();return e===Mr?{value:void 0,done:!0}:E(t,r++,e)}))},At.prototype.__iterate=function(t,e){for(var r,n=0,i=It(this,e);(r=i())!==Mr&&!1!==t(r,n++,this););return n},At.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?kt(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)},At.isList=Pt;var xr="@@__IMMUTABLE_LIST__@@",Fr=At.prototype;Fr[xr]=!0,Fr.delete=Fr.remove,Fr.setIn=Er.setIn,Fr.deleteIn=Fr.removeIn=Er.removeIn,Fr.update=Er.update,Fr.updateIn=Er.updateIn,Fr.mergeIn=Er.mergeIn,Fr.mergeDeepIn=Er.mergeDeepIn,Fr.withMutations=Er.withMutations,Fr.asMutable=Er.asMutable,Fr.asImmutable=Er.asImmutable,Fr.wasAltered=Er.wasAltered,Mt.prototype.removeBefore=function(t,e,r){if(r===e?1<<e:0===this.array.length)return this;var n=r>>>e&Je;if(n>=this.array.length)return new Mt([],t);var i,a=0===n;if(e>0){var s=this.array[n];if((i=s&&s.removeBefore(t,e-Ze,r))===s&&a)return this}if(a&&!i)return this;var o=Bt(this,t);if(!a)for(var u=0;u<n;u++)o.array[u]=void 0;return i&&(o.array[n]=i),o},Mt.prototype.removeAfter=function(t,e,r){if(r===(e?1<<e:0)||0===this.array.length)return this;var n,i=r-1>>>e&Je;if(i>=this.array.length)return this;if(e>0){var a=this.array[i];if((n=a&&a.removeAfter(t,e-Ze,r))===a&&i===this.array.length-1)return this}var s=Bt(this,t);return s.array.splice(i+1),n&&(s.array[i]=n),s};var Ar,Pr,Mr={};t(Gt,st),Gt.of=function(){return this(arguments)},Gt.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Gt.prototype.get=function(t,e){var r=this._map.get(t);return void 0!==r?this._list.get(r)[1]:e},Gt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Ht()},Gt.prototype.set=function(t,e){return Xt(this,t,e)},Gt.prototype.remove=function(t){return Xt(this,t,Ke)},Gt.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Gt.prototype.__iterate=function(t,e){var r=this;return this._list.__iterate((function(e){return e&&t(e[1],e[0],r)}),e)},Gt.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},Gt.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),r=this._list.__ensureOwner(t);return t?qt(e,r,t,this.__hash):(this.__ownerID=t,this._map=e,this._list=r,this)},Gt.isOrderedMap=jt,Gt.prototype[Ve]=!0,Gt.prototype.delete=Gt.prototype.remove,t(Wt,P),Wt.prototype.get=function(t,e){return this._iter.get(t,e)},Wt.prototype.has=function(t){return this._iter.has(t)},Wt.prototype.valueSeq=function(){return this._iter.valueSeq()},Wt.prototype.reverse=function(){var t=this,e=Qt(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},Wt.prototype.map=function(t,e){var r=this,n=Kt(this,t,e);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().map(t,e)}),n},Wt.prototype.__iterate=function(t,e){var r,n=this;return this._iter.__iterate(this._useKeys?function(e,r){return t(e,r,n)}:(r=e?le(this):0,function(i){return t(i,e?--r:r++,n)}),e)},Wt.prototype.__iterator=function(t,e){if(this._useKeys)return this._iter.__iterator(t,e);var r=this._iter.__iterator(er,e),n=e?le(this):0;return new w((function(){var i=r.next();return i.done?i:E(t,e?--n:n++,i.value,i)}))},Wt.prototype[Ve]=!0,t(Vt,M),Vt.prototype.includes=function(t){return this._iter.includes(t)},Vt.prototype.__iterate=function(t,e){var r=this,n=0;return this._iter.__iterate((function(e){return t(e,n++,r)}),e)},Vt.prototype.__iterator=function(t,e){var r=this._iter.__iterator(er,e),n=0;return new w((function(){var e=r.next();return e.done?e:E(t,n++,e.value,e)}))},t(Zt,I),Zt.prototype.has=function(t){return this._iter.includes(t)},Zt.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate((function(e){return t(e,e,r)}),e)},Zt.prototype.__iterator=function(t,e){var r=this._iter.__iterator(er,e);return new w((function(){var e=r.next();return e.done?e:E(t,e.value,e.value,e)}))},t(Yt,P),Yt.prototype.entrySeq=function(){return this._iter.toSeq()},Yt.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate((function(e){if(e){he(e);var n=a(e);return t(n?e.get(1):e[1],n?e.get(0):e[0],r)}}),e)},Yt.prototype.__iterator=function(t,e){var r=this._iter.__iterator(er,e);return new w((function(){for(;;){var e=r.next();if(e.done)return e;var n=e.value;if(n){he(n);var i=a(n);return E(t,i?n.get(0):n[0],i?n.get(1):n[1],e)}}}))},Vt.prototype.cacheResult=Wt.prototype.cacheResult=Zt.prototype.cacheResult=Yt.prototype.cacheResult=de,t(_e,$),_e.prototype.toString=function(){return this.__toString(me(this)+" {","}")},_e.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},_e.prototype.get=function(t,e){if(!this.has(t))return e;var r=this._defaultValues[t];return this._map?this._map.get(t,r):r},_e.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=ge(this,gt()))},_e.prototype.set=function(t,e){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+me(this));if(this._map&&!this._map.has(t)&&e===this._defaultValues[t])return this;var r=this._map&&this._map.set(t,e);return this.__ownerID||r===this._map?this:ge(this,r)},_e.prototype.remove=function(t){if(!this.has(t))return this;var e=this._map&&this._map.remove(t);return this.__ownerID||e===this._map?this:ge(this,e)},_e.prototype.wasAltered=function(){return this._map.wasAltered()},_e.prototype.__iterator=function(t,e){var n=this;return r(this._defaultValues).map((function(t,e){return n.get(e)})).__iterator(t,e)},_e.prototype.__iterate=function(t,e){var n=this;return r(this._defaultValues).map((function(t,e){return n.get(e)})).__iterate(t,e)},_e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map&&this._map.__ensureOwner(t);return t?ge(this,e,t):(this.__ownerID=t,this._map=e,this)};var Ir=_e.prototype;Ir.delete=Ir.remove,Ir.deleteIn=Ir.removeIn=Er.removeIn,Ir.merge=Er.merge,Ir.mergeWith=Er.mergeWith,Ir.mergeIn=Er.mergeIn,Ir.mergeDeep=Er.mergeDeep,Ir.mergeDeepWith=Er.mergeDeepWith,Ir.mergeDeepIn=Er.mergeDeepIn,Ir.setIn=Er.setIn,Ir.update=Er.update,Ir.updateIn=Er.updateIn,Ir.withMutations=Er.withMutations,Ir.asMutable=Er.asMutable,Ir.asImmutable=Er.asImmutable,t(be,et),be.of=function(){return this(arguments)},be.fromKeys=function(t){return this(r(t).keySeq())},be.prototype.toString=function(){return this.__toString("Set {","}")},be.prototype.has=function(t){return this._map.has(t)},be.prototype.add=function(t){return Ee(this,this._map.set(t,!0))},be.prototype.remove=function(t){return Ee(this,this._map.remove(t))},be.prototype.clear=function(){return Ee(this,this._map.clear())},be.prototype.union=function(){var t=qe.call(arguments,0);return 0===(t=t.filter((function(t){return 0!==t.size}))).length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations((function(e){for(var r=0;r<t.length;r++)i(t[r]).forEach((function(t){return e.add(t)}))})):this.constructor(t[0])},be.prototype.intersect=function(){var t=qe.call(arguments,0);if(0===t.length)return this;t=t.map((function(t){return i(t)}));var e=this;return this.withMutations((function(r){e.forEach((function(e){t.every((function(t){return t.includes(e)}))||r.remove(e)}))}))},be.prototype.subtract=function(){var t=qe.call(arguments,0);if(0===t.length)return this;t=t.map((function(t){return i(t)}));var e=this;return this.withMutations((function(r){e.forEach((function(e){t.some((function(t){return t.includes(e)}))&&r.remove(e)}))}))},be.prototype.merge=function(){return this.union.apply(this,arguments)},be.prototype.mergeWith=function(t){var e=qe.call(arguments,1);return this.union.apply(this,e)},be.prototype.sort=function(t){return Se(ie(this,t))},be.prototype.sortBy=function(t,e){return Se(ie(this,e,t))},be.prototype.wasAltered=function(){return this._map.wasAltered()},be.prototype.__iterate=function(t,e){var r=this;return this._map.__iterate((function(e,n){return t(n,n,r)}),e)},be.prototype.__iterator=function(t,e){return this._map.map((function(t,e){return e})).__iterator(t,e)},be.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):(this.__ownerID=t,this._map=e,this)},be.isSet=we;var kr,Ur="@@__IMMUTABLE_SET__@@",Or=be.prototype;Or[Ur]=!0,Or.delete=Or.remove,Or.mergeDeep=Or.merge,Or.mergeDeepWith=Or.mergeWith,Or.withMutations=Er.withMutations,Or.asMutable=Er.asMutable,Or.asImmutable=Er.asImmutable,Or.__empty=De,Or.__make=Ce,t(Se,be),Se.of=function(){return this(arguments)},Se.fromKeys=function(t){return this(r(t).keySeq())},Se.prototype.toString=function(){return this.__toString("OrderedSet {","}")},Se.isOrderedSet=Te;var Br,Rr=Se.prototype;Rr[Ve]=!0,Rr.__empty=Fe,Rr.__make=xe,t(Ae,tt),Ae.of=function(){return this(arguments)},Ae.prototype.toString=function(){return this.__toString("Stack [","]")},Ae.prototype.get=function(t,e){var r=this._head;for(t=v(this,t);r&&t--;)r=r.next;return r?r.value:e},Ae.prototype.peek=function(){return this._head&&this._head.value},Ae.prototype.push=function(){if(0===arguments.length)return this;for(var t=this.size+arguments.length,e=this._head,r=arguments.length-1;r>=0;r--)e={value:arguments[r],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):Me(t,e)},Ae.prototype.pushAll=function(t){if(0===(t=n(t)).size)return this;at(t.size);var e=this.size,r=this._head;return t.reverse().forEach((function(t){e++,r={value:t,next:r}})),this.__ownerID?(this.size=e,this._head=r,this.__hash=void 0,this.__altered=!0,this):Me(e,r)},Ae.prototype.pop=function(){return this.slice(1)},Ae.prototype.unshift=function(){return this.push.apply(this,arguments)},Ae.prototype.unshiftAll=function(t){return this.pushAll(t)},Ae.prototype.shift=function(){return this.pop.apply(this,arguments)},Ae.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Ie()},Ae.prototype.slice=function(t,e){if(g(t,e,this.size))return this;var r=m(t,this.size);if(y(e,this.size)!==this.size)return tt.prototype.slice.call(this,t,e);for(var n=this.size-r,i=this._head;r--;)i=i.next;return this.__ownerID?(this.size=n,this._head=i,this.__hash=void 0,this.__altered=!0,this):Me(n,i)},Ae.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Me(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},Ae.prototype.__iterate=function(t,e){if(e)return this.reverse().__iterate(t);for(var r=0,n=this._head;n&&!1!==t(n.value,r++,this);)n=n.next;return r},Ae.prototype.__iterator=function(t,e){if(e)return this.reverse().__iterator(t);var r=0,n=this._head;return new w((function(){if(n){var e=n.value;return n=n.next,E(t,r++,e)}return{value:void 0,done:!0}}))},Ae.isStack=Pe;var Lr,Nr="@@__IMMUTABLE_STACK__@@",zr=Ae.prototype;zr[Nr]=!0,zr.withMutations=Er.withMutations,zr.asMutable=Er.asMutable,zr.asImmutable=Er.asImmutable,zr.wasAltered=Er.wasAltered,e.Iterator=w,ke(e,{toArray:function(){at(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate((function(e,r){t[r]=e})),t},toIndexedSeq:function(){return new Vt(this)},toJS:function(){return this.toSeq().map((function(t){return t&&"function"==typeof t.toJS?t.toJS():t})).__toJS()},toJSON:function(){return this.toSeq().map((function(t){return t&&"function"==typeof t.toJSON?t.toJSON():t})).__toJS()},toKeyedSeq:function(){return new Wt(this,!0)},toMap:function(){return st(this.toKeyedSeq())},toObject:function(){at(this.size);var t={};return this.__iterate((function(e,r){t[r]=e})),t},toOrderedMap:function(){return Gt(this.toKeyedSeq())},toOrderedSet:function(){return Se(s(this)?this.valueSeq():this)},toSet:function(){return be(s(this)?this.valueSeq():this)},toSetSeq:function(){return new Zt(this)},toSeq:function(){return o(this)?this.toIndexedSeq():s(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Ae(s(this)?this.valueSeq():this)},toList:function(){return At(s(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){return ue(this,re(this,qe.call(arguments,0)))},includes:function(t){return this.some((function(e){return V(e,t)}))},entries:function(){return this.__iterator(rr)},every:function(t,e){at(this.size);var r=!0;return this.__iterate((function(n,i,a){if(!t.call(e,n,i,a))return r=!1,!1})),r},filter:function(t,e){return ue(this,$t(this,t,e,!0))},find:function(t,e,r){var n=this.findEntry(t,e);return n?n[1]:r},forEach:function(t,e){return at(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){at(this.size),t=void 0!==t?""+t:",";var e="",r=!0;return this.__iterate((function(n){r?r=!1:e+=t,e+=null!=n?n.toString():""})),e},keys:function(){return this.__iterator(tr)},map:function(t,e){return ue(this,Kt(this,t,e))},reduce:function(t,e,r){var n,i;return at(this.size),arguments.length<2?i=!0:n=e,this.__iterate((function(e,a,s){i?(i=!1,n=e):n=t.call(r,n,e,a,s)})),n},reduceRight:function(t,e,r){var n=this.toKeyedSeq().reverse();return n.reduce.apply(n,arguments)},reverse:function(){return ue(this,Qt(this,!0))},slice:function(t,e){return ue(this,te(this,t,e,!0))},some:function(t,e){return!this.every(Be(t),e)},sort:function(t){return ue(this,ie(this,t))},values:function(){return this.__iterator(er)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(t,e){return p(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return function(t,e,r){var n=st().asMutable();return t.__iterate((function(i,a){n.update(e.call(r,i,a,t),0,(function(t){return t+1}))})),n.asImmutable()}(this,t,e)},equals:function(t){return Z(this,t)},entrySeq:function(){var t=this;if(t._cache)return new k(t._cache);var e=t.toSeq().map(Oe).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(Be(t),e)},findEntry:function(t,e,r){var n=r;return this.__iterate((function(r,i,a){if(t.call(e,r,i,a))return n=[i,r],!1})),n},findKey:function(t,e){var r=this.findEntry(t,e);return r&&r[0]},findLast:function(t,e,r){return this.toKeyedSeq().reverse().find(t,e,r)},findLastEntry:function(t,e,r){return this.toKeyedSeq().reverse().findEntry(t,e,r)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(){return this.find(_)},flatMap:function(t,e){return ue(this,function(t,e,r){var n=fe(t);return t.toSeq().map((function(i,a){return n(e.call(r,i,a,t))})).flatten(!0)}(this,t,e))},flatten:function(t){return ue(this,ne(this,t,!0))},fromEntrySeq:function(){return new Yt(this)},get:function(t,e){return this.find((function(e,r){return V(r,t)}),void 0,e)},getIn:function(t,e){for(var r,n=this,i=ve(t);!(r=i.next()).done;){var a=r.value;if((n=n&&n.get?n.get(a,Ke):Ke)===Ke)return e}return n},groupBy:function(t,e){return function(t,e,r){var n=s(t),i=(h(t)?Gt():st()).asMutable();t.__iterate((function(a,s){i.update(e.call(r,a,s,t),(function(t){return(t=t||[]).push(n?[s,a]:a),t}))}));var a=fe(t);return i.map((function(e){return ue(t,a(e))}))}(this,t,e)},has:function(t){return this.get(t,Ke)!==Ke},hasIn:function(t){return this.getIn(t,Ke)!==Ke},isSubset:function(t){return t="function"==typeof t.includes?t:e(t),this.every((function(e){return t.includes(e)}))},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:e(t)).isSubset(this)},keyOf:function(t){return this.findKey((function(e){return V(e,t)}))},keySeq:function(){return this.toSeq().map(Ue).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return ae(this,t)},maxBy:function(t,e){return ae(this,e,t)},min:function(t){return ae(this,t?Re(t):ze)},minBy:function(t,e){return ae(this,e?Re(e):ze,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return ue(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,e){return ue(this,ee(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(Be(t),e)},sortBy:function(t,e){return ue(this,ie(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return ue(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,e){return ue(this,function(t,e,r){var n=ce(t);return n.__iterateUncached=function(n,i){var a=this;if(i)return this.cacheResult().__iterate(n,i);var s=0;return t.__iterate((function(t,i,o){return e.call(r,t,i,o)&&++s&&n(t,i,a)})),s},n.__iteratorUncached=function(n,i){var a=this;if(i)return this.cacheResult().__iterator(n,i);var s=t.__iterator(rr,i),o=!0;return new w((function(){if(!o)return{value:void 0,done:!0};var t=s.next();if(t.done)return t;var i=t.value,u=i[0],h=i[1];return e.call(r,h,u,a)?n===rr?t:E(n,u,h,t):(o=!1,{value:void 0,done:!0})}))},n}(this,t,e))},takeUntil:function(t,e){return this.takeWhile(Be(t),e)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=Ge(this))}});var Gr=e.prototype;Gr[He]=!0,Gr[ar]=Gr.values,Gr.__toJS=Gr.toArray,Gr.__toStringMapper=Le,Gr.inspect=Gr.toSource=function(){return this.toString()},Gr.chain=Gr.flatMap,Gr.contains=Gr.includes,ke(r,{flip:function(){return ue(this,Jt(this))},mapEntries:function(t,e){var r=this,n=0;return ue(this,this.toSeq().map((function(i,a){return t.call(e,[a,i],n++,r)})).fromEntrySeq())},mapKeys:function(t,e){var r=this;return ue(this,this.toSeq().flip().map((function(n,i){return t.call(e,n,i,r)})).flip())}});var jr=r.prototype;return jr[Xe]=!0,jr[ar]=Gr.entries,jr.__toJS=Gr.toObject,jr.__toStringMapper=function(t,e){return JSON.stringify(e)+": "+Le(t)},ke(n,{toKeyedSeq:function(){return new Wt(this,!1)},filter:function(t,e){return ue(this,$t(this,t,e,!1))},findIndex:function(t,e){var r=this.findEntry(t,e);return r?r[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return ue(this,Qt(this,!1))},slice:function(t,e){return ue(this,te(this,t,e,!1))},splice:function(t,e){var r=arguments.length;if(e=Math.max(0|e,0),0===r||2===r&&!e)return this;t=m(t,t<0?this.count():this.size);var n=this.slice(0,t);return ue(this,1===r?n:n.concat(d(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var r=this.findLastEntry(t,e);return r?r[0]:-1},first:function(){return this.get(0)},flatten:function(t){return ue(this,ne(this,t,!1))},get:function(t,e){return(t=v(this,t))<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find((function(e,r){return r===t}),void 0,e)},has:function(t){return(t=v(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return ue(this,function(t,e){var r=ce(t);return r.size=t.size&&2*t.size-1,r.__iterateUncached=function(r,n){var i=this,a=0;return t.__iterate((function(t,n){return(!a||!1!==r(e,a++,i))&&!1!==r(t,a++,i)}),n),a},r.__iteratorUncached=function(r,n){var i,a=t.__iterator(er,n),s=0;return new w((function(){return(!i||s%2)&&(i=a.next()).done?i:s%2?E(r,s++,e):E(r,s++,i.value,i)}))},r}(this,t))},interleave:function(){var t=[this].concat(d(arguments)),e=oe(this.toSeq(),M.of,t),r=e.flatten(!0);return e.size&&(r.size=e.size*t.length),ue(this,r)},keySeq:function(){return K(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(t,e){return ue(this,ee(this,t,e,!1))},zip:function(){return ue(this,oe(this,Ne,[this].concat(d(arguments))))},zipWith:function(t){var e=d(arguments);return e[0]=this,ue(this,oe(this,t,e))}}),n.prototype[We]=!0,n.prototype[Ve]=!0,ke(i,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),i.prototype.has=Gr.includes,i.prototype.contains=i.prototype.includes,ke(P,r.prototype),ke(M,n.prototype),ke(I,i.prototype),ke($,r.prototype),ke(tt,n.prototype),ke(et,i.prototype),{Iterable:e,Seq:A,Collection:Q,Map:st,OrderedMap:Gt,List:At,Stack:Ae,Set:be,OrderedSet:Se,Record:_e,Range:K,Repeat:Y,is:V,fromJS:H}}()},function(t,e){function r(t,e,r){if(e!=e)return function(t,e,r,n){for(var i=t.length,a=r+(n?1:-1);n?a--:++a<i;)if(e(t[a],a,t))return a;return-1}(t,n,r);for(var i=r-1,a=t.length;++i<a;)if(t[i]===e)return i;return-1}function n(t){return t!=t}function i(t,e){return function(t,e){for(var r=-1,n=t?t.length:0,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}(e,(function(e){return t[e]}))}function a(t,e){var r=U(t)||function(t){return function(t){return l(t)&&u(t)}(t)&&A.call(t,"callee")&&(!M.call(t,"callee")||P.call(t)==g)}(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],n=r.length,i=!!n;for(var a in t)!e&&!A.call(t,a)||i&&("length"==a||o(a,n))||r.push(a);return r}function s(t){if(!function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||F)}(t))return I(t);var e=[];for(var r in Object(t))A.call(t,r)&&"constructor"!=r&&e.push(r);return e}function o(t,e){return!!(e=null==e?p:e)&&("number"==typeof t||T.test(t))&&t>-1&&t%1==0&&t<e}function u(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=p}(t.length)&&!function(t){var e=h(t)?P.call(t):"";return e==m||e==y}(t)}function h(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function l(t){return!!t&&"object"==typeof t}function f(t){return t?(t=function(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||l(t)&&P.call(t)==w}(t))return _;if(h(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=h(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(E,"");var r=D.test(t);return r||S.test(t)?x(t.slice(2),r?2:8):C.test(t)?_:+t}(t))===d||t===-d?(t<0?-1:1)*v:t==t?t:0:0===t?t:0}function c(t){return t?i(t,function(t){return u(t)?a(t):s(t)}(t)):[]}var d=1/0,p=9007199254740991,v=17976931348623157e292,_=NaN,g="[object Arguments]",m="[object Function]",y="[object GeneratorFunction]",b="[object String]",w="[object Symbol]",E=/^\s+|\s+$/g,C=/^[-+]0x[0-9a-f]+$/i,D=/^0b[01]+$/i,S=/^0o[0-7]+$/i,T=/^(?:0|[1-9]\d*)$/,x=parseInt,F=Object.prototype,A=F.hasOwnProperty,P=F.toString,M=F.propertyIsEnumerable,I=function(t,e){return function(r){return t(e(r))}}(Object.keys,Object),k=Math.max,U=Array.isArray;t.exports=function(t,e,n,i){t=u(t)?t:c(t),n=n&&!i?function(t){var e=f(t),r=e%1;return e==e?r?e-r:e:0}(n):0;var a=t.length;return n<0&&(n=k(a+n,0)),function(t){return"string"==typeof t||!U(t)&&l(t)&&P.call(t)==b}(t)?n<=a&&t.indexOf(e,n)>-1:!!a&&r(t,e,n)>-1}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Sequence=e.Run=e.Pairing=e.EmbeddingLevelState=e.DirectionalStatusStackEntry=e.BracketPairState=e.BracketPairStackEntry=e.decrease=e.increase=void 0;var n=r(1),i=(0,n.Record)({isolate:!1,level:0,override:"neutral"}),a=(0,n.Record)({directionalStatusStack:n.Stack.of(new i),bidiTypes:n.List.of(),embeddingLevels:n.List.of(),overflowEmbeddingCount:0,overflowIsolateCount:0,validIsolateCount:0}),s=(0,n.Record)({level:-1,from:0,to:0},"Run"),o=(0,n.Record)({runs:n.List.of(),eos:"",sos:""},"Sequence"),u=(0,n.Record)({point:0,position:0}),h=(0,n.Record)({open:0,close:0}),l=(0,n.Record)({stack:n.Stack.of(),pairings:n.List.of(),stackoverflow:!1});e.increase=function(t){return t+1},e.decrease=function(t){return t-1},e.BracketPairStackEntry=u,e.BracketPairState=l,e.DirectionalStatusStackEntry=i,e.EmbeddingLevelState=a,e.Pairing=h,e.Run=s,e.Sequence=o},function(t,e,r){(function(e){function r(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function n(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}function i(t,e,r,s,o){var u=-1,h=t.length;for(r||(r=a),o||(o=[]);++u<h;){var l=t[u];e>0&&r(l)?e>1?i(l,e-1,r,s,o):n(o,l):s||(o[o.length]=l)}return o}function a(t){return b(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&function(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=s}(t.length)&&!function(t){var e=function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)?v.call(t):"";return e==u||e==h}(t)}(t)}(t)&&p.call(t,"callee")&&(!g.call(t,"callee")||v.call(t)==o)}(t)||!!(m&&t&&t[m])}var s=9007199254740991,o="[object Arguments]",u="[object Function]",h="[object GeneratorFunction]",l="object"==typeof e&&e&&e.Object===Object&&e,f="object"==typeof self&&self&&self.Object===Object&&self,c=l||f||Function("return this")(),d=Object.prototype,p=d.hasOwnProperty,v=d.toString,_=c.Symbol,g=d.propertyIsEnumerable,m=_?_.isConcatSpreadable:void 0,y=Math.max,b=Array.isArray,w=function(t,e){return e=y(void 0===e?t.length-1:e,0),function(){for(var n=arguments,i=-1,a=y(n.length-e,0),s=Array(a);++i<a;)s[i]=n[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=n[i];return o[e]=s,r(t,this,o)}}((function(t){for(var e=(t=i(t,1)).length,r=e;r--;)if("function"!=typeof t[r])throw new TypeError("Expected a function");return function(){for(var r=0,n=e?t[r].apply(this,arguments):arguments[0];++r<e;)n=t[r].call(this,n);return n}}));t.exports=w}).call(e,r(5))},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e){t.exports=function(t){return void 0===t}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){i=!0,a=t}finally{try{!n&&o.return&&o.return()}finally{if(i)throw a}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=n(r(2)),s=r(1),o=n(r(15)),u=n(r(26)),h=n(r(11)),l=n(r(27)),f=r(0),c=r(3);e.default=function(t,e){function r(t){var e=t.last().get("to")-1,n=C.get(e,-1);if(n>-1){var i=(0,l.default)(p,n);return r(t.push(i))}return t}var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,d=(0,o.default)(t,e,n),p=d.runs,v=d.bidiTypes,_=d.levels,g=(0,u.default)(t.zip(v,e).filter((function(t){var e=i(t,3),r=(e[0],e[1]);return e[2],!1===(0,f.isX9ControlCharacter)(r)}))),m=i(g,3),y=m[0],b=m[1],w=m[2],E=(0,h.default)(y),C=E.initiatorToPDI,D=E.initiatorFromPDI;return{sequences:function(t){return t.map((function(t,e){var r=y.size,i=t.get("runs").first().get("from"),o=t.get("runs").last().get("to"),u=function(t){return(0,s.Range)(0,r).contains(t)?(0,l.default)(p,t).get("level"):n},h=u(i-1),c=u(i),d=function(t){var e=y.get(o-1),r=C.get(e,-1);return(0,a.default)([f.LRI,f.RLI,f.FSI],e)&&-1===r?n:u(o)}(),v=Math.max(h,c)%2==1?"R":"L",_=Math.max(c,d)%2==1?"R":"L";return t.set("sos",v).set("eos",_)}))}(p.filter((function(t){var e=t.get("from"),r=y.get(e),n=D.get(e,-1);return r!==f.PDI||-1===n})).reduce((function(t,e,n){var i=new c.Sequence({runs:r(s.List.of(e))});return t.push(i)}),s.List.of())),codepoints:y,bidiTypes:b,paragraphBidiTypes:w,levels:_}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(r(4)),i=r(0),a=r(3);e.default=function(t,e,r,s){if(t!==i.RLI)return s;var o=s.get("directionalStatusStack").peek(),u=o.get("level");return(0,n.default)((function(t){return t.update("embeddingLevels",(function(t){return t.set(r,u)}))}),(function(t){var e=o.get("override");if("neutral"!==e){var n="left-to-right"===e?"L":"R";return t.update("bidiTypes",(function(t){return t.set(r,n)}))}return t}),(function(t){var e=u+1+u%2;return e>i.MAX_DEPTH||function(t){var e=t.get("overflowIsolateCount"),r=t.get("overflowEmbeddingCount");return e>0||r>0}(t)?t.update("overflowIsolateCount",a.increase):t.update("validIsolateCount",a.increase).update("directionalStatusStack",(function(t){return t.push(new a.DirectionalStatusStackEntry({isolate:!0,level:e}))}))}))(s)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(r(4)),i=r(3),a=r(0);e.default=function(t,e,r,s){if(t!==a.LRI)return s;var o=s.get("directionalStatusStack").peek(),u=o.get("level");return(0,n.default)((function(t){return t.update("embeddingLevels",(function(t){return t.set(r,u)}))}),(function(t){var e=o.get("override");if("neutral"!==e){var n="left-to-right"===e?"L":"R";return t.update("bidiTypes",(function(t){return t.set(r,n)}))}return t}),(function(t){var e=u+1+(u+1)%2;return e>a.MAX_DEPTH||function(t){var e=t.get("overflowIsolateCount"),r=t.get("overflowEmbeddingCount");return e>0||r>0}(t)?t.update("overflowIsolateCount",i.increase):t.update("validIsolateCount",i.increase).update("directionalStatusStack",(function(t){return t.push(new i.DirectionalStatusStackEntry({isolate:!0,level:e}))}))}))(s)}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){i=!0,a=t}finally{try{!n&&o.return&&o.return()}finally{if(i)throw a}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=(n(r(6)),n(r(2))),s=r(1),o=r(0);e.default=function(t,e){(0,s.Record)({inside:!1,counter:0},"P2State");var r=t.reduce((function(t,e){var r=t.get(-1,0);return t.push((0,a.default)([o.LRI,o.RLI,o.FSI],e)?r+1:e===o.PDI&&r>0?r-1:r)}),s.List.of()).map((function(t){return t>0})),n=t.zip(e,r).filter((function(t){var e=i(t,3);return e[0],e[1],!1===e[2]})).map((function(t){var e=i(t,3),r=(e[0],e[1]);return e[2],r})).find((function(t){return(0,a.default)(["L","R","AL"],t)}));return(0,a.default)(["R","AL"],n)?1:0}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){i=!0,a=t}finally{try{!n&&o.return&&o.return()}finally{if(i)throw a}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=r(1),a=function(t){return t&&t.__esModule?t:{default:t}}(r(22));e.default=function(t){var e=t.size,r=(0,i.Range)().zip((0,i.Range)(0,e).map((function(e){return(0,a.default)(t,e)}))).filter((function(t){var e=n(t,2);return e[0],-1!==e[1]})),s=r.map((function(t){var e=n(t,2),r=e[0];return[e[1],r]}));return{initiatorToPDI:(0,i.Map)(r),initiatorFromPDI:(0,i.Map)(s)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){i=!0,a=t}finally{try{!n&&o.return&&o.return()}finally{if(i)throw a}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=r(1);e.default=function(t){var e=t.reduce((function(t,e){var r=n(e,2),i=r[0],a=r[1];return t.update(0,(function(t){return t.push(i)})).update(1,(function(t){return t.push(a)}))}),i.List.of(i.List.of(),i.List.of()));return[e.get(0),e.get(1)]}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.reorderPermutation=e.reorder=e.resolve=void 0;var i=r(14),a=r(44),s=n(a),o=n(r(46)),u=n(r(47)),h=r(1);e.resolve=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=u.default.ucs2.encode(t).normalize("NFC"),a=u.default.ucs2.decode(n),s=(0,h.fromJS)(a),l=s.map(o.default);return(0,i.resolvedLevelsWithInvisibles)(s,l,e,r).toJS()},e.reorder=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,s.default)((0,h.fromJS)(t),(0,h.fromJS)(e),r).toJS()},e.reorderPermutation=function(t){return(0,a.reorderPermutation)((0,h.fromJS)(t)).toJS()}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e,r){var n=!0===(arguments.length>3&&void 0!==arguments[3]&&arguments[3])?(0,h.default)(t,e):r,i=(0,o.default)(t,e,n),u=i.sequences,d=i.codepoints,p=i.bidiTypes,v=i.paragraphBidiTypes,_=(i.levels,(0,f.default)(d,p,u)),g=p.size,m=u.reduce(a,(0,s.List)((0,s.Range)(0,g)).map((function(t){return 0}))),y=(0,l.default)(_,m);return(0,c.default)(v,y,n)}function a(t,e){return e.get("runs").reduce((function(t,e){var r=e.toJS(),n=r.from,i=r.to,a=i-n,o=e.get("level"),u=(0,s.List)((0,s.Range)(0,a)).map((function(t){return o}));return t.slice(0,n).concat(u).concat(t.slice(i))}),t)}Object.defineProperty(e,"__esModule",{value:!0}),e.resolvedLevelsWithInvisibles=void 0;var s=r(1),o=n(r(7)),u=r(0),h=(n(r(12)),n(r(28)),n(r(10))),l=n(r(29)),f=n(r(30)),c=(n(r(2)),n(r(43)));e.resolvedLevelsWithInvisibles=function(t,e,r){function n(t,e,r){return 0===t.size?r:(0,u.isX9ControlCharacter)(t.first())?n(t.rest(),e,r.push("x")):n(t.rest(),e.rest(),r.push(e.first()))}return n(e,i(t,e,r,arguments.length>3&&void 0!==arguments[3]&&arguments[3]),s.List.of())},e.default=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){i=!0,a=t}finally{try{!n&&o.return&&o.return()}finally{if(i)throw a}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=(function(t){t&&t.__esModule}(r(2)),r(1)),a=r(0),s=r(3),o=r(16);e.default=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=[o.rle,o.lre,o.rlo,o.lro,o.rli,o.lri,o.fsi,o.other,o.pdi,o.pdf],h=i.Stack.of(new s.DirectionalStatusStackEntry({level:r})),l=new s.EmbeddingLevelState({directionalStatusStack:h}).set("bidiTypes",e).set("embeddingLevels",t.map((function(t){return r}))),f=t.zip(e).reduce((function(r,i,a){var s=n(i,2),o=s[0],h=s[1];return u.reduce((function(r,n){return n(o,h,a,r,t,e)}),r)}),l);return{runs:t.zip(e,f.get("embeddingLevels")).filter((function(t){var e=n(t,3),r=(e[0],e[1]);return e[2],!1===(0,a.isX9ControlCharacter)(r)})).reduce((function(t,e,r){var i=n(e,3),a=(i[0],i[1],i[2]),o=t.size-1;return t.getIn([o,"level"],-1)===a?t.updateIn([o,"to"],s.increase):t.push(new s.Run({level:a,from:r,to:r+1}))}),i.List.of()),bidiTypes:f.get("bidiTypes"),levels:f.get("embeddingLevels")}}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.pdf=e.pdi=e.other=e.fsi=e.lri=e.rli=e.lro=e.rlo=e.lre=e.rle=void 0;var i=r(17),a=n(r(18)),s=n(r(19)),o=n(r(20)),u=n(r(8)),h=n(r(9)),l=n(r(21)),f=n(r(23)),c=r(24),d=r(25);e.rle=i.rle,e.lre=a.default,e.rlo=s.default,e.lro=o.default,e.rli=u.default,e.lri=h.default,e.fsi=l.default,e.other=f.default,e.pdi=c.pdi,e.pdf=d.pdf},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rle=void 0;var n=r(0),i=r(3),a=function(t){return t&&t.__esModule?t:{default:t}}(r(4));e.rle=function(t,e,r,s){if(t!==n.RLE)return s;var o=s.get("directionalStatusStack").peek().get("level");return(0,a.default)((function(t){return t.setIn(["embeddingLevels","levels",r],o)}),(function(t){var e=o+1+o%2,r=e>n.MAX_DEPTH,a=t.get("overflowIsolateCount"),s=t.get("overflowEmbeddingCount");if(r||(a>0||s>0))return 0===a?t.update("overflowEmbeddingCount",i.increase):t;var u=new i.DirectionalStatusStackEntry({level:e});return t.update("directionalStatusStack",(function(t){return t.push(u)}))}))(s)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(r(4)),i=r(0),a=r(3);e.default=function(t,e,r,s){if(t!==i.LRE)return s;var o=s.get("directionalStatusStack").peek().get("level");return(0,n.default)((function(t){return t.setIn(["embeddingLevels","levels",r],o)}),(function(t){var e=o+1+(o+1)%2,r=e>i.MAX_DEPTH,n=t.get("overflowIsolateCount"),s=t.get("overflowEmbeddingCount");if(r||(n>0||s>0))return 0===n?t.update("overflowEmbeddingCount",a.increase):t;var u=new a.DirectionalStatusStackEntry({level:e});return t.update("directionalStatusStack",(function(t){return t.push(u)}))}))(s)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(3);e.default=function(t,e,r,a){if(t!==n.RLO)return a;var s=a.get("directionalStatusStack").peek().get("level"),o=a.get("overflowIsolateCount"),u=a.get("overflowEmbeddingCount"),h=s+1+s%2;return h>n.MAX_DEPTH||(o>0||u>0)?0===o?a.update("overflowEmbeddingCount",i.increase):a:a.update("directionalStatusStack",(function(t){return t.push(new i.DirectionalStatusStackEntry({level:h,override:"right-to-left"}))}))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(3);e.default=function(t,e,r,a){if(t!==n.LRO)return a;var s=a.get("directionalStatusStack").peek().get("level"),o=a.get("overflowIsolateCount"),u=a.get("overflowEmbeddingCount"),h=s+1+(s+1)%2;return h>n.MAX_DEPTH||(o>0||u>0)?0===o?a.update("overflowEmbeddingCount",i.increase):a:a.update("directionalStatusStack",(function(t){return t.push(new i.DirectionalStatusStackEntry({level:h,override:"left-to-right"}))}))}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(r(8)),a=n(r(9)),s=n(r(10)),o=n(r(11)),u=r(0);e.default=function(t,e,r,n,h,l){if(t!==u.FSI)return n;var f=(0,o.default)(h).initiatorToPDI.get(r,-1),c=r+1,d=f>-1?f:h.size,p=h.slice(c,d),v=l.slice(c,d);return 1===(0,s.default)(p,v)?(0,i.default)(u.RLI,e,r,n,h):(0,a.default)(u.LRI,e,r,n,h)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(r(2)),i=r(0),a=r(1);e.default=function(t,e){if(e>=t.size)return-1;if(!(0,n.default)([i.LRI,i.RLI,i.FSI],t.get(e)))return-1;var r=t.slice(e+1),s=(0,a.Record)({counter:1,index:-1},"BD9State");return r.reduce((function(t,r,a){if(t.get("index")>-1)return t;var o=function(){var e=t.get("counter");return(0,n.default)([i.LRI,i.RLI,i.FSI],r)?e+1:r===i.PDI?e-1:e}();return r===i.PDI&&0===o?new s({counter:o,index:e+(a+1)}):t.set("counter",o)}),new s).get("index")}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(r(4)),a=(n(r(2)),r(0));e.default=function(t,e,r,n){if((0,a.isNonFormatting)(e))return n;var s=n.get("directionalStatusStack").peek(),o=s.get("level");return(0,i.default)((function(t){return t.update("embeddingLevels",(function(t){return t.set(r,o)}))}),(function(t){var e=s.get("override");if("neutral"!==e){var n="left-to-right"===e?"L":"R";return t.update("bidiTypes",(function(t){return t.set(r,n)}))}return t}))(n)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pdi=void 0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(4)),i=r(0),a=r(3);e.pdi=function(t,e,r,s){if(t!==i.PDI)return s;var o=s.get("overflowIsolateCount"),u=s.get("validIsolateCount");return(0,n.default)((function(t){return o>0?t.update("overflowIsolateCount",a.decrease):0===u?t:t.set("overflowEmbeddingCount",0).update("directionalStatusStack",(function(t){return t.skipWhile((function(t){return!1===t.get("isolate")}))})).update("directionalStatusStack",(function(t){return t.pop()})).update("validIsolateCount",a.decrease)}),(function(t){var e=t.get("directionalStatusStack").peek().get("level");return t.update("embeddingLevels",(function(t){return t.set(r,e)}))}),(function(t){var e=t.get("directionalStatusStack").peek().get("override");if("neutral"!==e){var n="left-to-right"===e?"L":"R";return t.setIn(["bidiTypes",r],n)}return t}))(s)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pdf=void 0;var n=r(0),i=r(3),a=function(t){return t&&t.__esModule?t:{default:t}}(r(4));e.pdf=function(t,e,r,s){return t!==n.PDF?s:(0,a.default)((function(t){var e=t.get("directionalStatusStack").peek().get("level");return t.setIn(["embeddingLevels","levels",r],e)}),(function(t){var e=t.get("overflowIsolateCount"),r=t.get("overflowEmbeddingCount"),n=t.get("directionalStatusStack"),a=n.peek().get("isolate");return e>0?t:r>0?t.update("overflowEmbeddingCount",i.decrease):!1===a&&n.size>=2?t.set("directionalStatusStack",n.pop()):t}))(s)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){i=!0,a=t}finally{try{!n&&o.return&&o.return()}finally{if(i)throw a}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=r(1);e.default=function(t){var e=t.reduce((function(t,e){var r=n(e,3),i=r[0],a=r[1],s=r[2];return t.update(0,(function(t){return t.push(i)})).update(1,(function(t){return t.push(a)})).update(2,(function(t){return t.push(s)}))}),i.List.of(i.List.of(),i.List.of(),i.List.of()));return[e.get(0),e.get(1),e.get(2)]}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(3);e.default=function(t,e){var r=t.filter((function(t){return e>=t.get("from")&&e<t.get("to")}));return r.size>0?r.last():new n.Run}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1);e.default=function(t){return t.butLast().reduce((function(t,e){var r=e.toJS(),n=r.from,i=r.to-n,a=t.get(-1);return t.push(i+a)}),n.List.of(0))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t.zipWith((function(t,e){return"L"===t?e+e%2:"R"===t?e+(e+1)%2:"AN"===t||"EN"===t?e+1+(e+1)%2:void 0}),e)}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){i=!0,a=t}finally{try{!n&&o.return&&o.return()}finally{if(i)throw a}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=r(1),s=r(31),o=(n(r(7)),r(0),n(r(12))),u=n(r(39)),h=n(r(40)),l=n(r(42));e.default=function(t,e,r){return r.reduce((function(e,r){return function(t,e,r){var n=t.zip(e),f=(0,o.default)(r.get("runs").map((function(t){var e=t.toJS(),r=e.from,i=e.to;return n.slice(r,i)})).flatten()),c=i(f,2),d=c[0],p=c[1],v=[s.nsm,s.en,s.al,s.es,s.et,s.on,s.enToL,h.default,u.default,l.default].reduce((function(t,e){var n=r.get("runs").first().get("level");return e(t,d,r.get("sos"),r.get("eos"),n,p)}),p),_=r.get("runs").butLast().reduce((function(t,e){var r=e.toJS(),n=r.from,i=r.to-n,a=t.get(-1);return t.push(i+a)}),a.List.of(0)),g=r.get("runs").zip(_).map((function(t){var e=i(t,2),r=e[0],n=e[1],a=r.toJS(),s=a.from,o=a.to-s;return v.slice(n,n+o)}));return r.get("runs").zip(g).reduce((function(t,e){var r=i(e,2),n=r[0],a=r[1],s=n.toJS(),o=s.from,u=s.to;return t.slice(0,o).concat(a).concat(t.slice(u))}),e)}(t,e,r)}),e)}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.enToL=e.on=e.et=e.es=e.al=e.en=e.nsm=void 0;var i=n(r(32)),a=n(r(33)),s=n(r(34)),o=n(r(35)),u=n(r(36)),h=n(r(37)),l=n(r(38));e.nsm=i.default,e.en=a.default,e.al=s.default,e.es=o.default,e.et=u.default,e.on=h.default,e.enToL=l.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(0);e.default=function(t,e,r,a){return t.reduce((function(t,n,a){if("NSM"!==n)return t.push(n);if(a<=0)return t.push(r);var s=t.get(a-1),o=e.get(a-1);return(0,i.isIsolateInitiator)(s)||(0,i.isPDI)(o)?t.push("ON"):t.push(s)}),n.List.of())}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0);e.default=function(t,e,r,i,a){return t.map((function(e,i){return"EN"!==e?e:"AL"===t.slice(0,i).reverse().push(r).find((function(t){return(0,n.isStrong)(t)}))?"AN":e}))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t.map((function(t){return"AL"===t?"R":t}))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(r(2));e.default=function(t){if(t.size<3)return t;var e=function(t){return(0,n.default)(["AN","EN"],t)},r=t.take(1),i=t.skip(2).zipWith((function(t,r,n){return"EN"===t&&t===n&&"ES"===r?"EN":"CS"===r&&e(t)&&t===n?t:r}),t.skip(1),t),a=t.last();return r.concat(i).push(a)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0);e.default=function(t){return t.map((function(e,r){if("ET"!==e)return e;var i=t.slice(0,r).reverse(),a=t.slice(r),s="EN"===i.skipWhile(n.isET).first(),o="EN"===a.skipWhile(n.isET).first();return s||o?"EN":e}))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(r(2));e.default=function(t,e){return t.map((function(t,e){return(0,n.default)(["ET","ES","CS","B","S"],t)?"ON":t}))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0);e.default=function(t,e,r,i,a){return t.map((function(e,i){return"EN"!==e?e:"L"===t.slice(0,i).reverse().push(r).find((function(t){return(0,n.isStrong)(t)}))?"L":e}))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0);e.default=function(t,e,r,i,a){return t.map((function(e,a){if(!(0,n.isNI)(e))return e;var s=t.slice(0,a).reverse().push(r),o=t.slice(a).push(i),u=s.skipWhile(n.isNI).first(),h=o.skipWhile(n.isNI).first();return"L"===u&&"L"===h?"L":(0,n.isR)(u)&&(0,n.isR)(h)?"R":e}))}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),n(r(6));var i=n(r(41)),a=n(r(4)),s=n(r(2));e.default=function(t,e,r,n,o,u){var h=(0,i.default)(e);return(0,a.default)((function(){return h.reduce((function(t,e){var n=e.get("open"),i=e.get("close");if(t.get(n)!==t.get(i))return t;var a=t.slice(n,i+1).map((function(t){return(0,s.default)(["EN","AN"],t)?"R":t})),u=o%2==0?"L":"R",h=o%2==0?"R":"L",l=a.find((function(t){return t===u})),f=a.find((function(t){return t===h}));return l?t.set(n,u).set(i,u):f?t.slice(0,n).map((function(t){return(0,s.default)(["EN","AN"],t)?"R":t})).reverse().push(r).find((function(t){return(0,s.default)(["L","R"],t)}))===h?t.set(n,h).set(i,h):t.set(n,u).set(i,u):t}),t)}),(function(t){return h.reduce((function(t,e){var r=e.get("open"),n=e.get("close"),i=(0,s.default)(["L","R"],t.get(r)),o=(0,s.default)(["L","R"],t.get(n));return(0,a.default)((function(t){return"NSM"===u.get(r+1)&&i?t.set(r+1,t.get(r)):t}),(function(t){return"NSM"===u.get(n+1)&&o?t.set(n+1,t.get(n)):t}))(t)}),t)}))()}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(r(6)),a=(n(r(2)),r(3)),s=r(0);e.default=function(t,e){var r=new a.BracketPairState;return t.reduce((function(t,e,r){if(!0===t.get("stackoverflow"))return t;var n=t.get("stack");if((0,s.isOpeningBracket)(e,"ON"))return 63==n.size?t.set("stackoverflow",!0):t.set("stack",n.push(new a.BracketPairStackEntry({point:(0,s.oppositeBracket)(e),position:r})));if((0,s.isClosingBracket)(e,"ON")&&n.size>0){var o=n.findKey((function(t){return t.get("point")===e}));if((0,i.default)(o))return t;var u=n.getIn([o,"position"]);return t.set("stack",n.slice(o+1)).update("pairings",(function(t){return t.push(new a.Pairing({open:u,close:r}))}))}return t}),r).get("pairings").sort((function(t,e){return t.get("open")-e.get("open")}))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0);e.default=function(t,e,r,i,a){var s=a%2==0?"L":"R";return t.map((function(t,e){return(0,n.isNI)(t)?s:t}))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){i=!0,a=t}finally{try{!n&&o.return&&o.return()}finally{if(i)throw a}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(t){return t&&t.__esModule?t:{default:t}}(r(2)),a=function(t){return(0,i.default)(["WS","FSI","LRI","RLI","PDI"],t)};e.default=function(t,e,r){return t.zip(e).map((function(e,s){var o=n(e,2),u=o[0],h=o[1];if((0,i.default)(["S","B"],u))return r;if(!a(u))return h;var l=t.slice(s).push("<EOL>").skipWhile(a).first();return(0,i.default)(["<EOL>","S","B"],l)?r:h}))}},function(t,e,r){"use strict";function n(t,e){var r=i(e,0).groupBy((function(t){return t.get("level")})),o=r.keySeq().max();if(!(0,s.default)(o)||o<0)return t;if(0===o)return t;var h=r.get(o);return n(h.reduce((function(t,e){var r=e.toJS(),n=r.from,i=r.to,a=t.slice(n,i).reverse();return u(t,n,i,a)}),t),h.reduce((function(t,e){var r=e.toJS(),n=r.from,i=r.to,s=(0,a.List)((0,a.Range)(0,i-n)).map((function(t){return o-1}));return u(t,n,i,s)}),e))}function i(t,e){var r=t.size;if(0===r)return a.List.of();var n=t.first(),s=t.findKey((function(t){return t!=n})),u=void 0===s?r:s,h=new o({level:n,from:e,to:e+u});return a.List.of(h).concat(i(t.slice(u),e+u))}Object.defineProperty(e,"__esModule",{value:!0}),e.reorderPermutation=void 0;var a=r(1),s=function(t){return t&&t.__esModule?t:{default:t}}(r(45)),o=(0,a.Record)({level:-1,from:0,to:0},"ReorderPair"),u=function(t,e,r,n){var i=t.slice(0,e),a=t.slice(r);return i.concat(n).concat(a)};e.reorderPermutation=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",r=n((0,a.List)((0,a.Range)(0,t.size)).map((function(e){return(0,a.Map)({strip:"x"===t.get(e),index:e})})).filter((function(t){return!1===t.get("strip")})).map((function(t){return t.get("index")})),t.filter((function(t){return t!=e}))),i=new((0,a.Record)({remaining:(0,a.List)(),result:(0,a.List)()},"Reduction"))({remaining:r,result:(0,a.List)()});return(0,a.List)((0,a.Range)(0,t.size)).reduce((function(e,r){if("x"==t.get(r)){var n=e.get("result").size;return e.setIn(["result",r],n)}var i=e.get("remaining");return e.setIn(["result",r],i.first()).set("remaining",i.shift())}),i).get("result")},e.default=n},function(t,e){var r=Object.prototype.toString;t.exports=function(t){return"number"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Number]"==r.call(t)}},function(t,e,r){(function(e){!function(e){t.exports=e()}((function(){return function t(e,r,n){function i(s,o){if(!r[s]){if(!e[s]){if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var h=r[s]={exports:{}};e[s][0].call(h.exports,(function(t){return i(e[s][1][t]||t)}),h,h.exports,t,e,r,n)}return r[s].exports}for(var a=!1,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,r,n){(function(t){!function(e){function i(t){throw new RangeError(M[t])}function a(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function s(t,e){var r=t.split("@"),n="";return r.length>1&&(n=r[0]+"@",t=r[1]),n+a((t=t.replace(P,".")).split("."),e).join(".")}function o(t){for(var e,r,n=[],i=0,a=t.length;i<a;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<a?56320==(64512&(r=t.charCodeAt(i++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--):n.push(e);return n}function u(t){return a(t,(function(t){var e="";return t>65535&&(e+=U((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+U(t)})).join("")}function h(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:b}function l(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function f(t,e,r){var n=0;for(t=r?k(t/D):t>>1,t+=k(t/e);t>I*E>>1;n+=b)t=k(t/I);return k(n+(I+1)*t/(t+C))}function c(t){var e,r,n,a,s,o,l,c,d,p,v=[],_=t.length,g=0,m=T,C=S;for((r=t.lastIndexOf(x))<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&i("not-basic"),v.push(t.charCodeAt(n));for(a=r>0?r+1:0;a<_;){for(s=g,o=1,l=b;a>=_&&i("invalid-input"),((c=h(t.charCodeAt(a++)))>=b||c>k((y-g)/o))&&i("overflow"),g+=c*o,!(c<(d=l<=C?w:l>=C+E?E:l-C));l+=b)o>k(y/(p=b-d))&&i("overflow"),o*=p;C=f(g-s,e=v.length+1,0==s),k(g/e)>y-m&&i("overflow"),m+=k(g/e),g%=e,v.splice(g++,0,m)}return u(v)}function d(t){var e,r,n,a,s,u,h,c,d,p,v,_,g,m,C,D=[];for(_=(t=o(t)).length,e=T,r=0,s=S,u=0;u<_;++u)(v=t[u])<128&&D.push(U(v));for(n=a=D.length,a&&D.push(x);n<_;){for(h=y,u=0;u<_;++u)(v=t[u])>=e&&v<h&&(h=v);for(h-e>k((y-r)/(g=n+1))&&i("overflow"),r+=(h-e)*g,e=h,u=0;u<_;++u)if((v=t[u])<e&&++r>y&&i("overflow"),v==e){for(c=r,d=b;!(c<(p=d<=s?w:d>=s+E?E:d-s));d+=b)C=c-p,m=b-p,D.push(U(l(p+C%m,0))),c=k(C/m);D.push(U(l(c,0))),s=f(r,g,n==a),r=0,++n}++r,++e}return D.join("")}var p="object"==typeof n&&n&&!n.nodeType&&n,v="object"==typeof r&&r&&!r.nodeType&&r,_="object"==typeof t&&t;_.global!==_&&_.window!==_&&_.self!==_||(e=_);var g,m,y=2147483647,b=36,w=1,E=26,C=38,D=700,S=72,T=128,x="-",F=/^xn--/,A=/[^\x20-\x7E]/,P=/[\x2E\u3002\uFF0E\uFF61]/g,M={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=b-w,k=Math.floor,U=String.fromCharCode;if(g={version:"1.4.1",ucs2:{decode:o,encode:u},decode:c,encode:d,toASCII:function(t){return s(t,(function(t){return A.test(t)?"xn--"+d(t):t}))},toUnicode:function(t){return s(t,(function(t){return F.test(t)?c(t.slice(4).toLowerCase()):t}))}},p&&v)if(r.exports==p)v.exports=g;else for(m in g)g.hasOwnProperty(m)&&(p[m]=g[m]);else e.punycode=g}(this)}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,r){e.exports=/[\u0608\u060B\u060D\u061B\u061C\u061E-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u08A0-\u08B4\u08B6-\u08BD\uFB50-\uFBC1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]/},{}],3:[function(t,e,r){e.exports=/[\u0600-\u0605\u0660-\u0669\u066B\u066C\u06DD\u08E2]|\uD803[\uDE60-\uDE7E]/},{}],4:[function(t,e,r){e.exports=/[\0-\x08\x0E-\x1B\x7F-\x84\x86-\x9F\xAD\u180E\u200B-\u200D\u2060-\u2064\u206A-\u206F\uFEFF]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/},{}],5:[function(t,e,r){e.exports=/[,\./:\xA0\u060C\u202F\u2044\uFE50\uFE52\uFE55\uFF0C\uFF0E\uFF0F\uFF1A]/},{}],6:[function(t,e,r){e.exports=/[0-9\xB2\xB3\xB9\u06F0-\u06F9\u2070\u2074-\u2079\u2080-\u2089\u2488-\u249B\uFF10-\uFF19]|\uD800[\uDEE1-\uDEFB]|\uD835[\uDFCE-\uDFFF]|\uD83C[\uDD00-\uDD0A]/},{}],7:[function(t,e,r){e.exports=/[\+\-\u207A\u207B\u208A\u208B\u2212\uFB29\uFE62\uFE63\uFF0B\uFF0D]/},{}],8:[function(t,e,r){e.exports=/[#-%\xA2-\xA5\xB0\xB1\u058F\u0609\u060A\u066A\u09F2\u09F3\u09FB\u0AF1\u0BF9\u0E3F\u17DB\u2030-\u2034\u20A0-\u20BE\u212E\u2213\uA838\uA839\uFE5F\uFE69\uFE6A\uFF03-\uFF05\uFFE0\uFFE1\uFFE5\uFFE6]/},{}],9:[function(t,e,r){e.exports=/\u2068/},{}],10:[function(t,e,r){e.exports=/[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u02BB-\u02C1\u02D0\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0482\u048A-\u052F\u0531-\u0556\u0559-\u055F\u0561-\u0587\u0589\u0903-\u0939\u093B\u093D-\u0940\u0949-\u094C\u094E-\u0950\u0958-\u0961\u0964-\u0980\u0982\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C0\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09FA\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC0\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0\u0AE1\u0AE6-\u0AF0\u0AF9\u0B02\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C7F\u0C80\u0C82\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA\u0CCB\u0CD5\u0CD6\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D02\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D4F\u0D54-\u0D61\u0D66-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E4F-\u0E5B\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3E-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u1000-\u102C\u1031\u1038\u103B\u103C\u103F-\u1057\u105A-\u105D\u1061-\u1070\u1075-\u1081\u1083\u1084\u1087-\u108C\u108E-\u109C\u109E-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u167F\u1681-\u169A\u16A0-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1735\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5\u17C7\u17C8\u17D4-\u17DA\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A19\u1A1A\u1A1E-\u1A55\u1A57\u1A61\u1A63\u1A64\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1B04-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B4B\u1B50-\u1B6A\u1B74-\u1B7C\u1B82-\u1BA1\u1BA6\u1BA7\u1BAA\u1BAE-\u1BE5\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1BFC-\u1C2B\u1C34\u1C35\u1C3B-\u1C49\u1C4D-\u1C88\u1CC0-\u1CC7\u1CD3\u1CE1\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2188\u2336-\u237A\u2395\u249C-\u24E9\u26AC\u2800-\u28FF\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u302E\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31F0-\u321C\u3220-\u324F\u3260-\u327B\u327F-\u32B0\u32C0-\u32CB\u32D0-\u32FE\u3300-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA60C\uA610-\uA62B\uA640-\uA66E\uA680-\uA69D\uA6A0-\uA6EF\uA6F2-\uA6F7\uA722-\uA787\uA789-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA824\uA827\uA830-\uA837\uA840-\uA873\uA880-\uA8C3\uA8CE-\uA8D9\uA8F2-\uA8FD\uA900-\uA925\uA92E-\uA946\uA952\uA953\uA95F-\uA97C\uA983-\uA9B2\uA9B4\uA9B5\uA9BA\uA9BB\uA9BD-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA2F\uAA30\uAA33\uAA34\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA7B\uAA7D-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAAEB\uAAEE-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB65\uAB70-\uABE4\uABE6\uABE7\uABE9-\uABEC\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uE000-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD00\uDD02\uDD07-\uDD33\uDD37-\uDD3F\uDD8D\uDD8E\uDDD0-\uDDFC\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF23\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDF9F-\uDFC3\uDFC8-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD6F\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD804[\uDC00\uDC02-\uDC37\uDC47-\uDC4D\uDC66-\uDC6F\uDC82-\uDCB2\uDCB7\uDCB8\uDCBB-\uDCC1\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD2C\uDD36-\uDD43\uDD50-\uDD72\uDD74-\uDD76\uDD82-\uDDB5\uDDBF-\uDDC9\uDDCD\uDDD0-\uDDDF\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2E\uDE32\uDE33\uDE35\uDE38-\uDE3D\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA9\uDEB0-\uDEDE\uDEE0-\uDEE2\uDEF0-\uDEF9\uDF02\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D-\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63]|\uD805[\uDC00-\uDC37\uDC40\uDC41\uDC45\uDC47-\uDC59\uDC5B\uDC5D\uDC80-\uDCB2\uDCB9\uDCBB-\uDCBE\uDCC1\uDCC4-\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB1\uDDB8-\uDDBB\uDDBE\uDDC1-\uDDDB\uDE00-\uDE32\uDE3B\uDE3C\uDE3E\uDE41-\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEAC\uDEAE\uDEAF\uDEB6\uDEC0-\uDEC9\uDF00-\uDF19\uDF20\uDF21\uDF26\uDF30-\uDF3F]|\uD806[\uDCA0-\uDCF2\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2F\uDC3E-\uDC45\uDC50-\uDC6C\uDC70-\uDC8F\uDCA9\uDCB1\uDCB4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC70-\uDC74\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uDB80-\uDBBE\uDBC0-\uDBFE][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE6E\uDE6F\uDED0-\uDEED\uDEF5\uDF00-\uDF2F\uDF37-\uDF45\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9C\uDC9F]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD66\uDD6A-\uDD72\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDE8\uDF60-\uDF71]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEDA\uDEDC-\uDF14\uDF16-\uDF4E\uDF50-\uDF88\uDF8A-\uDFC2\uDFC4-\uDFCB]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE8B]|\uD83C[\uDD10-\uDD2E\uDD30-\uDD69\uDD70-\uDDAC\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|[\uDBBF\uDBFF][\uDC00-\uDFFD]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/},{}],11:[function(t,e,r){e.exports=/\u202A/},{}],12:[function(t,e,r){e.exports=/\u2066/},{}],13:[function(t,e,r){e.exports=/\u202D/},{}],14:[function(t,e,r){e.exports=/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D4-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D01\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF5\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA8C4\uA8C5\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD804[\uDC01\uDC38-\uDC46\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDCA-\uDDCC\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3C\uDF40\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDCB3-\uDCB8\uDCBA\uDCBF\uDCC0\uDCC2\uDCC3\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF8F-\uDF92]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD67-\uDD69\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF]/},{}],15:[function(t,e,r){e.exports=/[!"&-\*;-@\[-`\{-~\xA1\xA6-\xA9\xAB\xAC\xAE\xAF\xB4\xB6-\xB8\xBB-\xBF\xD7\xF7\u02B9\u02BA\u02C2-\u02CF\u02D2-\u02DF\u02E5-\u02ED\u02EF-\u02FF\u0374\u0375\u037E\u0384\u0385\u0387\u03F6\u058A\u058D\u058E\u0606\u0607\u060E\u060F\u06DE\u06E9\u07F6-\u07F9\u0BF3-\u0BF8\u0BFA\u0C78-\u0C7E\u0F3A-\u0F3D\u1390-\u1399\u1400\u169B\u169C\u17F0-\u17F9\u1800-\u180A\u1940\u1944\u1945\u19DE-\u19FF\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2010-\u2027\u2035-\u2043\u2045-\u205E\u207C-\u207E\u208C-\u208E\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u213A\u213B\u2140-\u2144\u214A-\u214D\u2150-\u215F\u2189-\u218B\u2190-\u2211\u2214-\u2335\u237B-\u2394\u2396-\u23FE\u2400-\u2426\u2440-\u244A\u2460-\u2487\u24EA-\u26AB\u26AD-\u27FF\u2900-\u2B73\u2B76-\u2B95\u2B98-\u2BB9\u2BBD-\u2BC8\u2BCA-\u2BD1\u2BEC-\u2BEF\u2CE5-\u2CEA\u2CF9-\u2CFF\u2E00-\u2E44\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u303F\u309B\u309C\u30A0\u30FB\u31C0-\u31E3\u321D\u321E\u3250-\u325F\u327C-\u327E\u32B1-\u32BF\u32CC-\u32CF\u3377-\u337A\u33DE\u33DF\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA60D-\uA60F\uA673\uA67E\uA67F\uA700-\uA721\uA788\uA828-\uA82B\uA874-\uA877\uFD3E\uFD3F\uFDFD\uFE10-\uFE19\uFE30-\uFE4F\uFE51\uFE54\uFE56-\uFE5E\uFE60\uFE61\uFE64-\uFE66\uFE68\uFE6B\uFF01\uFF02\uFF06-\uFF0A\uFF1B-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE2-\uFFE4\uFFE8-\uFFEE\uFFF9-\uFFFD]|\uD800[\uDD01\uDD40-\uDD8C\uDD90-\uDD9B\uDDA0]|\uD802[\uDD1F\uDF39-\uDF3F]|\uD804[\uDC52-\uDC65]|\uD805[\uDE60-\uDE6C]|\uD834[\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEDB\uDF15\uDF4F\uDF89\uDFC3]|\uD83B[\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0B\uDD0C\uDD6A\uDD6B\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED2\uDEE0-\uDEEC\uDEF0-\uDEF6\uDF00-\uDF73\uDF80-\uDFD4]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDD10-\uDD1E\uDD20-\uDD27\uDD30\uDD33-\uDD3E\uDD40-\uDD4B\uDD50-\uDD5E\uDD80-\uDD91\uDDC0]/},{}],16:[function(t,e,r){e.exports=/[\n\r\x1C-\x1E\x85\u2029]/},{}],17:[function(t,e,r){e.exports=/\u202C/},{}],18:[function(t,e,r){e.exports=/\u2069/},{}],19:[function(t,e,r){e.exports=/[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05F0-\u05F4\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFB4F]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC57-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD3F\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE40-\uDE47\uDE50-\uDE58\uDE60-\uDE9F\uDEC0-\uDEE4\uDEEB-\uDEF6\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDF99-\uDF9C\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDCFF]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD50-\uDD59\uDD5E\uDD5F]/},{}],20:[function(t,e,r){e.exports=/\u202B/},{}],21:[function(t,e,r){e.exports=/\u2067/},{}],22:[function(t,e,r){e.exports=/\u202E/},{}],23:[function(t,e,r){e.exports=/[\t\x0B\x1F]/},{}],24:[function(t,e,r){e.exports=/[\f \u1680\u2000-\u200A\u2028\u205F\u3000]/},{}],25:[function(t,e,r){"use strict";var n=t("unicode-9.0.0/Bidi_Class/Arabic_Letter/regex"),i=t("unicode-9.0.0/Bidi_Class/Arabic_Number/regex"),a=t("unicode-9.0.0/Bidi_Class/Boundary_Neutral/regex"),s=t("unicode-9.0.0/Bidi_Class/Common_Separator/regex"),o=t("unicode-9.0.0/Bidi_Class/European_Number/regex"),u=t("unicode-9.0.0/Bidi_Class/European_Separator/regex"),h=t("unicode-9.0.0/Bidi_Class/European_Terminator/regex"),l=t("unicode-9.0.0/Bidi_Class/First_Strong_Isolate/regex"),f=t("unicode-9.0.0/Bidi_Class/Left_To_Right/regex"),c=t("unicode-9.0.0/Bidi_Class/Left_To_Right_Embedding/regex"),d=t("unicode-9.0.0/Bidi_Class/Left_To_Right_Isolate/regex"),p=t("unicode-9.0.0/Bidi_Class/Left_To_Right_Override/regex"),v=t("unicode-9.0.0/Bidi_Class/Nonspacing_Mark/regex"),_=t("unicode-9.0.0/Bidi_Class/Other_Neutral/regex"),g=t("unicode-9.0.0/Bidi_Class/Paragraph_Separator/regex"),m=t("unicode-9.0.0/Bidi_Class/Pop_Directional_Format/regex"),y=t("unicode-9.0.0/Bidi_Class/Pop_Directional_Isolate/regex"),b=t("unicode-9.0.0/Bidi_Class/Right_To_Left/regex"),w=t("unicode-9.0.0/Bidi_Class/Right_To_Left_Embedding/regex"),E=t("unicode-9.0.0/Bidi_Class/Right_To_Left_Isolate/regex"),C=t("unicode-9.0.0/Bidi_Class/Right_To_Left_Override/regex"),D=t("unicode-9.0.0/Bidi_Class/Segment_Separator/regex"),S=t("unicode-9.0.0/Bidi_Class/White_Space/regex"),T=t("punycode"),x={AL:n,AN:i,BN:a,CS:s,EN:o,ES:u,ET:h,FSI:l,L:f,LRE:c,LRI:d,LRO:p,NSM:v,ON:_,B:g,PDF:m,PDI:y,R:b,RLE:w,RLI:E,RLO:C,S:D,WS:S};e.exports=function(t){var e,r=T.ucs2.encode([t]);for(e in x)if(!0===x[e].test(r))return e}},{punycode:1,"unicode-9.0.0/Bidi_Class/Arabic_Letter/regex":2,"unicode-9.0.0/Bidi_Class/Arabic_Number/regex":3,"unicode-9.0.0/Bidi_Class/Boundary_Neutral/regex":4,"unicode-9.0.0/Bidi_Class/Common_Separator/regex":5,"unicode-9.0.0/Bidi_Class/European_Number/regex":6,"unicode-9.0.0/Bidi_Class/European_Separator/regex":7,"unicode-9.0.0/Bidi_Class/European_Terminator/regex":8,"unicode-9.0.0/Bidi_Class/First_Strong_Isolate/regex":9,"unicode-9.0.0/Bidi_Class/Left_To_Right/regex":10,"unicode-9.0.0/Bidi_Class/Left_To_Right_Embedding/regex":11,"unicode-9.0.0/Bidi_Class/Left_To_Right_Isolate/regex":12,"unicode-9.0.0/Bidi_Class/Left_To_Right_Override/regex":13,"unicode-9.0.0/Bidi_Class/Nonspacing_Mark/regex":14,"unicode-9.0.0/Bidi_Class/Other_Neutral/regex":15,"unicode-9.0.0/Bidi_Class/Paragraph_Separator/regex":16,"unicode-9.0.0/Bidi_Class/Pop_Directional_Format/regex":17,"unicode-9.0.0/Bidi_Class/Pop_Directional_Isolate/regex":18,"unicode-9.0.0/Bidi_Class/Right_To_Left/regex":19,"unicode-9.0.0/Bidi_Class/Right_To_Left_Embedding/regex":20,"unicode-9.0.0/Bidi_Class/Right_To_Left_Isolate/regex":21,"unicode-9.0.0/Bidi_Class/Right_To_Left_Override/regex":22,"unicode-9.0.0/Bidi_Class/Segment_Separator/regex":23,"unicode-9.0.0/Bidi_Class/White_Space/regex":24}]},{},[25])(25)}))}).call(e,r(5))},function(t,e,r){(function(t,n){var i;!function(n){function a(t){throw new RangeError(F[t])}function s(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function o(t,e){var r=t.split("@"),n="";return r.length>1&&(n=r[0]+"@",t=r[1]),n+s((t=t.replace(x,".")).split("."),e).join(".")}function u(t){for(var e,r,n=[],i=0,a=t.length;i<a;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<a?56320==(64512&(r=t.charCodeAt(i++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--):n.push(e);return n}function h(t){return s(t,(function(t){var e="";return t>65535&&(e+=M((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+M(t)})).join("")}function l(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:g}function f(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function c(t,e,r){var n=0;for(t=r?P(t/w):t>>1,t+=P(t/e);t>A*y>>1;n+=g)t=P(t/A);return P(n+(A+1)*t/(t+b))}function d(t){var e,r,n,i,s,o,u,f,d,p,v=[],b=t.length,w=0,S=C,T=E;for((r=t.lastIndexOf(D))<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&a("not-basic"),v.push(t.charCodeAt(n));for(i=r>0?r+1:0;i<b;){for(s=w,o=1,u=g;i>=b&&a("invalid-input"),((f=l(t.charCodeAt(i++)))>=g||f>P((_-w)/o))&&a("overflow"),w+=f*o,!(f<(d=u<=T?m:u>=T+y?y:u-T));u+=g)o>P(_/(p=g-d))&&a("overflow"),o*=p;T=c(w-s,e=v.length+1,0==s),P(w/e)>_-S&&a("overflow"),S+=P(w/e),w%=e,v.splice(w++,0,S)}return h(v)}function p(t){var e,r,n,i,s,o,h,l,d,p,v,b,w,S,T,x=[];for(b=(t=u(t)).length,e=C,r=0,s=E,o=0;o<b;++o)(v=t[o])<128&&x.push(M(v));for(n=i=x.length,i&&x.push(D);n<b;){for(h=_,o=0;o<b;++o)(v=t[o])>=e&&v<h&&(h=v);for(h-e>P((_-r)/(w=n+1))&&a("overflow"),r+=(h-e)*w,e=h,o=0;o<b;++o)if((v=t[o])<e&&++r>_&&a("overflow"),v==e){for(l=r,d=g;!(l<(p=d<=s?m:d>=s+y?y:d-s));d+=g)T=l-p,S=g-p,x.push(M(f(p+T%S,0))),l=P(T/S);x.push(M(f(l,0))),s=c(r,w,n==i),r=0,++n}++r,++e}return x.join("")}"object"==typeof e&&e&&e.nodeType,"object"==typeof t&&t&&t.nodeType;var v,_=2147483647,g=36,m=1,y=26,b=38,w=700,E=72,C=128,D="-",S=/^xn--/,T=/[^\x20-\x7E]/,x=/[\x2E\u3002\uFF0E\uFF61]/g,F={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},A=g-m,P=Math.floor,M=String.fromCharCode;v={version:"1.4.1",ucs2:{decode:u,encode:h},decode:d,encode:p,toASCII:function(t){return o(t,(function(t){return T.test(t)?"xn--"+p(t):t}))},toUnicode:function(t){return o(t,(function(t){return S.test(t)?d(t.slice(4).toLowerCase()):t}))}},void 0!==(i=function(){return v}.call(e,r,e,t))&&(t.exports=i)}()}).call(e,r(48)(t),r(5))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}}])})),void 0===NETXUS)var NETXUS=function(){};function UnionFind(t){this.roots=new Array(t),this.ranks=new Array(t);for(var e=0;e<t;++e)this.roots[e]=e,this.ranks[e]=0}NETXUS.RectanglePacker=function(t,e){this.root={},this.reset(t,e)},NETXUS.RectanglePacker.prototype.reset=function(t,e){this.root.x=0,this.root.y=0,this.root.w=t,this.root.h=e,delete this.root.lft,delete this.root.rgt,this.usedWidth=0,this.usedHeight=0},NETXUS.RectanglePacker.prototype.getDimensions=function(){return{w:this.usedWidth,h:this.usedHeight}},NETXUS.RectanglePacker.prototype.findCoords=function(t,e){var r=function t(e,r,n){function i(t){return{x:t.x,y:t.y,w:t.w,h:t.h}}if(e.lft){var a=t(e.lft,r,n);return a||t(e.rgt,r,n)}return e.used||r>e.w||n>e.h?null:r==e.w&&n==e.h?(e.used=!0,{x:e.x,y:e.y}):(e.lft=i(e),e.rgt=i(e),e.w-r>e.h-n?(e.lft.w=r,e.rgt.x=e.x+r,e.rgt.w=e.w-r):(e.lft.h=n,e.rgt.y=e.y+n,e.rgt.h=e.h-n),t(e.lft,r,n))}(this.root,t,e);return r&&(this.usedWidth<r.x+t&&(this.usedWidth=r.x+t),this.usedHeight<r.y+e&&(this.usedHeight=r.y+e)),r},UnionFind.prototype.find=function(t){for(var e=t,r=this.roots;r[t]!=t;)t=r[t];for(;r[e]!=t;){var n=r[e];r[e]=t,e=n}return t},UnionFind.prototype.link=function(t,e){var r=this.find(t),n=this.find(e);if(r!=n){var i=this.ranks,a=this.roots,s=i[r],o=i[n];s<o?a[r]=n:o<s?a[n]=r:(a[n]=r,++i[r])}};